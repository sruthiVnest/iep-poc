"use strict";(self.webpackChunkhost=self.webpackChunkhost||[]).push([[596],{2596:(rD,Fh,T)=>{T.r(Fh),T.d(Fh,{remoteRoutes:()=>sD});var ca={};T.r(ca),T.d(ca,{easeOutElastic:()=>Pb,linear:()=>Mb,swing:()=>Tb});var Be={};T.r(Be),T.d(Be,{l5:()=>Nb,jl:()=>Te.A,YJ:()=>et.A,wA:()=>M.w,ui:()=>Bi.A,EY:()=>jd.A,t7:()=>hn.t7,AU:()=>hn.AU,bT:()=>hn.bT,ls:()=>hn.ls,rO:()=>hn.rO});var r=T(4438),li=T(8406),X=T(177),xt=T(4256),ci=T(9120),vt=T(5580);const hi="arc",Nh="ArrowUp",zh="ArrowDown",jh="ArrowLeft",Uh="ArrowRight",ls="aria-activedescendant",pt="#000",Y="bottom",V="center",jt="circle",ha="cross",Fe="date",Gh="12px sans-serif",q=10,qs="end",Xh=/\{\d+:?/,pa="height",ua="inside",Wh="inherit",N="left",gt=Number.MAX_VALUE,wt=-Number.MAX_VALUE,ga="none",tn="object",go="outside",$="right",$h="roundedRect",fo="start",fa="string",U="top",Qt="value",W="#fff",ma="width",E="x",D="y",xa="pointer",va="horizontal";function Pt(o){return Array.isArray(o)}function ut(o,e){const t=Pt(e)?e:[e];for(let i=0;i<t.length;i++){const s=t[i];-1===o.className.indexOf(s)&&(o.className+=" "+s)}}const Rv=/\s+/g;function mo(o,e){o&&o.className&&(o.className=o.className.replace(e,"").replace(Rv," "))}var ba=T(178);function Zt(o){let e=.5;o.options.stroke&&ba.A(o.options.stroke.width)&&o.options.stroke.width%2==0&&(e=0);for(let t=0;t<o.segments.length;t++)o.segments[t].anchor().round(0).translate(e,e);return o}function Zh(o,e){return-o.x*e.y+o.y*e.x<0}function H(o){return"number"==typeof o&&!isNaN(o)}function Ut(o){return typeof o===fa}function Kh(o){return H(o)||Ut(o)&&isFinite(o)}function Jh(o,e){return(o+1)%e}function qh(o,e){let t=o-1;return t<0?e-1:t}function xo(o,e){return 1===e||o%e==0?0:o<0?e+o%e:o>=e?o%e:o}function at(o){return"function"==typeof o}const td="object",Lv="undefined";function ed(o,e){for(let t in e){if("__proto__"===t||"constructor"===t)continue;let n,i=e[t],s=typeof i;if(n=s===td&&null!==i?i.constructor:null,n&&n!==Array)if(i instanceof Date)o[t]=new Date(i.getTime());else if(at(i.clone))o[t]=i.clone();else{let a=o[t];o[t]=typeof a===td&&a||{},ed(o[t],i)}else s!==Lv&&(o[t]=i)}return o}function x(o){const e=arguments.length;for(let t=1;t<e;t++)ed(o,arguments[t]);return o}function re(o){return"object"==typeof o}function cs(o){return H(o)?o+"px":o}const Vv=/width|height|top|left|bottom|right/i;function Bv(o){return Vv.test(o)}function ht(o,e){const t=Ut(e)?[e]:e;if(Pt(t)){const i={},s=window.getComputedStyle(o);for(let n=0;n<t.length;n++){let a=t[n];i[a]=Bv(a)?parseFloat(s[a]):s[a]}return i}if(re(e))for(let i in e)o.style[i]=cs(e[i])}function Z(o,e=0){const t={top:0,right:0,bottom:0,left:0};return"number"==typeof o?t[U]=t[$]=t[Y]=t[N]=o:(t[U]=o[U]||e,t[$]=o[$]||e,t[Y]=o[Y]||e,t[N]=o[N]||e),t}let id={compile:function(o){return o}};const vo=class Fv{static register(e){id=e}static compile(e,t){return id.compile(e,t)}};function kt(o={}){let e;return o.template?o.template=e=vo.compile(o.template):at(o.content)&&(e=o.content),e}function sd(o={}){let e;return o.ariaTemplate?o.ariaTemplate=e=vo.compile(o.ariaTemplate):at(o.ariaContent)&&(e=o.ariaContent),e}const Nv=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g,en={};function Ne(o){if(en[o])return en[o];const e=[];return o.replace(Nv,function(t,i,s,n){e.push(void 0!==i?i:s||n)}),en[o]=function(t){let i=t;for(let s=0;s<e.length&&i;s++)i=i[e[s]];return i},en[o]}en.undefined=function(o){return o};const Kt=(o,e)=>o.filter(e);function sn(o,e){if(o.className){const t=e.split(" ");for(let i=0;i<t.length;i++)if(o.className.indexOf&&-1!==o.className.indexOf(t[i]))return!0}}class zv{constructor(){this._map=new Map}get(e){return this._map.get(e)}set(e,t){this._map.set(e,t)}}function z(o,e){if(e)return e.includes(o)}var jv=T(507);function ae(o,e,t){return jv.A(o+(e-o)*t,3)}const nd="trigger",_a=class Uv{constructor(e,t){this.observer=e,this.handlerMap=x({},this.handlerMap,t)}trigger(e,t){const{observer:i,handlerMap:s}=this;let n;return s[e]?n=this.callObserver(s[e],t):i[nd]&&(n=this.callObserver(nd,e,t)),n}callObserver(e,...t){return this.observer[e].apply(this.observer,t)}requiresHandlers(e){if(this.observer.requiresHandlers)return this.observer.requiresHandlers(e);for(let t=0;t<e.length;t++)if(this.handlerMap[e[t]])return!0}};function od(o,e){const t=o.length,i=[];for(let s=0;s<t;s++){let n=e(o[s]);ba.A(n)&&i.push(n)}return i}var rd=T(3105);const Hv=rd.A.browser||{};function ya(o){let e=0;return o.wheelDelta?(e=-o.wheelDelta/120,Hv.webkit&&(e/=2*Math.max(window.devicePixelRatio,.625))):o.detail&&(e=o.detail/3),e=e>0?Math.ceil(e):Math.floor(e),e}var Xv=T(4452),Yv=T(6821);const{BC:Li,vY:nn,sw:C,rc:di,a_:hs,YS:ze,AS:ad,XB:me,EN:Wv,HV:ft,rb:O,T5:$v,eM:Ct,LI:A,S2:on,a4:R}=Yv;class rn{static fetchFonts(e,t,i={depth:0}){!e||i.depth>5||!document.fonts||Object.keys(e).forEach(function(n){const a=e[n];"dataSource"===n||"$"===n[0]||!a||("font"===n?t.push(a):"object"==typeof a&&(i.depth++,rn.fetchFonts(a,t,i),i.depth--))})}static loadFonts(e,t){let i=[];if(e.length>0&&document.fonts){try{i=e.map(function(s){return document.fonts.load(s)})}catch(s){(0,Xv.A)(s)}Promise.all(i).then(t,t)}else t()}static preloadFonts(e,t){const i=[];rn.fetchFonts(e,i),rn.loadFonts(i,t)}}const Qv=rn;function w(o,e){const t=o.prototype;t.options=t.options?x({},t.options,e):e}const wa="k-i-",ld="k-svg-i-";class Ca{constructor(e,t){this.element=e,this.options=x({},this.options,t),this.wrapper()}wrapper(){this.addClasses()}addClasses(){}html(){return this.element.outerHTML}}w(Ca,{name:"",size:"none",themeColor:"none",flip:"default",iconClass:"",stylingOptions:["size","themeColor","fill"]});class cd extends Ca{constructor(e,t){super(e,t)}wrapper(){let e=this.element.className.split(" ").find(i=>i.startsWith(wa)),t=this.options.icon?`${this.options.icon.startsWith(wa)?"":wa}${this.options.icon}`:"";this._className=t,ut(this.element,"k-icon"),ut(this.element,"k-font-icon"),mo(this.element,e),ut(this.element,t),ut(this.element,this.options.iconClass||""),super.wrapper()}}w(cd,{name:"HTMLFontIcon",icon:null});class hd extends Ca{constructor(e,t){e.innerHTML="",super(e,t)}wrapper(){let e=this.options.icon,t=this.options.iconClass,i=this.element.className.split(" ").find(n=>n.startsWith(ld));if(!e&&t){let a=t.match(/k-i-(\w+(?:-\w+)*)/);a&&(e=a[1],t=t.replace(a[0],""))}Ut(e)&&(e=e.replace("k-i-","").replace(/-./g,n=>n[1].toUpperCase()),e=this.options.svgIcons[e]||this.options.svgIcons[`${e}Icon`]);let s=e&&e.name?`${ld}${e.name}`:"";if(this._className=s,ut(this.element,"k-svg-icon"),mo(this.element,i),ut(this.element,s),ut(this.element,t||""),this.element.setAttribute("aria-hidden","true"),e&&function Gv(o){return"[object Object]"===Object.prototype.toString.call(o)}(e)){let n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox",e.viewBox||""),n.setAttribute("focusable","false"),n.innerHTML=e.content||"",this.element.appendChild(n)}super.wrapper()}}w(hd,{name:"HTMLSvgIcon",icon:null,svgIcons:{}});const dd={svg:hd,font:cd};function ds(o,e){let t=o,i=e;return(!t||re(t)&&!(t instanceof HTMLElement)||Ut(t))&&(i=t,t=document.createElement("span")),Ut(i)&&(i={icon:i}),i.type||(i.type="svg"),dd[i.type]?new dd[i.type](t,i).html():null}function ka(o){let e=gt,t=wt;for(let i=0,s=o.length;i<s;i++){const n=o[i];null!==n&&isFinite(n)&&(e=Math.min(e,n),t=Math.max(t,n))}return{min:e===gt?void 0:e,max:t===wt?void 0:t}}function pd(o,e){for(let t=0;t<o.length;t++){const i=o[t];if(e(i,t,o))return i}}const bo=T(1042).A,tb=/matrix\((.*)\)/;function ud(o){const e=getComputedStyle(o).transform;return"none"===e?bo.unit():function eb(o){const e=o.match(tb);if(null===e||2!==e.length)return bo.unit();const t=e[1].split(",").map(i=>parseFloat(i));return new bo(...t)}(e)}var Ae=T(8521);const _o=function sb(o){return new Ae.A(o).isDark()?W:pt},gd={};class nb{constructor(e){this._index={},this._values=e?e.slice(0):[];for(let t=0;t<this._values.length;t++)this._index[this._values[t]]=t}values(){return this._values.filter(e=>e!==gd)}has(e){return void 0!==this._index[e]}add(e){this.has(e)||(this._index[e]=this._values.length,this._values.push(e))}delete(e){const t=this._index[e];void 0!==t&&(this._values[t]=gd,delete this._index[e])}clear(){this._index={},this._values=[]}get size(){return this._values.length}}class ob{constructor(e){this._set=new Set(e)}values(){return Array.from(this._set)}has(e){return this._set.has(e)}add(e){this._set.add(e)}delete(e){this._set.delete(e)}clear(){this._set.clear()}get size(){return this._set.size}}function fd(o){return(()=>{let o=!1;return"function"==typeof Set&&(o=new Set([1]).has(1)),o})()?new ob(o):new nb(o)}function md(o){throw o}function Aa(o,e){return Object.prototype.hasOwnProperty.call(o,e)}class pi{constructor(){this.height=0,this.width=0,this.data=[]}clone(){const e=new pi;return e.height=this.height,e.width=this.width,e.data=this.data.map(t=>t.slice()),e}get(e,t){const i=this.data[e];return i?i[t]:null}set(e,t,i){let s=this.data[e];null==s&&(s=this.data[e]=[]),s[t]=i,e>=this.height&&(this.height=e+1),t>=this.width&&(this.width=t+1)}each(e,t){for(let i=0;i<this.height;++i)for(let s=0;s<this.width;++s){let n=this.get(i,s);if((t||null!=n)&&(n=e(n,i,s),void 0!==n))return n}}map(e,t){const i=new pi;return this.each(function(s,n,a){i.set(n,a,e(s,n,a))},t),i}transpose(){const e=new pi;return this.each(function(t,i,s){e.set(s,i,t)}),e}unit(e){this.width=this.height=e;const t=this.data=new Array(e);for(let i=e;--i>=0;){const s=t[i]=new Array(e);for(let n=e;--n>=0;)s[n]=i===n?1:0}return this}multiply(e){const t=this,i=new pi;for(let s=0;s<t.height;++s)for(let n=0;n<e.width;++n){let a=0;for(let l=0;l<t.width;++l){const c=t.get(s,l),h=e.get(l,n);"number"==typeof c&&"number"==typeof h&&(a+=c*h)}i.set(s,n,a)}return i}inverse(){const e=this.width,t=this.augment((new pi).unit(e)),i=t.data;for(let s=0;s<e;++s){const n=ab(s,e,function(a){return i[a][s]});if(!i[n][s])return null;if(s!==n){let a=i[s];i[s]=i[n],i[n]=a}for(let a=s+1;a<e;++a){for(let l=s+1;l<2*e;++l)i[a][l]-=i[s][l]*i[a][s]/i[s][s];i[a][s]=0}}for(let s=0;s<e;++s)for(let n=i[s][s],a=0;a<2*e;++a)i[s][a]/=n;for(let s=e;--s>=0;)for(let n=s;--n>=0;)if(i[n][s])for(let a=2*e;--a>=e;)i[n][a]-=i[s][a]*i[n][s];return t.slice(0,e,e,e)}augment(e){const t=this.clone(),i=t.width;return e.each(function(s,n,a){t.set(n,a+i,s)}),t}slice(e,t,i,s){const n=new pi;for(let a=0;a<i;++a)for(let l=0;l<s;++l)n.set(a,l,this.get(e+a,t+l));return n}}function ab(o,e,t){let i=t(o),s=o;for(let n=o+1;n<e;n++){const a=t(o);a>i&&(i=a,s=o)}return s}const xd=pi,us={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"};function lb(o){return us[o]||o}const Se=o=>o.replace(/([^ ]+)/g,lb);let cb=1;function vd(){return"kchart"+cb++}function yo(){return vd()}const Sa=new WeakMap,an=Symbol("id");function Gt(o,e,t,i,s){!function db(o,e,t,i,s){(Pt(e)?e:(e||"").split(" ")).forEach(function(a){!function pb(o,e,t,i,s){let a,n=i;t&&at(t)&&!i?n=t:t&&function hb(o){return"string"==typeof o}(t)&&at(n)&&(a=t);const l=function(h){const d=h.target?h.target.closest(a):null;(!a||a&&h.target&&d)&&(Object.defineProperty(h,"currentTarget",{value:a?d:h.currentTarget}),Object.defineProperty(h,"delegateTarget",{value:o}),n(h))};n[an]||(n[an]=yo());let c=Sa.get(o);c||(c=new Map,Sa.set(o,c)),c.set(e+n[an],l),o.addEventListener(e,l,!!s)}(o,a,t,i,s)})}(o,e,t,i,s)}function Jt(o,e,t,i,s){!function ub(o,e,t,i){(Pt(e)?e:(e||"").split(" ")).forEach(function(n){!function gb(o,e,t,i){const s=Sa.get(o);if(s&&t&&t[an]){const n=e+t[an],a=s.get(n);s.delete(n),a&&o.removeEventListener(e,a,!!i)}}(o,n,t,i)})}(o,e,t,i)}function ln(){const o=function fb(o){let e=!1;const t={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.?(\d+(\.\d+)?)?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[._]([\d._]+)/,ipad:/(iPad).*OS\s+(\d+)[._]([\d_]+)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i},i={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i};for(let s in t)if(o.match(t[s])){if("windows"===s&&"plugins"in navigator)return!1;e={},e.device=s,e.name=mb(s,i),e[e.name]=!0;break}return e}(navigator.userAgent),e={};return e.mobileOS=o,e}function mb(o,e,t){for(let i in e)if(e[i].test(o))return i;return void 0!==t?t:o}function bd(){}function ui(){return(new Date).getTime()}const yd="function";let xb=function(){this._defaultPrevented=!0},vb=function(){return!0===this._defaultPrevented};class le{constructor(){this._events={}}destroy(){this.unbind()}bind(e,t,i){let n,l,c,h,p,s=this,a="string"==typeof e?[e]:e||[],d=typeof t===yd;if(void 0===t){for(n in e)s.bind(n,e[n]);return s}for(n=0,l=a.length;n<l;n++){let u=a[n];h=d?t:t[u],h&&(i&&(c=h,h=function(){s.unbind(u,h),c.apply(s,arguments)},h.original=c),p=s._events[u]=s._events[u]||[],p.push(h))}return s}one(e,t){return this.bind(e,t,!0)}first(e,t){let s,a,l,h,i=this,n="string"==typeof e?[e]:e,c=typeof t===yd;for(s=0,a=n.length;s<a;s++){let d=n[s];l=c?t:t[d],l&&(h=i._events[d]=i._events[d]||[],h.unshift(l))}return i}trigger(e,t){let n,a,i=this,s=i._events[e];if(s){let l=t||{};for(l.sender=i,l._defaultPrevented=!1,l.preventDefault=xb,l.isDefaultPrevented=vb,s=s.slice(),n=0,a=s.length;n<a;n++)s[n].call(i,l);return!0===l._defaultPrevented}return!1}unbind(e,t){let n,i=this,s=i._events[e];if(void 0===e)i._events={};else if(s)if(t)for(n=s.length-1;n>=0;n--)(s[n]===t||s[n].original===t)&&s.splice(n,1);else i._events[e]=[];return i}_setEvents(e){const t=(this.events||[]).length;for(let i=0;i<t;i++){let s=this.events[i];this.options[s]&&e[s]&&(this.unbind(s,this.options[s]),this._events&&this._events[s]&&delete this._events[s])}this.bind(this.events,e)}}const wo=Object.assign,bb=o=>{o.preventDefault()};let wd=800,Cd=0,Ta="move",Co="tap",Pd="doubleTap",Ed="release",Dd="gesturechange",Od="gestureend",Id="gesturetap",wb={api:0,touch:0,mouse:9,pointer:9};function Rd(o){let e=[],t=o.originalEvent||o;return e.push(o.api?{id:2,event:o,target:o.target,currentTarget:o.target,location:o,type:"api"}:{location:t,event:o,target:o.target,currentTarget:o.currentTarget,id:t.pointerId,type:"pointer"}),e}class Ld{constructor(e,t){let i=this;i.support=ln(),i.invalidZeroEvents=this.support.mobileOS&&this.support.mobileOS.android,i.axis=e,i._updateLocationData(t),i.startLocation=i.location,i.velocity=i.delta=0,i.timeStamp=ui()}move(e){let t=this,i=e["page"+t.axis],s=ui(),n=s-t.timeStamp||1;!i&&this.invalidZeroEvents||(t.delta=i-t.location,t._updateLocationData(e),t.initialDelta=i-t.startLocation,t.velocity=t.delta/n,t.timeStamp=s)}_updateLocationData(e){let t=this,i=t.axis;t.location=e["page"+i],t.client=e["client"+i],t.screen=e["screen"+i]}}class kb{constructor(e,t,i){wo(this,{x:new Ld("X",i.location),y:new Ld("Y",i.location),type:i.type,threshold:e.threshold||wb[i.type],userEvents:e,target:t,currentTarget:i.currentTarget,initialTouch:i.target,id:i.id,pressEvent:i,_clicks:e._clicks,supportDoubleTap:e.supportDoubleTap,_moved:!1,_finished:!1})}press(){this._holdTimeout=setTimeout(()=>this._hold(),this.userEvents.minHold),this._trigger("press",this.pressEvent)}_tap(e){let t=this;t.userEvents._clicks++,1===t.userEvents._clicks&&(t._clickTimeout=setTimeout(function(){t._trigger(1===t.userEvents._clicks?Co:Pd,e),t.userEvents._clicks=0},300))}_hold(){this._trigger("hold",this.pressEvent)}move(e){let t=this;if(!(t._finished||"api"!==e.type&&t.userEvents._shouldNotMove)){if(t.x.move(e.location),t.y.move(e.location),!t._moved){if(t._withinIgnoreThreshold())return;if(Vi.current&&Vi.current!==t.userEvents)return t.dispose();t._start(e)}t._finished||t._trigger(Ta,e)}}end(e){this.endTime=ui(),!this._finished&&(this._finished=!0,this._trigger(Ed,e),this._moved?this._trigger("end",e):this.supportDoubleTap?this._tap(e):this._trigger(Co,e),clearTimeout(this._holdTimeout),this.dispose())}dispose(){let t=this.userEvents.touches||[];this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout);const i=t.indexOf(this);t.splice(i,1)}skip(){this.dispose()}cancel(){this.dispose()}isMoved(){return this._moved}_start(e){clearTimeout(this._holdTimeout),this.startTime=ui(),this._moved=!0,this._trigger("start",e)}_trigger(e,t){const i=t.event;this.userEvents.notify(e,{touch:this,x:this.x,y:this.y,target:this.target,event:i})&&i.preventDefault()}_withinIgnoreThreshold(){let e=this.x.initialDelta,t=this.y.initialDelta;return Math.sqrt(e*e+t*t)<=this.threshold}}function Vd(o){let e=us.up.split(" "),t=0,i=e.length;for(;t<i;t++)o(e[t])}class Vi extends le{constructor(e,t){super();let s,i=this;const n=ln();if(this.support=n,this.options=t=t||{},s=i.filter=t.filter,i.threshold=t.threshold||Cd,i.minHold=t.minHold||wd,i.touches=[],i._maxTouches=t.multiTouch?2:1,i.allowSelection=t.allowSelection,i.captureUpIfMoved=t.captureUpIfMoved,i._clicks=0,i.supportDoubleTap=t.supportDoubleTap,wo(i,{element:e,surface:t.surface||e,stopPropagation:t.stopPropagation,pressed:!1}),this._surfaceMoveHandler=this._move.bind(this),Gt(i.surface,Se("move"),this._surfaceMoveHandler),this._surfaceEndHandler=this._end.bind(this),Gt(i.surface,Se("up cancel"),this._surfaceEndHandler),this._elementStartHandler=this._start.bind(this),Gt(e,Se("down"),s,this._elementStartHandler),e.style["touch-action"]=t.touchAction||"none",t.preventDragEvent&&(this._elementDragStartHandler=bb,Gt(e,Se("dragstart"),this._elementDragStartHandler)),this._elementSelectHandler=this._select.bind(this),Gt(e,Se("mousedown"),s,this._elementSelectHandler),i.captureUpIfMoved){let a=i.surface;i._preventIfMovingProxy=i.preventIfMoving.bind(i),Vd(function(l){a.addEventListener(l,i._preventIfMovingProxy,!0)})}i.bind(["press","hold",Co,Pd,"start",Ta,"end",Ed,"cancel","gesturestart",Dd,Od,Id,"select"],t)}preventIfMoving(e){this._isMoved()&&e.preventDefault()}destroy(){let e=this;const t=this.options,i=this.element;if(!e._destroyed){if(e._destroyed=!0,e.captureUpIfMoved){let s=e.surface;Vd(function(n){s.removeEventListener(n,e._preventIfMovingProxy,!0)})}Jt(e.surface,Se("move"),this._surfaceMoveHandler),Jt(e.surface,Se("up cancel"),this._surfaceEndHandler),Jt(i,Se("down"),this._elementStartHandler),t.preventDragEvent&&Jt(i,Se("dragstart"),this._elementDragStartHandler),Jt(i,Se("mousedown"),this._elementSelectHandler),e._disposeAll(),e.unbind(),delete e.surface,delete e.element,delete e.currentTarget}}capture(){Vi.current=this}cancel(){this._disposeAll(),this.trigger("cancel")}notify(e,t){let s=this.touches,n=e;if(this._isMultiTouch()){switch(n){case Ta:n=Dd;break;case"end":n=Od;break;case Co:n=Id}wo(t,{touches:s},function Cb(o,e){let t=o.x.location,i=o.y.location,s=e.x.location,n=e.y.location,a=t-s,l=i-n;return{center:{x:(t+s)/2,y:(i+n)/2},distance:Math.sqrt(a*a+l*l)}}(s[0],s[1]))}return this.trigger(n,wo(t,{type:n}))}press(e,t,i){this._apiCall("_start",e,t,i)}move(e,t){this._apiCall("_move",e,t)}end(e,t){this._apiCall("_end",e,t)}_isMultiTouch(){return this.touches.length>1}_maxTouchesReached(){return this.touches.length>=this._maxTouches}_disposeAll(){let e=this.touches;for(;e.length>0;)e.pop().dispose()}_isMoved(){return Kt(this.touches,function(e){return e.isMoved()}).length}_select(e){(!this.allowSelection||this.trigger("select",{event:e}))&&e.preventDefault()}_start(e){if(e.which&&e.which>1||this._maxTouchesReached())return;let t;Vi.current=null,this.currentTarget=e.currentTarget,this.stopPropagation&&e.stopPropagation();const i=Rd(e);for(let s=0;s<i.length&&!this._maxTouchesReached();s++){const n=i[s];if(t=this.filter?n.currentTarget:this.element,t&&0===t.length)continue;const a=new kb(this,t,n);this.touches.push(a),a.press(),this._isMultiTouch()&&this.notify("gesturestart",{})}}_move(e){this._eachTouch("move",e)}_end(e){this._eachTouch("end",e)}_eachTouch(e,t){let l,c,h,d,s={},n=Rd(t),a=this.touches;for(l=0;l<a.length;l++)c=a[l],s[c.id]=c;for(l=0;l<n.length;l++)h=n[l],d=s[h.id],d&&("move"===e&&"pointer"===h.type&&!this.surface.hasPointerCapture(h.id)&&this.surface.setPointerCapture(h.id),d[e](h))}_apiCall(e,t,i,s){this[e]({api:!0,pageX:t,pageY:i,clientX:t,clientY:i,target:s||this.element,stopPropagation:bd,preventDefault:bd})}static defaultThreshold(e){Cd=e}static minHold(e){wd=e}}function gs(o,e){let t=A(e-o,9);if(0===t){if(0===e)return.1;t=Math.abs(e)}const i=Math.pow(10,Math.floor(Math.log(t)/Math.log(10))),s=A(t/i,q);let n=1;return n=s<1.904762?.2:s<4.761904?.5:s<9.523809?1:2,A(i*n,q)}class ko{constructor(e,t){this.x=e||0,this.y=t||0}clone(){return new ko(this.x,this.y)}equals(e){return e&&this.x===e.x&&this.y===e.y}rotate(e,t){const i=Ct(t),s=Math.cos(i),n=Math.sin(i),{x:a,y:l}=e,{x:c,y:h}=this;return this.x=A(a+(c-a)*s+(h-l)*n,3),this.y=A(l+(h-l)*s-(c-a)*n,3),this}multiply(e){return this.x*=e,this.y*=e,this}distanceTo(e){const t=this.x-e.x,i=this.y-e.y;return Math.sqrt(t*t+i*i)}static onCircle(e,t,i){const s=Ct(t);return new ko(e.x-i*Math.cos(s),e.y-i*Math.sin(s))}}const L=ko;var At=T(7577);class Ao{constructor(e,t,i,s){this.x1=e||0,this.y1=t||0,this.x2=i||0,this.y2=s||0}equals(e){return this.x1===e.x1&&this.x2===e.x2&&this.y1===e.y1&&this.y2===e.y2}width(){return this.x2-this.x1}height(){return this.y2-this.y1}translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this}move(e,t){const i=this.height(),s=this.width();return void 0!==e&&(this.x1=e,this.x2=this.x1+s),void 0!==t&&(this.y1=t,this.y2=this.y1+i),this}wrap(e){return this.x1=Math.min(this.x1,e.x1),this.y1=Math.min(this.y1,e.y1),this.x2=Math.max(this.x2,e.x2),this.y2=Math.max(this.y2,e.y2),this}wrapLimit(e,t,i){return this.x1=Math.min(this.x1,Math.max(this.x1-t,e.x1)),this.y1=Math.min(this.y1,Math.max(this.y1-i,e.y1)),this.x2=Math.max(this.x2,Math.min(this.x2+t,e.x2)),this.y2=Math.max(this.y2,Math.min(this.y2+i,e.y2)),this}wrapPoint(e){const t=Pt(e),i=t?e[0]:e.x,s=t?e[1]:e.y;return this.wrap(new Ao(i,s,i,s)),this}snapTo(e,t){return(t===E||!t)&&(this.x1=e.x1,this.x2=e.x2),(t===D||!t)&&(this.y1=e.y1,this.y2=e.y2),this}alignTo(e,t){const i=this.height(),s=this.width(),n=t===U||t===Y?D:E,a=n===D?i:s;if(t===V){const l=e.center(),c=this.center();this.x1+=l.x-c.x,this.y1+=l.y-c.y}else this[n+1]=t===U||t===N?e[n+1]-a:e[n+2];return this.x2=this.x1+s,this.y2=this.y1+i,this}shrink(e,t){return this.x2-=e,this.y2-=t,this}expand(e,t){return this.shrink(-e,-t),this}pad(e){const t=Z(e);return this.x1-=t.left,this.x2+=t.right,this.y1-=t.top,this.y2+=t.bottom,this}unpad(e){const t=Z(e);return t.left=-t.left,t.top=-t.top,t.right=-t.right,t.bottom=-t.bottom,this.pad(t)}clone(){return new Ao(this.x1,this.y1,this.x2,this.y2)}center(){return new L(this.x1+this.width()/2,this.y1+this.height()/2)}containsPoint(e){return e.x>=this.x1&&e.x<=this.x2&&e.y>=this.y1&&e.y<=this.y2}points(){return[new L(this.x1,this.y1),new L(this.x2,this.y1),new L(this.x2,this.y2),new L(this.x1,this.y2)]}getHash(){return[this.x1,this.y1,this.x2,this.y2].join(",")}overlaps(e){return!(e.y2<this.y1||this.y2<e.y1||e.x2<this.x1||this.x2<e.x1)}rotate(e){let t=this.width(),i=this.height();const{x:s,y:n}=this.center(),a=So(0,0,s,n,e),l=So(t,0,s,n,e),c=So(t,i,s,n,e),h=So(0,i,s,n,e);return t=Math.max(a.x,l.x,c.x,h.x)-Math.min(a.x,l.x,c.x,h.x),i=Math.max(a.y,l.y,c.y,h.y)-Math.min(a.y,l.y,c.y,h.y),this.x2=this.x1+t,this.y2=this.y1+i,this}toRect(){return new At.A([this.x1,this.y1],[this.width(),this.height()])}hasSize(){return 0!==this.width()&&0!==this.height()}align(e,t,i){return t===E?this.alignX(e,i):this.alignY(e,i),this}alignX(e,t){const i=this.width();t===N?(this.x1=e.x1,this.x2=this.x1+i):t===$?(this.x2=e.x2,this.x1=this.x2-i):t===V&&(this.x1=e.x1+(e.width()-i)/2,this.x2=this.x1+i)}alignY(e,t){const i=this.height();t===U?(this.y1=e.y1,this.y2=this.y1+i):t===Y?(this.y2=e.y2,this.y1=this.y2-i):t===V&&(this.y1=e.y1+(e.height()-i)/2,this.y2=this.y1+i)}}function So(o,e,t,i,s){const n=Ct(s);return new L(t+(o-t)*Math.cos(n)+(e-i)*Math.sin(n),i-(o-t)*Math.sin(n)+(e-i)*Math.cos(n))}const k=Ao;class Pa{constructor(e,t,i,s,n){this.center=e,this.innerRadius=t,this.radius=i,this.startAngle=s,this.angle=n}clone(){return new Pa(this.center,this.innerRadius,this.radius,this.startAngle,this.angle)}middle(){return this.startAngle+this.angle/2}setRadius(e,t){return t?this.innerRadius=e:this.radius=e,this}point(e,t){const i=Ct(e),s=Math.cos(i),n=Math.sin(i),a=t?this.innerRadius:this.radius,l=A(this.center.x-s*a,3),c=A(this.center.y-n*a,3);return new L(l,c)}adjacentBox(e,t,i){const s=this.clone().expand(e),n=s.middle(),a=s.point(n),l=t/2,c=i/2,h=Math.sin(Ct(n)),d=Math.cos(Ct(n));let p=a.x-l,u=a.y-c;return Math.abs(h)<.9&&(p+=l*-d/Math.abs(d)),Math.abs(d)<.9&&(u+=c*-h/Math.abs(h)),new k(p,u,p+t,u+i)}containsPoint(e){const t=this.center,i=this.innerRadius,s=this.radius,n=this.startAngle,a=this.startAngle+this.angle,l=e.x-t.x,c=e.y-t.y,h=new L(l,c),d=this.point(n),p=new L(d.x-t.x,d.y-t.y),u=this.point(a),g=new L(u.x-t.x,u.y-t.y),f=A(l*l+c*c,3);return(p.equals(h)||Zh(p,h))&&!Zh(g,h)&&f>=i*i&&f<=s*s}getBBox(){const e=new k(gt,gt,wt,wt),t=A(this.startAngle%360),i=A((t+this.angle)%360),s=this.innerRadius,n=[0,90,180,270,t,i].sort(Ab),a=n.indexOf(t),l=n.indexOf(i);let c;c=t===i?n:a<l?n.slice(a,l+1):[].concat(n.slice(0,l+1),n.slice(a,n.length));for(let h=0;h<c.length;h++){let d=this.point(c[h]);e.wrapPoint(d),e.wrapPoint(d,s)}return s||e.wrapPoint(this.center),e}expand(e){return this.radius+=e,this}}function Ab(o,e){return o-e}const cn=Pa;var j=T(4305),fs=T(9928),M=T(3039);class Ea{createRing(e,t){const i=e.startAngle+180;let s=e.angle+i;(0===e.angle||e.angle>0&&i===s)&&(s+=.001);const n=new j.A(e.center.x,e.center.y),a=Math.max(e.radius,0),l=Math.max(e.innerRadius,0),c=new fs.A(n,{startAngle:i,endAngle:s,radiusX:a,radiusY:a}),h=M.w.fromArc(c,t).close();if(l){c.radiusX=c.radiusY=l;const d=c.pointAt(s);h.lineTo(d.x,d.y),h.arc(s,i,l,l,!0)}else h.lineTo(n.x,n.y);return h}}Ea.current=new Ea;const To=Ea;var Te=T(8309),ce=T(2907),bt=T(291),et=T(2542);function Tb(o){return.5-Math.cos(o*Math.PI)/2}function Mb(o){return o}function Pb(o,e,t,i){let s=1.70158,n=0,a=i;return 0===o?t:1===o?t+i:(n||(n=.5),a<Math.abs(i)?(a=i,s=n/4):s=n/(2*Math.PI)*Math.asin(i/a),a*Math.pow(2,-10*o)*Math.sin((Number(o)-s)*(1.1*Math.PI)/n)+i+t)}var Fd=T(7739),Eb=T(1404),Nd=T(5678),Db=T(576);let Da;class Oa extends Nd.A{static get current(){return Da||(Da=new Oa),Da}constructor(){super(),this._items=[]}register(e,t){this._items.push({name:e,type:t})}create(e,t){const i=this._items;let s;if(t&&t.type){const n=t.type.toLowerCase();for(let a=0;a<i.length;a++)if(i[a].name.toLowerCase()===n){s=i[a];break}}if(s)return new s.type(e,t)}}const Me=Oa,he=class Ob extends Nd.A{static create(e,t,i){return Me.current.create(e,t,i)}get options(){return this._options||{duration:500,easing:"swing"}}set options(e){this._options=e}constructor(e,t){super(),this.options=Object.assign({},this.options,t),this.element=e}setup(){}step(){}play(){const e=this.options,{duration:t,delay:i=0}=e,s=ca[e.easing],n=(0,Fd.A)()+i,a=n+t;0===t?(this.step(1),this.abort()):setTimeout(()=>{const l=()=>{if(this._stopped)return;const c=(0,Fd.A)(),h=(0,Eb.A)(c-n,0,t),p=s(h/t,h,0,1,t);this.step(p),c<a?(0,Db.A)(l):this.abort()};l()},i)}abort(){this._stopped=!0}destroy(){this.abort()}};class zd{constructor(e){this.children=[],this.initOptions(e)}initOptions(e){this.options=x({},this.options,this.initUserOptions(e))}initUserOptions(e){return e}reflow(e){const t=this.children;let i;for(let s=0;s<t.length;s++){let n=t[s];n.reflow(e),i=i?i.wrap(n.box):n.box.clone()}this.box=i||e}destroy(){const e=this.children;this.animation&&this.animation.destroy();for(let t=0;t<e.length;t++)e[t].destroy()}getRoot(){const e=this.parent;return e?e.getRoot():null}getSender(){const e=this.getService();if(e)return e.sender}getService(){let e=this;for(;e;){if(e.chartService)return e.chartService;e=e.parent}}translateChildren(e,t){const i=this.children,s=i.length;for(let n=0;n<s;n++)i[n].box.translate(e,t)}append(){for(let e=0;e<arguments.length;e++){let t=arguments[e];this.children.push(t),t.parent=this}}renderVisual(){!1!==this.options.visible&&(this.createVisual(),this.addVisual(),this.renderChildren(),this.createAnimation(),this.renderComplete())}addVisual(){this.visual&&(this.visual.chartElement=this,this.parent&&this.parent.appendVisual(this.visual))}renderChildren(){const e=this.children,t=e.length;for(let i=0;i<t;i++)e[i].renderVisual()}createVisual(){this.visual=new et.A({zIndex:this.options.zIndex,visible:R(this.options.visible,!0)})}createAnimation(){this.visual&&this.options.animation&&(this.animation=he.create(this.visual,this.options.animation))}appendVisual(e){e.chartElement||(e.chartElement=this),e.options.noclip?this.clipRoot().visual.append(e):void 0!==e.options.zIndex?this.stackRoot().stackVisual(e):this.isStackRoot?this.stackVisual(e):this.visual?this.visual.append(e):this.parent.appendVisual(e)}clipRoot(){return this.parent?this.parent.clipRoot():this}stackRoot(){return this.parent?this.parent.stackRoot():this}stackVisual(e){const t=e.options.zIndex||0,i=this.visual.children,s=i.length;let n;for(n=0;n<s&&!(R(i[n].options.zIndex,0)>t);n++);this.visual.insert(n,e)}traverse(e){const t=this.children,i=t.length;for(let s=0;s<i;s++){let n=t[s];e(n),n.traverse&&n.traverse(e)}}closest(e){let t=this,i=!1;for(;t&&!i;)i=e(t),i||(t=t.parent);if(i)return t}renderComplete(){}hasHighlight(){const e=(this.options||{}).highlight;return!(!this.createHighlight||e&&!1===e.visible||!1===this.visible)}toggleHighlight(e,t){const i=(this.options||{}).highlight||{},s=i.visual;let n=this._highlight;if(!n){const a={fill:{color:W,opacity:t||.2},stroke:{color:W,width:1,opacity:t||.2}};if(s){if(n=this._highlight=s(Object.assign(this.highlightVisualArgs(),{createVisual:()=>this.createHighlight(a),sender:this.getSender(),series:this.series,dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total})),!n)return}else n=this._highlight=this.createHighlight(a);void 0===n.options.zIndex&&(n.options.zIndex=R(i.zIndex,this.options.zIndex)),this.appendVisual(n)}n.visible(e)}toggleFocusHighlight(e){const t=(this.options||{}).focusHighlight||{};let i=this._focusHighlight;if(e||i){if(!i){const s=this.getRoot().options.background,n=_o(s),a={fill:{opacity:t.opacity,color:t.color},stroke:Object.assign({},{color:n},t.border),zIndex:t.zIndex};i=this._focusHighlight=this.createFocusHighlight(a),this.appendVisual(i)}i.visible(e)}}createGradientOverlay(e,t,i){const s=new M.w(Object.assign({stroke:{color:"none"},fill:this.createGradient(i),closed:e.options.closed},t));return s.segments.elements(e.segments.elements()),s}createGradient(e){if(this.parent)return this.parent.createGradient(e)}supportsPointInactiveOpacity(){return!0}}zd.prototype.options={};const K=zd;var Ib=T(3461),Rb=T(7233),Lb=T(3199),Vb=T(3970);class Fb extends((0,Rb.A)((0,Lb.A)((0,Vb.A)(Ib.A)))){get nodeType(){return"Arc"}constructor(e=new fs.A,t={}){super(t),this.geometry(e),(0,ba.A)(this.options.stroke)||this.stroke("#000")}_bbox(e){return this._geometry.bbox(e)}rawBBox(){return this.geometry().bbox()}toPath(){const e=new M.w,t=this.geometry().curvePoints();if(t.length>0){e.moveTo(t[0].x,t[0].y);for(let i=1;i<t.length;i+=3)e.curveTo(t[i],t[i+1],t[i+2])}return e}_containsPoint(e){return this.geometry().containsPoint(e)}_isOnPath(e){return this.geometry()._isOnPath(e,this.options.stroke.width/2)}}const Nb=Fb;var jd=T(786),hn=T(6702),Bi=T(7917);const{bT:zb,rO:jb,t7:Ub,AU:Gb,ls:Hb}=Be,Xb={dots:zb,verticalStripes:jb,crosshatch:Ub,diagonalStripes:Gb,grid:Hb};function gi(o,e,t){const i=function Yb(o,e){return at(o)?o(e):o}(o,t),s=i&&Xb[i.type];return s?s(Object.assign({},e,i)):e}class Ud extends K{constructor(e){super(e),this.options.margin=Z(this.options.margin),this.options.padding=Z(this.options.padding)}reflow(e){const t=this.options,{width:i,height:s,shrinkToFit:n}=t,a=i&&s,l=t.margin,c=t.padding,h=t.border.width;let d;const p=()=>{this.align(e,E,t.align),this.align(e,D,t.vAlign),this.paddingBox=d.clone().unpad(l).unpad(h)};let u=e.clone();a&&(u.x2=u.x1+i,u.y2=u.y1+s),n&&u.unpad(l).unpad(h).unpad(c),super.reflow(u),d=a?this.box=new k(0,0,i,s):this.box,n&&a?(p(),u=this.contentBox=this.paddingBox.clone().unpad(c)):(u=this.contentBox=d.clone(),d.pad(c).pad(h).pad(l),p()),this.translateChildren(d.x1-u.x1+l.left+h+c.left,d.y1-u.y1+l.top+h+c.top);const g=this.children;for(let f=0;f<g.length;f++){let m=g[f];m.reflow(m.box)}}align(e,t,i){this.box.align(e,t,i)}hasBox(){const e=this.options;return e.border.width||e.background}createVisual(){super.createVisual(),this.options.visible&&this.hasBox()&&this.visual.append(M.w.fromRect(this.paddingBox.toRect(),this.visualStyle()))}visualStyle(){const e=this.options,t=e.border||{};return{stroke:{width:t.width,color:t.color,opacity:R(t.opacity,e.opacity),dashType:t.dashType},fill:gi(e.pattern,{color:e.background,opacity:e.opacity},void 0),cursor:e.cursor}}}w(Ud,{align:N,vAlign:U,margin:{},padding:{},border:{color:pt,width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0});const fi=Ud;function Ia(o,e){e&&(o.options.className=e.className,o.options.role=e.role,o.options.ariaLabel=e.ariaLabel,o.options.ariaRoleDescription=e.ariaRoleDescription,o.options.ariaChecked=e.ariaChecked)}class Gd extends fi{constructor(e,t){super(e),this.pointData=t}getElement(){const{options:e,paddingBox:t}=this,{type:i,rotation:s}=e,n=t.center(),a=t.width()/2,l=t.height()/2;if(!e.visible||!this.hasBox())return null;const c=this.visualStyle();let h;if(i===jt)h=new Te.A(new ce.A([A(t.x1+a,3),A(t.y1+l,3)],Math.min(a,l)),c);else if("triangle"===i)h=M.w.fromPoints([[t.x1+a,t.y1],[t.x1,t.y2],[t.x2,t.y2]],c).close();else if(i===ha)h=new M.P(c),h.moveTo(t.x1,t.y1).lineTo(t.x2,t.y2),h.moveTo(t.x1,t.y2).lineTo(t.x2,t.y1);else{const d=t.toRect();if(i===$h){const p=R(e.borderRadius,d.width()/5);d.setCornerRadius(p)}h=M.w.fromRect(d,c)}return s&&h.transform(bt.A().rotate(-s,[n.x,n.y])),h.options.zIndex=e.zIndex,h}createElement(){const e=this.options.visual,t=this.pointData||{};let i;return i=e?e({value:t.value,dataItem:t.dataItem,sender:this.getSender(),series:t.series,category:t.category,rect:this.paddingBox.toRect(),options:this.visualOptions(),createVisual:()=>this.getElement()}):this.getElement(),i}visualOptions(){const e=this.options;return{background:e.background,border:e.border,margin:e.margin,padding:e.padding,type:e.type,size:e.width,visible:e.visible}}createVisual(){this.visual=this.createElement(),Ia(this.visual,this.options.accessibilityOptions)}}w(Gd,{type:jt,align:V,vAlign:V});const Rt=Gd;var Wb=T(5344),$b=T(3010);const dn="radial",Zb={glass:{type:"linear",rotation:0,stops:[{offset:0,color:W,opacity:0},{offset:.25,color:W,opacity:.3},{offset:1,color:W,opacity:0}]},sharpBevel:{type:dn,stops:[{offset:0,color:W,opacity:.55},{offset:.65,color:W,opacity:0},{offset:.95,color:W,opacity:.25}]},roundedBevel:{type:dn,stops:[{offset:.33,color:W,opacity:.06},{offset:.83,color:W,opacity:.2},{offset:.95,color:W,opacity:0}]},roundedGlass:{type:dn,supportVML:!1,stops:[{offset:0,color:W,opacity:0},{offset:.5,color:W,opacity:.3},{offset:.99,color:W,opacity:0}]},sharpGlass:{type:dn,supportVML:!1,stops:[{offset:0,color:W,opacity:.2},{offset:.15,color:W,opacity:.15},{offset:.17,color:W,opacity:.35},{offset:.85,color:W,opacity:.05},{offset:.87,color:W,opacity:.15},{offset:.99,color:W,opacity:0}]},bubbleShadow:{type:dn,center:[.5,.5],radius:.5}};function Kb(o,e){if(o.x1===e.x1&&o.y1===e.y1&&o.x2===e.x2&&o.y2===e.y2)return e;const t=Math.min(o.x1,e.x1),i=Math.max(o.x1,e.x1),s=Math.min(o.x2,e.x2),n=Math.max(o.x2,e.x2),a=Math.min(o.y1,e.y1),l=Math.max(o.y1,e.y1),c=Math.min(o.y2,e.y2),h=Math.max(o.y2,e.y2),d=[];return d[0]=new k(i,a,s,l),d[1]=new k(t,l,i,c),d[2]=new k(s,l,n,c),d[3]=new k(i,c,s,h),o.x1===t&&o.y1===a||e.x1===t&&e.y1===a?(d[4]=new k(t,a,i,l),d[5]=new k(s,c,n,h)):(d[4]=new k(s,a,n,l),d[5]=new k(t,c,i,h)),Kt(d,function(p){return p.height()>0&&p.width()>0})[0]}class Hd extends K{constructor(e){super(e);const t=this.options;t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),this.gradients={}}reflow(){const{options:e,children:t}=this;let i=new k(0,0,e.width,e.height);this.box=i.unpad(e.margin);for(let s=0;s<t.length;s++)t[s].reflow(i),i=Kb(i,t[s].box)||new k}createVisual(){this.visual=new et.A,this.createBackground()}createBackground(){const e=this.options,t=e.border||{},i=this.box.clone().pad(e.margin).unpad(t.width),s=M.w.fromRect(i.toRect(),{stroke:{color:t.width?t.color:"",width:t.width,dashType:t.dashType},fill:{color:e.background,opacity:e.opacity},zIndex:-10});this.visual.append(s)}getRoot(){return this}createGradient(e){const t=this.gradients,i=$v(e),s=Zb[e.gradient];let n;if(t[i])n=t[i];else{const a=Object.assign({},s,e);"linear"===s.type?n=new Wb.A(a):(e.innerRadius&&(a.stops=function Jb(o){const e=o.stops,t=o.innerRadius/o.radius*100,i=e.length,s=[];for(let n=0;n<i;n++){let a=Object.assign({},e[n]);a.offset=(a.offset*(100-t)+t)/100,s.push(a)}return s}(a)),n=new $b.A(a),n.supportVML=!1!==s.supportVML),t[i]=n}return n}cleanGradients(){const e=this.gradients;for(let t in e)e[t]._observers=[]}size(){const e=this.options;return new k(0,0,e.width,e.height)}}w(Hd,{width:600,height:400,background:W,border:{color:pt,width:0},margin:Z(5),zIndex:-2});const qb=Hd;class Xd extends K{constructor(e){super(e),this._initDirection()}_initDirection(){const e=this.options;e.vertical?(this.groupAxis=E,this.elementAxis=D,this.groupSizeField=ma,this.elementSizeField=pa,this.groupSpacing=e.spacing,this.elementSpacing=e.vSpacing):(this.groupAxis=D,this.elementAxis=E,this.groupSizeField=pa,this.elementSizeField=ma,this.groupSpacing=e.vSpacing,this.elementSpacing=e.spacing)}reflow(e){this.box=e.clone(),this.reflowChildren()}reflowChildren(){const{box:e,elementAxis:t,groupAxis:i,elementSizeField:s,groupSizeField:n}=this,{groups:a,groupsSize:l,maxGroupElementsSize:c}=this.groupOptions(),h=a.length,d=e[i+1]+this.alignStart(l,e[n]());if(h){let p=d;for(let u=0;u<h;u++){let g=a[u],f=g.groupElements,m=e[t+1],v=f.length;for(let _=0;_<v;_++){let y=f[_],P=this.elementSize(y),I=p+this.alignStart(P[n],g.groupSize),B=new k;B[i+1]=I,B[i+2]=I+P[n],B[t+1]=m,B[t+2]=m+P[s],y.reflow(B),m+=P[s]+this.elementSpacing}p+=g.groupSize+this.groupSpacing}e[i+1]=d,e[i+2]=d+l,e[t+2]=e[t+1]+c}}alignStart(e,t){let i=0;const s=this.options.align;return s===$||s===Y?i=t-e:s===V&&(i=(t-e)/2),i}groupOptions(){const{box:e,children:t,elementSizeField:i,groupSizeField:s,elementSpacing:n,groupSpacing:a}=this,l=A(e[i]()),c=t.length,h=[];let d=0,p=0,u=0,g=0,f=[];for(let m=0;m<c;m++){let v=t[m];v.box||v.reflow(e);let _=this.elementSize(v);this.options.wrap&&A(p+n+_[i])>l&&(h.push({groupElements:f,groupSize:d,groupElementsSize:p}),g=Math.max(g,p),u+=a+d,d=0,p=0,f=[]),d=Math.max(d,_[s]),p>0&&(p+=n),p+=_[i],f.push(v)}return h.push({groupElements:f,groupSize:d,groupElementsSize:p}),g=Math.max(g,p),u+=d,{groups:h,groupsSize:u,maxGroupElementsSize:g}}elementSize(e){return{width:e.box.width(),height:e.box.height()}}createVisual(){}}w(Xd,{vertical:!0,wrap:!0,vSpacing:0,spacing:0});const Ra=Xd;var Yd=T(2821);const t0=jd.A;class Wd extends K{constructor(e,t){super(t),this.content=e,this.reflow(new k)}reflow(e){const t=this.options,i=t.size=Yd.A(this.content,{font:t.font});this.baseline=i.baseline,this.box=new k(e.x1,e.y1,e.x1+i.width,e.y1+i.height)}createVisual(){const{font:e,color:t,opacity:i,cursor:s,stroke:n,paintOrder:a}=this.options;this.visual=new t0(this.content,this.box.toRect().topLeft(),{font:e,fill:{color:t,opacity:i},cursor:s,stroke:n,paintOrder:a})}}w(Wd,{font:Gh,color:pt});const e0=Wd;function ms(o){const e=o.origin,t=o.bottomRight();return new k(e.x,e.y,t.x,t.y)}const s0=/\n/m,Ht=class n0 extends fi{constructor(e,t,i){super(t),this.content=e,this.data=i,this._initContainer(),!1!==this.options._autoReflow&&this.reflow(new k)}_initContainer(){const e=this.options,t=String(this.content).split(s0),i=new Ra({vertical:!0,align:e.align,wrap:!1}),s=x({},e,{opacity:1,animation:null});this.container=i,this.append(i);for(let n=0;n<t.length;n++){let a=new e0(t[n].trim(),s);i.append(a)}}reflow(e){const t=this.options,i=t.visual;if(this.container.options.align=t.align,i&&!this._boxReflow){let s=e;s.hasSize()||(this._boxReflow=!0,this.reflow(s),this._boxReflow=!1,s=this.box);const n=this.visual=i(this.visualContext(s));n&&(s=ms(n.clippedBBox()||new At.A),n.options.zIndex=t.zIndex),this.box=this.contentBox=this.paddingBox=s}else if(super.reflow(e),t.rotation){const s=Z(t.margin);let n=this.box.unpad(s);this.targetBox=e,this.normalBox=n.clone(),n=this.rotate(),n.translate(s.left-s.right,s.top-s.bottom),this.rotatedBox=n.clone(),n.pad(s)}}createVisual(){const e=this.options;if(this.visual=new et.A({transform:this.rotationTransform(),zIndex:e.zIndex,noclip:e.noclip}),this.hasBox()){const t=M.w.fromRect(this.paddingBox.toRect(),this.visualStyle());this.visual.append(t)}}renderVisual(){if(this.options.visible)if(this.options.visual){const e=this.visual;e&&!C(e.options.noclip)&&(e.options.noclip=this.options.noclip),this.addVisual(),this.createAnimation()}else super.renderVisual()}visualContext(e){const t={text:this.content,rect:e.toRect(),sender:this.getSender(),options:this.options,createVisual:()=>(this._boxReflow=!0,this.reflow(e),this._boxReflow=!1,this.getDefaultVisual())};return this.data&&Object.assign(t,this.data),t}getDefaultVisual(){this.createVisual(),this.renderChildren();const e=this.visual;return delete this.visual,e}rotate(){const e=this.options;return this.box.rotate(e.rotation),this.align(this.targetBox,E,e.align),this.align(this.targetBox,D,e.vAlign),this.box}rotationTransform(){const e=this.options.rotation;if(!e)return null;const{x:t,y:i}=this.normalBox.center(),s=this.rotatedBox.center();return bt.A().translate(s.x-t,s.y-i).rotate(e,[t,i])}};class Mo extends K{constructor(e){super(e),this._textBox=new Ht(this.options.text,Object.assign({},this.options,{vAlign:this.options.position})),this.append(this._textBox)}reflow(e){super.reflow(e),this.box.snapTo(e,E)}static buildTitle(e,t){let s,i=e;return"string"==typeof e&&(i={text:e}),i=Object.assign({visible:!0},t,i),i&&i.visible&&i.text&&(s=new Mo(i)),s}static orderTitles(e){const t=[].concat(e),i=t.filter(n=>n&&n.options.position!==Y),s=t.filter(n=>n&&n.options.position===Y);return $d(i),$d(s),s.reverse(),i.concat(s)}}function $d(o){for(let e=1;e<o.length;e++){const t=o[e]._textBox,i=o[e-1]._textBox;i.options.margin=Object.assign(Z(i.options.margin),{bottom:0}),t.options.margin=Object.assign(Z(t.options.margin),{top:0})}}w(Mo,{color:pt,position:U,align:V,margin:Z(5),padding:Z(5)});const pn=Mo;class Qd extends Ht{constructor(e,t,i,s,n){super(t,n),this.text=t,this.value=e,this.index=i,this.dataItem=s,this.reflow(new k)}visualContext(e){const t=super.visualContext(e);return t.value=this.value,t.dataItem=this.dataItem,t.format=this.options.format,t.culture=this.options.culture,t}click(e,t){e.trigger("axisLabelClick",{element:me(t),value:this.value,text:this.text,index:this.index,dataItem:this.dataItem,axis:this.parent.options})}rotate(){if(this.options.alignRotation!==V){const e=this.normalBox.toRect(),t=this.rotationTransform();this.box=ms(e.bbox(t.matrix()))}else super.rotate();return this.box}rotationTransform(){const e=this.options,t=e.rotation;if(!t)return null;if(e.alignRotation===V)return super.rotationTransform();const i=bt.A().rotate(t).matrix(),s=this.normalBox.toRect(),n=this.targetBox.toRect(),a=e.rotationOrigin||U,l=a===U||a===Y?E:D,c=a===U||a===Y?D:E,h=a===U||a===N?n.origin:n.bottomRight(),d=s.topLeft().transformCopy(i),p=s.topRight().transformCopy(i),u=s.bottomRight().transformCopy(i),g=s.bottomLeft().transformCopy(i),f=At.A.fromPoints(d,p,u,g),m={[c]:n.origin[c]-f.origin[c]},v=Math.abs(d[c]+m[c]-h[c]),_=Math.abs(p[c]+m[c]-h[c]);let y,P;A(v,q)===A(_,q)?(y=d,P=p):_<v?(y=p,P=u):(y=d,P=g);const I=y[l]+(P[l]-y[l])/2;return m[l]=n.center()[l]-I,bt.A().translate(m.x,m.y).rotate(t)}}w(Qd,{_autoReflow:!1});const Fi=Qd;class Kd extends fi{constructor(e,t,i){super(t),this.fields=e,this.chartService=i,this.render()}hide(){this.options.visible=!1}show(){this.options.visible=!0}render(){const e=this.options;if(e.visible){const{label:t,icon:i}=e,s=new k,n=()=>this;let c,h,a=i.size,l=this.fields.text;if(C(t)&&t.visible){const p=kt(t);p?l=p(this.fields):t.format&&(l=this.chartService.format.auto(t.format,l)),t.color||(t.color=t.position===ua?"#fff":i.background),this.label=new Ht(l,x({},t)),this.label.aliasFor=n,t.position===ua&&!C(a)&&(i.type===jt?a=Math.max(this.label.box.width(),this.label.box.height()):(c=this.label.box.width(),h=this.label.box.height()),s.wrap(this.label.box))}i.width=c||a||7,i.height=h||a||7;const d=new Rt(x({},i));d.aliasFor=n,this.marker=d,this.append(d),this.label&&this.append(this.label),d.reflow(new k),this.wrapperBox=s.wrap(d.box)}}reflow(e){const{options:t,label:i,marker:s,wrapperBox:n}=this,a=e.center(),l=t.line.length,c=t.position;if(t.visible){let h,d,p;z(c,[N,$])?c===N?(p=n.alignTo(e,c).translate(-l,e.center().y-n.center().y),t.line.visible&&(h=[e.x1,a.y],this.linePoints=[h,[p.x2,a.y]],d=p.clone().wrapPoint(h))):(p=n.alignTo(e,c).translate(l,e.center().y-n.center().y),t.line.visible&&(h=[e.x2,a.y],this.linePoints=[h,[p.x1,a.y]],d=p.clone().wrapPoint(h))):c===Y?(p=n.alignTo(e,c).translate(e.center().x-n.center().x,l),t.line.visible&&(h=[a.x,e.y2],this.linePoints=[h,[a.x,p.y1]],d=p.clone().wrapPoint(h))):(p=n.alignTo(e,c).translate(e.center().x-n.center().x,-l),t.line.visible&&(h=[a.x,e.y1],this.linePoints=[h,[a.x,p.y2]],d=p.clone().wrapPoint(h))),s&&s.reflow(p),i&&(i.reflow(p),s&&(t.label.position===go&&i.box.alignTo(s.box,c),i.reflow(i.box))),this.contentBox=p,this.targetBox=e,this.box=d||p}}createVisual(){super.createVisual(),this.visual.options.noclip=this.options.noclip,this.options.visible&&this.createLine()}renderVisual(){const e=this.options,t=e.visual;e.visible&&t?(this.visual=t(Object.assign(this.fields,{sender:this.getSender(),rect:this.targetBox.toRect(),options:{background:e.background,border:e.background,icon:e.icon,label:e.label,line:e.line,position:e.position,visible:e.visible},createVisual:()=>{this.createVisual(),this.renderChildren();const i=this.visual;return delete this.visual,i}})),this.addVisual()):super.renderVisual()}createLine(){const e=this.options.line;if(this.linePoints){const t=M.w.fromPoints(this.linePoints,{stroke:{color:e.color,width:e.width,dashType:e.dashType}});Zt(t),this.visual.append(t)}}click(e,t){const i=this.eventArgs(t);e.trigger("noteClick",i)||t.preventDefault()}over(e,t){const i=this.eventArgs(t);e.trigger("noteHover",i)||t.preventDefault()}out(e,t){const i=this.eventArgs(t);e.trigger("noteLeave",i)}eventArgs(e){const t=this.options;return Object.assign(this.fields,{element:me(e),text:C(t.label)?t.label.text:"",visual:this.visual})}}w(Kd,{icon:{visible:!0,type:jt},label:{position:ua,visible:!0,align:V,vAlign:V},line:{visible:!0},visible:!0,position:U,zIndex:2});const Jd=Kd;let qd={format:(o,e)=>e,toString:o=>o,parseDate:o=>new Date(o),firstDay:()=>0};const tp=class r0{static register(e){qd=e}static get implementation(){return qd}},a0=/\{(\d+)(:[^\}]+)?\}/g,c0=class l0{constructor(e){this._intlService=e}get intl(){return this._intlService||tp.implementation}set intl(e){this._intlService=e}auto(e,...t){const i=this.intl;return Ut(e)&&e.match(Xh)?i.format(e,...t):i.toString(t[0],e)}localeAuto(e,t,i){const s=this.intl;let n;return n=Ut(e)&&e.match(Xh)?e.replace(a0,function(a,l,c){let h=t[parseInt(l,10)];return s.toString(h,c?c.substring(1):"",i)}):s.toString(t[0],e,i),n}},La=class h0{constructor(e,t={}){this._intlService=t.intlService,this.sender=t.sender||e,this.format=new c0(t.intlService),this.chart=e,this.rtl=!!t.rtl}get intl(){return this._intlService||tp.implementation}set intl(e){this._intlService=e,this.format.intl=e}notify(e,t){this.chart&&this.chart.trigger(e,t)}isPannable(e){const t=((this.chart||{}).options||{}).pannable;return t&&t.lock!==e}};let Va;const ep=class d0{static register(e){Va=e}static create(e,t){let i;return i=Va?Va.create(e,t):new Vi(e,Object.assign({},{multiTouch:!0,touchAction:"manipulation"},t)),i}};function ip(o,e){const{tickX:t,tickY:i,position:s}=o,n=new M.w({stroke:{width:e.width,color:e.color}});return o.vertical?n.moveTo(t,s).lineTo(t+e.size,s):n.moveTo(s,i).lineTo(s,i+e.size),Zt(n),n}function sp(o,e){const{lineStart:t,lineEnd:i,position:s}=o,n=new M.w({stroke:{width:e.width,color:e.color,dashType:e.dashType}});return o.vertical?n.moveTo(t,s).lineTo(i,s):n.moveTo(s,t).lineTo(s,i),Zt(n),n}class np extends K{constructor(e,t=new La){super(e),this.chartService=t,this.options.visible||(this.options=x({},this.options,{labels:{visible:!1},line:{visible:!1},margin:0,majorTickSize:0,minorTickSize:0})),this.options.minorTicks=x({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.minorTickType!==ga},this.options.minorTicks,{size:this.options.minorTickSize,align:this.options.minorTickType}),this.options.majorTicks=x({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.majorTickType!==ga},this.options.majorTicks,{size:this.options.majorTickSize,align:this.options.majorTickType}),this.initFields(),this.options._deferLabels||this.createLabels(),this.createTitle(),this.createNotes()}initFields(){}labelsRange(){return{min:this.options.labels.skip,max:this.labelsCount()}}normalizeLabelRotation(e){const t=e.rotation;re(t)&&(e.alignRotation=t.align,e.rotation=t.angle)}createLabels(){const e=this.options,i=x({},e.labels,{align:e.vertical?$:V,zIndex:e.zIndex}),s=Math.max(1,i.step);if(this.clearLabels(),i.visible){this.normalizeLabelRotation(i),"auto"===i.rotation&&(i.rotation=0,e.autoRotateLabels=!0);const n=this.labelsRange();for(let a=n.min;a<n.max;a+=s){let c=this.createAxisLabel(a,i,{index:a,count:n.max});c&&(this.append(c),this.labels.push(c))}}}clearLabels(){this.children=Kt(this.children,e=>!(e instanceof Fi)),this.labels=[]}clearTitle(){this.title&&(this.children=Kt(this.children,e=>e!==this.title),this.title=void 0)}clear(){this.clearLabels(),this.clearTitle()}lineBox(){const{options:e,box:t}=this,s=e.labels.mirror,n=s?t.x1:t.x2,a=s?t.y2:t.y1,l=e.line.width||0;return e.vertical?new k(n,t.y1,n,t.y2-l):new k(t.x1,a,t.x2-l,a)}createTitle(){const e=this.options,t=x({rotation:e.vertical?-90:0,text:"",zIndex:1,visualSize:!0},e.title);if(t.visible&&t.text){const i=new Ht(t.text,t);this.append(i),this.title=i}}createNotes(){const e=this.options,t=e.notes,i=t.data||[];this.notes=[];for(let s=0;s<i.length;s++){const n=x({},t,i[s]);n.value=this.parseNoteValue(n.value);const a=new Jd({value:n.value,text:n.label.text,dataItem:n},n,this.chartService);a.options.visible&&(C(a.options.position)?e.vertical&&!z(a.options.position,[N,$])?a.options.position=e.reverse?N:$:!e.vertical&&!z(a.options.position,[U,Y])&&(a.options.position=e.reverse?Y:U):a.options.position=e.vertical?e.reverse?N:$:e.reverse?Y:U,this.append(a),this.notes.push(a))}}parseNoteValue(e){return e}renderVisual(){super.renderVisual(),this.createPlotBands()}createVisual(){super.createVisual(),this.createBackground(),this.createLine()}gridLinesVisual(){let e=this._gridLines;return e||(e=this._gridLines=new et.A({zIndex:-2}),this.appendVisual(this._gridLines)),e}createTicks(e){const t=this.options,i=this.lineBox(),s=t.labels.mirror,n=t.majorTicks.visible?t.majorUnit:0,a={vertical:t.vertical};function l(c,h,d){const p=c.length,u=Math.max(1,h.step);if(h.visible)for(let g=h.skip;g<p;g+=u)C(d)&&g%d==0||(a.tickX=s?i.x2:i.x2-h.size,a.tickY=s?i.y1-h.size:i.y1,a.position=c[g],e.append(ip(a,h)))}l(this.getMajorTickPositions(),t.majorTicks),l(this.getMinorTickPositions(),t.minorTicks,n/t.minorUnit)}createLine(){const e=this.options,t=e.line,i=this.lineBox();if(t.width>0&&t.visible){const s=new M.w({stroke:{width:t.width,color:t.color,dashType:t.dashType}});s.moveTo(i.x1,i.y1).lineTo(i.x2,i.y2),e._alignLines&&Zt(s);const n=this._lineGroup=new et.A;n.append(s),this.visual.append(n),this.createTicks(n)}}getActualTickSize(){const e=this.options;let t=0;return e.majorTicks.visible&&e.minorTicks.visible?t=Math.max(e.majorTicks.size,e.minorTicks.size):e.majorTicks.visible?t=e.majorTicks.size:e.minorTicks.visible&&(t=e.minorTicks.size),t}createBackground(){const{options:e,box:t}=this,i=e.background;i&&(this._backgroundPath=M.w.fromRect(t.toRect(),{fill:{color:i},stroke:null}),this.visual.append(this._backgroundPath))}createPlotBands(){const e=this.options,t=e.plotBands||[],i=e.vertical,s=this.plotArea;if(0===t.length)return;const n=this._plotbandGroup=new et.A({zIndex:-1}),a=Kt(this.pane.axes,l=>l.options.vertical!==this.options.vertical)[0];for(let l=0;l<t.length;l++){let h,d,u,c=t[l],p=c.label;if(i?(h=(a||s.axisX).lineBox(),d=this.getSlot(c.from,c.to,!0)):(h=this.getSlot(c.from,c.to,!0),d=(a||s.axisY).lineBox()),p&&(p.vAlign=p.position||N,u=this.createPlotBandLabel(p,c,new k(h.x1,d.y1,h.x2,d.y2))),0!==h.width()&&0!==d.height()){const g=new At.A([h.x1,d.y1],[h.width(),d.height()]),f=M.w.fromRect(g,{fill:{color:c.color,opacity:c.opacity},stroke:null});n.append(f),u&&n.append(u)}}this.appendVisual(n)}createPlotBandLabel(e,t,i){if(!1===e.visible)return null;let n,s=e.text;if(C(e)&&e.visible){const a=kt(e);a?s=a({text:s,item:t}):e.format&&(s=this.chartService.format.auto(e.format,s)),e.color||(e.color=this.options.labels.color)}return n=new Ht(s,e),n.reflow(i),n.renderVisual(),n.visual}createGridLines(e){const t=this.options,{minorGridLines:i,majorGridLines:s,minorUnit:n,vertical:a}=t,l=e.options.line.visible,c=s.visible?t.majorUnit:0,h=e.lineBox(),d=h[a?"y1":"x1"],p={lineStart:h[a?"x1":"y1"],lineEnd:h[a?"x2":"y2"],vertical:a},u=[],g=this.gridLinesVisual();function f(m,v,_){const y=m.length,P=Math.max(1,v.step);if(v.visible)for(let I=v.skip;I<y;I+=P){let B=A(m[I]);z(B,u)||I%_!=0&&(!l||d!==B)&&(p.position=B,g.append(sp(p,v)),u.push(B))}}return f(this.getMajorTickPositions(),s),f(this.getMinorTickPositions(),i,c/n),g.children}reflow(e){const{options:t,labels:i,title:s}=this,n=t.vertical,a=i.length,l=n?ma:pa,c=s?s.box[l]():0,h=this.getActualTickSize()+t.margin+c,p=((this.getRoot()||{}).box||e)[l]();let u=0;for(let g=0;g<a;g++){let f=i[g].box[l]();f+h<=p&&(u=Math.max(u,f))}this.box=n?new k(e.x1,e.y1,e.x1+u+h,e.y2):new k(e.x1,e.y1,e.x2,e.y1+u+h),this.arrangeTitle(),this.arrangeLabels(),this.arrangeNotes()}getLabelsTickPositions(){return this.getMajorTickPositions()}labelTickIndex(e){return e.index}arrangeLabels(){const{options:e,labels:t}=this,i=this.labelsBetweenTicks(),s=e.vertical,n=e.labels.mirror,a=this.getLabelsTickPositions();for(let l=0;l<t.length;l++){const c=t[l],h=this.labelTickIndex(c),d=s?c.box.height():c.box.width(),p=a[h],u=a[h+1];let g,f;s?(g=i?p+(u-p)/2-d/2:p-d/2,f=g):i?(g=p,f=u):(g=p-d/2,f=g+d),this.positionLabel(c,n,g,f)}}positionLabel(e,t,i,s=i){const n=this.options,a=n.vertical,l=this.lineBox(),c=this.getActualTickSize()+n.margin;let h;if(a){let d=l.x2;t?(d+=c,e.options.rotationOrigin=N):(d-=c+e.box.width(),e.options.rotationOrigin=$),h=e.box.move(d,i)}else{let d=l.y1;t?(d-=c+e.box.height(),e.options.rotationOrigin=Y):(d+=c,e.options.rotationOrigin=U),h=new k(i,d,s,d+e.box.height())}e.reflow(h)}autoRotateLabelAngle(e,t){return e.width()<t?0:e.height()>t?-90:-45}autoRotateLabels(){if(!this.options.autoRotateLabels||this.options.vertical)return!1;const e=this.getMajorTickPositions(),t=this.labels,i=Math.min(t.length,e.length-1);let s=0;for(let n=0;n<i;n++){const a=Math.abs(e[n+1]-e[n]),c=this.autoRotateLabelAngle(t[n].box,a);if(0!==c&&(s=c),-90===s)break}if(0!==s){for(let n=0;n<t.length;n++)t[n].options.rotation=s,t[n].reflow(new k);return!0}}arrangeTitle(){const{options:e,title:t}=this,i=e.labels.mirror;t&&(e.vertical?(t.options.align=i?$:N,t.options.vAlign=t.options.position):(t.options.align=t.options.position,t.options.vAlign=i?U:Y),t.reflow(this.box))}arrangeNotes(){for(let e=0;e<this.notes.length;e++){const t=this.notes[e],i=t.options.value;let s;C(i)?(this.shouldRenderNote(i)?t.show():t.hide(),s=this.noteSlot(i)):t.hide(),t.reflow(s||this.lineBox())}}noteSlot(e){return this.getSlot(e)}alignTo(e){const t=e.lineBox(),i=this.options.vertical,s=i?D:E;this.box.snapTo(t,s),i?this.box.shrink(0,this.lineBox().height()-t.height()):this.box.shrink(this.lineBox().width()-t.width(),0),this.box[s+1]-=this.lineBox()[s+1]-t[s+1],this.box[s+2]-=this.lineBox()[s+2]-t[s+2]}axisLabelText(e,t,i){let s;const n=kt(t),a=()=>t.format?this.chartService.format.localeAuto(t.format,[e],t.culture):e;return s=n?n(Object.assign({},i,{get text(){return a()},value:e,format:t.format,culture:t.culture})):a(),s}slot(e,t,i){const s=this.getSlot(e,t,i);if(s)return s.toRect()}contentBox(){const e=this.box.clone(),t=this.labels;if(t.length){const i=this.options.vertical?D:E;if(this.chartService.isPannable(i)){const s=this.maxLabelOffset();e[i+1]-=s.start,e[i+2]+=s.end}else{t[0].options.visible&&e.wrap(t[0].box);const s=t[t.length-1];s.options.visible&&e.wrap(s.box)}}return e}maxLabelOffset(){const{vertical:e,reverse:t}=this.options,i=this.labelsBetweenTicks(),s=this.getLabelsTickPositions(),n=e?D:E,a=this.labels,l=t?1:0,c=t?0:1;let h=0,d=0;for(let p=0;p<a.length;p++){const u=a[p],g=this.labelTickIndex(u);let f,m;i?(f=s[g+l],m=s[g+c]):f=m=s[g],h=Math.max(h,f-u.box[n+1]),d=Math.max(d,u.box[n+2]-m)}return{start:h,end:d}}limitRange(e,t,i,s,n){const a=this.options;if(e<i&&n<0&&(!C(a.min)||a.min<=i)||s<t&&n>0&&(!C(a.max)||s<=a.max))return null;if(t<i&&n>0||s<e&&n<0)return{min:e,max:t};const l=t-e;let c=e,h=t;return e<i&&n<0?(c=O(e,i,s),h=O(e+l,i+l,s)):t>s&&n>0&&(h=O(t,i,s),c=O(t-l,i,s-l)),{min:c,max:h}}valueRange(){return{min:this.seriesMin,max:this.seriesMax}}lineDir(){const{vertical:e,reverse:t}=this.options;return(e?-1:1)*(t?-1:1)}lineInfo(){const{vertical:e}=this.options,t=this.lineBox(),i=e?t.height():t.width(),s=e?D:E,n=this.lineDir(),l=s+(1===n?1:2).toString();return{axis:s,axisOrigin:l,axisDir:n,lineBox:t,lineSize:i,lineStart:t[l]}}pointOffset(e){const{axis:t,axisDir:i,axisOrigin:s,lineBox:n,lineSize:a}=this.lineInfo();return(i>0?e[t]-n[s]:n[s]-e[t])/a}scaleToDelta(e,t){const s=O(e,-.999,.999);let n;return n=s>0?t*Math.min(1,s):t-t/(1+s),n}labelsBetweenTicks(){return!this.options.justified}prepareUserOptions(){}}w(np,{labels:{visible:!0,rotation:0,mirror:!1,step:1,skip:0},line:{width:1,color:pt,visible:!0},title:{visible:!0,position:V},majorTicks:{align:go,size:4,skip:0,step:1},minorTicks:{align:go,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:go,minorTickType:ga,majorGridLines:{skip:0,step:1},minorGridLines:{visible:!1,width:1,color:pt,skip:0,step:1},margin:5,visible:!0,reverse:!1,justified:!0,notes:{label:{text:""}},_alignLines:!0,_deferLabels:!1});const un=np,Po="milliseconds",Ba="seconds",Fa="minutes",gn="hours",Pe="days",fn="weeks",Ni="months",je="years",Na=1e3,xs=60*Na,Eo=60*xs,Ue=24*Eo,za=7*Ue,ja=31*Ue,Ua=365*Ue,Ee={years:Ua,months:ja,weeks:za,days:Ue,hours:Eo,minutes:xs,seconds:Na,milliseconds:1};function Ga(o,e){return o.getTime()-e-(o.getTimezoneOffset()-e.getTimezoneOffset())*xs}function Mt(o,e){return new Date(o.getTime()+e)}function it(o){let e;return o instanceof Date?e=o:o&&(e=new Date(o)),e}function Do(o,e){return 0===e&&23===o.getHours()&&(o.setHours(o.getHours()+2),!0)}function Dt(o,e,t,i){let s=o;if(o){let n=it(o);const a=n.getHours();t===je?(s=new Date(n.getFullYear()+e,0,1),Do(s,0)):t===Ni?(s=new Date(n.getFullYear(),n.getMonth()+e,1),Do(s,a)):t===fn?(s=Dt(function u0(o,e=0){let t=0,i=o.getDay();if(!isNaN(i))for(;i!==e;)0===i?i=6:i--,t++;return Mt(o,-t*Ue)}(n,i),7*e,Pe),Do(s,a)):t===Pe?(s=new Date(n.getFullYear(),n.getMonth(),n.getDate()+e),Do(s,a)):t===gn?s=function g0(o,e){const t=new Date(o);t.setMinutes(0,0,0);const i=(o.getTimezoneOffset()-t.getTimezoneOffset())*xs;return Mt(t,i+e*Eo)}(n,e):t===Fa?(s=Mt(n,e*xs),s.getSeconds()>0&&s.setSeconds(0)):t===Ba?s=Mt(n,e*Na):t===Po&&(s=Mt(n,e)),t!==Po&&s.getMilliseconds()>0&&s.setMilliseconds(0)}return s}function Ha(o,e,t){return Dt(it(o),0,e,t)}function op(o,e,t){const i=it(o);return i&&Ha(i,e,t).getTime()===i.getTime()?i:Dt(i,1,e,t)}function Oo(o,e){return o&&e?o.getTime()-e.getTime():-1}function De(o,e){return o.getTime()-e}function st(o){if(Pt(o)){let e=[];for(let t=0;t<o.length;t++)e.push(st(o[t]));return e}if(o)return it(o).getTime()}function Io(o,e){return o&&e?st(o)===st(e):o===e}function rp(o,e,t){return Ga(o,e)/Ee[t]}function zi(o,e,t,i){const s=it(o),n=it(e);let a;return a=t===Ni?s.getMonth()-n.getMonth()+12*(s.getFullYear()-n.getFullYear())+rp(s,new Date(s.getFullYear(),s.getMonth()),Pe)/new Date(s.getFullYear(),s.getMonth()+1,0).getDate():t===je?s.getFullYear()-n.getFullYear()+zi(s,new Date(s.getFullYear(),0),Ni,1)/12:t===Pe||t===fn?rp(s,n,t):De(s,e)/Ee[t],a/i}function Xa(o,e,t){let i;return i=t===je?e.getFullYear()-o.getFullYear():t===Ni?12*Xa(o,e,je)+e.getMonth()-o.getMonth():t===Pe?Math.floor(De(e,o)/Ue):Math.floor(De(e,o)/Ee[t]),i}function Et(o,e){let t;return t=Ut(e)&&o.parseDate(e)||it(e),t}function ap(o,e){if(Pt(e)){const t=[];for(let i=0;i<e.length;i++)t.push(Et(o,e[i]));return t}return Et(o,e)}function lp(o,e){return H(o.weekStartDay)?o.weekStartDay:e&&e.firstDay?e.firstDay():0}class Ro extends un{initFields(){this._ticks={}}categoriesHash(){return""}clone(){const e=new Ro(Object.assign({},this.options,{categories:this.options.srcCategories}),this.chartService);return e.createLabels(),e}initUserOptions(e){const t=e.categories||[],i=void 0!==e.min,s=void 0!==e.max;if(e.srcCategories=e.categories=t,(i||s)&&t.length){const n=i?Math.floor(e.min):0;let a;a=s?e.justified?Math.floor(e.max)+1:Math.ceil(e.max):t.length,e.categories=e.categories.slice(n,a)}return e}rangeIndices(){const e=this.options,t=e.categories.length||1,i=H(e.min)?e.min%1:0;let s;return s=H(e.max)&&e.max%1!=0&&e.max<this.totalRange().max?t-(1-e.max%1):t-(e.justified?1:0),{min:i,max:s}}range(){const e=this.options;return{min:H(e.min)?e.min:0,max:H(e.max)?e.max:this.totalRange().max}}roundedRange(){return this.range()}totalRange(){const e=this.options;return{min:0,max:Math.max(this._seriesMax||0,e.srcCategories.length)-(e.justified?1:0)}}scaleOptions(){const{min:e,max:t}=this.rangeIndices(),i=this.lineBox();return{scale:(this.options.vertical?i.height():i.width())/(t-e||1)*(this.options.reverse?-1:1),box:i,min:e,max:t}}arrangeLabels(){super.arrangeLabels(),this.hideOutOfRangeLabels()}hideOutOfRangeLabels(){const{box:e,labels:t}=this;if(t.length>0){const i=this.options.vertical?D:E,s=e[i+1],n=e[i+2],a=t[0],l=ft(t);(a.box[i+1]>n||a.box[i+2]<s)&&(a.options.visible=!1),(l.box[i+1]>n||l.box[i+2]<s)&&(l.options.visible=!1)}}getMajorTickPositions(){return this.getTicks().majorTicks}getMinorTickPositions(){return this.getTicks().minorTicks}getLabelsTickPositions(){return this.getTicks().labelTicks}tickIndices(e){const{min:t,max:i}=this.rangeIndices(),s=Math.ceil(i);let n=Math.floor(t);const a=[];for(;n<=s;)a.push(n),n+=e;return a}getTickPositions(e){const{vertical:t,reverse:i}=this.options,{scale:s,box:n,min:a}=this.scaleOptions(),l=n[(t?D:E)+(i?2:1)],c=this.tickIndices(e),h=[];for(let d=0;d<c.length;d++)h.push(l+A(s*(c[d]-a),3));return h}getTicks(){const e=this.options,t=this._ticks,i=this.rangeIndices(),s=this.lineBox(),n=s.getHash()+i.min+","+i.max+e.reverse+e.justified;if(t._hash!==n){const a=e.minorTicks.visible||e.minorGridLines.visible;t._hash=n,t.labelTicks=this.getTickPositions(1),t.majorTicks=this.filterOutOfRangePositions(t.labelTicks,s),t.minorTicks=a?this.filterOutOfRangePositions(this.getTickPositions(.5),s):[]}return t}filterOutOfRangePositions(e,t){if(!e.length)return e;const i=this.options.vertical?D:E,s=c=>t[i+1]<=c&&c<=t[i+2],n=e.length-1;let a=0;for(;!s(e[a])&&a<=n;)a++;let l=n;for(;!s(e[l])&&l>=0;)l--;return e.slice(a,l+1)}lineInfo(){const{vertical:e,reverse:t}=this.options,i=this.lineBox(),s=e?i.height():i.width(),n=e?D:E,a=t?-1:1,c=n+(1===a?1:2).toString();return{axis:n,axisOrigin:c,axisDir:a,lineBox:i,lineSize:s,lineStart:i[c]}}lineDir(){const{reverse:e}=this.options;return e?-1:1}getSlot(e,t,i){const s=this.options,{reverse:n,justified:a}=s,{scale:l,box:c,min:h}=this.scaleOptions(),{axis:d,lineStart:p}=this.lineInfo(),u=c.clone(),g=void 0===t,f=R(e,0);let m=R(t,f);m=Math.max(m-1,f),m=Math.max(f,m);let v=p+(f-h)*l,_=p+(m+1-h)*l;return g&&a&&(_=v),i&&(v=O(v,c[d+1],c[d+2]),_=O(_,c[d+1],c[d+2])),u[d+1]=n?_:v,u[d+2]=n?v:_,u}limitSlot(e){const i=this.options.vertical?D:E,s=this.lineBox(),n=e.clone();return n[i+1]=O(e[i+1],s[i+1],s[i+2]),n[i+2]=O(e[i+2],s[i+1],s[i+2]),n}slot(e,t,i){const s=Math.floor(this.options.min||0);let n=e,a=t;return"string"==typeof n?n=this.categoryIndex(n):H(n)&&(n-=s),"string"==typeof a?a=this.categoryIndex(a):H(a)&&(a-=s),super.slot(n,a,i)}pointCategoryIndex(e){const{reverse:t,justified:i,vertical:s}=this.options,n=s?D:E,{scale:a,box:l,min:c,max:h}=this.scaleOptions(),p=l[n+1],g=e[n];if(g<p||g>l[n+2])return null;let f=(t?h:c)+(g-p)/a;const m=f%1;return i?f=Math.round(f):0===m&&f>0&&f--,Math.floor(f)}getCategory(e){const t=this.pointCategoryIndex(e);return null===t?null:this.options.categories[t]}categoryIndex(e){return this.totalIndex(e)-Math.floor(this.options.min||0)}categoryAt(e,t){const i=this.options;return(t?i.srcCategories:i.categories)[e]}categoriesCount(){return(this.options.categories||[]).length}translateRange(e){const t=this.options,i=this.lineBox(),s=t.vertical?i.height():i.width(),n=t.categories.length,l=A(e/(s/n),q);return{min:l,max:n+l}}scaleRange(e,t){const i=Math.abs(this.pointOffset(t)),s=this.limitedRangeIndices(),a=this.scaleToDelta(e,s.max-s.min),h=s.min+i*a;let d=s.max-(1-i)*a;return d-h<.1&&(d=h+.1),{min:h,max:d}}zoomRange(e,t){const{min:i,max:s}=this.totalRange(),n=this.scaleRange(e,t);return{min:O(n.min,i,s),max:O(n.max,i,s)}}labelsCount(){const e=this.labelsRange();return e.max-e.min}labelsRange(){const e=this.options,{justified:t,labels:i}=e;let{min:s,max:n}=this.limitedRangeIndices(!0);const a=Math.floor(s);let l;return t?(s=Math.ceil(s),n=Math.floor(n)):(s=Math.floor(s),n=Math.ceil(n)),l=s>i.skip?i.skip+i.step*Math.ceil((s-i.skip)/i.step):i.skip,{min:l-a,max:(e.categories.length?n+(t?1:0):0)-a}}createAxisLabel(e,t,i){const s=this.options,n=s.dataItems?s.dataItems[e]:null,a=R(s.categories[e],"");i.dataItem=n;const l=this.axisLabelText(a,t,i);return new Fi(a,l,e,n,t)}shouldRenderNote(e){const t=this.limitedRangeIndices();return Math.floor(t.min)<=e&&e<=Math.ceil(t.max)}noteSlot(e){const i=e-Math.floor(this.options.min||0);return this.getSlot(i)}arrangeNotes(){super.arrangeNotes(),this.hideOutOfRangeNotes()}hideOutOfRangeNotes(){const{notes:e,box:t}=this;if(e&&e.length){const i=this.options.vertical?D:E,s=t[i+1],n=t[i+2];for(let a=0;a<e.length;a++){const l=e[a];l.box&&(n<l.box[i+1]||l.box[i+2]<s)&&l.hide()}}}pan(e){const t=this.limitedRangeIndices(!0),{scale:i}=this.scaleOptions(),s=A(e/i,q),n=this.totalRange();return this.limitRange(t.min+s,t.max+s,0,n.max,s)}pointsRange(e,t){const{reverse:i,vertical:s}=this.options,n=s?D:E,a=this.limitedRangeIndices(!0),{scale:l,box:c}=this.scaleOptions(),h=c[n+(i?2:1)],u=a.min+(e[n]-h)/l,g=a.min+(t[n]-h)/l,f=Math.min(u,g),m=Math.max(u,g);if(m-f>=.01)return{min:f,max:m}}valueRange(){return this.range()}totalIndex(e){const t=this.options;return this._categoriesMap?this._categoriesMap.get(e):function m0(o,e){return o instanceof Date?e.findIndex(t=>Io(t,o)):e.indexOf(o)}(e,t.srcCategories)}currentRangeIndices(){const e=this.options;let i,t=0;return H(e.min)&&(t=Math.floor(e.min)),i=H(e.max)?e.justified?Math.floor(e.max):Math.ceil(e.max)-1:this.totalCount()-1,{min:t,max:i}}limitedRangeIndices(e){const t=this.options;let s,i=H(t.min)?t.min:0;if(s=H(t.max)?t.max:H(t.min)?i+t.categories.length:this.totalRange().max||1,e){const n=this.totalRange();i=O(i,0,n.max),s=O(s,0,n.max)}return{min:i,max:s}}totalRangeIndices(){return{min:0,max:this.totalRange().max||1}}indexCategories(){if(!this._categoriesMap){const e=this._categoriesMap=new zv,t=this.options.srcCategories;for(let i=0;i<t.length;i++)e.set(t[i],i)}}totalCount(){return Math.max(this.options.srcCategories.length,this._seriesMax||0)}}w(Ro,{type:"category",vertical:!1,majorGridLines:{visible:!1,width:1,color:pt},labels:{zIndex:1},justified:!1,_deferLabels:!0});const Ge=Ro,dp={milliseconds:"HH:mm:ss.fff",seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},He=[Po,Ba,Fa,gn,Pe,fn,Ni,je],Lo="fit";function Vo(o,e){e&&(o._range=void 0);let t=o._range;return t||(t=o._range=ka(o),t.min=it(t.min),t.max=it(t.max)),t}class v0{constructor(e){this.options=e}displayIndices(){return{min:0,max:1}}displayRange(){return{}}total(){return{}}valueRange(){return{}}valueIndex(){return-1}values(){return[]}totalIndex(){return-1}valuesCount(){return 0}totalCount(){return 0}dateAt(){return null}}class Ya{constructor(e,t,i){this.options=i,i.baseUnitStep=i.baseUnitStep||1;const{roundToBaseUnit:s,justified:n}=i;this.start=Dt(e,0,i.baseUnit,i.weekStartDay);const a=this.roundToTotalStep(t),l=!n&&Io(t,a)&&!i.justifyEnd;this.end=this.roundToTotalStep(t,!n,l?1:0);const c=i.min||e;this.valueStart=this.roundToTotalStep(c),this.displayStart=s?this.valueStart:c;const h=i.max;if(h){const d=!n&&Io(h,this.roundToTotalStep(h))?-1:0;this.valueEnd=this.roundToTotalStep(h,!1,d),this.displayEnd=s?this.roundToTotalStep(h,!n):i.max}else this.valueEnd=a,this.displayEnd=s||l?this.end:t;this.valueEnd<this.valueStart&&(this.valueEnd=this.valueStart),this.displayEnd<=this.displayStart&&(this.displayEnd=this.roundToTotalStep(this.displayStart,!1,1))}displayRange(){return{min:this.displayStart,max:this.displayEnd}}displayIndices(){if(!this._indices){const e=this.options,{baseUnit:t,baseUnitStep:i}=e,s=zi(this.displayStart,this.valueStart,t,i),n=zi(this.displayEnd,this.valueStart,t,i);this._indices={min:s,max:n}}return this._indices}total(){return{min:this.start,max:this.end}}totalCount(){return this.totalIndex(this.end)+(this.options.justified?1:0)}valueRange(){return{min:this.valueStart,max:this.valueEnd}}valueIndex(e){const t=this.options;return Math.floor(zi(e,this.valueStart,t.baseUnit,t.baseUnitStep))}totalIndex(e){const t=this.options;return Math.floor(zi(e,this.start,t.baseUnit,t.baseUnitStep))}dateIndex(e){const t=this.options;return zi(e,this.valueStart,t.baseUnit,t.baseUnitStep)}valuesCount(){return this.valueIndex(this.valueEnd)+1}values(){let e=this._values;if(!e){const t=this.options,i=this.valueRange();this._values=e=[];for(let s=i.min;s<=i.max;)e.push(s),s=Dt(s,t.baseUnitStep,t.baseUnit,t.weekStartDay)}return e}dateAt(e,t){const i=this.options;return Dt(t?this.start:this.valueStart,i.baseUnitStep*e,i.baseUnit,i.weekStartDay)}roundToTotalStep(e,t,i){const{baseUnit:s,baseUnitStep:n,weekStartDay:a}=this.options,l=this.start,c=zi(e,l,s,n);let h=t?Math.ceil(c):Math.floor(c);return i&&(h+=i),Dt(l,h*n,s,a)}}function up(o,e,t){const i=Vo(o.categories),s=(o.max||i.max)-(o.min||i.min),{autoBaseUnitSteps:n,maxDateGroups:a}=o,l=o.baseUnit===Lo;let u,g,f,c=e?He.indexOf(e):0,h=l?He[c++]:o.baseUnit,d=s/Ee[h],p=d;for(;!g||d>=a;){u=u||n[h].slice(0);do{f=u.shift()}while(f&&e===h&&f<t);if(f)g=f,d=p/g;else{if(h===ft(He)){g=Math.ceil(p/a);break}if(!l){d>a&&(g=Math.ceil(p/a));break}h=He[c++]||ft(He),p=s/Ee[h],u=null}}o.baseUnitStep=g,o.baseUnit=h}class Bo extends Ge{clone(){const e=new Bo(Object.assign({},this.options),this.chartService);return e.createLabels(),e}categoriesHash(){const e=this.dataRange.total().min;return this.options.baseUnit+this.options.baseUnitStep+e}initUserOptions(e){return e}initFields(){super.initFields();const e=this.chartService,t=e.intl;let i=this.options,s=i.categories||[];if(s._parsed||(s=ap(t,s),s._parsed=!0),i=x({roundToBaseUnit:!0},i,{categories:s,min:Et(t,i.min),max:Et(t,i.max),weekStartDay:lp(i,t)}),e.panning&&e.isPannable(i.vertical?D:E)&&(i.roundToBaseUnit=!1),i.userSetBaseUnit=i.userSetBaseUnit||i.baseUnit,i.userSetBaseUnitStep=i.userSetBaseUnitStep||i.baseUnitStep,this.options=i,i.srcCategories=s,s.length>0){const n=Vo(s,!0),a=i.maxDivisions,l=function _0(o){const e=(o.baseUnit||"").toLowerCase();return e!==Lo&&!z(e,He)&&function b0(o){const e=o.categories,t=C(e)?e.length:0;let s,n,i=gt;for(let a=0;a<t;a++){const l=e[a];if(l&&s){let c=Math.abs(Ga(l,s));0!==c&&(i=Math.min(i,c),n=i>=Ua?je:i>=ja-3*Ue?Ni:i>=za?fn:i>=Ue?Pe:i>=Eo?gn:i>=xs?Fa:Ba)}s=l}o.baseUnit=n||Pe}(o),(e===Lo||"auto"===o.baseUnitStep)&&up(o),o}(i),c=i._forecast;if(c&&(c.before>0&&(n.min=Dt(n.min,-c.before,l.baseUnit,l.weekStartDay)),c.after>0&&(n.max=Dt(n.max,c.after,l.baseUnit,l.weekStartDay))),this.dataRange=new Ya(n.min,n.max,l),a){const h=this.dataRange.displayRange(),d=Object.assign({},i,{justified:!0,roundToBaseUnit:!1,baseUnit:"fit",min:h.min,max:h.max,maxDateGroups:a}),p=this.dataRange.options;up(d,p.baseUnit,p.baseUnitStep),this.divisionRange=new Ya(n.min,n.max,d)}else this.divisionRange=this.dataRange}else i.baseUnit=i.baseUnit||Pe,this.dataRange=this.divisionRange=new v0(i);this.rangeLabels=[]}tickIndices(e){const{dataRange:t,divisionRange:i}=this,s=i.valuesCount();if(!this.options.maxDivisions||!s)return super.tickIndices(e);const n=[];let a=i.values(),l=0;this.options.justified||(a=a.concat(i.dateAt(s)),l=.5);for(let c=0;c<a.length;c++)if(n.push(t.dateIndex(a[c])+l),1!==e&&c>=1){const h=n.length-1;n.splice(c,0,n[h-1]+(n[h]-n[h-1])*e)}return n}shouldRenderNote(e){const t=this.range(),i=this.options.categories||[];return Oo(e,t.min)>=0&&Oo(e,t.max)<=0&&i.length}parseNoteValue(e){return Et(this.chartService.intl,e)}noteSlot(e){return this.getSlot(e)}translateRange(e){const t=this.options,{baseUnit:i,weekStartDay:s,vertical:n}=t,a=this.lineBox(),l=n?a.height():a.width();let c=this.range();const d=A(e/(l/(c.max-c.min)),q);if(c.min&&c.max){const p=Mt(t.min||c.min,d),u=Mt(t.max||c.max,d);c={min:Dt(p,0,i,s),max:Dt(u,0,i,s)}}return c}labelsRange(){return{min:this.options.labels.skip,max:this.divisionRange.valuesCount()}}pan(e){if(this.isEmpty())return null;const t=this.options,i=this.lineBox(),s=t.vertical?i.height():i.width(),{min:n,max:a}=this.dataRange.displayRange(),l=this.dataRange.total(),h=A(e/(s/(a-n)),q)*(t.reverse?-1:1),d=Mt(n,h),p=Mt(a,h),u=this.limitRange(st(d),st(p),st(l.min),st(l.max),h);return u?(u.min=it(u.min),u.max=it(u.max),u.baseUnit=t.baseUnit,u.baseUnitStep=t.baseUnitStep||1,u.userSetBaseUnit=t.userSetBaseUnit,u.userSetBaseUnitStep=t.userSetBaseUnitStep,u):void 0}pointsRange(e,t){if(this.isEmpty())return null;const i=super.pointsRange(e,t),s=this.dataRange.displayRange(),n=this.dataRange.displayIndices(),a=De(s.max,s.min)/(n.max-n.min),l=this.options;return{min:Mt(s.min,i.min*a),max:Mt(s.min,i.max*a),baseUnit:l.userSetBaseUnit||l.baseUnit,baseUnitStep:l.userSetBaseUnitStep||l.baseUnitStep}}scaleRange(e,t){if(this.isEmpty())return{};const i=this.options,s=i.userSetBaseUnit===Lo,n=this.dataRange.total(),{min:a,max:l}=this.dataRange.displayRange(),c=Math.abs(this.pointOffset(t)),d=this.scaleToDelta(e,l-a),p=Math.round(c*d),u=Math.round((1-c)*d);let{baseUnit:g}=this.dataRange.options,f=new Date(a.getTime()+p),m=new Date(l.getTime()-u);if(s){const{autoBaseUnitSteps:v,maxDateGroups:_}=i,y=ft(v[g])*_*Ee[g],P=De(l,a),I=De(m,f);let G,Q,B=He.indexOf(g);if(I<Ee[g]&&g!==Po)g=He[B-1],G=ft(v[g]),Q=(P-(_-1)*G*Ee[g])/2,f=Mt(a,Q),m=Mt(l,-Q);else if(I>y&&g!==je){let tt=0;do{B++,g=He[B],tt=0,Q=2*Ee[g];do{G=v[g][tt],tt++}while(tt<v[g].length&&Q*G<P)}while(g!==je&&Q*G<P);Q=(Q*G-P)/2,Q>0&&(f=Mt(a,-Q),m=Mt(l,Q),f=Mt(f,O(m,n.min,n.max)-m),m=Mt(m,O(f,n.min,n.max)-f))}}return f&&m&&De(m,f)>0?{min:f,max:m,baseUnit:i.userSetBaseUnit||i.baseUnit,baseUnitStep:i.userSetBaseUnitStep||i.baseUnitStep}:void 0}zoomRange(e,t){const i=this.dataRange.total(),s=this.scaleRange(e,t);return s&&(s.min<i.min&&(s.min=i.min),s.max>i.max&&(s.max=i.max)),s}range(){return this.dataRange.displayRange()}createLabels(){super.createLabels(),this.createRangeLabels()}clearLabels(){super.clearLabels(),this.rangeLabels=[]}arrangeLabels(){this.arrangeRangeLabels(),super.arrangeLabels()}arrangeRangeLabels(){const{options:e,rangeLabels:t}=this;if(0===t.length)return;const i=this.lineBox(),s=e.vertical,n=e.rangeLabels.mirror||e.labels.mirror,a=t[0];if(a){const c=s?i.y1-a.box.height()/2:i.x1;this.positionLabel(a,n,c)}const l=t[1];if(l){const c=s?i.y2-l.box.height()/2:i.x2;this.positionLabel(l,n,c)}}autoRotateLabels(){super.autoRotateLabels(),this.autoRotateRangeLabels()}hideOutOfRangeLabels(){super.hideOutOfRangeLabels(),this.hideOverlappingLabels()}hideOverlappingLabels(){const{rangeLabels:e,labels:t}=this;if(0===e.length)return;function i(a,l){return!(l.options.visible&&!l.box.overlaps(a.box)||(l.options.visible=!1,0))}const s=e[0];if(s&&s.options.visible)for(let a=0;a<t.length&&i(s,t[a]);a++);const n=e[1];if(n&&n.options.visible)for(let a=t.length-1;a>0&&i(n,t[a]);--a);}contentBox(){const e=super.contentBox(),t=this.rangeLabels;for(let i=0;i<t.length;i++){const s=t[i];s.options.visible&&e.wrap(s.box)}return e}createAxisLabel(e,t,i={}){const s=this.options,n=s.dataItems&&!s.maxDivisions?s.dataItems[e]:null,a=this.divisionRange.dateAt(e);t.format=t.format||t.dateFormats[this.divisionRange.options.baseUnit],i.dataItem=n;const c=this.axisLabelText(a,t,i);if(c)return new Fi(a,c,e,n,t)}createRangeLabels(){const{displayStart:e,displayEnd:t}=this.divisionRange,i=this.options,s=Object.assign({},i.labels,i.rangeLabels,{align:V,zIndex:i.zIndex});if(!0!==s.visible)return;this.normalizeLabelRotation(s),s.alignRotation=V,"auto"===s.rotation&&(s.rotation=0,i.autoRotateRangeLabels=!0),s.format=s.format||s.dateFormats[this.divisionRange.options.baseUnit];const a=(h,d,p)=>{if(p){const u=new Fi(d,p,h,null,s);this.append(u),this.rangeLabels.push(u)}};a(0,e,this.axisLabelText(e,s,{index:0,count:2})),a(1,t,this.axisLabelText(t,s,{index:1,count:2}))}autoRotateRangeLabels(){const e=this.rangeLabels;if(!this.options.autoRotateRangeLabels||this.options.vertical||2!==e.length)return;const t=(s,n,a)=>{const l=2*Math.abs(n[a+1]-n[a]),c=this.autoRotateLabelAngle(s.box,l);0!==c&&(s.options.rotation=c,s.reflow(new k))},i=this.getMajorTickPositions();t(e[0],i,0),t(e[1],i,i.length-2)}categoryIndex(e){return this.dataRange.valueIndex(e)}slot(e,t,i){const s=this.dataRange;let n=e,a=t;n instanceof Date&&(n=s.dateIndex(n)),a instanceof Date&&(a=s.dateIndex(a));const l=this.getSlot(n,a,i);if(l)return l.toRect()}getSlot(e,t,i){let s=e,n=t;return typeof s===tn&&(s=this.categoryIndex(s)),typeof n===tn&&(n=this.categoryIndex(n)),super.getSlot(s,n,i)}valueRange(){const t=Vo(this.options.srcCategories);return{min:it(t.min),max:it(t.max)}}categoryAt(e,t){return this.dataRange.dateAt(e,t)}categoriesCount(){return this.dataRange.valuesCount()}rangeIndices(){return this.dataRange.displayIndices()}labelsBetweenTicks(){return!this.divisionRange.options.justified}prepareUserOptions(){this.isEmpty()||(this.options.categories=this.dataRange.values())}getCategory(e){const t=this.pointCategoryIndex(e);return null===t?null:this.dataRange.dateAt(t)}totalIndex(e){return this.dataRange.totalIndex(e)}currentRangeIndices(){const e=this.dataRange.valueRange();return{min:this.dataRange.totalIndex(e.min),max:this.dataRange.totalIndex(e.max)}}totalRange(){return this.dataRange.total()}totalRangeIndices(){const e=this.dataRange.total();return{min:this.dataRange.totalIndex(e.min),max:this.dataRange.totalIndex(e.max)}}totalCount(){return this.dataRange.totalCount()}isEmpty(){return!this.options.srcCategories.length}roundedRange(){if(!1!==this.options.roundToBaseUnit||this.isEmpty())return this.range();const e=this.options,t=Vo(e.srcCategories);return new Ya(t.min,t.max,Object.assign({},e,{justified:!1,roundToBaseUnit:!0,justifyEnd:!1})).displayRange()}}w(Bo,{type:Fe,labels:{dateFormats:dp},rangeLabels:{visible:!1},autoBaseUnitSteps:{milliseconds:[1,10,100],seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10});const mn=Bo;function gp(o,e){return A(Math.floor(o/e)*e,q)}function Fo(o,e){return A(Math.ceil(o/e)*e,q)}function No(o){return Math.max(Math.min(o,3e5),-3e5)}const Wa=Math.pow(10,-9);class zo extends un{constructor(e,t,i,s){super(Object.assign({},i,{seriesMin:e,seriesMax:t}),s)}initUserOptions(e){const t=function C0(o,e,t){const i=t.narrowRange;let s=function y0(o,e,t){if(!o&&!e)return 0;let i;if(o>=0&&e>=0){const s=o===e?0:o;if(!1===t||!t&&(e-s)/e>.2)return 0;i=Math.max(0,s-(e-s)/2)}else i=o;return i}(o,e,i),n=function w0(o,e,t){if(!o&&!e)return 1;let i;if(o<=0&&e<=0){const s=o===e?0:e;let n=Math.abs((s-o)/s);if(!1===t||!t&&n>.2)return 0;i=Math.min(0,s-(o-s)/2)}else i=e;return i}(o,e,i);const a=gs(s,n),l={majorUnit:a};return!1!==t.roundToMajorUnit&&(s<0&&fp(s,a,1/3)&&(s-=a),n>0&&fp(n,a,1/3)&&(n+=a)),l.min=gp(s,a),l.max=Fo(n,a),l}(e.seriesMin,e.seriesMax,e);return this.totalOptions=function k0(o,e){return{min:C(e.min)?Math.min(o.min,e.min):o.min,max:C(e.max)?Math.max(o.max,e.max):o.max,majorUnit:o.majorUnit}}(t,e),function S0(o,e){let i,s,t=e;if(e){(function A0(o,e){for(let t=0;t<e.length;t++){const i=e[t];null===o[i]&&(o[i]=void 0)}})(e,["min","max"]),i=C(e.min),s=C(e.max);const a=i||s;a&&e.min===e.max&&(e.min>0?e.min=0:e.max=1),e.majorUnit?(o.min=gp(o.min,e.majorUnit),o.max=Fo(o.max,e.majorUnit)):a&&(t=x(o,e),o.majorUnit=gs(t.min,t.max))}o.minorUnit=(t.majorUnit||o.majorUnit)/5;const n=x(o,t);return n.min>=n.max&&(i&&!s?n.max=n.min+n.majorUnit:!i&&s&&(n.min=n.max-n.majorUnit)),n}(t,e)}initFields(){this.totalMin=this.totalOptions.min,this.totalMax=this.totalOptions.max,this.totalMajorUnit=this.totalOptions.majorUnit,this.seriesMin=this.options.seriesMin,this.seriesMax=this.options.seriesMax}clone(){return new zo(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)}startValue(){return 0}range(){const e=this.options;return{min:e.min,max:e.max}}getDivisions(e){if(0===e)return 1;const t=this.options;return Math.floor(A((t.max-t.min)/e,3))+1}getTickPositions(e,t){const i=this.options,{axisDir:s,axisOrigin:n,lineBox:a,lineSize:l}=this.lineInfo(),d=e*(l/(i.max-i.min)),p=this.getDivisions(e),u=[];let g=a[n],f=0;t&&(f=t/e);for(let m=0;m<p;m++)m%f!=0&&u.push(A(g,3)),g+=d*s;return u}getMajorTickPositions(){return this.getTickPositions(this.options.majorUnit)}getMinorTickPositions(){return this.getTickPositions(this.options.minorUnit)}getSlot(e,t,i=!1){const s=this.options,{axis:n,axisDir:a,lineBox:l,lineSize:c,lineStart:h}=this.lineInfo(),d=a*(c/(s.max-s.min));let p=R(e,t||0),u=R(t,e||0);i&&(p=O(p,s.min,s.max),u=O(u,s.min,s.max));const g=Math.min(p,u)-s.min,f=Math.max(p,u)-s.min,m=new k(l.x1,l.y1,l.x1,l.y1);return m[n+1]=No(h+d*(a>0?g:f)),m[n+2]=No(h+d*(a>0?f:g)),m}getValue(e){const t=this.options,i=Number(t.max),s=Number(t.min),n=this.pointOffset(e);return n<0||n>1?null:A(s+n*(i-s),q)}translateRange(e){const t=this.options,{vertical:i,reverse:s,max:n,min:a}=t,{lineSize:l}=this.lineInfo();let d=A(e/(l/(n-a)),q);return(i||s)&&!(i&&s)&&(d=-d),{min:a+d,max:n+d,offset:d}}labelsCount(){return this.getDivisions(this.options.majorUnit)}createAxisLabel(e,t,i){const s=this.options,n=A(s.min+e*s.majorUnit,q),a=this.axisLabelText(n,t,i);return new Fi(n,a,e,null,t)}shouldRenderNote(e){const t=this.range();return t.min<=e&&e<=t.max}pan(e){const t=this.translateRange(e);return this.limitRange(t.min,t.max,this.totalMin,this.totalMax,t.offset)}pointsRange(e,t){const i=this.getValue(e),s=this.getValue(t),n=Math.min(i,s),a=Math.max(i,s);if(this.isValidRange(n,a))return{min:n,max:a}}scaleRange(e,t){const i=Math.abs(this.pointOffset(t)),n=this.scaleToDelta(e,this.options.max-this.options.min),l=(1-i)*n,c=A(this.options.min+i*n,q);let h=A(this.options.max-l,q);return h-c<Wa&&(h=c+Wa),{min:c,max:h}}zoomRange(e,t){const{totalMin:i,totalMax:s}=this,n=this.scaleRange(e,t);return{min:O(n.min,i,s),max:O(n.max,i,s),narrowRange:!1}}isValidRange(e,t){return t-e>Wa}}function fp(o,e,t){const i=A(Math.abs(o%e),q);return 0===i||i>e*(1-t)}w(zo,{type:"numeric",min:0,max:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:pt},labels:{format:"#.####################"},zIndex:1});const de=zo;class jo extends un{constructor(e,t,i,s){const n=it(e),a=it(t),l=s.intl;let c=i||{};c=x(c||{},{min:Et(l,c.min),max:Et(l,c.max),axisCrossingValue:ap(l,c.axisCrossingValues||c.axisCrossingValue),weekStartDay:lp(c,l)}),c=function M0(o,e,t){const i=t.min||o,s=t.max||e,n=t.baseUnit||(s&&i?function T0(o){let e=gn;return o>=Ua?e=je:o>=ja?e=Ni:o>=za?e=fn:o>=Ue&&(e=Pe),e}(Ga(s,i)):gn),a=Ee[n],l=t.weekStartDay||0,c=Ha(st(i)-1,n,l)||it(s),h=op(st(s)+1,n,l),p=(t.majorUnit?t.majorUnit:void 0)||Fo(gs(c.getTime(),h.getTime()),a)/a,u=Xa(c,h,n),f=Fo(u,p)-u,m=Math.floor(f/2),v=f-m;return t.baseUnit||delete t.baseUnit,t.baseUnit=t.baseUnit||n,t.min=t.min||Dt(c,-m,n,l),t.max=t.max||Dt(h,v,n,l),t.minorUnit=t.minorUnit||p/5,t.majorUnit=p,t}(n,a,c),super(c,s),this.intlService=l,this.seriesMin=n,this.seriesMax=a;const h=c.weekStartDay||0;this.totalMin=st(Ha(st(n)-1,c.baseUnit,h)),this.totalMax=st(op(st(a)+1,c.baseUnit,h))}clone(){return new jo(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)}range(){const e=this.options;return{min:e.min,max:e.max}}getDivisions(e){const t=this.options;return Math.floor(Xa(t.min,t.max,t.baseUnit)/e+1)}getTickPositions(e){const t=this.options,{axisDir:i,lineSize:s,lineStart:n}=this.lineInfo(),a=this.getDivisions(e),c=s/De(t.max,t.min),h=t.weekStartDay||0,d=[n];for(let p=1;p<a;p++){const g=n+De(Dt(t.min,p*e,t.baseUnit,h),t.min)*c*i;d.push(A(g,3))}return d}getMajorTickPositions(){return this.getTickPositions(this.options.majorUnit)}getMinorTickPositions(){return this.getTickPositions(this.options.minorUnit)}getSlot(e,t,i){return de.prototype.getSlot.call(this,Et(this.intlService,e),Et(this.intlService,t),i)}getValue(e){const t=de.prototype.getValue.call(this,e);return null!==t?it(t):null}labelsCount(){return this.getDivisions(this.options.majorUnit)}createAxisLabel(e,t,i){const s=this.options,n=e*s.majorUnit;let l=s.min;n>0&&(l=Dt(l,n,s.baseUnit,s.weekStartDay||0)),t.format=t.format||t.dateFormats[s.baseUnit];const h=this.axisLabelText(l,t,i);return new Fi(l,h,e,null,t)}translateRange(e){const t=this.options,i=this.lineBox(),{vertical:s,reverse:n}=t,a=s?i.height():i.width(),l=this.range(),c=a/De(l.max,l.min);let h=A(e/c,q);return(s||n)&&(!s||!n)&&(h=-h),{min:Mt(t.min,h),max:Mt(t.max,h),offset:h}}shouldRenderNote(e){const t=this.range();return Oo(e,t.min)>=0&&Oo(e,t.max)<=0}pan(e){const t=this.translateRange(e,!0),i=this.limitRange(st(t.min),st(t.max),this.totalMin,this.totalMax,t.offset);if(i)return{min:it(i.min),max:it(i.max)}}pointsRange(e,t){const i=this.getValue(e),s=this.getValue(t),n=Math.min(i,s),a=Math.max(i,s);return{min:it(n),max:it(a)}}scaleRange(e,t){const i=Math.abs(this.pointOffset(t)),n=this.scaleToDelta(e,this.options.max-this.options.min),a=i*n,l=(1-i)*n,c=it(st(this.options.min)+a);let h=it(st(this.options.max)-l);return h-c<1e3&&(h=it(st(c)+1e3)),{min:c,max:h}}zoomRange(e,t){const i=this.scaleRange(e,t);return{min:it(O(st(i.min),this.totalMin,this.totalMax)),max:it(O(st(i.max),this.totalMin,this.totalMax))}}}w(jo,{type:Fe,majorGridLines:{visible:!0,width:1,color:pt},labels:{dateFormats:dp}});const xp=jo;class Uo extends un{constructor(e,t,i,s){const n=x({majorUnit:10,min:e,max:t},i),a=n.majorUnit,l=function D0(o,e){const t=A(xe(o,e),q)%1;let i;return i=o<=0?e:0!==t&&(t<.3||t>.9)?Math.pow(e,xe(o,e)+.2):Math.pow(e,Math.ceil(xe(o,e))),i}(t,a),c=function E0(o,e,t){const i=t.majorUnit;let s=o;return o<=0?s=e<=1?Math.pow(i,-2):1:t.narrowRange||(s=Math.pow(i,Math.floor(xe(o,i)))),s}(e,t,n),h=function P0(o,e,t,i){let{min:s,max:n}=t;return C(t.axisCrossingValue)&&t.axisCrossingValue<=0&&$a(),C(i.max)?i.max<=0&&$a():n=e,C(i.min)?i.min<=0&&$a():s=o,{min:s,max:n}}(c,l,n,i);n.max=h.max,n.min=h.min,n.minorUnit=i.minorUnit||A(a-1,q),super(n,s),this.totalMin=C(i.min)?Math.min(c,i.min):c,this.totalMax=C(i.max)?Math.max(l,i.max):l,this.logMin=A(xe(h.min,a),q),this.logMax=A(xe(h.max,a),q),this.seriesMin=e,this.seriesMax=t,this.createLabels()}clone(){return new Uo(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)}startValue(){return this.options.min}getSlot(e,t,i){const{options:s,logMin:n,logMax:a}=this,{majorUnit:l,min:c,max:h}=s,{axis:d,axisDir:p,lineBox:u,lineSize:g,lineStart:f}=this.lineInfo(),m=p*(g/(a-n));let v=R(e,t||1),_=R(t,e||1);if(v<=0||_<=0)return null;i&&(v=O(v,c,h),_=O(_,c,h)),v=xe(v,l),_=xe(_,l);const y=Math.min(v,_)-n,P=Math.max(v,_)-n,I=new k(u.x1,u.y1,u.x1,u.y1);return I[d+1]=No(f+m*(p>0?y:P)),I[d+2]=No(f+m*(p>0?P:y)),I}getValue(e){const{options:t,logMin:i,logMax:s}=this,{majorUnit:n}=t,{axis:a,axisDir:l,lineStart:c,lineSize:h}=this.lineInfo(),p=l*(e[a]-c);return p<0||p>h?null:A(Math.pow(n,i+p*((s-i)/h)),q)}range(){const e=this.options;return{min:e.min,max:e.max}}translateRange(e){const{options:t,logMin:i,logMax:s}=this,{reverse:n,vertical:a,majorUnit:l}=t,c=this.lineBox(),d=(a?c.height():c.width())/(s-i);let p=A(e/d,q);return(a||n)&&!(a&&n)&&(p=-p),{min:Math.pow(l,i+p),max:Math.pow(l,s+p),offset:p}}labelsCount(){const e=Math.floor(this.logMax);return Math.floor(e-this.logMin)+1}getMajorTickPositions(){const e=[];return this.traverseMajorTicksPositions(t=>{e.push(t)},{step:1,skip:0}),e}createTicks(e){const t=this.options,{majorTicks:i,minorTicks:s,vertical:n}=t,a=t.labels.mirror,l=this.lineBox(),h={vertical:n};function d(p,u){h.tickX=a?l.x2:l.x2-u.size,h.tickY=a?l.y1-u.size:l.y1,h.position=p,e.append(ip(h,u))}return i.visible&&this.traverseMajorTicksPositions(d,i),s.visible&&this.traverseMinorTicksPositions(d,s),[]}createGridLines(e){const t=this.options,{minorGridLines:i,majorGridLines:s,vertical:n}=t,a=e.lineBox(),l={lineStart:a[n?"x1":"y1"],lineEnd:a[n?"x2":"y2"],vertical:n},c=[],h=this.gridLinesVisual();function d(p,u){z(p,c)||(l.position=p,h.append(sp(l,u)),c.push(p))}return s.visible&&this.traverseMajorTicksPositions(d,s),i.visible&&this.traverseMinorTicksPositions(d,i),h.children}traverseMajorTicksPositions(e,t){const{lineStart:i,step:s}=this.lineInfo(),{logMin:n,logMax:a}=this;for(let l=Math.ceil(n)+t.skip;l<=a;l+=t.step)e(A(i+s*(l-n),q),t)}traverseMinorTicksPositions(e,t){const{min:i,max:s,minorUnit:n,majorUnit:a}=this.options,{lineStart:l,step:c}=this.lineInfo(),{logMin:h,logMax:d}=this;for(let u=Math.floor(h);u<d;u++){const g=this._minorIntervalOptions(u);for(let f=t.skip;f<n;f+=t.step){const m=g.value+f*g.minorStep;if(m>s)break;m>=i&&e(A(l+c*(xe(m,a)-h),q),t)}}}createAxisLabel(e,t,i){const s=Math.ceil(this.logMin+e),n=Math.pow(this.options.majorUnit,s),a=this.axisLabelText(n,t,i);return new Fi(n,a,e,null,t)}shouldRenderNote(e){const t=this.range();return t.min<=e&&e<=t.max}pan(e){const t=this.translateRange(e);return this.limitRange(t.min,t.max,this.totalMin,this.totalMax,t.offset)}pointsRange(e,t){const i=this.getValue(e),s=this.getValue(t);return{min:Math.min(i,s),max:Math.max(i,s)}}scaleRange(e,t){const{majorUnit:i}=this.options,s=xe(this.options.min,i),n=xe(this.options.max,i),a=Math.abs(this.pointOffset(t)),c=this.scaleToDelta(e,n-s),h=Math.pow(i,s+a*c);let d=Math.pow(i,n-(1-a)*c);return d-h<1e-6&&(d=h+1e-6),{min:h,max:d}}zoomRange(e,t){const i=this.scaleRange(e,t),{totalMin:s,totalMax:n}=this;return{min:O(i.min,s,n),max:O(i.max,s,n)}}_minorIntervalOptions(e){const{minorUnit:t,majorUnit:i}=this.options,s=Math.pow(i,e);return{value:s,minorStep:(Math.pow(i,e+1)-s)/t}}lineInfo(){const e=super.lineInfo();return e.step=e.axisDir*(e.lineSize/(this.logMax-this.logMin)),e}}function $a(){throw new Error("Non positive values cannot be used for a logarithmic axis")}function xe(o,e){return Math.log(o)/Math.log(e)}w(Uo,{type:"log",majorUnit:10,minorUnit:1,axisCrossingValue:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:pt},zIndex:1,_deferLabels:!0});const Go=Uo,_p={createGridLines:function(o){const e=this.options,t=Math.abs(this.box.center().y-o.lineBox().y1);let n,a,i=[],s=!1;return e.majorGridLines.visible&&(n=this.majorGridLineAngles(o),s=!0,i=this.renderMajorGridLines(n,t,e.majorGridLines)),e.minorGridLines.visible&&(a=this.minorGridLineAngles(o,s),Li(i,this.renderMinorGridLines(a,t,e.minorGridLines,o,s))),i},renderMajorGridLines:function(o,e,t){return this.renderGridLines(o,e,t)},renderMinorGridLines:function(o,e,t,i,s){const n=this.radiusCallback&&this.radiusCallback(e,i,s);return this.renderGridLines(o,e,t,n)},renderGridLines:function(o,e,t,i){const s={stroke:{width:t.width,color:t.color,dashType:t.dashType}},n=this.box.center(),a=new ce.A([n.x,n.y],e),l=this.gridLinesVisual();for(let c=0;c<o.length;c++){const h=new M.w(s);i&&(a.radius=i(o[c])),h.moveTo(a.center).lineTo(a.pointAt(o[c]+180)),l.append(h)}return l.children},gridLineAngles:function(o,e,t,i,s){const n=this.intervals(e,t,i,s),a=o.options,l=a.visible&&!1!==(a.line||{}).visible;return od(n,c=>{const h=this.intervalAngle(c);if(!l||90!==h)return h})}};class Qa extends Ge{range(){return{min:0,max:this.options.categories.length}}reflow(e){this.box=e,this.reflowLabels()}lineBox(){return this.box}reflowLabels(){const{labels:e,options:{labels:t}}=this,i=t.skip||0,s=t.step||1,n=new k;for(let a=0;a<e.length;a++){e[a].reflow(n);const l=e[a].box;e[a].reflow(this.getSlot(i+a*s).adjacentBox(0,l.width(),l.height()))}}intervals(e,t,i,s=!1){const n=this.options,l=n.categories.length/e||1,c=360/l,d=i||1,p=[];let u=0;for(let g=t||0;g<l;g+=d)u=n.reverse?360-g*c:g*c,u=A(u,3)%360,s&&z(u,s)||p.push(u);return p}majorIntervals(){return this.intervals(1)}minorIntervals(){return this.intervals(.5)}intervalAngle(e){return(360+e+this.options.startAngle)%360}majorAngles(){return od(this.majorIntervals(),e=>this.intervalAngle(e))}createLine(){return[]}majorGridLineAngles(e){const t=this.options.majorGridLines;return this.gridLineAngles(e,1,t.skip,t.step)}minorGridLineAngles(e,t){const{minorGridLines:i,majorGridLines:s}=this.options,n=t?this.intervals(1,s.skip,s.step):null;return this.gridLineAngles(e,.5,i.skip,i.step,n)}radiusCallback(e,t,i){if(t.options.type!==hi){const s=Ct(360/(2*this.options.categories.length)),n=Math.cos(s)*e,a=this.majorAngles();return function(c){return!i&&z(c,a)?e:n}}}createPlotBands(){const e=this.options.plotBands||[],t=this._plotbandGroup=new et.A({zIndex:-1});for(let i=0;i<e.length;i++){const s=e[i],n=this.plotBandSlot(s),a=this.getSlot(s.from),l=s.from-Math.floor(s.from);n.startAngle+=l*a.angle;const c=Math.ceil(s.to)-s.to;n.angle-=(c+l)*a.angle;const h=To.current.createRing(n,{fill:{color:s.color,opacity:s.opacity},stroke:{opacity:s.opacity}});t.append(h)}this.appendVisual(t)}plotBandSlot(e){return this.getSlot(e.from,e.to-1)}getSlot(e,t){const i=this.options,s=i.justified,n=this.box,a=this.majorAngles(),l=a.length,c=360/l;let h=e;i.reverse&&!s&&(h=(h+1)%l),h=O(Math.floor(h),0,l-1);let d=a[h];s&&(d-=c/2,d<0&&(d+=360));const g=c*(O(Math.ceil(t||h),h,l-1)-h+1);return new cn(n.center(),0,n.height()/2,d,g)}slot(e,t){const i=this.getSlot(e,t),s=i.startAngle+180;return new fs.A([i.center.x,i.center.y],{startAngle:s,endAngle:s+i.angle,radiusX:i.radius,radiusY:i.radius})}pointCategoryIndex(e){const t=this.options.categories.length;let i=null;for(let s=0;s<t;s++)if(this.getSlot(s).containsPoint(e)){i=s;break}return i}}w(Qa,{startAngle:90,labels:{margin:Z(10)},majorGridLines:{visible:!0},justified:!0}),x(Qa.prototype,_p);const Za=Qa;class Ka extends un{constructor(e,t){super(e,t);const i=this.options;i.minorUnit=i.minorUnit||i.majorUnit/2}getDivisions(e){return de.prototype.getDivisions.call(this,e)-1}reflow(e){this.box=e,this.reflowLabels()}reflowLabels(){const{options:e,labels:t,options:{labels:i}}=this,s=i.skip||0,n=i.step||1,a=new k,l=this.intervals(e.majorUnit,s,n);for(let c=0;c<t.length;c++){t[c].reflow(a);const h=t[c].box;t[c].reflow(this.getSlot(l[c]).adjacentBox(0,h.width(),h.height()))}}lineBox(){return this.box}intervals(e,t,i,s=!1){const n=this.options.min,a=this.getDivisions(e),l=[],h=i||1;for(let d=t||0;d<a;d+=h){const p=(360+n+d*e)%360;s&&z(p,s)||l.push(p)}return l}majorIntervals(){return this.intervals(this.options.majorUnit)}minorIntervals(){return this.intervals(this.options.minorUnit)}intervalAngle(e){return(540-e-this.options.startAngle)%360}createLine(){return[]}majorGridLineAngles(e){const t=this.options.majorGridLines;return this.gridLineAngles(e,this.options.majorUnit,t.skip,t.step)}minorGridLineAngles(e,t){const i=this.options,{minorGridLines:s,majorGridLines:n}=i,a=t?this.intervals(i.majorUnit,n.skip,n.step):null;return this.gridLineAngles(e,i.minorUnit,s.skip,s.step,a)}plotBandSlot(e){return this.getSlot(e.from,e.to)}getSlot(e,t){const{options:i,box:s}=this,n=i.startAngle;let a=O(e,i.min,i.max),l=O(t||a,a,i.max);if(i.reverse&&(a*=-1,l*=-1),a=(540-a-n)%360,l=(540-l-n)%360,l<a){const c=a;a=l,l=c}return new cn(s.center(),0,s.height()/2,a,l-a)}slot(e,t=e){const i=this.options,s=360-i.startAngle,n=this.getSlot(e,t),a=Math.min(e,t),l=Math.max(e,t);let c,h;return i.reverse?(c=a,h=l):(c=360-l,h=360-a),c=(c+s)%360,h=(h+s)%360,new fs.A([n.center.x,n.center.y],{startAngle:c,endAngle:h,radiusX:n.radius,radiusY:n.radius})}getValue(e){const t=this.options,i=this.box.center();let a=Math.round(di(Math.atan2(e.y-i.y,e.x-i.x))),l=t.startAngle;return t.reverse||(a*=-1,l*=-1),(a+l+360)%360}valueRange(){return{min:0,max:2*Math.PI}}}w(Ka,{type:"polar",startAngle:0,reverse:!1,majorUnit:60,min:0,max:360,labels:{margin:Z(10)},majorGridLines:{color:pt,visible:!0,width:1},minorGridLines:{color:"#aaa"}}),x(Ka.prototype,_p,{createPlotBands:Za.prototype.createPlotBands,majorAngles:Za.prototype.majorAngles,range:de.prototype.range,labelsCount:de.prototype.labelsCount,createAxisLabel:de.prototype.createAxisLabel});const O0=Ka;function Ho(o,e){return 180-Math.abs(Math.abs(o-e)-180)}const yp={options:{majorGridLines:{visible:!0}},createPlotBands:function(){const{majorGridLines:{type:o},plotBands:e=[]}=this.options,t=this.plotArea.polarAxis,i=t.majorAngles(),s=t.box.center(),n=this._plotbandGroup=new et.A({zIndex:-1});for(let a=0;a<e.length;a++){const l=e[a],c={fill:{color:l.color,opacity:l.opacity},stroke:{opacity:l.opacity}},h=this.getSlot(l.from,l.to,!0),d=new cn(s,s.y-h.y2,s.y-h.y1,0,360);let p;p=o===hi?To.current.createRing(d,c):M.w.fromPoints(this.plotBandPoints(d,i),c).close(),n.append(p)}this.appendVisual(n)},plotBandPoints:function(o,e){const t=[],i=[],s=[o.center.x,o.center.y],n=new ce.A(s,o.innerRadius),a=new ce.A(s,o.radius);for(let l=0;l<e.length;l++)t.push(n.pointAt(e[l]+180)),i.push(a.pointAt(e[l]+180));return t.reverse(),t.push(t[0]),i.push(i[0]),i.concat(t)},createGridLines:function(o){const e=this.options,t=this.radarMajorGridLinePositions(),i=o.majorAngles(),s=o.box.center();let n=[];if(e.majorGridLines.visible&&(n=this.renderGridLines(s,t,i,e.majorGridLines)),e.minorGridLines.visible){const a=this.radarMinorGridLinePositions();Li(n,this.renderGridLines(s,a,i,e.minorGridLines))}return n},renderGridLines:function(o,e,t,i){const s={stroke:{width:i.width,color:i.color,dashType:i.dashType}},{skip:n=0,step:a=0}=i,l=this.gridLinesVisual();for(let c=n;c<e.length;c+=a){const h=o.y-e[c];if(h>0){const d=new ce.A([o.x,o.y],h);if(i.type===hi)l.append(new Te.A(d,s));else{const p=new M.w(s);for(let u=0;u<t.length;u++)p.lineTo(d.pointAt(t[u]+180));p.close(),l.append(p)}}}return l.children},getValue:function(o){const e=this.lineBox(),t=this.plotArea.polarAxis,i=t.majorAngles(),s=t.box.center(),n=o.distanceTo(s);let a=n;if(this.options.majorGridLines.type!==hi&&i.length>1){const h=(di(Math.atan2(o.y-s.y,o.x-s.x))+540)%360;i.sort(function(f,m){return Ho(f,h)-Ho(m,h)});const d=Ho(i[0],i[1])/2,p=Ho(h,i[0]),u=90-d;a=n*(Math.sin(Ct(180-p-u))/Math.sin(Ct(u)))}return this.axisType().prototype.getValue.call(this,new L(e.x1,e.y2-a))}};class wp extends de{radarMajorGridLinePositions(){return this.getTickPositions(this.options.majorUnit)}radarMinorGridLinePositions(){const e=this.options;let t=0;return e.majorGridLines.visible&&(t=e.majorUnit),this.getTickPositions(e.minorUnit,t)}axisType(){return de}}x(wp.prototype,yp);const R0=wp;class Cp extends Go{radarMajorGridLinePositions(){const e=[];return this.traverseMajorTicksPositions(function(t){e.push(t)},this.options.majorGridLines),e}radarMinorGridLinePositions(){const e=[];return this.traverseMinorTicksPositions(function(t){e.push(t)},this.options.minorGridLines),e}axisType(){return Go}}x(Cp.prototype,yp);const L0=Cp;var Xe=T(1281);function Ap(o){return o<=0?-1:1}const Xo=class B0{constructor(e){this.closed=e}process(e){const t=e.slice(0),i=[];let s=this.closed,n=t.length;if(n>2&&(this.removeDuplicates(0,t),n=t.length),n<2||2===n&&t[0].equals(t[1]))return i;let h,d,a=t[0],l=t[1],c=t[2];for(i.push(new Xe.A(a));a.equals(t[n-1]);)s=!0,t.pop(),n--;if(2===n){const u=this.tangent(a,l,E,D);return ft(i).controlOut(this.firstControlPoint(u,a,l,E,D)),i.push(new Xe.A(l,this.secondControlPoint(u,a,l,E,D))),i}if(s){a=t[n-1],l=t[0],c=t[1];const u=this.controlPoints(a,l,c);h=u[1],d=u[0]}else{const u=this.tangent(a,l,E,D);h=this.firstControlPoint(u,a,l,E,D)}let p=h;for(let u=0;u<=n-3;u++)if(this.removeDuplicates(u,t),n=t.length,u+3<=n){a=t[u],l=t[u+1],c=t[u+2];const g=this.controlPoints(a,l,c);ft(i).controlOut(p),p=g[1],i.push(new Xe.A(l,g[0]))}if(s){a=t[n-2],l=t[n-1],c=t[0];const u=this.controlPoints(a,l,c);ft(i).controlOut(p),i.push(new Xe.A(l,u[0])),ft(i).controlOut(u[1]),i.push(new Xe.A(c,d))}else{const u=this.tangent(l,c,E,D);ft(i).controlOut(p),i.push(new Xe.A(c,this.secondControlPoint(u,l,c,E,D)))}return i}removeDuplicates(e,t){for(;t[e+1]&&(t[e].equals(t[e+1])||t[e+1].equals(t[e+2]));)t.splice(e+1,1)}invertAxis(e,t,i){let s=!1;if(e.x===t.x)s=!0;else if(t.x===i.x)(t.y<i.y&&e.y<=t.y||i.y<t.y&&t.y<=e.y)&&(s=!0);else{const n=this.lineFunction(e,t),a=this.calculateFunction(n,i.x);e.y<=t.y&&i.y<=a||t.y<=e.y&&i.y>=a||(s=!0)}return s}isLine(e,t,i){const s=this.lineFunction(e,t),n=this.calculateFunction(s,i.x);return e.x===t.x&&t.x===i.x||A(n,1)===A(i.y,1)}lineFunction(e,t){const i=(t.y-e.y)/(t.x-e.x);return[e.y-i*e.x,i]}controlPoints(e,t,i){let c,s=E,n=D,a=!1,l=!1;if(this.isLine(e,t,i))c=this.tangent(e,t,E,D);else{const p={x:this.isMonotonicByField(e,t,i,E),y:this.isMonotonicByField(e,t,i,D)};if(p.x&&p.y)c=this.tangent(e,i,E,D),a=!0;else if(this.invertAxis(e,t,i)&&(s=D,n=E),p[s])c=0;else{let u;u=i[n]<e[n]&&e[n]<=t[n]||e[n]<i[n]&&t[n]<=e[n]?Ap((i[n]-e[n])*(t[s]-e[s])):-Ap((i[s]-e[s])*(t[n]-e[n])),c=.01*u,l=!0}}const h=this.secondControlPoint(c,e,t,s,n);if(l){const p=s;s=n,n=p}const d=this.firstControlPoint(c,t,i,s,n);return a&&(this.restrictControlPoint(e,t,h,c),this.restrictControlPoint(t,i,d,c)),[h,d]}restrictControlPoint(e,t,i,s){e.y<t.y?t.y<i.y?(i.x=e.x+(t.y-e.y)/s,i.y=t.y):i.y<e.y&&(i.x=t.x-(t.y-e.y)/s,i.y=e.y):i.y<t.y?(i.x=e.x-(e.y-t.y)/s,i.y=t.y):e.y<i.y&&(i.x=t.x+(e.y-t.y)/s,i.y=e.y)}tangent(e,t,i,s){const n=t[i]-e[i];let l;return l=0===n?0:(t[s]-e[s])/n,l}isMonotonicByField(e,t,i,s){return i[s]>t[s]&&t[s]>e[s]||i[s]<t[s]&&t[s]<e[s]}firstControlPoint(e,t,i,s,n){const a=t[s],c=.333*(i[s]-a);return this.point(a+c,t[n]+c*e,s,n)}secondControlPoint(e,t,i,s,n){const l=i[s],c=.333*(l-t[s]);return this.point(l-c,i[n]-c*e,s,n)}point(e,t,i,s){const n=new j.A;return n[i]=e,n[s]=t,n}calculateFunction(e,t){const i=e.length;let s=0;for(let n=0;n<i;n++)s+=Math.pow(t,n)*e[n];return s}},N0=class F0{constructor(e){this._axis=e,this.options=e.options}value(e){const t=this._axis;return t.getCategory?t.getCategory(e):t.getValue(e)}slot(e,t,i=!0){return this._axis.slot(e,t,i)}range(){return this._axis.range()}valueRange(){return this._axis.valueRange()}};function Sp(o,e){for(let t=0;t<e.length;t++)if(e[t].options.name===o)return e[t].prepareUserOptions(),new N0(e[t])}const Ja=class z0{constructor(e){this.visual=e.visual,this.chartsVisual=e.chartContainer.visual,this._pane=e}findAxisByName(e){return Sp(e,this._pane.axes)}},U0=class j0{constructor(e){this._plotArea=e,this.visual=e.visual,this.backgroundVisual=e._bgVisual}};function qa(o){const e=o.length;let t=0;for(let i=0;i<e;i++)H(o[i])&&t++;return t}const tl={min:function(o){const e=o.length;let t=gt;for(let i=0;i<e;i++){const s=o[i];H(s)&&(t=Math.min(t,s))}return t===gt?o[0]:t},max:function(o){const e=o.length;let t=wt;for(let i=0;i<e;i++){const s=o[i];H(s)&&(t=Math.max(t,s))}return t===wt?o[0]:t},sum:function(o){const e=o.length;let t=0;for(let i=0;i<e;i++){const s=o[i];H(s)&&(t+=s)}return t},sumOrNull:function(o){let e=null;return qa(o)&&(e=tl.sum(o)),e},count:function(o){const e=o.length;let t=0;for(let i=0;i<e;i++)null!=o[i]&&t++;return t},avg:function(o){const e=qa(o);let t=o[0];return e>0&&(t=tl.sum(o)/e),t},first:function(o){const e=o.length;for(let t=0;t<e;t++){const i=o[t];if(null!=i)return i}return o[0]}},G0=tl;function H0(o,e){return null===e?e:Ne(o)(e)}class el{constructor(){this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}}register(e,t=[Qt],i={}){for(let s=0;s<e.length;s++){const n=e[s];this._valueFields[n]=t,this._otherFields[n]=i,this._nullValue[n]=this._makeValue(t,null),this._undefinedValue[n]=this._makeValue(t,void 0)}}canonicalFields(e){return this.valueFields(e).concat(this.otherFields(e))}valueFields(e){return this._valueFields[e.type]||[Qt]}otherFields(e){return this._otherFields[e.type]||[Qt]}bindPoint(e,t,i){const n=void 0!==i?i:e.data[t],a={valueFields:{value:n}},l=this.valueFields(e),c=this._otherFields[e.type];let h,d;if(null===n)d=this._nullValue[e.type];else if(void 0===n)d=this._undefinedValue[e.type];else if(Array.isArray(n)){const p=n.slice(l.length);d=this._bindFromArray(n,l),h=this._bindFromArray(p,c)}else if("object"==typeof n){const p=this.sourceFields(e,l),u=this.sourceFields(e,c);d=this._bindFromObject(n,l,p),h=this._bindFromObject(n,c,u)}return void 0!==d&&(1===l.length?a.valueFields.value=d[l[0]]:a.valueFields=d),a.fields=h||{},a}_makeValue(e,t){const i={},s=e.length;for(let n=0;n<s;n++)i[e[n]]=t;return i}_bindFromArray(e,t){const i={};if(t){const s=Math.min(t.length,e.length);for(let n=0;n<s;n++)i[t[n]]=e[n]}return i}_bindFromObject(e,t,i=t){const s={};if(t){const n=t.length;for(let a=0;a<n;a++){const c=i[a];null!==c&&(s[t[a]]=H0(c,e))}}return s}sourceFields(e,t){const i=[];if(t){const s=t.length;for(let n=0;n<s;n++){const a=t[n],l=a===Qt?"field":a+"Field";i.push(null!==e[l]?e[l]||a:null)}}return i}}el.current=new el;const ot=el,W0=/percent(?:\w*)\((\d+)\)/,$0=new RegExp("^stddev(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),Tp=class Q0{constructor(e,t,i){this.initGlobalRanges(e,t,i)}initGlobalRanges(e,t,i){const s=t.data,n=$0.exec(e);if(n){this.valueGetter=this.createValueGetter(t,i);const a=this.getAverage(s),l=this.getStandardDeviation(s,a,!1),c=n[1]?parseFloat(n[1]):1,h={low:a.value-l*c,high:a.value+l*c};this.globalRange=function(){return h}}else if(e.indexOf&&e.indexOf("stderr")>=0){this.valueGetter=this.createValueGetter(t,i);const a=this.getStandardError(s,this.getAverage(s));this.globalRange=function(l){return{low:l-a,high:l+a}}}}createValueGetter(e,t){const i=e.data,s=ot.current,n=s.valueFields(e),a=C(i[0])?i[0]:{};let l;return Pt(a)?l=Ne("["+(t?n.indexOf(t):0)+"]"):H(a)?l=Ne():typeof a===tn&&(l=Ne(s.sourceFields(e,n)[n.indexOf(t)])),l}getErrorRange(e,t){let i,s,n;if(!C(t))return null;if(this.globalRange)return this.globalRange(e);if(Pt(t))i=e-t[0],s=e+t[1];else if(H(n=parseFloat(t)))i=e-n,s=e+n;else{if(!(n=W0.exec(t)))throw new Error("Invalid ErrorBar value: "+t);{const a=e*(parseFloat(n[1])/100);i=e-Math.abs(a),s=e+Math.abs(a)}}return{low:i,high:s}}getStandardError(e,t){return this.getStandardDeviation(e,t,!0)/Math.sqrt(t.count)}getStandardDeviation(e,t,i){const s=e.length,n=i?t.count-1:t.count;let a=0;for(let l=0;l<s;l++){const c=this.valueGetter(e[l]);H(c)&&(a+=Math.pow(c-t.value,2))}return Math.sqrt(a/n)}getAverage(e){const t=e.length;let i=0,s=0;for(let n=0;n<t;n++){const a=this.valueGetter(e[n]);H(a)&&(i+=a,s++)}return{value:i/s,count:s}}},pe=600,mi="fadeIn",xn=(rd.A.browser||{}).msie?.001:0,Mp="errorLow",Pp="errorHigh",Ye="zero",vs="interpolate",$o="above",il="below",bs="smooth",vn="step",We="area",ue="bar",bn="boxPlot",_s="bubble",xi="bullet",ys="candlestick",Oe="column",Qo="donut",_n="funnel",yn="pyramid",sl="heatmap",ws="horizontalWaterfall",$e="line",Cs="ohlc",vi="pie",nl="polarArea",Zo="polarLine",ol="polarScatter",wn="radarArea",Ko="radarColumn",ks="radarLine",As="rangeArea",Ss="rangeBar",Cn="rangeColumn",rl="scatter",al="scatterLine",ji="verticalArea",Ts="verticalBoxPlot",kn="verticalBullet",Ui="verticalLine",Gi="verticalRangeArea",An="waterfall",Dp=[ue,Oe,Cs,ys,bn,Ts,xi,Cn,Ss,An,ws],ll="exponentialTrendline",cl="linearTrendline",hl="logarithmicTrendline",dl="movingAverageTrendline",pl="polynomialTrendline",ul="powerTrendline",Ms=[ll,cl,hl,dl,pl,ul],Op="legendItemClick",Ip="seriesClick",Rp="seriesHover",Lp="seriesOver",Vp="seriesLeave",Bp="plotAreaHover",gl="plotAreaLeave",Sn="drag",Tn="dragEnd",fl="dragStart",Mn="zoomStart",Ps="zoom",Es="zoomEnd",ml="selectStart",Pn="select",xl="selectEnd",Fp="showTooltip",Np="hideTooltip",bi="graphics-symbol",_i="k-chart-point",yi="Point",Jo="log",be="category",qo="insideEnd",Hi="outsideEnd",tr="wheel",Qe="drilldown",ge="pattern";class jp extends K{constructor(e,t,i,s,n,a){super(a),this.low=e,this.high=t,this.isVertical=i,this.chart=s,this.series=n}reflow(e){const t=this.options.endCaps,i=this.isVertical,n=this.getAxis().getSlot(this.low,this.high),a=e.center(),l=this.getCapsWidth(e,i),c=i?a.x:a.y,h=c-l,d=c+l;let p;i?(p=[new L(a.x,n.y1),new L(a.x,n.y2)],t&&p.push(new L(h,n.y1),new L(d,n.y1),new L(h,n.y2),new L(d,n.y2)),this.box=new k(h,n.y1,d,n.y2)):(p=[new L(n.x1,a.y),new L(n.x2,a.y)],t&&p.push(new L(n.x1,h),new L(n.x1,d),new L(n.x2,h),new L(n.x2,d)),this.box=new k(n.x1,h,n.x2,d)),this.linePoints=p}getCapsWidth(e,t){const i=t?e.width():e.height();return Math.min(Math.floor(i/2),4)||4}createVisual(){const e=this.options,t=e.visual;t?this.visual=t({low:this.low,high:this.high,rect:this.box.toRect(),sender:this.getSender(),options:{endCaps:e.endCaps,color:e.color,line:e.line},createVisual:()=>{this.createDefaultVisual();const i=this.visual;return delete this.visual,i}}):this.createDefaultVisual()}createDefaultVisual(){const{options:e,linePoints:t}=this,i={stroke:{color:e.color,width:e.line.width,dashType:e.line.dashType}};super.createVisual();for(let s=0;s<t.length;s+=2){const n=new M.w(i).moveTo(t[s].x,t[s].y).lineTo(t[s+1].x,t[s+1].y);Zt(n),this.visual.append(n)}}}w(jp,{animation:{type:mi,delay:pe},endCaps:!0,line:{width:2},zIndex:1});const Up=jp,u_=class p_ extends Up{getAxis(){return this.chart.seriesValueAxis(this.series)}};function Gp(o){for(let e=0;e<o.length;e++)if(C(o[e].zIndex))return!0}function er(o,e){null!==e&&o.push(e)}function Hp(o){return qa(o)===o.length}function g_(o,e,t){const i=e.visible;if(C(i))return i;const s=o.pointVisibility;return s?s[t]:void 0}function Xp(o){const e=o.data,t=[];let i=0,s=0;for(let n=0;n<e.length;n++){const a=ot.current.bindPoint(o,n);let l=a.valueFields.value;Ut(l)&&(l=parseFloat(l)),H(l)?(a.visible=!1!==g_(o,a.fields,n),a.value=Math.abs(l),t.push(a),a.visible&&(i+=a.value),0!==l&&s++):t.push(null)}return{total:i,points:t,count:s}}function _l(o){const e=o.length;let t=0;for(let i=0;i<e;i++)t=Math.max(t,o[i].data.length);return t}function Ze(o,e){return o&&e?o.toLowerCase()===e.toLowerCase():o===e}function Ke(o,e,t={},i=!1){const s=t.defaults=t.defaults||{},n=t.depth=t.depth||0;let a=!1;if(t.excluded=t.excluded||[],n>5)return null;for(let l in o)if(!z(l,t.excluded)&&Aa(o,l)){const c=o[l];at(c)?(a=!0,i||(o[l]=R(c(e),s[l]))):re(c)&&(i||(t.defaults=s[l]),t.depth++,a=Ke(c,e,t,i)||a,t.depth--)}return a}function dt(o,e){const t=[],i=[].concat(e);for(let s=0;s<o.length;s++){const n=o[s];z(n.type,i)&&t.push(n)}return t}const Yp=new WeakMap;function Wp(o,e,t){if(null===e||"object"!=typeof e)return Et(t,o);let i=Yp.get(e);return i||(i=Et(t,o),Yp.set(e,i)),i}function yl(o){const e=o.overlay;return e&&e.gradient&&"none"!==e.gradient}function Xt(o){return C(o)&&null!==o}function $p(o,e){const t=o.type,i=e instanceof Date;return!t&&i||Ze(t,Fe)}function Ds(o){return 1===o.length?o[0]:o}const m_=/area/i;function wl(o,e){const i=ot.current.bindPoint(o,null,e).valueFields;for(let s in i)if(Kh(i[s]))return!0}function Qp({start:o,dir:e,min:t,max:i,getter:s,hasItem:n,series:a}){let l,c,h=o;do{h+=e,n(h)&&(c=s(h),l=wl(a,c.item))}while(t<=h&&h<=i&&!l);if(l)return c}function Zp(o,e,t,i,s){const{min:n,max:a}=e,l=n>0&&n<t,c=a+1<t;if(l||c){const h=function x_(o){return o.missingValues?o.missingValues:m_.test(o.type)||o.stack?Ye:vs}(o);let d,p;if(h!==vs)l&&(d=i(n-1)),c&&(p=i(a+1));else{let u,g;l&&(u=i(n-1),g=wl(o,u.item),d=g?u:Qp({start:n,dir:-1,min:0,max:t-1,getter:i,hasItem:s,series:o})),c&&(u=i(a+1),g=wl(o,u.item),p=g?u:Qp({start:a,dir:1,min:0,max:t-1,getter:i,hasItem:s,series:o}))}d&&(o._outOfRangeMinPoint=d),p&&(o._outOfRangeMaxPoint=p)}}function Kp(o,e){return e.forEach(t=>{const i=t&&t.options,s=t&&(t.box||t.wrapperBox);i&&s&&!1!==i.noclip&&!1!==i.visible&&o.wrap(s)}),o}class Jp extends K{constructor(e,t){super(t),this.plotArea=e,this.chartService=e.chartService,this.categoryAxis=e.seriesCategoryAxis(t.series[0]),this.valueAxisRanges={},this.points=[],this.categoryPoints=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[],this.render()}render(){this.traverseDataPoints(this.addValue.bind(this))}pointOptions(e,t){let i=this.seriesOptions[t];if(!i){const s=this.pointType().prototype.defaults;this.seriesOptions[t]=i=x({},s,{vertical:!this.options.invertAxes},e)}return i}plotValue(e){if(!e)return 0;if(this.options.isStacked100&&H(e.value)){const i=this.categoryPoints[e.categoryIx],s=[];let n=0;for(let a=0;a<i.length;a++){const l=i[a];if(l){const c=e.series.stack,h=l.series.stack;if(c&&h&&c.group!==h.group)continue;H(l.value)&&(n+=Math.abs(l.value),s.push(Math.abs(l.value)))}}if(n>0)return e.value/n}return e.value}plotRange(e,t=0){const i=this.categoryPoints[e.categoryIx];if(this.options.isStacked){let l=this.plotValue(e);const c=l>=0;let h=t,d=!1;const p=void 0!==e.series.stack?e.series.stack:this.options.defaultStack,u=g=>!0===g||typeof g===tn&&!g.group;if(p)for(let g=0;g<i.length;g++){const f=i[g];if(e===f)break;const m=void 0!==f.series.stack?f.series.stack:this.options.defaultStack;if(!m||typeof p===fa&&p!==m||u(p)&&!u(m)||p.group&&p.group!==m.group)continue;const v=this.plotValue(f);(v>=0&&c||v<0&&!c)&&(0===t||0!==v)&&(h+=v,l+=v,d=!0,this.options.isStacked100&&(l=Math.min(l,1)))}return d&&(h-=t),[h,l]}const n=this.seriesValueAxis(e.series),a=this.categoryAxisCrossingValue(n);return[a,Kh(e.value)?e.value:a]}stackLimits(e,t){let i=gt,s=wt;for(let n=0;n<this.categoryPoints.length;n++){const a=this.categoryPoints[n];if(a)for(let l=0;l<a.length;l++){const c=a[l];if(c&&(c.series.stack===t||c.series.axis===e)){const h=this.plotRange(c,0)[1];void 0!==h&&isFinite(h)&&(s=Math.max(s,h),i=Math.min(i,h))}}}return{min:i,max:s}}updateStackRange(){const{isStacked:e,series:t}=this.options,i={};if(e)for(let s=0;s<t.length;s++){const n=t[s],a=n.axis,l=a+n.stack;let c=i[l];if(!c){c=this.stackLimits(a,n.stack);const h=this.errorTotals;h&&(h.negative.length&&(c.min=Math.min(c.min,ka(h.negative).min)),h.positive.length&&(c.max=Math.max(c.max,ka(h.positive).max))),c.min!==gt||c.max!==wt?i[l]=c:c=null}c&&(this.valueAxisRanges[a]=c)}}addErrorBar(e,t,i){const{value:s,series:n,seriesIx:a}=e,l=e.options.errorBars,c=t.fields[Mp],h=t.fields[Pp];let d;H(c)&&H(h)?d={low:c,high:h}:l&&void 0!==l.value&&(this.seriesErrorRanges=this.seriesErrorRanges||[],this.seriesErrorRanges[a]=this.seriesErrorRanges[a]||new Tp(l.value,n,Qt),d=this.seriesErrorRanges[a].getErrorRange(s,l.value)),d&&(e.low=d.low,e.high=d.high,this.addPointErrorBar(e,i))}addPointErrorBar(e,t){const i=!this.options.invertAxes,s=e.options.errorBars;let{series:n,low:a,high:l}=e;if(this.options.isStacked){const h=this.stackedErrorRange(e,t);a=h.low,l=h.high}else{const h={categoryIx:t,series:n};this.updateRange({value:a},h),this.updateRange({value:l},h)}const c=new u_(a,l,i,this,n,s);e.errorBars=[c],e.append(c)}stackedErrorRange(e,t){const i=this.plotRange(e,0)[1]-e.value,s=e.low+i,n=e.high+i;return this.errorTotals=this.errorTotals||{positive:[],negative:[]},s<0&&(this.errorTotals.negative[t]=Math.min(this.errorTotals.negative[t]||0,s)),n>0&&(this.errorTotals.positive[t]=Math.max(this.errorTotals.positive[t]||0,n)),{low:s,high:n}}addValue(e,t){const{categoryIx:i,series:s,seriesIx:n}=t;let a=this.categoryPoints[i];a||(this.categoryPoints[i]=a=[]);let l=this.seriesPoints[n];l||(this.seriesPoints[n]=l=[]);const c=this.createPoint(e,t);c&&(Object.assign(c,t),c.owner=this,c.noteText=e.fields.noteText,void 0===c.dataItem&&(c.dataItem=s.data[i]),this.addErrorBar(c,e,i)),this.points.push(c),l.push(c),a.push(c),this.updateRange(e.valueFields,t)}evalPointOptions(e,t,i){const s=i.categoryIx,n=i.category,a=i.series,l=i.seriesIx,c={defaults:a._defaults,excluded:["data","aggregate","_events","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint","drilldownSeriesFactory","ariaTemplate","ariaContent"]};let h=this._evalSeries[l];void 0===h&&(this._evalSeries[l]=h=Ke(e,{},c,!0));let d=e;return h&&(d=x({},d),Ke(d,{value:t,category:n,index:s,series:a,dataItem:a.data[s]},c)),d}updateRange(e,t){const i=t.series.axis,s=e.value;let n=this.valueAxisRanges[i];isFinite(s)&&null!==s&&(n=this.valueAxisRanges[i]=n||{min:gt,max:wt},n.min=Math.min(n.min,s),n.max=Math.max(n.max,s))}seriesValueAxis(e){const t=this.plotArea,i=e.axis,s=i?t.namedValueAxes[i]:t.valueAxis;if(!s)throw new Error("Unable to locate value axis with name "+i);return s}reflow(e){const t=this.categorySlots=[],i=this.points,s=this.categoryAxis;let n=0;this.traverseDataPoints((a,l)=>{const{categoryIx:c,series:h}=l,d=this.seriesValueAxis(h),p=i[n++];let u=t[c];if(u||(t[c]=u=this.categorySlot(s,c,d)),p){const g=this.plotRange(p,d.startValue()),f=this.valueSlot(d,g);if(f){const m=this.pointSlot(u,f);p.aboveAxis=this.aboveAxis(p,d),p.stackValue=g[1],this.options.isStacked100&&(p.percentage=this.plotValue(p)),this.reflowPoint(p,m)}else p.visible=!1}}),this.reflowCategories(t),!this.options.clip&&this.options.limitPoints&&this.points.length&&this.limitPoints(),this.box=e}valueSlot(e,t){return e.getSlot(t[0],t[1],!this.options.clip)}limitPoints(){const e=this.categoryPoints,t=e[0].concat(ft(e));for(let i=0;i<t.length;i++)t[i]&&this.limitPoint(t[i])}limitPoint(e){const t=this.categoryAxis.limitSlot(e.box);t.equals(e.box)||e.reflow(t)}aboveAxis(e,t){const i=this.categoryAxisCrossingValue(t),s=e.value;return t.options.reverse?s<i:s>=i}categoryAxisCrossingValue(e){const t=this.categoryAxis,i=e.options;return[].concat(i.axisCrossingValues||i.axisCrossingValue)[t.axisIndex||0]||0}reflowPoint(e,t){e.reflow(t)}reflowCategories(){}pointSlot(e,t){const s=this.options.invertAxes,n=s?t:e,a=s?e:t;return new k(n.x1,a.y1,n.x2,a.y2)}categorySlot(e,t){return e.getSlot(t)}traverseDataPoints(e){const t=this.options.series,i=_l(t),s=t.length;for(let n=0;n<s;n++)this._outOfRangeCallback(t[n],"_outOfRangeMinPoint",n,e);for(let n=0;n<i;n++){const a=this.categoryAxis.categoryAt(n);for(let l=0;l<s;l++){const c=t[l];e(this.plotArea.bindPoint(c,n),{category:a,categoryIx:n,categoriesCount:i,series:c,seriesIx:l})}}for(let n=0;n<s;n++)this._outOfRangeCallback(t[n],"_outOfRangeMaxPoint",n,e)}_outOfRangeCallback(e,t,i,s){const n=e[t];if(n){const a=n.categoryIx;s(this.plotArea.bindPoint(e,a,n.item),{category:n.category,categoryIx:a,series:e,seriesIx:i,dataItem:n.item})}}formatPointValue(e,t){return null===e.value?"":this.chartService.format.auto(t,e.value)}pointValue(e){return e.valueFields.value}}w(Jp,{series:[],invertAxes:!1,isStacked:!1,clip:!0,limitPoints:!0});const Xi=Jp,_e={click:function(o,e){return o.trigger(Ip,this.eventArgs(e))},hover:function(o,e){return o.trigger(Rp,this.eventArgs(e))},over:function(o,e){return o.trigger(Lp,this.eventArgs(e))},out:function(o,e){return o.trigger(Vp,this.eventArgs(e))},eventArgs:function(o){return{value:this.value,percentage:this.percentage,stackValue:this.stackValue,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:me(o),originalEvent:o,point:this}}},Os={createNote:function(){const o=this.options.notes,e=this.noteText||o.label.text;!1!==o.visible&&null!=e&&(this.note=new Jd({value:this.value,text:e,dataItem:this.dataItem,category:this.category,series:this.series},this.options.notes,this.owner.chartService),this.append(this.note))}};class ir extends K{constructor(e,t){super(t),this.value=e,this.aboveAxis=R(this.options.aboveAxis,!0),this.tooltipTracking=!0,this._id=vd()}initOptions(e){this.options=Object.assign({},e)}render(){const{markers:e}=this.options;this._rendered||(this._rendered=!0,e.visible&&e.size&&(this.marker=this.createMarker(),this.append(this.marker)),this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))}createLabel(){const t=this.options.labels;t.visible&&(this.label=this.createLabelElement(t),this.append(this.label))}createLabelElement(e){return new Ht(this.getLabelText(e),Object.assign({},{align:V,vAlign:V,zIndex:R(e.zIndex,this.series.zIndex)},e,{margin:Object.assign({},{left:5,right:5},e.margin)}),this.pointData())}getLabelText(e){let t=kt(e);return t?t(this.pointData()):e.format?this.formatValue(e.format):this.value}getAriaLabelText(){const e=this.options.labels,t=sd(e);return t?t(this.pointData()):this.getLabelText(e)}markerBorder(){const e=this.options.markers,t=e.background,i=Object.assign({},{color:this.color},e.border);return void 0===i.color&&(i.color=new Ae.A(t).brightness(.8).toHex()),i}createVisual(){}createMarker(){const e=this.options.markers;return new Rt({type:e.type,width:e.size,height:e.size,rotation:e.rotation,background:e.background,border:this.markerBorder(),opacity:e.opacity,pattern:this.options.pattern,zIndex:R(e.zIndex,this.series.zIndex),animation:e.animation,visual:e.visual,accessibilityOptions:Object.assign({},{ariaLabel:this.getAriaLabelText(this.options.labels)},this.options.accessibility)},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category})}markerBox(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box}reflow(e){const{options:t,aboveAxis:i}=this,s=t.vertical;this.render(),this.box=e;const n=e.clone();if(s?i?n.y1-=n.height():n.y2+=n.height():i?n.x1+=n.width():n.x2-=n.width(),this._childBox=n,this.marker&&this.marker.reflow(n),this.reflowLabel(n),this.errorBars)for(let a=0;a<this.errorBars.length;a++)this.errorBars[a].reflow(n);if(this.note){let a=this.markerBox();if(!t.markers.visible||!t.markers.size){const l=a.center();a=new k(l.x,l.y,l.x,l.y)}this.note.reflow(a)}}reflowLabel(e){const{options:t,label:i}=this;let s=t.labels.position;i&&(s=s===$o?U:s,s=s===il?Y:s,i.reflow(e),i.box.alignTo(this.markerBox(),s),i.reflow(i.box))}createHighlight(){const e=this.options.highlight.markers,t=this.markerBorder().color,i=this.options.markers,s=i.size+(i.border.width||0)+(e.border.width||0),n=new Rt({type:i.type,width:s,height:s,rotation:i.rotation,background:e.color||t,border:{color:e.border.color,width:e.border.width,opacity:R(e.border.opacity,1)},opacity:R(e.opacity,1)});return n.reflow(this._childBox),n.getElement()}highlightVisual(){return(this.marker||{}).visual}highlightVisualArgs(){const e=this.marker;let t,i;if(e)i=e.paddingBox.toRect(),t=e.visual;else{const s=this.options.markers.size,n=s/2,a=this.box.center();i=new At.A([a.x-n,a.y-n],[s,s])}return{options:this.options,rect:i,visual:t}}createFocusHighlight(){const e=this.options.markers,t=this.options.focusHighlight,i=e.size+(e.border.width||0),s=new Rt({type:e.type,width:i,height:i,rotation:e.rotation,background:t.color,border:t.border,opacity:t.opacity,padding:t.border.width/2,zIndex:t.zIndex});return s.reflow(this._childBox),s.getElement()}tooltipAnchor(){const e=this.markerBox(),t=this.owner.pane.clipBox();if(!t||t.overlaps(e)){const n=N;let a,l;return this.aboveAxis?(a=e.y1,l=Y):(a=e.y2,l=U),{point:new L(e.x2+5,a),align:{horizontal:n,vertical:l}}}}formatValue(e){return this.owner.formatPointValue(this,e)}overlapsBox(e){return this.markerBox().overlaps(e)}clipElements(){this.options.visible=!1}unclipElements(){this.label&&(this.label.options.noclip=!0),this.note&&(this.note.options.noclip=!0)}unclipBox(){return Kp(this.markerBox().clone(),[this.label,this.note])}labelBox(){return this.label?this.label.box:new k}noteBox(){return this.note?this.note.box:new k}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series}}focusVisual(){this.marker&&(this.marker.visual&&this.marker.visual.options.set("id",this._id),this.toggleFocusHighlight(!0))}clearFocusFromVisual(){this.marker&&(this.marker.visual&&this.marker.visual.options.set("id",""),this.toggleFocusHighlight(!1))}getIndex(){return void 0!==this.categoryIx?this.categoryIx:this.pointIx}}ir.prototype.defaults={vertical:!0,markers:{visible:!0,background:W,size:8,type:jt,border:{width:2},opacity:1},labels:{visible:!1,position:$o,margin:Z(3),padding:Z(4),animation:{type:mi,delay:pe}},notes:{label:{}},highlight:{markers:{border:{color:"#fff",width:2}},zIndex:100},errorBars:{line:{width:1}},accessibility:{tabIndex:0,role:bi,className:_i,ariaRoleDescription:yi}},x(ir.prototype,_e),x(ir.prototype,Os);const Yi=ir;class qp extends K{constructor(e,t,i){super(),this.linePoints=e,this.series=t,this.seriesIx=i}points(){return this.toGeometryPoints(this.linePoints)}toGeometryPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++)e[i]&&!1!==e[i].visible&&t.push(e[i]._childBox.toRect().center());return t}createVisual(){const e=this.series.visual;e?(this.visual=e({points:this.toGeometryPoints(this.linePoints),series:this.series,sender:this.getSender(),createVisual:()=>(this.segmentVisual(),this.visual)}),this.visual&&!C(this.visual.options.zIndex)&&(this.visual.options.zIndex=this.series.zIndex)):this.segmentVisual()}segmentVisual(){const{options:e,series:t}=this;let{color:i,_defaults:s}=t;at(i)&&s&&(i=s.color);const n=M.w.fromPoints(this.points(),{stroke:{color:i,width:t.width,opacity:t.opacity,dashType:t.dashType},zIndex:t.zIndex});e.closed&&n.close(),this.visual=n}aliasFor(e,t){return this.parent.getNearestPoint(t.x,t.y,this.seriesIx)}}w(qp,{closed:!1});const Is=qp;function Cl(o,e,t,i,s){const n=o.box,a=new j.A;return a[e]=n[e+t],a[i]=n[i+s],a}const kl={calculateStepPoints:function(o){const e=this.parent.plotArea.seriesCategoryAxis(this.series),{justified:t,vertical:i,reverse:s}=e.options,n=i?E:D,a=i?D:E,l=s?2:1,c=l;let h=Cl(o[0],n,l,a,c);const d=[h];for(let p=1;p<o.length;p++){const u=Cl(o[p],n,l,a,c);if(h[n]!==u[n]){const g=new j.A;g[n]=h[n],g[a]=u[a],d.push(g,u)}h=u}return t?h!==ft(d)&&d.push(h):d.push(Cl(ft(o),n,l,a,s?1:2)),d}};class tu extends Is{points(){return this.calculateStepPoints(this.linePoints)}}x(tu.prototype,kl);const b_=tu,Al=class __ extends Is{segmentVisual(){const e=this.series,t=e._defaults;let i=e.color;at(i)&&t&&(i=t.color);const n=new Xo(this.options.closed).process(this.points()),a=new M.w({stroke:{color:i,width:e.width,opacity:e.opacity,dashType:e.dashType},zIndex:e.zIndex});a.segments.push.apply(a.segments,n),this.visual=a}},Sl={renderSegments:function(){const{options:o,seriesPoints:e}=this,t=o.series,i=e.length;let s;this._segments=[];for(let n=0;n<i;n++){const a=t[n],l=this.sortPoints(e[n]),c=l.length;let h=[];for(let d=0;d<c;d++){const p=l[d];p?h.push(p):this.seriesMissingValues(a)!==vs&&(h.length>1&&(s=this.createSegment(h,a,n,s),this._addSegment(s)),h=[])}h.length>1&&(s=this.createSegment(h,a,n,s),this._addSegment(s))}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(o){this._segments.push(o),o.parent=this},sortPoints:function(o){return o},seriesMissingValues:function(o){const e=o.missingValues;return!e&&this.options.isStacked?Ye:e||vs},getNearestPoint:function(o,e,t){const i=new L(o,e),s=this.seriesPoints[t];let a,n=gt;for(let l=0;l<s.length;l++){const c=s[l];if(c&&null!=c.value&&!1!==c.visible){const d=c.box.center().distanceTo(i);d<n&&(a=c,n=d)}}return a}};class Tl extends he{setup(){this._setEnd(this.options.box.x1)}step(e){const t=this.options.box;this._setEnd(ae(t.x1,t.x2,e))}_setEnd(e){const t=this.element,i=t.segments,s=i[1].anchor(),n=i[2].anchor();t.suspend(),s.setX(e),t.resume(),n.setX(e)}}w(Tl,{duration:pe}),Me.current.register("clip",Tl);const y_=Tl,sr={createAnimation:function(){const o=this.getRoot(),e=(o&&o.options||{}).transitions;if(o&&!1!==e){const t=this.parent&&this.parent.clipBox||o.size(),i=M.w.fromRect(t.toRect()),s=e&&!0!==e?e.loading:e;this.visual.clip(i),this.animation=new y_(i,Object.assign({},{box:t},s)),Gp(this.options.series)&&this._setChildrenAnimation(i)}},_setChildrenAnimation:function(o){const e=this.animationPoints();for(let t=0;t<e.length;t++){const i=e[t];i&&i.visual&&C(i.visual.options.zIndex)&&i.visual.clip(o)}}};class eu extends Xi{render(){super.render(),this.updateStackRange(),this.renderSegments()}pointType(){return Yi}createPoint(e,t){const{series:i,seriesIx:s}=t,n=this.seriesMissingValues(i);let a=e.valueFields.value;if(null==a){if(n!==Ye)return null;a=0}let l=this.pointOptions(i,s);l=this.evalPointOptions(l,a,t);let c=e.fields.color||i.color;at(i.color)&&(c=l.color);const h=new Yi(a,l);return h.color=c,this.append(h),h}plotRange(e){let t=this.plotValue(e);if(this.options.isStacked){const s=this.categoryPoints[e.categoryIx];for(let n=0;n<s.length;n++){const a=s[n];if(e===a)break;t+=this.plotValue(a),this.options.isStacked100&&(t=Math.min(t,1))}}return[t,t]}createSegment(e,t,i){const s=t.style;let n;return n=s===vn?b_:s===bs?Al:Is,new n(e,t,i)}animationPoints(){const e=this.points,t=[];for(let i=0;i<e.length;i++)t.push((e[i]||{}).marker);return t.concat(this._segments)}supportsPointInactiveOpacity(){return!1}}x(eu.prototype,Sl,sr);const Ml=eu,Rs=class w_ extends Is{constructor(e,t,i,s,n){super(e,t,i),this.prevSegment=s,this.stackPoints=n}createVisual(){const e=this.series,t=e._defaults,i=e.line||{};let s=e.color;at(s)&&t&&(s=t.color),this.visual=new et.A({zIndex:e.zIndex}),this.createFill({fill:gi(e.pattern,{color:s,opacity:e.opacity}),stroke:null}),i.width>0&&!1!==i.visible&&this.createStroke({stroke:x({color:s,opacity:e.opacity,lineCap:"butt"},i)})}strokeSegments(){let e=this._strokeSegments;return e||(e=this._strokeSegments=this.createStrokeSegments()),e}createStrokeSegments(){return this.segmentsFromPoints(this.points())}stackSegments(){return this.prevSegment?this.prevSegment.createStackSegments(this.stackPoints):this.createStackSegments(this.stackPoints)}createStackSegments(e){return this.segmentsFromPoints(this.toGeometryPoints(e)).reverse()}segmentsFromPoints(e){return e.map(t=>new Xe.A(t))}createStroke(e){const t=new M.w(e);t.segments.push.apply(t.segments,this.strokeSegments()),this.visual.append(t)}hasStackSegment(){return this.prevSegment||this.stackPoints&&this.stackPoints.length}createFill(e){const t=this.strokeSegments(),i=t.slice(0),s=this.hasStackSegment();if(s){const a=this.stackSegments();Li(i,a)}const n=new M.w(e);n.segments.push.apply(n.segments,i),!s&&t.length>1&&this.fillToAxes(n),this.visual.append(n)}fillToAxes(e){const t=this.parent,i=t.options.invertAxes,s=t.seriesValueAxis(this.series),n=t.categoryAxisCrossingValue(s),a=s.getSlot(n,n,!0),l=this.strokeSegments(),c=l[0].anchor(),h=ft(l).anchor();let d=i?a.x1:a.y1;i?e.lineTo(d,h.y).lineTo(d,c.y):e.lineTo(h.x,d).lineTo(c.x,d)}};class iu extends Rs{createStrokeSegments(){return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints))}createStackSegments(e){return this.segmentsFromPoints(this.calculateStepPoints(e)).reverse()}}x(iu.prototype,kl);const C_=iu,Pl=class k_ extends Rs{createStrokeSegments(){const e=new Xo(this.options.closed),t=this.points();return e.process(t)}createStackSegments(){const e=this.strokeSegments(),t=[];for(let i=e.length-1;i>=0;i--){const s=e[i];t.push(new Xe.A(s.anchor(),s.controlOut(),s.controlIn()))}return t}},S_=class A_ extends Ml{createSegment(e,t,i,s){const a=(t.line||{}).style;let l,c,h;return this.options.isStacked&&i>0&&s&&("gap"!==this.seriesMissingValues(t)?(c=s.linePoints,l=s):c=this._gapStackPoints(e,i,a)),h=a===vn?C_:a===bs?Pl:Rs,new h(e,t,i,l,c)}reflow(e){super.reflow(e);const t=this._stackPoints;if(t)for(let i=0;i<t.length;i++){const s=t[i],n=this.categoryAxis.getSlot(s.categoryIx);s.reflow(n)}}_gapStackPoints(e,t,i){const s=this.seriesPoints;let n=e[0].categoryIx,a=e.length;n<0&&(n=0,a--);const l=n+a,c=this.seriesOptions[0]._outOfRangeMinPoint?1:0,h=[];this._stackPoints=this._stackPoints||[];for(let d=n;d<l;d++){const p=d+c;let g,u=t;do{u--,g=s[u][p]}while(u>0&&!g);if(g)i!==vn&&d>n&&!s[u][p-1]&&h.push(this._previousSegmentPoint(d,p,p-1,u)),h.push(g),i!==vn&&d+1<l&&!s[u][p+1]&&h.push(this._previousSegmentPoint(d,p,p+1,u));else{const f=this._createGapStackPoint(d);this._stackPoints.push(f),h.push(f)}}return h}_previousSegmentPoint(e,t,i,s){const n=this.seriesPoints;let l,a=s;for(;a>0&&!l;)a--,l=n[a][i];return l?l=n[a][t]:(l=this._createGapStackPoint(e),this._stackPoints.push(l)),l}_createGapStackPoint(e){const t=this.pointOptions({},0),i=new Yi(0,t);return i.categoryIx=e,i.series={},i}seriesMissingValues(e){return e.missingValues||Ye}supportsPointInactiveOpacity(){return!1}},nr=class T_{constructor(){this.axisRanges={}}update(e){const t=this.axisRanges;for(let i in e){const s=e[i];let n=t[i];t[i]=n=n||{min:gt,max:wt},n.min=Math.min(n.min,s.min),n.max=Math.max(n.max,s.max)}}reset(e){this.axisRanges[e]=void 0}query(e){return this.axisRanges[e]}};class su extends K{constructor(e,t,i){super(t),this.textBox=new Ht(e,this.options,i),this.append(this.textBox)}createVisual(){this.textBox.options.noclip=this.options.noclip}reflow(e){const t=this.options,{vertical:i,aboveAxis:s}=t,n=this.children[0],a=n.options,l=n.box,c=n.options.padding;let h=e;if(a.align=i?V:N,a.vAlign=i?U:V,t.position===qo)i?(a.vAlign=U,!s&&l.height()<e.height()&&(a.vAlign=Y)):a.align=s?$:N;else if(t.position===V)a.vAlign=V,a.align=V;else if("insideBase"===t.position)i?a.vAlign=s?Y:U:a.align=s?N:$;else if(t.position===Hi)if(i)if(s){const d=(l.width()-e.width()-c.left-c.right)/2;h=new k(e.x1-d,e.y1-l.height(),e.x2+d,e.y1)}else h=new k(e.x1,e.y2,e.x2,e.y2+l.height());else a.align=V,h=s?new k(e.x2,e.y1,e.x2+l.width(),e.y2):new k(e.x1-l.width(),e.y1,e.x1,e.y2);t.rotation||(i?c.left=c.right=(h.width()-n.contentBox.width())/2:c.top=c.bottom=(h.height()-n.contentBox.height())/2),n.reflow(h)}alignToClipBox(e){const i=this.options.vertical?D:E,s=i+"1",n=i+"2",l=this.parent.box;if(l[s]<e[s]||e[n]<l[n]){const c=this.children[0].paddingBox.clone();c[s]=Math.max(l[s],e[s]),c[n]=Math.min(l[n],e[n]),this.reflow(c)}}}w(su,{position:Hi,margin:Z(3),padding:Z(4),color:pt,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:mi,delay:pe},zIndex:2});const nu=su,Ls={addAccessibilityAttributesToVisual:function(){this._id=this._id||yo();const o=Object.assign({},{ariaLabel:this.getAriaLabelText()},this.options.accessibility);Ia(this.visual,o)},getAriaLabelText(){const o=this.options.labels,e=sd(o);return e?e(this.pointData()):this.getLabelText(o)},focusVisual(){this.visual.options.set("id",this._id),this.toggleFocusHighlight(!0)},clearFocusFromVisual(){this.visual.options.set("id",""),this.toggleFocusHighlight(!1)}};class En extends K{constructor(e,t){super(),this.options=t,this.color=t.color||W,this.aboveAxis=R(this.options.aboveAxis,!0),this.value=e}render(){this._rendered||(this._rendered=!0,this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))}createLabel(){const t=this.options.labels;t.visible&&(this.label=this.createLabelElement(t),this.append(this.label))}createLabelElement(e){return new nu(this.getLabelText(e),x({vertical:this.options.vertical},e),this.pointData())}getLabelText(e){let t=kt(e);return t?t(this.pointData()):this.formatValue(e.format)}formatValue(e){return this.owner.formatPointValue(this,e)}reflow(e){this.render();const t=this.label;if(this.box=e,t&&(t.options.aboveAxis=this.aboveAxis,t.reflow(e)),this.note&&this.note.reflow(e),this.errorBars)for(let i=0;i<this.errorBars.length;i++)this.errorBars[i].reflow(e)}createVisual(){const{box:e,options:t}=this,i=t.visual;if(!1!==this.visible)if(super.createVisual(),this.addAccessibilityAttributesToVisual(),i){const s=this.rectVisual=i({category:this.category,dataItem:this.dataItem,value:this.value,sender:this.getSender(),series:this.series,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,rect:e.toRect(),createVisual:()=>{const n=new et.A;return this.createRect(n),n},options:t});s&&this.visual.append(s)}else e.width()>0&&e.height()>0&&this.createRect(this.visual)}createRect(e){const t=this.options,i=t.border,s=C(i.opacity)?i.opacity:t.opacity,n=this.box.toRect();n.size.width=Math.round(n.size.width);const a=this.rectVisual=M.w.fromRect(n,{fill:gi(t.pattern,{color:this.color,opacity:t.opacity}),stroke:{color:this.getBorderColor(),width:i.width,opacity:s,dashType:i.dashType}}),l=this.box.width(),c=this.box.height();if((t.vertical?l:c)>6&&(Zt(a),(l<1||c<1)&&(a.options.stroke.lineJoin="round")),e.append(a),yl(t)){const d=this.createGradientOverlay(a,{baseColor:this.color},x({end:t.vertical?void 0:[0,1]},t.overlay));e.append(d)}}createHighlight(e){return Zt(M.w.fromRect(this.box.toRect(),e))}highlightVisual(){return this.rectVisual}highlightVisualArgs(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}}createFocusHighlight(e){return Zt(M.w.fromRect(this.box.pad(this.options.focusHighlight.border.width/2).toRect(),e))}getBorderColor(){const e=this.color,t=this.options.border,i=t._brightness||.8;let s=t.color;return C(s)||(s=new Ae.A(e).brightness(i).toHex()),s}tooltipAnchor(){const{options:e,box:t,aboveAxis:i}=this,s=this.owner.pane.clipBox()||t;let l,c,n=N,a=U;if(e.vertical)l=Math.min(t.x2,s.x2)+5,i?c=Math.max(t.y1,s.y1):(c=Math.min(t.y2,s.y2),a=Y);else{const h=Math.max(t.x1,s.x1),d=Math.min(t.x2,s.x2);e.isStacked?(a=Y,i?(n=$,l=d):l=h,c=Math.max(t.y1,s.y1)-5):(i?l=d+5:(l=h-5,n=$),c=Math.max(t.y1,s.y1))}return{point:new L(l,c),align:{horizontal:n,vertical:a}}}overlapsBox(e){return this.box.overlaps(e)}unclipBox(){const e=this.label&&this.label.textBox;return Kp(this.box.clone(),[e,this.note])}labelBox(){const e=this.label&&this.label.textBox;return e?e.box:new k}noteBox(){return this.note?this.note.box:new k}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,series:this.series}}getIndex(){return this.categoryIx}}x(En.prototype,_e),x(En.prototype,Os),x(En.prototype,Ls),En.prototype.defaults={border:{width:1},vertical:!0,overlay:{gradient:"glass"},labels:{visible:!1,format:"{0}"},opacity:1,notes:{label:{}},accessibility:{role:bi,className:_i,ariaRoleDescription:yi}};const Dn=En;function ou(o,e){o.forEach(e)}function ru(o,e){const t=o.length;for(let i=t-1;i>=0;i--)e(o[i],i-t-1)}class au extends K{constructor(e){super(e),this.forEach=e.rtl?ru:ou}reflow(e){const{vertical:t,gap:i,spacing:s}=this.options,n=this.children,a=n.length,l=t?D:E,c=a+i+s*(a-1),h=(t?e.height():e.width())/c;let d=e[l+1]+h*(i/2);this.forEach(n,(p,u)=>{const g=(p.box||e).clone();g[l+1]=d,g[l+2]=d+h,p.reflow(g),u<a-1&&(d+=h*s),d+=h})}}w(au,{vertical:!1,gap:0,spacing:0});const or=au;class lu extends K{reflow(e){const t=this.options.vertical?E:D,i=this.children,s=i.length;let n=this.box=new k;for(let a=0;a<s;a++){const l=i[a];if(!1!==l.visible){const c=l.box.clone();c.snapTo(e,t),0===a&&(n=this.box=c.clone()),l.reflow(c),n.wrap(c)}}}}w(lu,{vertical:!0});const P_=lu;class cu extends Xi{render(){super.render(),this.updateStackRange()}pointType(){return Dn}clusterType(){return or}stackType(){return P_}stackLimits(e,t){return super.stackLimits(e,t)}createPoint(e,t){const{categoryIx:i,series:s,seriesIx:n}=t,{options:a,children:l}=this,c=C(s.stack)?s.stack:a.defaultStack,h=this.pointValue(e);let d=this.pointOptions(s,n);const p=d.labels;c&&p.position===Hi&&(p.position=qo),d.isStacked=c;let u=e.fields.color||s.color;h<0&&d.negativeColor&&(u=d.negativeColor),d=this.evalPointOptions(d,h,t),at(s.color)&&(u=d.color);const f=new(this.pointType())(h,d);f.color=u;let m=l[i];return m||(m=new(this.clusterType())({vertical:a.invertAxes,gap:a.gap,spacing:a.spacing,rtl:!a.invertAxes&&(this.chartService||{}).rtl}),this.append(m)),a.isStacked?this.getStackWrap(c,m).append(f):m.append(f),f}getStackWrap(e,t){const i=typeof e===tn?e.group||!0:e,s=t.children;let n;if(typeof i===fa||!0===i)for(let a=0;a<s.length;a++)if(s[a]._stackGroup===i){n=s[a];break}return n||(n=new(this.stackType())({vertical:!this.options.invertAxes}),n._stackGroup=i,t.append(n)),n}categorySlot(e,t,i){const s=this.options,n=e.getSlot(t),a=i.startValue();if(s.isStacked){const l=i.getSlot(a,a,!0),c=s.invertAxes?E:D;n[c+1]=n[c+2]=l[c+1]}return n}reflowCategories(e){const t=this.children,i=t.length;for(let s=0;s<i;s++)t[s].reflow(e[s])}createAnimation(){this._setAnimationOptions(),super.createAnimation(),Gp(this.options.series)&&this._setChildrenAnimation()}_setChildrenAnimation(){const e=this.points;for(let t=0;t<e.length;t++){const i=e[t],s=i.visual;s&&C(s.options.zIndex)&&(i.options.animation=this.options.animation,i.createAnimation())}}_setAnimationOptions(){const e=this.options,t=e.animation||{};let i;if(e.isStacked){const s=this.seriesValueAxis(e.series[0]);i=s.getSlot(s.startValue())}else i=this.categoryAxis.getSlot(0);t.origin=new j.A(i.x1,i.y1),t.vertical=!e.invertAxes}}w(cu,{animation:{type:ue}});const On=cu;class Vs extends K{constructor(e,t){super(t),this.value=e}getLabelText(e){return this.formatValue(e.format)}reflow(e){const{options:t,value:i,owner:s}=this,n=s.seriesValueAxis(t),a=n.getSlot(i.open,i.close),l=n.getSlot(i.low,i.high);a.x1=l.x1=e.x1,a.x2=l.x2=e.x2,this.realBody=a;const c=l.center().x,h=[];h.push([[c,l.y1],[c,a.y1]]),h.push([[c,a.y2],[c,l.y2]]),this.lines=h,this.box=l.clone().wrap(a),this._rendered||(this._rendered=!0,this.createNote()),this.reflowNote()}reflowNote(){this.note&&this.note.reflow(this.box)}createVisual(){super.createVisual(),this.addAccessibilityAttributesToVisual(),this._mainVisual=this.mainVisual(this.options),this.visual.append(this._mainVisual),this.createOverlay()}mainVisual(e){const t=new et.A;return this.createBody(t,e),this.createLines(t,e),t}createBody(e,t){const i=M.w.fromRect(this.realBody.toRect(),{fill:gi(t.pattern,{color:this.color,opacity:t.opacity}),stroke:null});t.border.width>0&&i.options.set("stroke",{color:this.getBorderColor(t),width:t.border.width,dashType:t.border.dashType,opacity:R(t.border.opacity,t.opacity)}),Zt(i),e.append(i),yl(t)&&e.append(this.createGradientOverlay(i,{baseColor:this.color},x({end:t.vertical?void 0:[0,1]},t.overlay)))}createLines(e,t){this.drawLines(e,t,this.lines,t.line)}drawLines(e,t,i,s){if(!i)return;const n={stroke:{color:s.color||this.color,opacity:R(s.opacity,t.opacity),width:s.width,dashType:s.dashType,lineCap:"butt"}};for(let a=0;a<i.length;a++){const l=M.w.fromPoints(i[a],n);Zt(l),e.append(l)}}getBorderColor(e){let i=e.border.color;return C(i)||(i=new Ae.A(this.color).brightness(this.options.border._brightness).toHex()),i}createOverlay(){const e=M.w.fromRect(this.box.toRect(),{fill:{color:W,opacity:0},stroke:null});this.visual.append(e)}createHighlight(){const e=this.options.highlight,t=this.color;this.color=e.color||this.color;const i=this.mainVisual(x({},this.options,{line:{color:this.getBorderColor(e)}},e));return this.color=t,i}highlightVisual(){return this._mainVisual}highlightVisualArgs(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}}tooltipAnchor(){const e=this.box,t=this.owner.pane.clipBox()||e;return{point:new L(e.x2+5,Math.max(e.y1,t.y1)+5),align:{horizontal:N,vertical:U}}}formatValue(e){return this.owner.formatPointValue(this,e)}overlapsBox(e){return this.box.overlaps(e)}pointData(){return{dataItem:this.dataItem,value:this.value,meanPoints:this.meanPoints,medianPoints:this.medianPoints,whiskerPoints:this.whiskerPoints,stackValue:this.stackValue,series:this.series}}getIndex(){return this.categoryIx}}Vs.prototype.createFocusHighlight=Dn.prototype.createFocusHighlight,w(Vs,{vertical:!0,border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{4:d}</th></tr><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},labels:{format:""},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},accessibility:{role:bi,className:_i,ariaRoleDescription:yi}}),x(Vs.prototype,_e),x(Vs.prototype,Os),x(Vs.prototype,Ls);const El=Vs;class hu extends Xi{reflowCategories(e){const t=this.children,i=t.length;for(let s=0;s<i;s++)t[s].reflow(e[s])}addValue(e,t){const{categoryIx:i,category:s,series:n,seriesIx:a}=t,{children:l,options:c}=this,h=e.valueFields,p=Hp(this.splitValue(h)),u=n.data[i];let f,g=this.categoryPoints[i];g||(this.categoryPoints[i]=g=[]),p&&(f=this.createPoint(e,t));let m=l[i];m||(m=new or({vertical:c.invertAxes,gap:c.gap,spacing:c.spacing,rtl:!c.invertAxes&&(this.chartService||{}).rtl}),this.append(m)),f&&(this.updateRange(h,t),m.append(f),f.categoryIx=i,f.category=s,f.series=n,f.seriesIx=a,f.owner=this,f.dataItem=u,f.noteText=e.fields.noteText),this.points.push(f),g.push(f)}pointType(){return El}createPoint(e,t){const{series:i}=t,s=this.pointType(),n=e.valueFields;let a=x({},i),l=e.fields.color||i.color;a=this.evalPointOptions(a,n,t),(i.type===ys||i.type===Cs)&&n.open>n.close&&(l=e.fields.downColor||i.downColor||i.color),at(i.color)&&(l=a.color),a.vertical=!this.options.invertAxes;const c=new s(n,a);return c.color=l,c}splitValue(e){return[e.low,e.open,e.close,e.high]}updateRange(e,t){const i=t.series.axis,s=this.splitValue(e);let n=this.valueAxisRanges[i]||{min:gt,max:wt};this.valueAxisRanges[i]={min:Math.min.apply(Math,s.concat([n.min])),max:Math.max.apply(Math,s.concat([n.max]))}}formatPointValue(e,t){const i=e.value;return this.chartService.format.auto(t,i.open,i.high,i.low,i.close,e.category)}animationPoints(){return this.points}}x(hu.prototype,sr);const Dl=hu;class Ol extends El{constructor(e,t){super(e,t),this.createNote()}reflow(e){const{options:t,value:i,owner:s}=this,n=s.seriesValueAxis(t);let a,l;this.boxSlot=l=n.getSlot(i.q1,i.q3),this.realBody=l,this.reflowBoxSlot(e),this.whiskerSlot=a=n.getSlot(i.lower,i.upper),this.reflowWhiskerSlot(e);const c=n.getSlot(i.median);if(i.mean){const h=n.getSlot(i.mean);this.meanPoints=this.calcMeanPoints(e,h)}this.whiskerPoints=this.calcWhiskerPoints(l,a),this.medianPoints=this.calcMedianPoints(e,c),this.box=a.clone().wrap(l),this.reflowNote()}reflowBoxSlot(e){this.boxSlot.x1=e.x1,this.boxSlot.x2=e.x2}reflowWhiskerSlot(e){this.whiskerSlot.x1=e.x1,this.whiskerSlot.x2=e.x2}calcMeanPoints(e,t){return[[[e.x1,t.y1],[e.x2,t.y1]]]}calcWhiskerPoints(e,t){const i=t.center().x;return[[[i-5,t.y1],[i+5,t.y1],[i,t.y1],[i,e.y1]],[[i-5,t.y2],[i+5,t.y2],[i,t.y2],[i,e.y2]]]}calcMedianPoints(e,t){return[[[e.x1,t.y1],[e.x2,t.y1]]]}renderOutliers(e){const t=this.value,i=t.outliers||[],s=3*Math.abs(t.q3-t.q1),n=[];let a=e.markers||{};for(let l=0;l<i.length;l++){const c=i[l];a=c<t.q3+s&&c>t.q1-s?e.outliers:e.extremes;let h=x({},a.border);C(h.color)||(h.color=C(this.color)?this.color:new Ae.A(a.background).brightness(.8).toHex());const d=new Rt({type:a.type,width:a.size,height:a.size,rotation:a.rotation,background:a.background,border:h,opacity:a.opacity});d.value=c,n.push(d)}return this.reflowOutliers(n),n}reflowOutliers(e){const t=this.owner.seriesValueAxis(this.options),i=this.box.center();for(let s=0;s<e.length;s++){const a=t.getSlot(e[s].value);this.options.vertical?a.move(i.x):a.move(void 0,i.y),this.box=this.box.wrap(a),e[s].reflow(a)}}mainVisual(e){const t=super.mainVisual(e),i=this.renderOutliers(e);for(let s=0;s<i.length;s++){const n=i[s].getElement();n&&t.append(n)}return t}createLines(e,t){this.drawLines(e,t,this.whiskerPoints,t.whiskers),this.drawLines(e,t,this.medianPoints,t.median),this.drawLines(e,t,this.meanPoints,t.mean)}getBorderColor(){return(this.options.border||{}).color?this.options.border.color:this.color?this.color:super.getBorderColor()}}w(Ol,{border:{_brightness:.8},line:{width:2},median:{color:"#f6f6f6"},mean:{width:2,dashType:"dash",color:"#f6f6f6"},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{6:d}</th></tr><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:8,type:ha,background:W,border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:8,type:jt,background:W,border:{width:2,opacity:1},opacity:0}}),x(Ol.prototype,_e);const du=Ol,D_=class E_ extends du{reflowBoxSlot(e){this.boxSlot.y1=e.y1,this.boxSlot.y2=e.y2}reflowWhiskerSlot(e){this.whiskerSlot.y1=e.y1,this.whiskerSlot.y2=e.y2}calcMeanPoints(e,t){return[[[t.x1,e.y1],[t.x1,e.y2]]]}calcWhiskerPoints(e,t){const i=t.center().y;return[[[t.x1,i-5],[t.x1,i+5],[t.x1,i],[e.x1,i]],[[t.x2,i-5],[t.x2,i+5],[t.x2,i],[e.x2,i]]]}calcMedianPoints(e,t){return[[[t.x1,e.y1],[t.x1,e.y2]]]}},I_=class O_ extends Dl{addValue(e,t){const{categoryIx:i,category:s,series:n,seriesIx:a}=t,{children:l,options:c}=this,h=e.valueFields,p=Hp(this.splitValue(h)),u=n.data[i];let f,g=this.categoryPoints[i];g||(this.categoryPoints[i]=g=[]),p&&(f=this.createPoint(e,t));let m=l[i];m||(m=new or({vertical:c.invertAxes,gap:c.gap,spacing:c.spacing,rtl:!c.invertAxes&&(this.chartService||{}).rtl}),this.append(m)),f&&(this.updateRange(h,t),m.append(f),f.categoryIx=i,f.category=s,f.series=n,f.seriesIx=a,f.owner=this,f.dataItem=u),this.points.push(f),g.push(f)}pointType(){return this.options.invertAxes?D_:du}splitValue(e){return[e.lower,e.q1,e.median,e.q3,e.upper]}updateRange(e,t){const i=t.series.axis;let s=this.splitValue(e).concat(this.filterOutliers(e.outliers));C(e.mean)&&(s=s.concat(e.mean));let n=this.valueAxisRanges[i]||{min:gt,max:wt};this.valueAxisRanges[i]={min:Math.min.apply(Math,s.concat([n.min])),max:Math.max.apply(Math,s.concat([n.max]))}}formatPointValue(e,t){const i=e.value;return this.chartService.format.auto(t,i.lower,i.q1,i.median,i.q3,i.upper,i.mean,e.category)}filterOutliers(e){const t=(e||[]).length,i=[];for(let s=0;s<t;s++){const n=e[s];C(n)&&null!==n&&i.push(n)}return i}supportsPointInactiveOpacity(){return!1}},L_=class R_ extends Up{getAxis(){const e=this.chart.seriesAxes(this.series);return this.isVertical?e.y:e.x}};class Il extends K{constructor(e,t){super(t),this.plotArea=e,this.chartService=e.chartService,this._initFields(),this.render()}_initFields(){this.xAxisRanges={},this.yAxisRanges={},this.points=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[]}render(){this.traverseDataPoints(this.addValue.bind(this))}addErrorBar(e,t,i){const s=e.value[t],n=t+"Value",a=t+"ErrorLow",l=t+"ErrorHigh",{seriesIx:c,series:h}=i,d=e.options.errorBars,p=i[a],u=i[l];if(H(s)){let g;H(p)&&H(u)&&(g={low:p,high:u}),d&&C(d[n])&&(this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]},this.seriesErrorRanges[t][c]=this.seriesErrorRanges[t][c]||new Tp(d[n],h,t),g=this.seriesErrorRanges[t][c].getErrorRange(s,d[n])),g&&this.addPointErrorBar(g,e,t)}}addPointErrorBar(e,t,i){const{low:s,high:n}=e,{series:a,options:{errorBars:l}}=t,c=i===D,h={};t[i+"Low"]=s,t[i+"High"]=n,t.errorBars=t.errorBars||[];const d=new L_(s,n,c,this,a,l);t.errorBars.push(d),t.append(d),h[i]=s,this.updateRange(h,a),h[i]=n,this.updateRange(h,a)}addValue(e,t){const{x:i,y:s}=e,n=t.seriesIx,l=this.seriesMissingValues(this.options.series[n]),c=this.seriesPoints[n];let d,h=e;Xt(i)&&Xt(s)||(h=this.createMissingValue(h,l)),h&&(d=this.createPoint(h,t),d&&(Object.assign(d,t),this.addErrorBar(d,E,t),this.addErrorBar(d,D,t)),this.updateRange(h,t.series)),this.points.push(d),c.push(d)}seriesMissingValues(e){return e.missingValues}createMissingValue(){}updateRange(e,t){const i=this.chartService.intl,{xAxis:s,yAxis:n}=t;let{x:a,y:l}=e,c=this.xAxisRanges[s],h=this.yAxisRanges[n];Xt(a)&&(c=this.xAxisRanges[s]=c||{min:gt,max:wt},Ut(a)&&(a=Et(i,a)),c.min=Math.min(c.min,a),c.max=Math.max(c.max,a)),Xt(l)&&(h=this.yAxisRanges[n]=h||{min:gt,max:wt},Ut(l)&&(l=Et(i,l)),h.min=Math.min(h.min,l),h.max=Math.max(h.max,l))}evalPointOptions(e,t,i){const{series:s,seriesIx:n}=i,a={defaults:s._defaults,excluded:["data","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint","drilldownSeriesFactory","ariaTemplate","ariaContent"]};let l=this._evalSeries[n];C(l)||(this._evalSeries[n]=l=Ke(e,{},a,!0));let c=e;return l&&(c=x({},e),Ke(c,{value:t,series:s,dataItem:i.dataItem},a)),c}pointType(){return Yi}pointOptions(e,t){let i=this.seriesOptions[t];if(!i){const s=this.pointType().prototype.defaults;this.seriesOptions[t]=i=x({},s,{markers:{opacity:e.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},e)}return i}createPoint(e,t){const i=t.series;let s=this.pointOptions(i,t.seriesIx),n=t.color||i.color;s=this.evalPointOptions(s,e,t),at(i.color)&&(n=s.color);const a=new Yi(e,s);return a.color=n,this.append(a),a}seriesAxes(e){const{xAxis:t,yAxis:i}=e,s=this.plotArea,n=t?s.namedXAxes[t]:s.axisX,a=i?s.namedYAxes[i]:s.axisY;if(!n)throw new Error("Unable to locate X axis with name "+t);if(!a)throw new Error("Unable to locate Y axis with name "+i);return{x:n,y:a}}reflow(e){const t=this.points,i=!this.options.clip;let s=0;this.traverseDataPoints((n,a)=>{const l=t[s++],c=this.seriesAxes(a.series),h=c.x.getSlot(n.x,n.x,i),d=c.y.getSlot(n.y,n.y,i);if(l)if(h&&d){const p=this.pointSlot(h,d);l.reflow(p)}else l.visible=!1}),this.box=e}pointSlot(e,t){return new k(e.x1,t.y1,e.x2,t.y2)}traverseDataPoints(e){const{options:{series:t},seriesPoints:i}=this;for(let s=0;s<t.length;s++){const n=t[s];i[s]||(i[s]=[]);for(let l=0;l<n.data.length;l++){const{valueFields:c,fields:h}=this.plotArea.bindPoint(n,l);e(c,x({pointIx:l,series:n,seriesIx:s,dataItem:n.data[l],owner:this},h))}}}formatPointValue(e,t){const i=e.value;return this.chartService.format.auto(t,i.x,i.y)}animationPoints(){const e=this.points,t=[];for(let i=0;i<e.length;i++)t.push((e[i]||{}).marker);return t}}w(Il,{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0}),x(Il.prototype,sr);const rr=Il;class ar extends Yi{constructor(e,t){super(e,t),this.category=e.category}createHighlight(){const e=this.options.highlight,t=e.border,i=this.options.markers,s=this.box.center(),n=(i.size+i.border.width+t.width)/2,a=new et.A,l=new Te.A(new ce.A([s.x,s.y+n/5+t.width/2],n+t.width/2),{stroke:{color:"none"},fill:this.createGradient({gradient:"bubbleShadow",color:i.background,stops:[{offset:0,color:i.background,opacity:.3},{offset:1,color:i.background,opacity:0}]})}),c=new Te.A(new ce.A([s.x,s.y],n),{stroke:{color:t.color||new Ae.A(i.background).brightness(.8).toHex(),width:t.width,opacity:t.opacity,dashType:t.dashType},fill:gi(this.options.pattern,{color:i.background,opacity:e.opacity})});return a.append(l,c),a}createFocusHighlight(e){const t=this.options.focusHighlight,i=this.options.markers,s=this.box.center();return new Te.A(new ce.A([s.x,s.y],(i.size+i.border.width)/2+t.border.width/2),e)}}ar.prototype.defaults=x({},ar.prototype.defaults,{labels:{position:V},highlight:{opacity:1,border:{color:"#fff",width:2,opacity:1}}}),ar.prototype.defaults.highlight.zIndex=void 0;const pu=ar;class uu extends rr{_initFields(){this._maxSize=wt,super._initFields()}addValue(e,t){null!==e.size&&(e.size>0||e.size<0&&t.series.negativeValues.visible)?(this._maxSize=Math.max(this._maxSize,Math.abs(e.size)),super.addValue(e,t)):(this.points.push(null),this.seriesPoints[t.seriesIx].push(null))}reflow(e){this.updateBubblesSize(e),super.reflow(e)}pointType(){return pu}createPoint(e,t){const i=t.series,n=t.pointIx*(pe/i.data.length),a={delay:n,duration:pe-n,type:_s};let l=t.color||i.color;e.size<0&&i.negativeValues.visible&&(l=R(i.negativeValues.color,l));let c=x({labels:{animation:{delay:n,duration:pe-n}}},this.pointOptions(i,t.seriesIx),{markers:{type:jt,border:i.border,opacity:i.opacity,animation:a}});c=this.evalPointOptions(c,e,t),at(i.color)&&(l=c.color),c.markers.background=l;const h=new pu(e,c);return h.color=l,this.append(h),h}updateBubblesSize(e){const{options:{series:t}}=this,i=Math.min(e.width(),e.height());for(let s=0;s<t.length;s++){const n=t[s],a=this.seriesPoints[s],h=(n.minSize||Math.max(.02*i,10))/2,d=(n.maxSize||.2*i)/2,p=Math.PI*h*h,f=(Math.PI*d*d-p)/this._maxSize;for(let m=0;m<a.length;m++){const v=a[m];if(v){const _=Math.abs(v.value.size)*f,y=Math.sqrt((p+_)/Math.PI),I=R(v.options.zIndex,0)+(1-y/d);x(v.options,{zIndex:I,markers:{size:2*y,zIndex:I},labels:{zIndex:I+1}})}}}}formatPointValue(e,t){const i=e.value;return this.chartService.format.auto(t,i.x,i.y,i.size,e.category)}createAnimation(){}createVisual(){}}w(uu,{tooltip:{format:"{3}"},labels:{format:"{3}"}});const V_=uu;class gu extends Rt{}x(gu.prototype,_e);const B_=gu;class Wi extends K{constructor(e,t){super(t),this.aboveAxis=this.options.aboveAxis,this.color=t.color||W,this.value=e}render(){const e=this.options;this._rendered||(this._rendered=!0,C(this.value.target)&&(this.target=new B_({type:e.target.shape,background:e.target.color||this.color,opacity:e.opacity,zIndex:e.zIndex,border:e.target.border,vAlign:U,align:$}),this.target.value=this.value,this.target.dataItem=this.dataItem,this.target.series=this.series,this.append(this.target)),this.createLabel(),this.createNote())}createLabel(){const t=this.options.labels;t.visible&&(this.label=this.createLabelElement(t),this.append(this.label))}createLabelElement(e){return new nu(this.getLabelText(e),e,this.pointData())}getLabelText(e){let t=kt(e);return t?t(this.pointData()):this.formatValue(e.format)}reflow(e){this.render();const{options:t,target:i,owner:s}=this,n=t.invertAxes,a=s.seriesValueAxis(this.options),l=s.categorySlot(s.categoryAxis,t.categoryIx,a),c=a.getSlot(this.value.target),h=n?c:l,d=n?l:c;if(i){const u=new k(h.x1,d.y1,h.x2,d.y2);i.options.height=n?u.height():t.target.line.width,i.options.width=n?t.target.line.width:u.width(),i.reflow(u)}const p=this.label;p&&(p.options.aboveAxis=this.aboveAxis,p.reflow(e)),this.note&&this.note.reflow(e),this.box=e}createVisual(){super.createVisual(),this.addAccessibilityAttributesToVisual();const e=this.options,t=M.w.fromRect(this.box.toRect(),{fill:gi(e.pattern,{color:this.color,opacity:e.opacity}),stroke:null});e.border.width>0&&t.options.set("stroke",{color:e.border.color||this.color,width:e.border.width,dashType:e.border.dashType,opacity:R(e.border.opacity,e.opacity)}),this.bodyVisual=t,Zt(t),this.visual.append(t)}createAnimation(){this.bodyVisual&&(this.animation=he.create(this.bodyVisual,this.options.animation))}createHighlight(e){return M.w.fromRect(this.box.toRect(),e)}highlightVisual(){return this.bodyVisual}highlightVisualArgs(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}}formatValue(e){return this.owner.formatPointValue(this,e)}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series}}overlapsBox(e){return this.box.overlaps(e)}getIndex(){return this.categoryIx}}Wi.prototype.tooltipAnchor=Dn.prototype.tooltipAnchor,Wi.prototype.createFocusHighlight=Dn.prototype.createFocusHighlight,w(Wi,{border:{width:1},vertical:!1,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},labels:{visible:!1},tooltip:{format:"Current: {0}<br />Target: {1}"},notes:{label:{}},accessibility:{role:bi,className:_i,ariaRoleDescription:yi}}),x(Wi.prototype,_e),x(Wi.prototype,Os),x(Wi.prototype,Ls);const F_=Wi;class Rl extends Xi{constructor(e,t){(function N_(o){const e=o.series;for(let t=0;t<e.length;t++){const i=e[t],s=i.data;s&&!Pt(s[0])&&!re(s[0])&&(i.data=[s])}})(t),super(e,t)}reflowCategories(e){const t=this.children,i=t.length;for(let s=0;s<i;s++)t[s].reflow(e[s])}plotRange(e){const i=this.seriesValueAxis(e.series),s=this.categoryAxisCrossingValue(i);return[s,e.value.current||s]}createPoint(e,t){const{categoryIx:i,series:s}=t,{options:n,children:a}=this,l=e.valueFields;let c=x({vertical:!n.invertAxes,overlay:s.overlay,categoryIx:i,invertAxes:n.invertAxes},s),h=e.fields.color||s.color;c=this.evalPointOptions(c,l,t),at(s.color)&&(h=c.color);const d=new F_(l,c);d.color=h;let p=a[i];return p||(p=new or({vertical:n.invertAxes,gap:n.gap,spacing:n.spacing,rtl:!n.invertAxes&&(this.chartService||{}).rtl}),this.append(p)),p.append(d),d}updateRange(e,t){const{current:i,target:s}=e,n=t.series.axis;let a=this.valueAxisRanges[n];C(i)&&!isNaN(i)&&C(s&&!isNaN(s))&&(a=this.valueAxisRanges[n]=a||{min:gt,max:wt},a.min=Math.min(a.min,i,s),a.max=Math.max(a.max,i,s))}formatPointValue(e,t){return this.chartService.format.auto(t,e.value.current,e.value.target)}pointValue(e){return e.valueFields.current}aboveAxis(e){return e.value.current>0}createAnimation(){const e=this.points;this._setAnimationOptions();for(let t=0;t<e.length;t++){const i=e[t];i.options.animation=this.options.animation,i.createAnimation()}}}Rl.prototype._setAnimationOptions=On.prototype._setAnimationOptions,w(Rl,{animation:{type:ue}});const z_=Rl;class fu{constructor(e,t){this.chartService=e,this.options=x({},this.options,t)}getStyle(e,t){let{background:i,border:{color:s}}=e;if(t){const a=t.color||t.options.color;i=R(i,a),s=R(s,a)}const n=void 0!==e.padding?Z(e.padding):{};return"object"==typeof e.padding&&(n.top=void 0!==e.padding.top?n.top:void 0,n.right=void 0!==e.padding.right?n.right:void 0,n.bottom=void 0!==e.padding.bottom?n.bottom:void 0,n.left=void 0!==e.padding.left?n.left:void 0),{backgroundColor:i,borderColor:s,font:e.font,color:e.color,opacity:e.opacity,borderWidth:cs(e.border.width),paddingTop:cs(n.top),paddingBottom:cs(n.bottom),paddingLeft:cs(n.left),paddingRight:cs(n.right)}}show(e,t,i){if(!this.chartService)return;e.format=t.format;const s=this.getStyle(t,i);e.style=s;const n=new Ae.A(s.backgroundColor);!C(t.color)&&!n.isDark()&&(e.className="k-chart-tooltip-inverse"),this.chartService.notify(Fp,e),this.visible=!0}hide(){this.chartService&&this.chartService.notify(Np),this.visible=!1}destroy(){delete this.chartService}}w(fu,{border:{width:1},opacity:1});const Ll=fu;class mu extends Ll{constructor(e,t,i){super(e,i),this.crosshair=t,this.formatService=e.format,this.initAxisName()}initAxisName(){const e=this.crosshair.axis;let i;i=e.plotArea.categoryAxis?e.getCategory?"categoryAxis":"valueAxis":e.options.vertical?"yAxis":"xAxis",this.axisName=i}showAt(e){const{crosshair:{axis:t},options:i}=this;let s=t[i.stickyMode?"getCategory":"getValue"](e),n=s;i.format?n=this.formatService.auto(i.format,s):t.options.type===Fe&&(n=this.formatService.auto(t.options.labels.dateFormats[t.options.baseUnit],s)),this.show({point:e,anchor:this.getAnchor(),crosshair:this.crosshair,value:n,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex},this.options)}hide(){this.chartService.notify(Np,{crosshair:this.crosshair,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex})}getAnchor(){const{crosshair:e,options:{position:t,padding:i}}=this,s=!e.axis.options.vertical,n=e.line.bbox();let a,l,c;return s?(a=V,t===Y?(l=U,c=n.bottomLeft().translate(0,i)):(l=Y,c=n.topLeft().translate(0,-i))):(l=V,t===N?(a=$,c=n.topLeft().translate(-i,0)):(a=N,c=n.topRight().translate(i,0))),{point:c,align:{horizontal:a,vertical:l}}}}w(mu,{padding:10});const j_=mu;class xu extends K{constructor(e,t,i){super(i),this.axis=t,this.stickyMode=t instanceof Ge;const s=this.options.tooltip;s.visible&&(this.tooltip=new j_(e,this,x({},s,{stickyMode:this.stickyMode})))}showAt(e){this.point=e,this.moveLine(),this.line.visible(!0),this.tooltip&&this.tooltip.showAt(e)}hide(){this.line.visible(!1),this.tooltip&&this.tooltip.hide()}moveLine(){const{axis:e,point:t}=this,i=e.options.vertical,s=this.getBox(),n=i?D:E,a=new j.A(s.x1,s.y1);let l;if(l=i?new j.A(s.x2,s.y1):new j.A(s.x1,s.y2),t)if(this.stickyMode){const c=e.getSlot(e.pointCategoryIndex(t));a[n]=l[n]=c.center()[n]}else a[n]=l[n]=t[n];this.box=s,this.line.moveTo(a).lineTo(l)}getBox(){const e=this.axis,t=e.pane.axes,i=t.length,s=e.options.vertical,n=e.lineBox().clone(),a=s?E:D;let l;for(let c=0;c<i;c++){const h=t[c];h.options.vertical!==s&&(l?l.wrap(h.lineBox()):l=h.lineBox().clone())}return n[a+1]=l[a+1],n[a+2]=l[a+2],n}createVisual(){super.createVisual();const e=this.options;this.line=new M.w({stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType},visible:!1}),this.moveLine(),this.visual.append(this.line)}destroy(){this.tooltip&&this.tooltip.destroy(),super.destroy()}}w(xu,{color:pt,width:2,zIndex:-1,tooltip:{visible:!1}});const U_=xu;class vu extends K{constructor(e,t){super(e),this.pane=t}shouldClip(){const e=this.children,t=e.length;for(let i=0;i<t;i++)if(!0===e[i].options.clip)return!0;return!1}_clipBox(){return this.pane.chartsBox()}createVisual(){if(this.visual=new et.A({zIndex:0}),this.shouldClip()){const t=(this.clipBox=this._clipBox()).toRect(),i=M.w.fromRect(t);Zt(i),this.visual.clip(i),this.unclipLabels()}}stackRoot(){return this}unclipLabels(){const{children:e,clipBox:t}=this;for(let i=0;i<e.length;i++){const s=e[i].points||[],n=s.length;for(let a=0;a<n;a++){const l=s[a];if(l&&!1!==l.visible&&l.overlapsBox&&l.overlapsBox(t))if(l.unclipElements)l.unclipElements();else{const{label:c,note:h}=l;c&&c.options.visible&&(c.alignToClipBox&&c.alignToClipBox(t),c.options.noclip=!0),h&&h.options.visible&&(h.options.noclip=!0)}}}}unclipBox(){const{children:e}=this,t=this._clipBox(),i=t.clone();for(let s=0;s<e.length;s++){const n=e[s].points||[],a=n.length;for(let l=0;l<a;l++){const c=n[l];if(c&&c.unclipBox&&c.overlapsBox&&!1!==c.visible){if(!c.overlapsBox(t)){c.clipElements&&c.clipElements();continue}const h=c.unclipBox();if(i.overlaps(h)){const d=c.labelBox?c.labelBox():new k,p=c.noteBox?c.noteBox():new k,u=Math.max(d.height(),p.height()),g=Math.max(d.width(),p.width());i.wrapLimit(h,g,u)}}}}return i}destroy(){super.destroy(),delete this.parent}}vu.prototype.isStackRoot=!0;const G_=vu;class In extends fi{constructor(e){super(e),this.id=function X_(){return"pane"+H_++}(),this.createTitle(),this.content=new K,this.chartContainer=new G_({},this),this.append(this.content),this.axes=[],this.charts=[]}createTitle(){let e=this.options.title;re(e)&&(e=x({},e,{align:e.position,position:U})),this.title=pn.buildTitle(e,In.prototype.options.title),this.title&&this.append(this.title)}appendAxis(e){this.content.append(e),this.axes.push(e),e.pane=this}appendAxisAt(e,t){this.content.append(e),this.axes.splice(t,0,e),e.pane=this}appendChart(e){this.chartContainer.parent!==this.content&&this.content.append(this.chartContainer),this.charts.push(e),this.chartContainer.append(e),e.pane=this}empty(){const e=this.parent;if(e){for(let t=0;t<this.axes.length;t++)e.removeAxis(this.axes[t]);for(let t=0;t<this.charts.length;t++)e.removeChart(this.charts[t])}this.axes=[],this.charts=[],this.content.destroy(),this.content.children=[],this.chartContainer.children=[]}reflow(e){let t;ft(this.children)===this.content&&(t=this.children.pop()),super.reflow(e),t&&this.children.push(t),this.title&&(this.contentBox.y1+=this.title.box.height())}unclipBox(){return this.chartContainer.unclipBox()}visualStyle(){const e=super.visualStyle();return e.zIndex=-10,e}renderComplete(){this.options.visible&&this.createGridLines()}stackRoot(){return this}clipRoot(){return this}createGridLines(){const e=this.axes,t=e.concat(this.parent.axes),i=[],s=[];for(let n=0;n<e.length;n++){const a=e[n],l=a.options.vertical,c=l?i:s;for(let h=0;h<t.length;h++)if(0===c.length){const d=t[h];l!==d.options.vertical&&Li(c,a.createGridLines(d))}}}refresh(){this.visual.clear(),this.content.parent=null,this.content.createGradient=this.createGradient.bind(this),this.content.renderVisual(),this.content.parent=this,this.title&&this.visual.append(this.title.visual),this.visual.append(this.content.visual),this.renderComplete(),this.notifyRender()}chartsBox(){const e=this.axes,t=e.length,i=new k;for(let s=0;s<t;s++){const n=e[s],a=n.options.vertical?D:E,l=n.lineBox();i[a+1]=l[a+1],i[a+2]=l[a+2]}if(0===i.x2){const s=this.parent.axes,n=s.length;for(let a=0;a<n;a++){const l=s[a];if(!l.options.vertical){const c=l.lineBox();i.x1=c.x1,i.x2=c.x2}}}return i}clipBox(){return this.chartContainer.clipBox}notifyRender(){const e=this.getService();e&&e.notify("paneRender",{pane:new Ja(this),index:this.paneIndex,name:this.options.name})}}let H_=1;In.prototype.isStackRoot=!0,w(In,{zIndex:-1,shrinkToFit:!0,title:{align:N},visible:!0});const Y_=In,Vl=o=>!1!==o.options.visible;class bu extends K{constructor(e,t,i){super(t),this.initFields(e,t),this.series=e,this.initSeries(),this.charts=[],this.options.legend=this.options.legend||{},this.options.legend.data=[],this.axes=[],this.crosshairs=[],this.chartService=i,this.originalOptions=t,this.originalSeries=e,this._bindCache=new WeakMap,this.createPanes(),this.render(),this.createCrosshairs()}initFields(){}initSeries(){const e=this.series;for(let t=0;t<e.length;t++)e[t].index=t}bindPoint(e,t,i){let s=this._bindCache.get(e);s||(s=[],this._bindCache.set(e,s));let n=s[t];return n||(n=s[t]=ot.current.bindPoint(e,t,i)),n}createPanes(){const e=this.options.title||{},t=this.options.paneDefaults,i=this.options.panes||[],s=Math.max(i.length,1),n=[],a=x({title:{color:e.color}},t);for(let l=0;l<s;l++){const c=x({},a,i[l]);Ut(c.title)&&(c.title=x({text:c.title},a.title));const h=new Y_(c);h.paneIndex=l,n.push(h),this.append(h)}this.panes=n}crosshairOptions(e){return e.options.crosshair}createCrosshairs(e=this.panes){for(let t=0;t<e.length;t++){const i=e[t];for(let s=0;s<i.axes.length;s++){const n=i.axes[s],a=this.crosshairOptions(n);if(a&&a.visible){const l=new U_(this.chartService,n,a);this.crosshairs.push(l),i.content.append(l)}}}}removeCrosshairs(e){const t=this.crosshairs,i=e.axes;for(let s=t.length-1;s>=0;s--)for(let n=0;n<i.length;n++)if(t[s].axis===i[n]){t.splice(s,1);break}}hideCrosshairs(){const e=this.crosshairs;for(let t=0;t<e.length;t++)e[t].hide()}findPane(e){const t=this.panes;let i;for(let s=0;s<t.length;s++)if(t[s].options.name===e){i=t[s];break}return i||t[0]}findPointPane(e){const t=this.panes;let i;for(let s=0;s<t.length;s++)if(t[s].box.containsPoint(e)){i=t[s];break}return i}appendAxis(e){this.findPane(e.options.pane).appendAxis(e),this.axes.push(e),e.plotArea=this}removeAxis(e){const t=[];for(let i=0;i<this.axes.length;i++){const s=this.axes[i];e!==s?t.push(s):s.destroy()}this.axes=t}appendChart(e,t){this.charts.push(e),t?t.appendChart(e):this.append(e)}removeChart(e){const t=[];for(let i=0;i<this.charts.length;i++){const s=this.charts[i];s!==e?t.push(s):s.destroy()}this.charts=t}addToLegend(e){const t=e.length,i=this.options.legend,s=i.labels||{},n=i.inactiveItems||{},a=n.labels||{},l=[];for(let c=0;c<t;c++){const h=e[c],d=!1!==h.visible;if(!1===h.visibleInLegend)continue;let p=h.name;const u=d?kt(s):kt(a)||kt(s);u&&(p=u({text:Xt(p)?p:"",series:h}));const g=h._defaults;let m,v,f=h.color;at(f)&&g&&(f=g.color),d?(m={},v=f):(m={color:a.color,font:a.font},v=n.markers.color),Xt(p)&&""!==p&&l.push({text:p,labels:m,markerColor:v,series:h,active:d})}Li(i.data,l)}groupAxes(e){const t=[],i=[];for(let s=0;s<e.length;s++){const n=e[s].axes;for(let a=0;a<n.length;a++){const l=n[a];l.options.vertical?i.push(l):t.push(l)}}return{x:t,y:i,any:t.concat(i)}}groupSeriesByPane(){const e=this.series,t={};for(let i=0;i<e.length;i++){const s=e[i],n=this.seriesPaneName(s);t[n]?t[n].push(s):t[n]=[s]}return t}filterVisibleSeries(e){const t=[];for(let i=0;i<e.length;i++){const s=e[i];!1!==s.visible&&t.push(s)}return t}reflow(e){const i=this.panes,s=Z(this.options.plotArea.margin);this.box=e.clone().unpad(s),this.reflowArea(i),this.ensureLabelsFit(i)&&this.reflowArea(i)}reflowArea(e){this.reflowPanes(),this.detachLabels(),this.reflowAxes(e),this.reflowCharts(e)}ensureLabelsFit(e){let t=!1;return e.forEach(i=>{const s=i.unclipBox(),n=i.chartContainer._clipBox(),a=Z(i.options.padding||{});s.y1<n.y1+a.top&&(t=!0,a.top=n.y1-s.y1+a.top),s.y2>n.y2-a.bottom&&(t=!0,a.bottom=s.y2-n.y2+a.bottom),s.x1<n.x1+a.left&&(t=!0,a.left=n.x1-s.x1+a.left),s.x2>n.x2-a.right&&(t=!0,a.right=s.x2-n.x2+a.right),t&&(i.options.padding=a)}),t}redraw(e){const t=[].concat(e);this.initSeries();const i=this.getRoot();i&&i.cleanGradients();for(let s=0;s<t.length;s++)this.removeCrosshairs(t[s]),t[s].empty();this._bindCache=new WeakMap,this.render(t),this.detachLabels(),this.reflowAxes(this.panes),this.reflowCharts(t),this.createCrosshairs(t);for(let s=0;s<t.length;s++)t[s].refresh()}axisCrossingValues(e,t){const i=e.options,s=[].concat(i.axisCrossingValues||i.axisCrossingValue),n=t.length-s.length,a=s[0]||0;for(let l=0;l<n;l++)s.push(a);return s}alignAxisTo(e,t,i,s){const n=e.getSlot(i,i,!0),a=e.options.reverse?2:1,l=t.getSlot(s,s,!0),c=t.options.reverse?2:1,h=e.box.translate(l[E+c]-n[E+a],l[D+c]-n[D+a]);e.pane!==t.pane&&h.translate(0,e.pane.box.y1-t.pane.box.y1),e.reflow(h)}alignAxes(e,t){const i=e[0],s=t[0],n=this.axisCrossingValues(i,t),a=this.axisCrossingValues(s,e),l={},c={},h={},d={};for(let p=0;p<t.length;p++){const u=t[p],g=u.pane,f=g.id,m=!1!==u.options.visible,v=lr(e,g)||i;let _=n;if(v!==i&&(_=this.axisCrossingValues(v,t)),this.alignAxisTo(u,v,a[p],_[p]),u.options._overlap)continue;A(u.lineBox().x1)===A(v.lineBox().x1)&&(l[f]&&u.reflow(u.box.alignTo(l[f].box,N).translate(-u.options.margin,0)),m&&(l[f]=u)),A(u.lineBox().x2)===A(v.lineBox().x2)&&(u._mirrored||(u.options.labels.mirror=!u.options.labels.mirror,u._mirrored=!0),this.alignAxisTo(u,v,a[p],_[p]),c[f]&&u.reflow(u.box.alignTo(c[f].box,$).translate(u.options.margin,0)),m&&(c[f]=u));const y=lr(t,g)||s;y!==u&&(u.alignTo(y),u.reflow(u.box))}for(let p=0;p<e.length;p++){const u=e[p],g=u.pane,f=g.id,m=!1!==u.options.visible,v=lr(t,g)||s;let _=a;v!==s&&(_=this.axisCrossingValues(v,e)),this.alignAxisTo(u,v,n[p],_[p]),!u.options._overlap&&(A(u.lineBox().y1)===A(v.lineBox().y1)&&(u._mirrored||(u.options.labels.mirror=!u.options.labels.mirror,u._mirrored=!0),this.alignAxisTo(u,v,n[p],_[p]),h[f]&&u.reflow(u.box.alignTo(h[f].box,U).translate(0,-u.options.margin)),m&&(h[f]=u)),A(u.lineBox().y2,3)===A(v.lineBox().y2,3)&&(d[f]&&u.reflow(u.box.alignTo(d[f].box,Y).translate(0,u.options.margin)),m&&(d[f]=u)),0!==p&&(u.alignTo(i),u.reflow(u.box)))}}shrinkAxisWidth(e){const t=this.groupAxes(e).any,i=Bl(t);let s=0;for(let n=0;n<e.length;n++){const a=e[n];a.axes.length>0&&(s=Math.max(s,i.width()-a.contentBox.width()))}if(0!==s)for(let n=0;n<t.length;n++){const a=t[n];a.options.vertical||a.reflow(a.box.shrink(s,0))}}shrinkAxisHeight(e){let t;for(let i=0;i<e.length;i++){const s=e[i],n=s.axes,a=Math.max(0,Bl(n).height()-s.contentBox.height());if(0!==a){for(let l=0;l<n.length;l++){const c=n[l];c.options.vertical&&c.reflow(c.box.shrink(0,a))}t=!0}}return t}fitAxes(e){const t=this.groupAxes(e).any;let i=0;for(let s=0;s<e.length;s++){const n=e[s],a=n.axes,l=n.contentBox;if(a.length>0){const c=Bl(a),h=Math.max(l.y1-c.y1,l.y2-c.y2);i=Math.max(i,l.x1-c.x1);for(let d=0;d<a.length;d++){const p=a[d];p.reflow(p.box.translate(0,h))}}}for(let s=0;s<t.length;s++){const n=t[s];n.reflow(n.box.translate(i,0))}}reflowAxes(e){const t=this.groupAxes(e);for(let i=0;i<e.length;i++)this.reflowPaneAxes(e[i]);t.x.length>0&&t.y.length>0&&(this.alignAxes(t.x,t.y),this.shrinkAxisWidth(e),this.autoRotateAxisLabels(t),this.alignAxes(t.x,t.y),this.shrinkAxisWidth(e)&&this.alignAxes(t.x,t.y),this.shrinkAxisHeight(e),this.alignAxes(t.x,t.y),this.shrinkAxisHeight(e)&&this.alignAxes(t.x,t.y),this.fitAxes(e))}autoRotateAxisLabels(e){const{panes:t}=this,i=Q_(t);let s;for(let n=0;n<i.length;n++)i[n].autoRotateLabels()&&(s=!0);if(s){for(let n=0;n<t.length;n++)this.reflowPaneAxes(t[n]);e.x.length>0&&e.y.length>0&&(this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t))}}reflowPaneAxes(e){const t=e.axes,i=t.length;if(i>0)for(let s=0;s<i;s++)t[s].reflow(e.contentBox)}reflowCharts(e){const t=this.charts,i=t.length,s=this.box;for(let n=0;n<i;n++){const a=t[n].pane;(!a||z(a,e))&&t[n].reflow(s)}}reflowPanes(){const{box:e,panes:t}=this,i=t.length;let s=e.height(),n=0,a=e.y1;for(let l=0;l<i;l++){const c=t[l],h=c.options.height;if(c.options.width=e.width(),c.options.height){if(h.indexOf&&h.indexOf("%")){const d=parseInt(h,10)/100;c.options.height=d*e.height()}c.reflow(e.clone()),s-=c.options.height}else n++}for(let l=0;l<i;l++){const c=t[l];c.options.height||(c.options.height=s/n)}for(let l=0;l<i;l++){const c=t[l],h=e.clone().move(e.x1,a);c.reflow(h),a+=c.options.height}}backgroundBox(){const e=this.axes,t=e.length;let i;for(let s=0;s<t;s++){const n=e[s];for(let a=0;a<t;a++){const l=e[a];if(n.options.vertical!==l.options.vertical){const c=n.lineBox().clone().wrap(l.lineBox());i=i?i.wrap(c):c}}}return i||this.box}chartsBoxes(){const e=this.panes,t=[];for(let i=0;i<e.length;i++)t.push(e[i].chartsBox());return t}addBackgroundPaths(e){const t=this.chartsBoxes();for(let i=0;i<t.length;i++)e.paths.push(M.w.fromRect(t[i].toRect()))}backgroundContainsPoint(e){const t=this.chartsBoxes();for(let i=0;i<t.length;i++)if(t[i].containsPoint(e))return!0}createVisual(){super.createVisual();const e=this.options.plotArea;let{opacity:t,background:i,border:s={}}=e;(function $_(o){return""===o||null===o||"none"===o||"transparent"===o||!C(o)})(i)&&(i=W,t=0);const n=this._bgVisual=new M.P({fill:{color:i,opacity:t},stroke:{color:s.width?s.color:"",width:s.width,dashType:s.dashType},zIndex:-1});this.addBackgroundPaths(n),this.appendVisual(n)}pointsByCategoryIndex(e){const t=this.charts,i=[];if(null!==e)for(let s=0;s<t.length;s++){if("_navigator"===t[s].pane.options.name)continue;const a=t[s].categoryPoints[e];if(a&&a.length)for(let l=0;l<a.length;l++){const c=a[l];c&&C(c.value)&&null!==c.value&&i.push(c)}}return i}pointsBySeriesIndex(e){return this.filterPoints(function(t){return t.series.index===e})}pointsByPointIndex(e){return this.filterPoints(function(t){return t.getIndex()===e})}pointsBySeriesName(e){return this.filterPoints(function(t){return t.series.name===e})}filterPoints(e){const t=this.charts,i=[];for(let s=0;s<t.length;s++){const a=t[s].points;for(let l=0;l<a.length;l++){const c=a[l];c&&!1!==c.visible&&e(c)&&i.push(c)}}return i}findPoint(e){const t=this.charts;for(let i=0;i<t.length;i++){const n=t[i].points;for(let a=0;a<n.length;a++){const l=n[a];if(l&&!1!==l.visible&&e(l))return l}}}paneByPoint(e){const t=this.panes;for(let i=0;i<t.length;i++){const s=t[i];if(s.box.containsPoint(e))return s}}detachLabels(){const e=this.groupAxes(this.panes),t=e.x,i=e.y;this.detachAxisGroupLabels(i,t),this.detachAxisGroupLabels(t,i)}detachAxisGroupLabels(e,t){let i=0;for(let s=0;s<e.length;s++){const n=e[s],a=n.pane,l=lr(t,a)||t[0],h=this.createLabelAxis(n,s+i,l);if(h){i++;const d=a.axes.indexOf(n)+i;a.appendAxisAt(h,d)}}}createLabelAxis(e,t,i){const s=e.options.labels,n=s.position;if(n!==qs&&n!==fo||!1===s.visible)return null;const c=this.groupAxes(this.panes),d=this.axisCrossingValues(i,i.options.vertical?c.x:c.y),p=n===qs,u=i.range(),g=p?u.max:u.min;if(O(d[t],u.min,u.max)-g==0)return null;d.splice(t+1,0,g),i.options.axisCrossingValues=d;const m=e.clone();return e.clear(),m.options.name=void 0,m.options.line.visible=!1,m.options.crosshair=void 0,m.options.notes=void 0,m.options.plotBands=void 0,m}isTrendline(e){return e&&z(e.type,Ms)}trendlineFactory(){}createTrendlineSeries(){const e=[];return this.series=this.series.map(t=>{if(!this.isTrendline(t))return t;const i=this.seriesByName(t.for);if(!i)throw new Error(`Invalid Configuration: Unable to locate linked series "${t.for}" for trendline "${t.name}".`);const s=ot.current.valueFields(i),n=ft(s),a=this.trendlineFactory(Object.assign({},{field:n},t),i);return a&&(!1===i.visible&&(a.visible=!1),a.color===Wh&&(a.color=i.color),e.push(a)),a}).filter(t=>null!==t),e}seriesByName(e){return this.series.find(t=>t.name===e)}getFirstPoint(){for(let e=0;e<this.series.length;e++){const i=this.pointsBySeriesIndex(e).find(Vl);if(i)return i}}getPointBelow(e){return this._getNextPoint(e,this._pointsByVertical,1)}getPointAbove(e){return this._getNextPoint(e,this._pointsByVertical,-1)}getPointToTheRight(e){return this._getNextPoint(e,this._pointsByHorizontal,1)}getPointToTheLeft(e){return this._getNextPoint(e,this._pointsByHorizontal,-1)}_getNextPoint(e,t,i){let s=t.call(this,e).filter(Vl),a=s.indexOf(e)+i;const l=c=>{let h,d=0;do{d+=c,h=t.call(this,e,d).filter(Vl)}while(0===h.length);return h};return a<0?(s=l(-1),s.at(-1)):a>=s.length?(s=l(1),s.at(0)):s[a]}_pointsByVertical(e){return this.pointsByPointIndex(e.getIndex())}_pointsByHorizontal(e,t=0){let i=xo(e.series.index+t,this.series.length);return this.pointsBySeriesIndex(i)}}function W_(o){return!o.pane.axes.some(e=>e.options.vertical===o.options.vertical&&e!==o&&!1!==e.options.visible)}function Bl(o){const e=o.length;let t;for(let i=0;i<e;i++){const s=o[i],n=!1!==s.options.visible;if(n||W_(s)){const a=n?s.contentBox():s.lineBox();t?t.wrap(a):t=a.clone()}}return t||new k}function lr(o,e){for(let t=0;t<o.length;t++){const i=o[t];if(i&&i.pane===e)return i}}const Q_=o=>o.reduce((e,t)=>e.concat(t.axes),[]);w(bu,{series:[],plotArea:{margin:{}},background:"",border:{color:pt,width:0},paneDefaults:{title:{}},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}});const wi=bu,Rn={hover:function(o,e){this._dispatchEvent(o,e,Bp)},click:function(o,e){this._dispatchEvent(o,e,"plotAreaClick")}};function K_(o,e,t){let i=e,s=o;if(o.indexOf(".")>-1){const n=o.split(".");for(;n.length>1;)s=n.shift(),void 0===i[s]&&(i[s]={}),i=i[s];s=n.shift()}i[s]=t}const J_=class Z_{constructor(e,t,i){const s=t.canonicalFields(e),n=t.valueFields(e),a=t.sourceFields(e,s),l=this._seriesFields=[],c=i.query(e.type),h=e.aggregate||c;this._series=e,this._binder=t;for(let d=0;d<s.length;d++){const p=s[d];let u;if(re(h))u=h[p];else{if(0!==d&&!z(p,n))break;u=h}u&&l.push({canonicalName:p,name:a[d],transform:at(u)?u:G0[u]})}}aggregatePoints(e,t){const{_series:i,_seriesFields:s}=this,n=this._bindPoints(e||[]),a=n.dataItems[0];let l=null;if(a&&!H(a)&&!Pt(a)){const c=function(){};c.prototype=a,l=new c}for(let c=0;c<s.length;c++){const h=s[c],d=this._bindField(n.values,h.canonicalName),p=h.transform(d,i,n.dataItems,t);if(null!==p&&re(p)&&void 0===p.length&&!(p instanceof Date)){l=p;break}void 0!==p&&(null===l&&(l={}),K_(h.name,l,p))}return l}_bindPoints(e){const{_binder:t,_series:i}=this,s=[],n=[];for(let a=0;a<e.length;a++){const l=e[a];s.push(t.bindPoint(i,l)),n.push(i.data[l])}return{values:s,dataItems:n}}_bindField(e,t){const i=[],s=e.length;for(let n=0;n<s;n++){const a=e[n],l=a.valueFields;let c;c=void 0!==l[t]?l[t]:a.fields[t],i.push(c)}return i}};class Fl{constructor(){this._defaults={}}register(e,t){for(let i=0;i<e.length;i++)this._defaults[e[i]]=t}query(e){return this._defaults[e]}}Fl.current=new Fl;const $i=Fl;class Nl extends Dn{createLabel(){const e=this.options.labels,t=x({},e,e.from),i=x({},e,e.to);t.visible&&(this.labelFrom=this.createLabelElement(t),this.append(this.labelFrom)),i.visible&&(this.labelTo=this.createLabelElement(i),this.append(this.labelTo))}reflow(e){this.render();const{labelFrom:t,labelTo:i,value:s}=this;this.box=e,t&&(t.options.aboveAxis=s.from>s.to,t.reflow(e)),i&&(i.options.aboveAxis=s.to>s.from,i.reflow(e)),this.note&&this.note.reflow(e)}}Nl.prototype.defaults=x({},Nl.prototype.defaults,{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}});const q_=Nl;class _u extends On{pointType(){return q_}pointValue(e){return e.valueFields}formatPointValue(e,t){return null===e.value.from&&null===e.value.to?"":this.chartService.format.auto(t,e.value.from,e.value.to)}plotRange(e){return e?[e.value.from,e.value.to]:0}updateRange(e,t){const i=t.series.axis,{from:s,to:n}=e;let a=this.valueAxisRanges[i];null!==e&&H(s)&&H(n)&&(a=this.valueAxisRanges[i]=a||{min:gt,max:wt},a.min=Math.min(a.min,s),a.max=Math.max(a.max,s),a.min=Math.min(a.min,n),a.max=Math.max(a.max,n))}aboveAxis(e){const t=e.value;return t.from<t.to}}_u.prototype.plotLimits=Xi.prototype.plotLimits;const ty=_u,yu=class ey extends Yi{aliasFor(){return this.parent}};class cr extends K{constructor(e,t){super(),this.value=e,this.options=t,this.aboveAxis=R(this.options.aboveAxis,!0),this.tooltipTracking=!0,this._id=yo(),this.initLabelsFormat()}render(){if(this._rendered)return;this._rendered=!0;const{markers:e,labels:t}=this.options,i=this.value,s=this.fromPoint=new yu(i,x({},this.options,{labels:t.from,markers:e.from})),n=this.toPoint=new yu(i,x({},this.options,{labels:t.to,markers:e.to}));this.copyFields(s),this.copyFields(n),this.append(s),this.append(n)}reflow(e){this.render();const{from:t,to:i}=e;this.positionLabels(t,i),this.fromPoint.reflow(t),this.toPoint.reflow(i),this.box=this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox())}createHighlight(){const e=new et.A;return e.append(this.fromPoint.createHighlight()),e.append(this.toPoint.createHighlight()),e}highlightVisual(){return this.visual}highlightVisualArgs(){return{options:this.options,from:this.fromPoint.highlightVisualArgs(),to:this.toPoint.highlightVisualArgs()}}createFocusHighlight(){const e=new et.A;return e.append(this.fromPoint.createFocusHighlight()),e.append(this.toPoint.createFocusHighlight()),e}tooltipAnchor(){const e=this.owner.pane.clipBox();if(!e||e.overlaps(this.box)){const i=this.box,s=i.center(),n=N;let a,l,c;return this.options.vertical?(a=s.x,l=i.y1-5,c=Y):(a=i.x2+5,l=s.y,c=V),{point:new L(a,l),align:{horizontal:n,vertical:c}}}}formatValue(e){return this.owner.formatPointValue(this,e)}overlapsBox(e){return this.box.overlaps(e)}unclipElements(){this.fromPoint.unclipElements(),this.toPoint.unclipElements()}initLabelsFormat(){const e=this.options.labels;e.format||((!e.from||!e.from.format)&&(e.from=Object.assign({},e.from,{format:"{0}"})),(!e.to||!e.to.format)&&(e.to=Object.assign({},e.to,{format:"{1}"})))}positionLabels(e,t){const{labels:i,vertical:s}=this.options;if("auto"===i.position){let n,a;s?t.y1<=e.y1?(a=$o,n=il):(a=il,n=$o):t.x1<=e.x1?(a=N,n=$):(a=$,n=N),(!i.from||!i.from.position)&&(this.fromPoint.options.labels.position=n),(!i.to||!i.to.position)&&(this.toPoint.options.labels.position=a)}}copyFields(e){e.dataItem=this.dataItem,e.category=this.category,e.series=this.series,e.color=this.color,e.owner=this.owner}focusVisual(){this.fromPoint.focusVisual()}clearFocusFromVisual(){this.toPoint.clearFocusFromVisual()}getIndex(){return this.categoryIx}}x(cr.prototype,_e),x(cr.prototype,Os),cr.prototype.defaults={markers:{visible:!1,background:W,size:8,type:jt,border:{width:2},opacity:1},labels:{visible:!1,margin:Z(3),padding:Z(4),animation:{type:mi,delay:pe},position:"auto"},notes:{label:{}},highlight:{markers:{border:{color:W,width:2}},zIndex:100},tooltip:{format:"{0} - {1}"},accessibility:{role:bi,className:_i,ariaRoleDescription:yi}};const Cu=cr,zl=class ny extends Rs{createStrokeSegments(){return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()))}stackSegments(){let e=this.fromSegments;return this.fromSegments||(e=this.fromSegments=this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()))),e}createStroke(e){const t=new M.w(e),i=new M.w(e);t.segments.push.apply(t.segments,this.strokeSegments()),i.segments.push.apply(i.segments,this.stackSegments()),this.visual.append(t),this.visual.append(i)}hasStackSegment(){return!0}fromPoints(){return this.linePoints.map(e=>e.fromPoint)}toPoints(){return this.linePoints.map(e=>e.toPoint)}},ry=class oy extends zl{createStrokeSegments(){return this.createCurveSegments(this.toPoints())}stackSegments(){let e=this.fromSegments;return this.fromSegments||(e=this.fromSegments=this.createCurveSegments(this.fromPoints().reverse())),e}createCurveSegments(e){return(new Xo).process(this.toGeometryPoints(e))}};class ku extends zl{createStrokeSegments(){return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()))}stackSegments(){let e=this.fromSegments;return this.fromSegments||(e=this.fromSegments=this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints())),e.reverse()),e}}x(ku.prototype,kl);const ay=ku;class Au extends Xi{render(){super.render(),this.renderSegments()}pointType(){return Cu}createPoint(e,t){const{series:i,seriesIx:s}=t;let n=e.valueFields;if(!Xt(n.from)&&!Xt(n.to)){if(this.seriesMissingValues(i)!==Ye)return null;n={from:0,to:0}}let a=this.pointOptions(i,s);a=this.evalPointOptions(a,n,t);let l=e.fields.color||i.color;at(i.color)&&(l=a.color);const c=new Cu(n,a);return c.color=l,this.append(c),c}createSegment(e,t,i){const s=(t.line||{}).style;let n;return n="smooth"===s?ry:"step"===s?ay:zl,new n(e,t,i)}plotRange(e,t){return e?[e.value.from,e.value.to]:[t,t]}valueSlot(e,t){const i=e.getSlot(t[0],t[0],!this.options.clip),s=e.getSlot(t[1],t[1],!this.options.clip);if(i&&s)return{from:i,to:s}}pointSlot(e,t){const{from:i,to:s}=t;let n,a;return this.options.invertAxes?(n=new k(i.x1,e.y1,i.x2,e.y2),a=new k(s.x1,e.y1,s.x2,e.y2)):(n=new k(e.x1,i.y1,e.x2,i.y2),a=new k(e.x1,s.y1,e.x2,s.y2)),{from:n,to:a}}addValue(e,t){const i=e.valueFields;H(i.from)||(i.from=i.to),H(i.to)||(i.to=i.from),super.addValue(e,t)}updateRange(e,t){if(null!==e&&H(e.from)&&H(e.to)){const i=t.series.axis,s=this.valueAxisRanges[i]=this.valueAxisRanges[i]||{min:gt,max:wt},{from:n,to:a}=e;s.min=Math.min(s.min,n,a),s.max=Math.max(s.max,n,a)}}formatPointValue(e,t){const i=e.value;return this.chartService.format.auto(t,i.from,i.to)}animationPoints(){const e=this.points,t=[];for(let i=0;i<e.length;i++){const s=e[i];s&&(t.push((s.fromPoint||{}).marker),t.push((s.toPoint||{}).marker))}return t.concat(this._segments)}}x(Au.prototype,Sl,sr);const ly=Au,hy=class cy extends El{reflow(e){const{options:t,value:i,owner:s}=this,n=s.seriesValueAxis(t),a=[],l=[],c=[],h=n.getSlot(i.low,i.high),d=n.getSlot(i.open,i.open),p=n.getSlot(i.close,i.close);d.x1=p.x1=h.x1=e.x1,d.x2=p.x2=h.x2=e.x2;const u=h.center().x;a.push([d.x1,d.y1]),a.push([u,d.y1]),l.push([u,p.y1]),l.push([p.x2,p.y1]),c.push([u,h.y1]),c.push([u,h.y2]),this.lines=[a,l,c],this.box=h.clone().wrap(d.clone().wrap(p)),this.reflowNote()}createBody(){}},py=class dy extends Dl{pointType(){return hy}};class Su extends K{constructor(e,t,i){super(),this.from=e,this.to=t,this.series=i}linePoints(){const e=this.from,{from:{box:t},to:{box:i}}=this,s=[];if(e.isVertical){const n=e.aboveAxis?t.y1:t.y2;s.push([t.x1,n],[i.x2,n])}else{const n=e.aboveAxis?t.x2:t.x1;s.push([n,t.y1],[n,i.y2])}return s}createVisual(){super.createVisual();const e=this.series.line||{},t=M.w.fromPoints(this.linePoints(),{stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType}});Zt(t),this.visual.append(t)}}w(Su,{animation:{type:mi,delay:pe}});const uy=Su,fy=class gy extends On{render(){super.render(),this.createSegments()}traverseDataPoints(e){const t=this.options.series,i=_l(t),s=!this.options.invertAxes;for(let n=0;n<t.length;n++){const a=t[n];let l=0,c=0;for(let h=0;h<i;h++){const d=ot.current.bindPoint(a,h),p=d.valueFields.value,u=d.fields.summary;let f,g=l;u?"total"===u.toLowerCase()?(d.valueFields.value=l,g=0,f=l):(d.valueFields.value=c,f=g-c,c=0):H(p)&&(c+=p,l+=p,f=l),e(d,{category:this.categoryAxis.categoryAt(h),categoryIx:h,series:a,seriesIx:n,total:l,runningTotal:c,from:g,to:f,isVertical:s})}}}updateRange(e,t){super.updateRange({value:t.to},t)}aboveAxis(e){return e.value>=0}plotRange(e){return[e.from,e.to]}createSegments(){const e=this.options.series,t=this.seriesPoints,i=this.segments=[];for(let s=0;s<e.length;s++){const n=e[s],a=t[s];if(a){let l;for(let c=0;c<a.length;c++){const h=a[c];if(h&&l){const d=new uy(l,h,n);i.push(d),this.append(d)}l=h}}}}},Tu=function my(o,e,t){const i=o[String(e)];return i?i(t):null},Ci=function xy(o,e){let l,c,t=0,i=0,s=0,n=0,a=0,h=Number.MAX_VALUE,d=Number.MIN_VALUE;for(let p=0;p<o.length;p++){const u=o[p],{xValue:g,yValue:f}=e(u);isFinite(g)&&null!==g&&isFinite(f)&&null!==f&&(h=Math.min(g,h),d=Math.max(g,d),a++,t+=g,i+=f,s+=Math.pow(g,2),n+=g*f)}return a>0&&(l=(a*n-t*i)/(a*s-Math.pow(t,2)),c=(i-l*t)/a),{slope:l,intercept:c,count:a,xMin:h,xMax:d}},Ln=(o,e)=>o.every(({valueFields:t})=>!Xt(t[e])||t[e]>0),Vn=function vy(o,e){const t=[],i=e.totalRangeIndices(),s=e.currentRangeIndices(),n={min:Math.floor(Math.max(s.min-1,i.min)),max:Math.ceil(Math.min(s.max+2,i.max))};for(let a=n.min;a<n.max;a++){const l=a+1;t[a]={category:e.categoryAt(a,!0),value:o(l)}}return t},Mu=function Dy(o,e,t){const i=[],s=[],n=Math.max(2,t)-1;let a=0,l=0;for(let c=0;c<o.length;c++){const h=o[c],{xValue:d,yValue:p}=e(h);if(isFinite(p)&&null!==p?(s.push(p),l+=p,a=Math.max(c,a)):s.push(null),c>=n){const u=s.filter(f=>null!==f).length,g=s.shift()||0;if(u>0){i.push([d,l/u]),l-=g;continue}}i.push([d,null])}return i.slice(0,a+1)},Eu=function Fy(o,e,t){let i=Math.min(Math.max(t||1,1),6)+1,s=new xd,n=new xd,a=0,l=Number.MAX_VALUE,c=Number.MIN_VALUE,h=p=>p,d=[];for(let p=0;p<o.length;p++){const u=o[p];let{xValue:g,yValue:f}=e(u);if(isFinite(g)&&null!==g&&isFinite(f)&&null!==f){l=Math.min(g,l),c=Math.max(g,c),a++,n.set(p,0,f),s.set(p,0,1),s.set(p,1,g);for(let m=2;m<=i;m++)s.set(p,m,Math.pow(s.get(p,1),m))}else s.set(p,0,0)}return s.width=Math.min(i,a),a>0&&(d=function Ny(o,e){const t=o.transpose(),i=t.multiply(o).inverse().multiply(t).multiply(e),s=[];for(let n=0;n<i.height;n++)s.push(i.get(n,0));return s}(s,n),h=p=>d.reduce((u,g,f)=>u+g*Math.pow(p,f),0)),{coefficients:d,count:a,valueMapper:h,xMin:l,xMax:c}},Qi={};Qi[ll]=function by(o){const{options:e,categoryAxis:t,seriesValues:i}=o,s=function yy({seriesValues:o,categoryAxis:e,options:t}){const i=o();if(!Ln(i,t.field))return null;let{slope:s,intercept:n,count:a}=Ci(i,(o=>({categoryIx:e,valueFields:t})=>({xValue:e+1,yValue:Math.log(t[o])}))(t.field));if(a>0){const l=Math.exp(n),c=s;return Vn(h=>l*Math.exp(c*h),e)}return null}({seriesValues:i,categoryAxis:t,options:e});return s?Object.assign({},e,{type:"line",data:s,categoryField:"category",field:"value"}):null},Qi[cl]=function Cy(o){const{options:e,categoryAxis:t,seriesValues:i}=o,s=function Ay({seriesValues:o,categoryAxis:e,options:t}){const{slope:i,intercept:s,count:n}=Ci(o(),(o=>({categoryIx:e,valueFields:t})=>({xValue:e+1,yValue:t[o]}))(t.field));return n>0?Vn(a=>i*a+s,e):null}({seriesValues:i,categoryAxis:t,options:e});return s?Object.assign({},e,{type:"line",data:s,categoryField:"category",field:"value"}):null},Qi[hl]=function Ty(o){const{options:e,categoryAxis:t,seriesValues:i}=o,s=function Py({seriesValues:o,categoryAxis:e,options:t}){let{slope:i,intercept:s,count:n}=Ci(o(),(o=>({categoryIx:e,valueFields:t})=>({xValue:Math.log(e+1),yValue:t[o]}))(t.field));if(n>0){const a=i,l=s;return Vn(c=>a*Math.log(c)+l,e)}return null}({seriesValues:i,categoryAxis:t,options:e});return s?Object.assign({},e,{type:"line",data:s,categoryField:"category",field:"value"}):null},Qi[dl]=function Oy(o){const{options:e}=o,t=function Ly(o){const{categoryAxis:e}=o,t=function Ry({options:o,categoryAxis:e,seriesValues:t}){const i=(o.trendline||{}).period||2,s=e.totalRangeIndices(),n=e.currentRangeIndices(),a={min:Math.floor(Math.max(n.min-i,s.min)),max:Math.ceil(Math.min(n.max+i+2,s.max))};return Mu(t(a),(o=>({categoryIx:e,valueFields:t})=>({xValue:e,yValue:t[o]}))(o.field),i)}(o),i=[];return t.forEach(([s,n])=>{i[s]={category:e.categoryAt(s,!0),value:n}}),i.length>0?i:null}(o);return t?Object.assign({},e,{type:"line",data:t,categoryField:"category",field:"value"}):null},Qi[pl]=function zy(o){const{options:e,categoryAxis:t,seriesValues:i}=o,s=function Uy({seriesValues:o,categoryAxis:e,options:t}){const i=(t.trendline||{}).order,{count:s,valueMapper:n}=Eu(o(),(o=>({categoryIx:e,valueFields:t})=>({xValue:e+1,yValue:t[o]}))(t.field),i);return s>0?Vn(a=>n(a),e):null}({seriesValues:i,categoryAxis:t,options:e});return s?Object.assign({},e,{type:"line",data:s,categoryField:"category",field:"value"}):null},Qi[ul]=function Hy(o){const{options:e,categoryAxis:t,seriesValues:i}=o,s=function Yy({seriesValues:o,categoryAxis:e,options:t}){const i=o();if(!Ln(i,t.field))return null;let{slope:s,intercept:n,count:a}=Ci(i,(o=>({categoryIx:e,valueFields:t})=>({xValue:Math.log(e+1),yValue:Math.log(t[o])}))(t.field));if(a>0){const l=Math.exp(n),c=s;return Vn(h=>l*Math.pow(h,c),e)}return null}({seriesValues:i,categoryAxis:t,options:e});return s?Object.assign({},e,{type:"line",data:s,categoryField:"category",field:"value"}):null};const $y=Qi,jl=[We,ji,As,Gi],Du=[$e,Ui].concat(jl);class Ul extends wi{initFields(e){if(this.namedCategoryAxes={},this.namedValueAxes={},this.valueAxisRangeTracker=new nr,this._seriesPointsCache={},this._currentPointsCache={},e.length>0){this.invertAxes=z(e[0].type,[ue,xi,Ui,ji,Gi,Ss,ws,Ts]);for(let t=0;t<e.length;t++){const i=e[t].stack;if(i&&"100%"===i.type){this.stack100=!0;break}}}}render(e=this.panes){this.series=[...this.originalSeries],this.createCategoryAxes(e),this.aggregateCategories(e),this.createTrendlineSeries(e),this.createCategoryAxesLabels(e),this.createCharts(e),this.createValueAxes(e)}removeAxis(e){const t=e.options.name;super.removeAxis(e),e instanceof Ge?delete this.namedCategoryAxes[t]:(this.valueAxisRangeTracker.reset(t),delete this.namedValueAxes[t]),e===this.categoryAxis&&delete this.categoryAxis,e===this.valueAxis&&delete this.valueAxis}trendlineFactory(e,t){const i=this.seriesCategoryAxis(e),s=this.seriesValues.bind(this,t.index),n=Tu($y,e.type,{options:e,categoryAxis:i,seriesValues:s});return n&&(n.categoryAxis=t.categoryAxis,n.valueAxis=t.valueAxis,this.filterSeries(n,i))}trendlineAggregateForecast(){return this.series.map(e=>(e.trendline||{}).forecast).filter(e=>void 0!==e).reduce((e,t)=>({before:Math.max(e.before,t.before||0),after:Math.max(e.after,t.after||0)}),{before:0,after:0})}seriesValues(e,t){const i=[];let s=this.srcSeries[e];const n=this.seriesCategoryAxis(s);Ze(n.options.type,Fe)&&(this._seriesPointsCache={},this._currentPointsCache={},n.options.dataItems=[],s=this.aggregateSeries(s,n,n.totalRangeIndices()));const c=t?t.max:s.data.length;for(let h=t?t.min:0;h<c;h++){const d=this.bindPoint(s,h);i.push({categoryIx:h,category:d.fields.category,valueFields:d.valueFields})}return i}createCharts(e){const t=this.groupSeriesByPane();for(let i=0;i<e.length;i++){const s=e[i],n=t[s.options.name||"default"]||[];this.addToLegend(n);const a=this.filterVisibleSeries(n);if(!a)continue;const l=this.groupSeriesByCategoryAxis(a);for(let c=0;c<l.length;c++)this.createChartGroup(l[c],s)}}createChartGroup(e,t){this.createAreaChart(dt(e,[We,ji]),t),this.createRangeAreaChart(dt(e,[As,Gi]),t),this.createBarChart(dt(e,[Oe,ue]),t),this.createRangeBarChart(dt(e,[Cn,Ss]),t),this.createBulletChart(dt(e,[xi,kn]),t),this.createCandlestickChart(dt(e,ys),t),this.createBoxPlotChart(dt(e,[bn,Ts]),t),this.createOHLCChart(dt(e,Cs),t),this.createWaterfallChart(dt(e,[An,ws]),t),this.createLineChart(dt(e,[$e,Ui]),t)}aggregateCategories(e){const t=[...this.series],i=[];this._currentPointsCache={},this._seriesPointsCache=this._seriesPointsCache||{};for(let s=0;s<t.length;s++){let n=t[s];if(!this.isTrendline(n)){const a=this.seriesCategoryAxis(n),l=this.findPane(a.options.pane);n=(Ze(a.options.type,Fe)||n.categoryField)&&z(l,e)?this.aggregateSeries(n,a,a.currentRangeIndices()):this.filterSeries(n,a)}i.push(n)}this._seriesPointsCache=this._currentPointsCache,this._currentPointsCache=null,this.srcSeries=t,this.series=i}filterSeries(e,t){const i=(e.data||{}).length;if(t._seriesMax=Math.max(t._seriesMax||0,i),!C(t.options.min)&&!C(t.options.max))return e;const s=t.currentRangeIndices(),n=z(e.type,Du),a=x({},e);return a.data=(a.data||[]).slice(s.min,s.max+1),n&&Zp(a,s,i,l=>({item:e.data[l],category:t.categoryAt(l,!0),categoryIx:l-s.min}),l=>C(e.data[l])),a}clearSeriesPointsCache(){this._seriesPointsCache={}}seriesSourcePoints(e,t){const i=`${e.index};${t.categoriesHash()}`;if(this._seriesPointsCache&&this._seriesPointsCache[i])return this._currentPointsCache[i]=this._seriesPointsCache[i],this._seriesPointsCache[i];const s=t.options,n=s.srcCategories,a=Ze(s.type,Fe),l=e.data,c=[];a||t.indexCategories();for(let h=0;h<l.length;h++){let d=ot.current.bindPoint(e,h).fields.category;if(a&&(d=Wp(d,l[h],this.chartService.intl)),void 0===d&&(d=n[h]),null!=d){const p=t.totalIndex(d);c[p]=c[p]||{items:[],category:d},c[p].items.push(h)}}return this._currentPointsCache[i]=c,c}aggregateSeries(e,t,i){if(!e.data.length)return e;const n=this.seriesSourcePoints(e,t),a=x({},e),l=new J_(x({},e),ot.current,$i.current),c=a.data=[],h=t.options.dataItems||[],d=p=>{const u=p-i.min;let g=n[p];if(g||(g=n[p]={}),g.categoryIx=u,!g.item){const f=t.categoryAt(p,!0);g.category=f,g.item=l.aggregatePoints(g.items,f)}return g};for(let p=i.min;p<=i.max;p++){const u=d(p);c[u.categoryIx]=u.item,u.items&&u.items.length&&(h[u.categoryIx]=u.item)}return z(a.type,Du)&&Zp(a,i,t.totalCount(),d,p=>n[p]),t.options.dataItems=h,a}appendChart(e,t){const i=e.options.series,s=this.seriesCategoryAxis(i[0]);let n=s.options.categories,a=Math.max(0,_l(i)-n.length);if(a>0)for(n=s.options.categories=s.options.categories.slice(0);a--;)n.push("");this.valueAxisRangeTracker.update(e.valueAxisRanges),super.appendChart(e,t)}seriesPaneName(e){const t=this.options,i=e.axis,s=[].concat(t.valueAxis);return(Kt(s,function(h){return h.name===i})[0]||{}).pane||((t.panes||[{}])[0]||{}).name||"default"}seriesCategoryAxis(e){const t=e.categoryAxis,i=t?this.namedCategoryAxes[t]:this.categoryAxis;if(!i)throw new Error("Unable to locate category axis with name "+t);return i}stackableChartOptions(e,t){const i=e.some(a=>a.stack),s=e.some(a=>a.stack&&"100%"===a.stack.type);return{defaultStack:e[0].stack,isStacked:i,isStacked100:s,clip:t.options.clip}}groupSeriesByCategoryAxis(e){const t=[],i={};for(let n=0;n<e.length;n++){const a=e[n].categoryAxis||"$$default$$";Aa(i,a)||(i[a]=!0,t.push(a))}const s=[];for(let n=0;n<t.length;n++){const l=Qy(e,t[n],n);0!==l.length&&s.push(l)}return s}createBarChart(e,t){if(0===e.length)return;const i=e[0],s=new On(this,Object.assign({series:e,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing},this.stackableChartOptions(e,t)));this.appendChart(s,t)}createRangeBarChart(e,t){if(0===e.length)return;const i=e[0],s=new ty(this,{series:e,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(s,t)}createBulletChart(e,t){if(0===e.length)return;const i=e[0],s=new z_(this,{series:e,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing,clip:t.options.clip});this.appendChart(s,t)}createLineChart(e,t){if(0===e.length)return;const i=new Ml(this,Object.assign({invertAxes:this.invertAxes,series:e},this.stackableChartOptions(e,t)));this.appendChart(i,t)}createAreaChart(e,t){if(0===e.length)return;const i=new S_(this,Object.assign({invertAxes:this.invertAxes,series:e},this.stackableChartOptions(e,t)));this.appendChart(i,t)}createRangeAreaChart(e,t){if(0===e.length)return;const i=new ly(this,{invertAxes:this.invertAxes,series:e,clip:t.options.clip});this.appendChart(i,t)}createOHLCChart(e,t){if(0===e.length)return;const i=e[0],s=new py(this,{invertAxes:this.invertAxes,gap:i.gap,series:e,spacing:i.spacing,clip:t.options.clip});this.appendChart(s,t)}createCandlestickChart(e,t){if(0===e.length)return;const i=e[0],s=new Dl(this,{invertAxes:this.invertAxes,gap:i.gap,series:e,spacing:i.spacing,clip:t.options.clip});this.appendChart(s,t)}createBoxPlotChart(e,t){if(0===e.length)return;const i=e[0],s=new I_(this,{invertAxes:this.invertAxes,gap:i.gap,series:e,spacing:i.spacing,clip:t.options.clip});this.appendChart(s,t)}createWaterfallChart(e,t){if(0===e.length)return;const i=e[0],s=new fy(this,{series:e,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(s,t)}axisRequiresRounding(e,t){const i=dt(this.series,Dp);for(let s=0;s<this.series.length;s++){const n=this.series[s];if(z(n.type,jl)){const a=n.line;a&&a.style===vn&&i.push(n)}}for(let s=0;s<i.length;s++){const n=i[s].categoryAxis||"";if(n===e||!n&&0===t)return!0}}aggregatedAxis(e,t){const i=this.series;for(let s=0;s<i.length;s++){const n=i[s].categoryAxis||"";if((n===e||!n&&0===t)&&i[s].categoryField)return!0}}createCategoryAxesLabels(){const e=this.axes;for(let t=0;t<e.length;t++)e[t]instanceof Ge&&e[t].createLabels()}createCategoryAxes(e){const t=this.invertAxes,i=[].concat(this.options.categoryAxis),s=[];for(let a=0;a<i.length;a++){let l=i[a];if(z(this.findPane(l.pane),e)){const{name:h,categories:d=[]}=l;let p;if(l=x({vertical:t,reverse:!t&&this.chartService.rtl,axisCrossingValue:t?gt:0},l),C(l.justified)||(l.justified=this.isJustified()),this.axisRequiresRounding(h,a)&&(l.justified=!1),$p(l,d[0])?(l._forecast=this.trendlineAggregateForecast(),p=new mn(l,this.chartService)):p=new Ge(l,this.chartService),i[a].categories=p.options.srcCategories,h){if(this.namedCategoryAxes[h])throw new Error(`Category axis with name ${h} is already defined`);this.namedCategoryAxes[h]=p}p.axisIndex=a,s.push(p),this.appendAxis(p)}}const n=this.categoryAxis||s[0];this.categoryAxis=n,t?this.axisY=n:this.axisX=n}isJustified(){const e=this.series;for(let t=0;t<e.length;t++)if(!z(e[t].type,jl))return!1;return!0}createValueAxes(e){const t=this.valueAxisRangeTracker,i=t.query(),s=[].concat(this.options.valueAxis),n=this.invertAxes,a={vertical:!n,reverse:n&&this.chartService.rtl},l=[];this.stack100&&(a.roundToMajorUnit=!1,a.labels={format:"P0"});for(let h=0;h<s.length;h++){const d=s[h];if(z(this.findPane(d.pane),e)){const u=d.name,g=Ze(d.type,Jo)?{min:.1,max:1}:{min:0,max:1},f=t.query(u)||i||g;let m;0===h&&f&&i&&(f.min=Math.min(f.min,i.min),f.max=Math.max(f.max,i.max)),m=Ze(d.type,Jo)?Go:de;const v=new m(f.min,f.max,x({},a,d),this.chartService);if(u){if(this.namedValueAxes[u])throw new Error(`Value axis with name ${u} is already defined`);this.namedValueAxes[u]=v}v.axisIndex=h,l.push(v),this.appendAxis(v)}}const c=this.valueAxis||l[0];this.valueAxis=c,n?this.axisX=c:this.axisY=c}_dispatchEvent(e,t,i){const s=e._eventCoordinates(t),n=new L(s.x,s.y),a=this.pointPane(n),l=[],c=[];if(!a)return;const h=a.axes;for(let d=0;d<h.length;d++){const p=h[d];p.getValue?er(c,p.getValue(n)):er(l,p.getCategory(n))}0===l.length&&er(l,this.categoryAxis.getCategory(n)),l.length>0&&c.length>0&&e.trigger(i,{element:me(t),originalEvent:t,category:Ds(l),value:Ds(c)})}pointPane(e){const t=this.panes;for(let i=0;i<t.length;i++){const s=t[i];if(s.contentBox.containsPoint(e))return s}}updateAxisOptions(e,t){Ou(this.options,e,t),Ou(this.originalOptions,e,t)}_pointsByVertical(e,t=0){return this.invertAxes?this._siblingsBySeriesIndex(e.series.index,t):this._siblingsByPointIndex(e.getIndex())}_pointsByHorizontal(e,t=0){if(this.invertAxes)return this._siblingsByPointIndex(e.getIndex());const i=this._siblingsBySeriesIndex(e.series.index,t);return this.chartService.rtl?i.reverse():i}_siblingsByPointIndex(e){const t=this.charts,i=[];for(let s=0;s<t.length;s++){let n=t[s];if(n.pane&&"_navigator"===n.pane.options.name)continue;let a=n.points.filter(l=>l&&!1!==l.visible&&l.getIndex()===e);i.push(...a.sort(this._getSeriesCompareFn(a[0])))}return i}_siblingsBySeriesIndex(e,t){const i=xo(e+t,this.series.length);return this.pointsBySeriesIndex(i)}_getSeriesCompareFn(e){const t=this._isInStackedSeries(e);return t&&this.invertAxes||!t&&!this.invertAxes?(i,s)=>i.box.center().x-s.box.center().x:(i,s)=>i.box.center().y-s.box.center().y}_isInStackedSeries(e){const t=z(e.series.type,[We,ji,As,Gi,$e,Ui,ks,wn]),i=z(e.series.type,[Oe,ue]);return t||i&&e.options.isStacked}}function Ou(o,e,t){x([].concat(e instanceof Ge?o.categoryAxis:o.valueAxis)[e.axisIndex],t)}function Qy(o,e,t){return Kt(o,function(i){return 0===t&&!i.categoryAxis||i.categoryAxis===e})}w(Ul,{categoryAxis:{},valueAxis:{}}),x(Ul.prototype,Rn);const Je=Ul;var Gl=T(1992);function Ky(){this._defaultPrevented=!0}const Jy=class Zy{constructor(){this._points=[]}destroy(){this._points=[]}show(e,t){const i=[].concat(e);this.hide();for(let s=0;s<i.length;s++){const n=i[s];n&&n.toggleHighlight&&n.hasHighlight()&&(this.togglePointHighlight(n,!0,t),this._points.push(n))}}togglePointHighlight(e,t,i){const s=(e.options.highlight||{}).toggle;if(s){const n={category:e.category,series:e.series,dataItem:e.dataItem,value:e.value,stackValue:e.stackValue,preventDefault:Ky,visual:e.highlightVisual(),show:t};s(n),n._defaultPrevented||e.toggleHighlight(t,i)}else e.toggleHighlight(t,i)}hide(){const e=this._points;for(;e.length;)this.togglePointHighlight(e.pop(),!1)}isHighlighted(e){const t=this._points;for(let i=0;i<t.length;i++)if(e===t[i])return!0;return!1}};function Iu(o,e){const t=(e||"").toLowerCase(),i=o.event;return"none"===t&&!(i.ctrlKey||i.shiftKey||i.altKey)||i[t+"Key"]}function Hl(o){const e={};for(let t=0;t<o.length;t++){const i=o[t];i.axis.options.name&&(e[i.axis.options.name]={min:i.range.min,max:i.range.max})}return e}class Ru{constructor(e,t){this.plotArea=e,this.options=x({},this.options,t)}start(e){return this._active=Iu(e,this.options.key),this._active}move(e){if(this._active){const t=this.axisRanges=this._panAxes(e,E).concat(this._panAxes(e,D));if(t.length)return this.axisRanges=t,Hl(t)}}end(){const e=this._active;return this._active=!1,e}pan(){const{plotArea:e,axisRanges:t}=this;if(t.length){for(let i=0;i<t.length;i++){const s=t[i];e.updateAxisOptions(s.axis,s.range)}e.redraw(e.panes)}}destroy(){delete this.plotArea}_panAxes(e,t){const i=this.plotArea,s=-e[t].delta,n=(this.options.lock||"").toLowerCase(),a=[];if(0!==s&&(n||"").toLowerCase()!==t){const l=i.axes;for(let c=0;c<l.length;c++){const h=l[c];if(t===E&&!h.options.vertical||t===D&&h.options.vertical){const d=h.pan(s);d&&(d.limitRange=!0,a.push({axis:h,range:d}))}}}return a}}Ru.prototype.options={key:"none",lock:"none"};const qy=Ru;class Lu{constructor(e,t){this.chart=e,this.options=x({},this.options,t),this.createElement()}createElement(){const e=this._marquee=document.createElement("div");e.className="k-marquee";const t=document.createElement("div");t.className="k-marquee-color",e.appendChild(t)}removeElement(){this._marquee.parentNode&&this._marquee.parentNode.removeChild(this._marquee)}setStyles(e){ht(this._marquee,e)}start(e){if(Iu(e,this.options.key)){const t=this.chart,i=t._eventCoordinates(e),s=this._zoomPane=t._plotArea.paneByPoint(i),n=s?s.chartsBox().clone():null;if(s&&n){const a=this._elementOffset();return n.translate(a.left,a.top),this._zoomPaneClipBox=n,document.body.appendChild(this._marquee),this.setStyles({left:e.pageX+1,top:e.pageY+1,width:0,height:0}),!0}}return!1}_elementOffset(){const e=this.chart.element,{paddingLeft:t,paddingTop:i}=ht(e,["paddingLeft","paddingTop"]),s=hs(e);return{left:t+s.left,top:i+s.top}}move(e){this._zoomPane&&this.setStyles(this._selectionPosition(e))}end(e){if(this._zoomPane){const i=this._elementOffset(),s=this._selectionPosition(e);return s.left-=i.left,s.top-=i.top,this._updateAxisRanges({x:s.left,y:s.top},{x:s.left+s.width,y:s.top+s.height}),this.removeElement(),delete this._zoomPane,Hl(this.axisRanges)}}zoom(){const e=this.axisRanges;if(e&&e.length){const t=this.chart._plotArea;for(let i=0;i<e.length;i++){const s=e[i];t.updateAxisOptions(s.axis,s.range)}t.redraw(t.panes)}}destroy(){this.removeElement(),delete this._marquee,delete this.chart}_updateAxisRanges(e,t){const i=(this.options.lock||"").toLowerCase(),s=[],n=this._zoomPane.axes;for(let a=0;a<n.length;a++){const l=n[a],c=l.options.vertical;if((i!==E||c)&&(i!==D||!c)&&C(l.axisIndex)){const h=l.pointsRange(e,t);h&&s.push({axis:l,range:h})}}this.axisRanges=s}_selectionPosition(e){const t=this._zoomPaneClipBox,i={x:e.x.startLocation,y:e.y.startLocation},{x:{location:s},y:{location:n}}=e,a=(this.options.lock||"").toLowerCase();let l=Math.min(i.x,s),c=Math.min(i.y,n),h=Math.abs(i.x-s),d=Math.abs(i.y-n);return a===E&&(l=t.x1,h=t.width()),a===D&&(c=t.y1,d=t.height()),s>t.x2&&(h=t.x2-i.x),s<t.x1&&(h=i.x-t.x1),n>t.y2&&(d=t.y2-i.y),n<t.y1&&(d=i.y-t.y1),{left:Math.max(l,t.x1),top:Math.max(c,t.y1),width:h,height:d}}}Lu.prototype.options={key:"shift",lock:"none"};const t1=Lu,o1=class n1{constructor(e,t){this.chart=e,this.options=x({rate:.3},this.options,t)}updateRanges(e,t){const i=(this.options.lock||"").toLowerCase(),s=[],n=this.chart._plotArea.axes;for(let a=0;a<n.length;a++){const l=n[a],c=l.options.vertical;if((i!==E||c)&&(i!==D||!c)&&l.zoomRange){const h=O(this.options.rate,.01,.9),d=l.zoomRange(-e*h,t);d&&s.push({axis:l,range:d})}}return this.axisRanges=s,Hl(s)}zoom(){const e=this.axisRanges,t=this.chart._plotArea;if(e&&e.length&&t.updateAxisOptions){for(let i=0;i<e.length;i++){const s=e[i];t.updateAxisOptions(s.axis,s.range)}t.redraw(t.panes)}}destroy(){delete this.chart}};var Xl=T(626);function hr(o,e,t,i,s){let n;return n="start"===t?e.origin[i]:"end"===t?e.origin[i]+e.size[s]-o:e.origin[i]+(e.size[s]-o)/2,n}function a1(o,e,t,i,s){let n;return n="start"===t?e.origin[i]+e.size[s]-o:"end"===t?e.origin[i]:e.origin[i]+(e.size[s]-o)/2,n}const l1={alignContent:"start",justifyContent:"start",alignItems:"start",spacing:0,orientation:"horizontal",lineSpacing:0,wrap:!0,revers:!1},c1=(o,e)=>{o.forEach(e)},h1=(o,e)=>{for(let i=o.length-1;i>=0;i--)e(o[i],i)},p1=class d1 extends et.A{constructor(e,t){super(Object.assign({},l1,t)),this._rect=e,this._fieldMap={}}rect(e){return e?(this._rect=e,this):this._rect}_initMap(){const e=this.options,t=this._fieldMap;"horizontal"===e.orientation?(t.sizeField="width",t.groupsSizeField="height",t.groupAxis="x",t.groupsAxis="y"):(t.sizeField="height",t.groupsSizeField="width",t.groupAxis="y",t.groupsAxis="x"),e.reverse?(this.forEach=h1,this.justifyAlign=a1):(this.forEach=c1,this.justifyAlign=hr)}reflow(){if(!this._rect||0===this.children.length)return;this._initMap(),this.options.transform&&this.transform(null);const e=this.options,t=this._rect,{groups:i,groupsSize:s}=this._initGroups(),{sizeField:n,groupsSizeField:a,groupAxis:l,groupsAxis:c}=this._fieldMap,h=new j.A,d=new j.A,p=new Xl.A;let g,f,m,u=hr(s,t,e.alignContent,c,a);const v=(_,y)=>{const P=f.elements[y];d[l]=g,d[c]=hr(_.size[a],m,e.alignItems,c,a),function r1(o,e,t){const i=t.transform()||(0,bt.A)(),s=i.matrix();s.e+=o.x-e.origin.x,s.f+=o.y-e.origin.y,i.matrix(s),t.transform(i)}(d,_,P),g+=_.size[n]+e.spacing};for(let _=0;_<i.length;_++)f=i[_],h[l]=g=this.justifyAlign(f.size,t,e.justifyContent,l,n),h[c]=u,p[n]=f.size,p[a]=f.lineSize,m=new At.A(h,p),this.forEach(f.bboxes,v),u+=f.lineSize+e.lineSpacing;if(!e.wrap&&f.size>t.size[n]){const _=t.size[n]/m.size[n],y=m.topLeft().scale(_,_),I=hr(m.size[a]*_,t,e.alignContent,c,a),B=(0,bt.A)();"x"===l?B.translate(t.origin.x-y.x,I-y.y):B.translate(I-y.x,t.origin.y-y.y),B.scale(_,_),this.transform(B)}}_initGroups(){const{options:e,children:t}=this,{lineSpacing:i,wrap:s,spacing:n}=e,a=this._fieldMap.sizeField;let l=this._newGroup();const c=[],h=function(){c.push(l),d+=l.lineSize+i};let d=-i;for(let p=0;p<t.length;p++){let u=t[p],g=t[p].clippedBBox();u.visible()&&g&&(s&&l.size+g.size[a]+n>this._rect.size[a]?0===l.bboxes.length?(this._addToGroup(l,g,u),h(),l=this._newGroup()):(h(),l=this._newGroup(),this._addToGroup(l,g,u)):this._addToGroup(l,g,u))}return l.bboxes.length&&h(),{groups:c,groupsSize:d}}_addToGroup(e,t,i){e.size+=t.size[this._fieldMap.sizeField]+this.options.spacing,e.lineSize=Math.max(t.size[this._fieldMap.groupsSizeField],e.lineSize),e.bboxes.push(t),e.elements.push(i)}_newGroup(){return{lineSize:0,size:-this.options.spacing,bboxes:[],elements:[]}}},f1=class g1 extends K{constructor(e,t){super(e),this.chartService=t}render(){const{children:e,options:t}=this,i=t.vertical;var o;this.visual=new p1(null,{spacing:i?0:t.spacing,lineSpacing:i?t.spacing:0,orientation:i?"vertical":va,reverse:t.rtl,alignItems:i?(o=t.rtl,o?qs:fo):V});for(let s=0;s<e.length;s++){let n=e[s];n.reflow(new k),n.renderVisual()}}reflow(e){this.visual.rect(e.toRect()),this.visual.reflow();const t=this.visual.clippedBBox();this.box=t?ms(t):new k}renderVisual(){this.addVisual()}createVisual(){}};class Vu extends Rt{visualStyle(){const e=this.markerOptions(),t=e.border;return{stroke:{width:t.width,color:t.color,opacity:R(t.opacity,e.opacity),dashType:t.dashType},fill:{color:e.background,opacity:e.opacity},cursor:e.cursor}}markerOptions(){return this.options}markerHighlightOptions(){const e=this.markerOptions();return x({},e,{background:e.border.color},e.highlight,e.type===ha?{background:e.highlight.border.color,border:{color:e.highlight.background,width:e.highlight.border.width/2},width:e.width,height:e.height,margin:{top:0,left:0}}:{})}createHighlight(){const e=new Rt(this.markerHighlightOptions()),t=this.paddingBox.clone();return e.reflow(t.pad(e.options.border.width)),this.highlight=[e.getElement()],this.highlight}}w(Vu,{border:{width:2},width:8,height:8,background:W,margin:{top:-1,left:-1},vAlign:U,align:N,highlight:{width:10,height:10,border:{color:W,width:2}}});const m1=Vu;class Bu extends Rt{getElement(){const e=new et.A,t=new M.P(this.visualStyle()),{paddingBox:i}=this,s=i.height()/2;return t.moveTo(i.x1,i.y1+s).lineTo(i.x1,i.y2).lineTo(i.x2,i.y2),e.append(t),e}}w(Bu,{width:15,height:15,align:$,vAlign:Y,margin:{right:-2,bottom:2}});const Fu=Bu;class Nu extends Rt{getElement(){const e=new et.A,t=new M.P({stroke:{color:this.options.border.color,opacity:this.options.opacity,width:this.options.height,dashType:this.options.dashType}}),i=this.paddingBox,s=i.center().y;return t.moveTo(i.x1,s).lineTo(i.x2,s),e.append(t),e}createHighlight(){return this.highlight=[this.createHighlightLine(),this.createHighlightMarker()],this.highlight}createHighlightLine(){const e=x({},{border:{color:this.options.border.color,opacity:this.options.border.opacity,dashType:this.options.border.dashType}},this.options.highlight),t=new Fu(e);return t.reflow(this.parent.paddingBox.clone()),this.highlightLine=t.getElement(),this.highlightLine}createHighlightMarker(){const e=x({},{background:this.options.background},this.options.highlight.markers),t=new Rt(e),i=this.parent.paddingBox,s=e.border.width,n=this.parent.box.clone();return n.pad({left:s-i.x1,top:s-i.y1}),t.reflow(n),this.highlightMarker=t.getElement(),this.highlightMarker}}w(Nu,{border:{width:0},type:"rect",align:N,vAlign:V,highlight:{border:{width:2},markers:{type:jt,width:10,height:10,border:{width:2,color:W},align:N,vAlign:U}}});const x1=Nu;class zu extends Rt{createHighlight(){const e=x({},{background:this.options.background},this.options.highlight.markers),t=new Rt(e),i=this.paddingBox.clone(),s=this.parent.box.clone();return i.align(s,E,N),i.align(s,D,U),t.reflow(i),this.highlight=[t.getElement()],this.highlight}}w(zu,{highlight:{markers:{type:jt,width:10,height:10,border:{width:2,color:W},margin:{top:-3,left:-3}}}});const v1=zu;class ju extends fi{constructor(e){super(e),this.createContainer(),e.rtl?(this.createLabel(),this.createMarker()):(this.createMarker(),this.createLabel()),this._id=yo(),this.options.accessibility.ariaChecked=e.active}createContainer(){this.container=new Ra({vertical:!1,wrap:!1,align:V,spacing:this.options.spacing}),this.append(this.container)}createMarker(){this.markerWrap=new fi({vertical:!1,shrinkToFit:!0,wrap:!1,margin:1,width:22,height:22}),this.container.append(this.markerWrap),this.createMarkerArea(),this.options.markers.visible&&(this._marker=this._createMarker(),this.markerWrap.append(this._marker))}createMarkerArea(){const e=this.options,{markerColor:t,line:i={}}=e,s={border:{color:i.color||t,opacity:i.opacity,dashType:i.dashType}};return this._createLine(s)||this._createMarkerLine(s,i)||this._createSquare()}markerOptions(){const e=this.options,{markers:t={},markerColor:i}=e,{border:s={}}=t;return t.zIndex=void 0,x({},t,{border:{color:s.color||i},highlight:e.highlight.markers})}_highlightOptions(){const e=this.options;return x({markers:{type:e.markers.type}},e.highlight)}_createLine(e){const t=this.options;return t.type===$e&&!t.markers.visible&&(this._line=new x1(x({},{background:t.markerColor,highlight:this._highlightOptions()},e,t.line)),this.markerWrap.append(this._line)),this._line}_createMarkerLine(e,t){return this.options.type===$e&&(this._markerLineArea=new Fu(x({},{border:{width:t.height}},e)),this.markerWrap.append(this._markerLineArea)),this._markerLineArea}_reduceSize(e,t,i=.6){"number"==typeof e[t]&&(e[t]=e[t]*i)}_createSquare(){const e=this.options;if(e.type===We){let t=e.pattern||(e.series||{}).pattern;t&&("function"==typeof t&&(t=t(e.series)),t=Object.assign({},t),this._reduceSize(t,"gap"),this._reduceSize(t,"width"),this._reduceSize(t,"radius")),this._square=new v1(Object.assign({},{border:e.border,vAlign:e.markers.visible?Y:V,highlight:this._highlightOptions()},e.area,{pattern:t,background:e.area.background||e.markerColor})),this.markerWrap.append(this._square)}return this._square}_createMarker(){return new m1(this.markerOptions())}_highlightMarkers(){this.options.active&&this._toggleHighlight(!0)}_restoreMarkers(){this._toggleHighlight(!1)}_toggleHighlight(e){if(!this.options.highlight.visible)return;const t=this._marker||this._square||this._line;if(t&&t===this._line&&this._line.visual.visible(!e),t){let i=t.highlight;i||(i=t.createHighlight(),i.forEach(s=>s&&this.markerWrap.appendVisual(s))),i.forEach(s=>s&&s.visible(e))}}createLabel(){const e=this.options,t=x({},e.labels);this.container.append(new Ht(e.text,t))}getAriaLabelText(){return this.options.text}focusVisual(){this.visual.options.set("id",this._id),this.toggleFocusHighlight(!0),this._highlightMarkers()}clearFocusFromVisual(){this.visual.options.set("id",""),this.toggleFocusHighlight(!1),this._restoreMarkers()}renderComplete(){super.renderComplete();const e=this.options.cursor||{},t=this._itemOverlay=M.w.fromRect(this.container.box.toRect(),{fill:{color:W,opacity:0},stroke:null,cursor:e.style||e});this.appendVisual(t)}click(e,t){const i=this.eventArgs(t);!e.trigger(Op,i)&&t&&"contextmenu"===t.type&&t.preventDefault()}over(e,t){const i=this.eventArgs(t);return e.trigger("legendItemHover",i)||(e._legendItemHover(i.seriesIndex,i.pointIndex),this._highlightMarkers()),!0}out(e,t){e._unsetActivePoint(),this._restoreMarkers(),e.trigger("legendItemLeave",this.eventArgs(t))}eventArgs(e){const t=this.options;return{element:me(e),text:t.text,series:t.series,seriesIndex:t.series.index,pointIndex:t.pointIndex}}createVisual(){super.createVisual();const e=this.options;if(this.options.visible){const t=x({ariaLabel:void 0!==e.accessibility.ariaLabel?e.accessibility.ariaLabel:e.text},e.accessibility);Ia(this.visual,t)}}renderVisual(){const e=this.options,t=e.visual;t?(this.visual=t({active:e.active,series:e.series,sender:this.getSender(),pointIndex:e.pointIndex,options:{type:e.type,markers:x({background:this.options.markerColor},this.markerOptions()),labels:e.labels},createVisual:()=>{this.createVisual(),this.renderChildren(),this.renderComplete();const i=this.visual;return delete this.visual,i}}),this._marker=this._markerLineArea=this._square=this._line=null,this.addVisual()):super.renderVisual()}createFocusHighlight(e){return M.w.fromRect(this.container.box.pad(e.stroke.width/2).toRect(),e)}}w(ju,{accessibility:{role:"checkbox",className:"k-chart-legend-item",ariaRoleDescription:"Legend item"},markers:{},highlight:{visible:!0,markers:{}}});const b1=ju,dr="custom";class Uu extends K{constructor(e,t={}){super(e),this.chartService=t,z(this.options.position,[U,$,Y,N,dr])||(this.options.position=$),this.createContainers(),this.createLegendTitle(e.title),this.createItems()}createContainers(){const e=this.options,{position:t,align:i}=e;let s=t,n=V;t===dr?s=N:z(t,[U,Y])?(s=i===fo?N:i===qs?$:V,n=t):i&&(i===fo?n=U:i===qs&&(n=Y)),this.container=new fi({margin:e.margin,padding:e.padding,background:e.background,border:e.border,vAlign:n,align:s,zIndex:e.zIndex,shrinkToFit:!0}),this.itemsContainer=this.hasTitle()?new fi({vAlign:n,align:s,zIndex:e.zIndex,shrinkToFit:!0}):this.container,this.append(this.container)}createItems(){const e=this.getService(),t=this.options,i=this.isVertical(),s=new f1({vertical:i,spacing:t.spacing,rtl:e.rtl},e);let n=t.data;t.reverse&&(n=n.slice(0).reverse());const a=n.length;for(let l=0;l<a;l++){let c=n[l];const{markers:h={},dashType:d,legendItem:p,opacity:u}=c.series||{},g=x({visible:!1!==h.visible,type:jt},h);delete g.size;const f=x({},{markers:g,labels:t.labels,rtl:e.rtl,line:Object.assign({},{dashType:d},t.line),area:Object.assign({},{opacity:u},t.area),opacity:u,accessibility:t.accessibility,focusHighlight:t.focusHighlight},t.item,p,c,{markers:t.markers});s.append(new b1(f))}s.render(),this.itemsContainer.append(s)}isVertical(){const{orientation:e,position:t}=this.options;return t===dr&&e!==va||(C(e)?e!==va:z(t,[N,$]))}hasItems(){return this.container.children[0].children.length>0}getItems(){return this.itemsContainer.children[0].children}reflow(e){const t=this.options,i=e.clone();this.hasItems()?(t.position===dr?(this.containerCustomReflow(i),this.box=i):this.containerReflow(i),this.hasTitle()&&this.title.reflow(new k(this.container.box.x1,this.title.box.y1,this.container.box.x2,this.title.box.y2))):this.box=i}containerReflow(e){const{options:t,container:i}=this,{position:s,width:n,height:a}=t,l=s===U||s===Y?E:D,c=this.isVertical(),h=e.clone();let d=e.clone();(s===N||s===$)&&(d.y1=h.y1=0),c&&a?(d.y2=d.y1+a,d.align(h,D,i.options.vAlign)):!c&&n&&(d.x2=d.x1+n,d.align(h,E,i.options.align)),i.reflow(d),d=i.box;const p=d.clone();(t.offsetX||t.offsetY)&&(d.translate(t.offsetX,t.offsetY),i.reflow(d)),p[l+1]=e[l+1],p[l+2]=e[l+2],this.box=p}containerCustomReflow(e){const{options:t,container:i}=this,{offsetX:s,offsetY:n,width:a,height:l}=t,c=this.isVertical();let h=e.clone();c&&l?h.y2=h.y1+l:!c&&a&&(h.x2=h.x1+a),i.reflow(h),h=i.box,i.reflow(new k(s,n,s+h.width(),n+h.height()))}renderVisual(){this.hasItems()&&super.renderVisual()}createLegendTitle(e){let t=x({},{color:pt,position:U,align:V},e),i=t.text;if(e&&!1!==e.visible&&e.text){if(C(t)&&t.visible){const s=kt(t);s?i=s({text:i}):t.format&&(i=this.chartService.format.auto(t.format,i))}this.title=new Ht(i,t),this.createTitleLayout(),this.appendTitleLayoutContent()}}createTitleLayout(){this.layout=new Ra({vertical:!0,wrap:!1}),this.container.append(this.layout)}hasTitle(){return!(!this.options.title||!1===this.options.title.visible||!this.options.title.text)}appendTitleLayoutContent(){this.options.title.position===Y?(this.layout.append(this.itemsContainer),this.layout.append(this.title)):(this.layout.append(this.title),this.layout.append(this.itemsContainer))}}w(Uu,{position:$,data:[],offsetX:0,offsetY:0,margin:Z(2),padding:Z(5),border:{color:pt,width:0},item:{cursor:xa,spacing:6},spacing:6,background:"",zIndex:1,markers:{},line:{width:20,height:2,cursor:xa,opacity:1},area:{type:"square",align:$,width:15,height:15}});const Gu=Uu;class Yl{constructor(){this._registry=[]}register(e,t){this._registry.push({type:e,seriesTypes:t})}create(e,t,i){const s=this._registry;let a,n=s[0];for(let l=0;l<s.length;l++){const c=s[l];a=dt(e,c.seriesTypes);const h=dt(e,Ms);if(a.length-h.length>0){n=c;break}}return new n.type(a,t,i)}}Yl.current=new Yl;const qe=Yl;function ti(o){const e=document.createElement("div");return o&&(e.className=o),e}function Hu(o){let e=o;for(;e&&!sn(e,"k-handle");)e=e.parentNode;return e}class Xu{constructor(e,t,i,s){const n=e.element;this.options=x({},this.options,i),this.chart=e,this.observer=s,this.chartElement=n,this.categoryAxis=t,this._dateAxis=this.categoryAxis instanceof mn,this.initOptions(),this.visible=this.options.visible&&n.offsetHeight,this.visible&&(this.createElements(),this.set(this._index(this.options.from),this._index(this.options.to)),this.bindEvents())}onPane(e){return this.categoryAxis.pane===e}createElements(){const e=this.options,t=this.wrapper=ti("k-selector k-pointer-events-none");ht(t,{top:e.offset.top,left:e.offset.left,width:e.width,height:e.height,direction:"ltr"});const i=this.selection=ti("k-selection k-pointer-events-none");this.leftMask=ti("k-mask k-pointer-events-none"),this.rightMask=ti("k-mask k-pointer-events-none"),t.appendChild(this.leftMask),t.appendChild(this.rightMask),t.appendChild(i);const s=this.body=ti("k-selection-bg k-pointer-events-none");i.appendChild(s);const n=this.leftHandle=ti("k-handle k-left-handle k-pointer-events-auto"),a=this.rightHandle=ti("k-handle k-right-handle k-pointer-events-auto");n.appendChild(ti()),a.appendChild(ti()),i.appendChild(n),i.appendChild(a),this.chartElement.appendChild(t);const l=ht(i,["borderLeftWidth","borderRightWidth","height"]),c=ht(n,"height").height,h=ht(a,"height").height;e.selection={border:{left:l.borderLeftWidth,right:l.borderRightWidth}},ht(n,{top:(l.height-c)/2}),ht(a,{top:(l.height-h)/2}),t.style.cssText=t.style.cssText}bindEvents(){!1!==this.options.mousewheel&&(this._mousewheelHandler=this._mousewheel.bind(this),nn(this.chartElement,{[tr]:this._mousewheelHandler})),this._domEvents=ep.create(this.chartElement,{stopPropagation:!0,start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),press:this._press.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})}initOptions(){const{options:e,categoryAxis:t}=this,i=t.pane.chartsBox(),s=this.chart.chartService.intl;this._dateAxis&&x(e,{min:Et(s,e.min),max:Et(s,e.max),from:Et(s,e.from),to:Et(s,e.to)});const{paddingLeft:n,paddingTop:a}=ht(this.chartElement,["paddingLeft","paddingTop"]);this.options=x({},{width:i.width(),height:i.height()+.1,padding:{left:n,top:a},offset:{left:i.x1+n,top:i.y1+a},from:e.min,to:e.max},e)}destroy(){this._domEvents&&(this._domEvents.destroy(),delete this._domEvents),clearTimeout(this._mwTimeout),this._state=null,this.wrapper&&(this._mousewheelHandler&&(on(this.chartElement,{[tr]:this._mousewheelHandler}),this._mousewheelHandler=null),this.chartElement.removeChild(this.wrapper),this.wrapper=null)}_rangeEventArgs(e){return{axis:this.categoryAxis.options,from:this._value(e.from),to:this._value(e.to)}}_pointInPane(e,t){const i=this.categoryAxis.pane.box,s=this.chart._toModelCoordinates(e,t);return i.containsPoint(s)}_start(e){const t=this.options,i=me(e);if(this._state||!i)return;const s=ad(e);if(!this._pointInPane(s.x,s.y))return;const a=Hu(i),l=this.body.getBoundingClientRect(),c=!a&&s.x>=l.x&&s.x<=l.x+l.width&&s.y>=l.y&&s.y<=l.y+l.height;this.chart._unsetActivePoint(),this._state={moveTarget:a,startLocation:e.x?e.x.location:0,inBody:c,range:{from:this._index(t.from),to:this._index(t.to)}};const h=this._rangeEventArgs({from:this._index(t.from),to:this._index(t.to)});this.trigger(ml,h)&&(this._state=null)}_press(e){let t;t=this._state?this._state.moveTarget:Hu(me(e)),t&&ut(t,"k-handle-active")}_move(e){if(!this._state)return;const{_state:t,options:i,categoryAxis:s}=this,{range:n,moveTarget:a}=t,l=s.options.reverse,c=this._index(i.from),h=this._index(i.to),d=this._index(i.min),p=this._index(i.max),u=t.startLocation-e.x.location,g_from=n.from,g_to=n.to,f=n.to-n.from,m=ht(this.wrapper,"width").width/(s.categoriesCount()-1),v=Math.round(u/m)*(l?-1:1);if(!a&&!t.inBody)return;const _=a&&sn(a,"k-left-handle"),y=a&&sn(a,"k-right-handle");t.inBody?(n.from=Math.min(Math.max(d,c-v),p-f),n.to=Math.min(n.from+f,p)):_&&!l||y&&l?(n.from=Math.min(Math.max(d,c-v),p-1),n.to=Math.max(n.from+1,n.to)):(_&&l||y&&!l)&&(n.to=Math.min(Math.max(d+1,h-v),p),n.from=Math.min(n.to-1,n.from)),(n.from!==g_from||n.to!==g_to)&&(this.move(n.from,n.to),this.trigger(Pn,this._rangeEventArgs(n)))}_end(){if(this._state){const e=this._state.moveTarget;e&&mo(e,"k-handle-active");const t=this._state.range;this.set(t.from,t.to),this.trigger(xl,this._rangeEventArgs(t)),delete this._state}}_tap(e){const{options:t,categoryAxis:i}=this,s=this.chart._eventCoordinates(e),n=i.pointCategoryIndex(new L(s.x,i.box.y1)),a=this._index(t.from),l=this._index(t.to),c=this._index(t.min),h=this._index(t.max),d=l-a,u={},g=3===e.event.which;let f=Math.round(a+d/2-n);this._state||g||(this.chart._unsetActivePoint(),i.options.justified||f--,u.from=Math.min(Math.max(c,a-f),h-d),u.to=Math.min(u.from+d,h),this._start(e),this._state&&(this._state.range=u,this.trigger(Pn,this._rangeEventArgs(u)),this._end()))}_mousewheel(e){let t=ya(e);if(this._start(e),this._state){const i=this._state.range;e.preventDefault(),e.stopPropagation(),Math.abs(t)>1&&(t*=3),this.options.mousewheel.reverse&&(t*=-1),this.expand(t)&&this.trigger(Pn,{axis:this.categoryAxis.options,delta:t,originalEvent:e,from:this._value(i.from),to:this._value(i.to)}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout(()=>{this._end()},150)}}_gesturestart(e){const t=this.options,i=e.touches[0];if(!this._pointInPane(i.pageX,i.pageY))return;this._state={range:{from:this._index(t.from),to:this._index(t.to)}};const n=this._rangeEventArgs(this._state.range);this.trigger(ml,n)?this._state=null:e.preventDefault()}_gestureend(){this._state&&(this.trigger(xl,this._rangeEventArgs(this._state.range)),delete this._state)}_gesturechange(e){if(!this._state)return;const{chart:t,_state:i,options:s,categoryAxis:n}=this,a=i.range,l=t._toModelCoordinates(e.touches[0].x.location).x,c=t._toModelCoordinates(e.touches[1].x.location).x,h=Math.min(l,c),d=Math.max(l,c);e.preventDefault(),a.from=n.pointCategoryIndex(new L(h))||s.min,a.to=n.pointCategoryIndex(new L(d))||s.max,this.move(a.from,a.to),this.trigger(Pn,this._rangeEventArgs(a))}_index(e){let t=e;return e instanceof Date&&(t=this.categoryAxis.categoryIndex(e)),t}_value(e){let t=e;return this._dateAxis&&(t=this.categoryAxis.categoryAt(e),t>this.options.max&&(t=this.options.max)),t}_slot(e){const t=this.categoryAxis,i=this._index(e);return t.getSlot(i,i,!0)}move(e,t){const i=this.options,s=this.categoryAxis.options.reverse,{offset:n,padding:a,selection:{border:l}}=i,h=s?e:t,d="x"+(s?2:1);let p=this._slot(s?t:e);const u=A(p[d]-n.left+a.left);ht(this.leftMask,{width:u}),ht(this.selection,{left:u}),p=this._slot(h);const g=A(i.width-(p[d]-n.left+a.left));ht(this.rightMask,{width:g});let f=i.width-g;f!==i.width&&(f+=l.right),ht(this.rightMask,{left:f}),ht(this.selection,{width:Math.max(i.width-(u+g)-l.right,0)})}set(e,t){const i=this.options,s=this._index(i.min),n=this._index(i.max),a=O(this._index(e),s,n),l=O(this._index(t),a+1,n);i.visible&&this.move(a,l),i.from=this._value(a),i.to=this._value(l)}expand(e){const t=this.options,i=this._index(t.min),s=this._index(t.max),n=t.mousewheel.zoom,a=this._index(t.from),l=this._index(t.to);let c={from:a,to:l};const h=x({},c);if(this._state&&(c=this._state.range),n!==$&&(c.from=O(O(a-e,0,l-1),i,s)),n!==N&&(c.to=O(O(l+e,c.from+1,s),i,s)),c.from!==h.from||c.to!==h.to)return this.set(c.from,c.to),!0}zoom(e,t){const i=this.options,s=this._index(i.min),n=this._index(i.max),a=this._index(i.from),l=this._index(i.to);let c={from:a,to:l};const h=x({},c),{reverse:d}=this.categoryAxis.options,p=E+(d?"2":"1"),u=this.categoryAxis.lineBox(),g=Math.abs(u[p]-t[E]),f=u.width(),m=A(g/f,2),v=A(m*e),_=A((1-m)*e);if(this._state&&(c=this._state.range),c.from=O(O(a-v,0,l-1),s,n),c.to=O(O(l+_,c.from+1,n),s,n),c.from!==h.from||c.to!==h.to)return this.set(c.from,c.to),!0}trigger(e,t){return(this.observer||this.chart).trigger(e,t)}}w(Xu,{visible:!0,mousewheel:{zoom:"both"},min:wt,max:gt});const Yu=Xu,C1=class w1 extends Ll{show(e){if(!e||!e.tooltipAnchor||this._current&&this._current===e)return;const t=x({},this.options,e.options.tooltip),i=e.tooltipAnchor();i?(this._current=e,super.show({point:e,anchor:i},t,e)):this.hide()}hide(){delete this._current,super.hide()}};class Wu extends Ll{constructor(e,t){super(e.chartService,t),this.plotArea=e,this.formatService=e.chartService.format}showAt(e,t){const i=Kt(e,function(s){const n=s.series.tooltip;return!(n&&!1===n.visible)});if(i.length>0){const s=i[0],n=this.plotArea.categoryAxis.getSlot(s.categoryIx),a=t?this._slotAnchor(t,n):this._defaultAnchor(s,n);this.show({anchor:a,shared:!0,points:e,category:s.category,categoryText:this.formatService.auto(this.options.categoryFormat,s.category),series:this.plotArea.series},this.options)}}_slotAnchor(e,t){return this.plotArea.categoryAxis.options.vertical||(e.x=t.center().x),{point:e,align:{horizontal:"left",vertical:"center"}}}_defaultAnchor(e,t){const i=e.owner.pane.chartsBox(),s=this.plotArea.categoryAxis.options.vertical,n=i.center(),a=t.center();let c;return c=s?new L(n.x,a.y):new L(a.x,n.y),{point:c,align:{horizontal:"center",vertical:"center"}}}}w(Wu,{categoryFormat:"{0:d}"});const $u=Wu;class Qu extends he{setup(){const{element:e,options:t}=this;if(e.bbox()){this.origin=t.origin;const s=t.vertical?D:E,n=this.fromScale=new j.A(1,1);n[s]=xn,e.transform(bt.A().scale(n.x,n.y))}else this.abort()}step(e){const t=ae(this.fromScale.x,1,e),i=ae(this.fromScale.y,1,e);this.element.transform(bt.A().scale(t,i,this.origin))}abort(){super.abort(),this.element.transform(null)}}w(Qu,{duration:pe}),Me.current.register(ue,Qu);class Zu extends he{setup(){const e=this.center=this.element.bbox().center();this.element.transform(bt.A().scale(xn,xn,e))}step(e){this.element.transform(bt.A().scale(e,e,this.center))}}w(Zu,{easing:"easeOutElastic"}),Me.current.register(_s,Zu);class Ku extends he{setup(){this.fadeTo=this.element.opacity(),this.element.opacity(0)}step(e){this.element.opacity(e*this.fadeTo)}}w(Ku,{duration:200,easing:"linear"}),Me.current.register(mi,Ku);class Ju extends he{setup(){this.element.transform(bt.A().scale(xn,xn,this.options.center))}step(e){this.element.transform(bt.A().scale(e,e,this.options.center))}}w(Ju,{easing:"easeOutElastic",duration:pe}),Me.current.register(vi,Ju);class qu extends rr{render(){super.render(),this.renderSegments()}createSegment(e,t,i){let n;return n=t.style===bs?Al:Is,new n(e,t,i)}animationPoints(){return super.animationPoints().concat(this._segments)}createMissingValue(e,t){if(t===Ye){const i={x:e.x,y:e.y};return Xt(i.x)||(i.x=0),Xt(i.y)||(i.y=0),i}}}x(qu.prototype,Sl);const tg=qu,Bn=function k1(o,e,t){const i=[];let{xMin:s,xMax:n}=e;const a=(t||{}).forecast;a&&(a.before>0&&(s-=a.before),a.after>0&&(n+=a.after));const l=(t||{}).samplingInterval;let c=R(l,gs(s,n)/10);l<=0&&(c=n-s);for(let h=s;h<=n;h+=c)i.push([h,o(h)]);return i},pr=o=>({valueFields:e})=>({xValue:e.x,yValue:e[o]}),eg=function O1(o,e){let t=Number.MAX_VALUE,i=Number.MIN_VALUE;for(let s=0;s<o.length;s++){const n=o[s],{xValue:a,yValue:l}=e(n);isFinite(a)&&null!==a&&isFinite(l)&&null!==l&&(t=Math.min(a,t),i=Math.max(a,i))}return{xMin:t,xMax:i}},Ki={};Ki[ll]=function A1(o){const{options:e,seriesValues:t}=o,i=function T1({seriesValues:o,options:e}){const t=o();if(!Ln(t,e.field))return null;let{slope:i,intercept:s,count:n,xMin:a,xMax:l}=Ci(t,(o=>({valueFields:e})=>({xValue:e.x,yValue:Math.log(e[o])}))(e.field));const c={xMin:a,xMax:l};if(n>0){const h=Math.exp(s),d=i;return Bn(p=>h*Math.exp(d*p),c,e.trendline)}return null}({seriesValues:t,options:e});return i?Object.assign({},e,{type:"scatterLine",data:i}):null},Ki[cl]=function P1(o){const{options:e,seriesValues:t}=o,i=function E1({seriesValues:o,options:e}){let{slope:t,intercept:i,count:s,xMin:n,xMax:a}=Ci(o(),pr(e.field));return s>0?Bn(c=>t*c+i,{xMin:n,xMax:a},e.trendline):null}({seriesValues:t,options:e});return i?Object.assign({},e,{type:"scatterLine",data:i}):null},Ki[hl]=function I1(o){const{options:e,seriesValues:t}=o,i=function V1({seriesValues:o,options:e}){const t=o();if(!Ln(t,"x"))return null;let{slope:i,intercept:s,count:n}=Ci(t,(o=>({valueFields:e})=>({xValue:Math.log(e.x),yValue:e[o]}))(e.field)),a=eg(t,(o=>({valueFields:e})=>({xValue:e.x,yValue:e[o]}))(e.field));if(n>0){const l=i,c=s;return Bn(h=>l*Math.log(h)+c,a,e.trendline)}return null}({seriesValues:t,options:e});return i?Object.assign({},e,{type:"scatterLine",data:i}):null},Ki[dl]=function F1(o){const{options:e}=o,t=function N1({options:o,seriesValues:e}){const t=(o.trendline||{}).period||2,s=Mu(e({before:t,after:t}),pr(o.field),t);return s.length>0?s:null}(o);return t?Object.assign({},e,{type:"scatterLine",data:t}):null},Ki[pl]=function j1(o){const{options:e,seriesValues:t}=o,i=function U1({seriesValues:o,options:e}){const t=(e.trendline||{}).order,i=pr(e.field),{count:s,valueMapper:n,xMin:a,xMax:l}=Eu(o(),i,t);return s>0?Bn(n,{xMin:a,xMax:l},e.trendline):null}({seriesValues:t,options:e});return i?Object.assign({},e,{type:"scatterLine",data:i}):null},Ki[ul]=function H1(o){const{options:e,seriesValues:t}=o,i=function Y1({seriesValues:o,options:e}){const t=o();if(!Ln(t,"x"))return null;let{slope:i,intercept:s,count:n}=Ci(t,(o=>({valueFields:e})=>({xValue:Math.log(e.x),yValue:Math.log(e[o])}))(e.field)),a=eg(t,pr(e.field));if(n>0){const l=Math.exp(s),c=i;return Bn(h=>l*Math.pow(h,c),a,e.trendline)}return null}({seriesValues:t,options:e});return i?Object.assign({},e,{type:"scatterLine",data:i}):null};const $1=Ki;class Wl extends wi{initFields(){this.namedXAxes={},this.namedYAxes={},this.xAxisRangeTracker=new nr,this.yAxisRangeTracker=new nr}render(e=this.panes){this.series=[...this.originalSeries],this.createTrendlineSeries();const t=this.groupSeriesByPane();for(let i=0;i<e.length;i++){const s=e[i],n=t[s.options.name||"default"]||[];this.addToLegend(n);const a=this.filterVisibleSeries(n);a&&(this.createScatterChart(dt(a,rl),s),this.createScatterLineChart(dt(a,al),s),this.createBubbleChart(dt(a,_s),s))}this.createAxes(e)}appendChart(e,t){this.xAxisRangeTracker.update(e.xAxisRanges),this.yAxisRangeTracker.update(e.yAxisRanges),super.appendChart(e,t)}removeAxis(e){const t=e.options.name;super.removeAxis(e),e.options.vertical?(this.yAxisRangeTracker.reset(t),delete this.namedYAxes[t]):(this.xAxisRangeTracker.reset(t),delete this.namedXAxes[t]),e===this.axisX&&delete this.axisX,e===this.axisY&&delete this.axisY}seriesPaneName(e){const t=this.options,i=e.xAxis,s=[].concat(t.xAxis),n=Kt(s,function(u){return u.name===i})[0],a=e.yAxis,l=[].concat(t.yAxis),c=Kt(l,function(u){return u.name===a})[0];return(n||{}).pane||(c||{}).pane||(t.panes||[{}])[0].name||"default"}createScatterChart(e,t){e.length>0&&this.appendChart(new rr(this,{series:e,clip:t.options.clip}),t)}createScatterLineChart(e,t){e.length>0&&this.appendChart(new tg(this,{series:e,clip:t.options.clip}),t)}createBubbleChart(e,t){e.length>0&&this.appendChart(new V_(this,{series:e,clip:t.options.clip}),t)}createXYAxis(e,t,i){const s=e.name,n=t?this.namedYAxes:this.namedXAxes,a=t?this.yAxisRangeTracker:this.xAxisRangeTracker,l=x({reverse:!t&&this.chartService.rtl},e,{vertical:t}),c=Ze(l.type,Jo),h=a.query(),d=c?{min:.1,max:1}:{min:0,max:1},p=a.query(s)||h||d,u=[l.min,l.max],g=this.series;for(let _=0;_<g.length;_++){const y=g[_],P=y[t?"yAxis":"xAxis"];if(P===l.name||0===i&&!P){const I=ot.current.bindPoint(y,0).valueFields;u.push(I[t?"y":"x"]);break}}let f,m;0===i&&h&&(p.min=Math.min(p.min,h.min),p.max=Math.max(p.max,h.max));for(let _=0;_<u.length;_++)if(u[_]instanceof Date){f=!0;break}m=Ze(l.type,Fe)||!l.type&&f?xp:c?Go:de;const v=new m(p.min,p.max,l,this.chartService);if(v.axisIndex=i,s){if(n[s])throw new Error(`${t?"Y":"X"} axis with name ${s} is already defined`);n[s]=v}return this.appendAxis(v),v}createAxes(e){const t=this.options,i=[].concat(t.xAxis),s=[],n=[].concat(t.yAxis),a=[];for(let l=0;l<i.length;l++)z(this.findPane(i[l].pane),e)&&s.push(this.createXYAxis(i[l],!1,l));for(let l=0;l<n.length;l++)z(this.findPane(n[l].pane),e)&&a.push(this.createXYAxis(n[l],!0,l));this.axisX=this.axisX||s[0],this.axisY=this.axisY||a[0]}_dispatchEvent(e,t,i){const s=e._eventCoordinates(t),n=new L(s.x,s.y),a=this.axes,l=a.length,c=[],h=[];for(let d=0;d<l;d++){const p=a[d],u=p.options.vertical?h:c,g=p.getValue(n);null!==g&&u.push(g)}c.length>0&&h.length>0&&e.trigger(i,{element:me(t),originalEvent:t,x:Ds(c),y:Ds(h)})}updateAxisOptions(e,t){const i=e.options.vertical,s=this.groupAxes(this.panes),n=(i?s.y:s.x).indexOf(e);ig(this.options,n,i,t),ig(this.originalOptions,n,i,t)}trendlineFactory(e,t){const i=this.seriesValues.bind(this,t.index),s=Tu($1,e.type,{options:e,seriesValues:i});return s&&(s.xAxis=t.xAxis,s.yAxis=t.yAxis),s}seriesValues(e){const t=[],i=this.series[e];for(let s=0;s<i.data.length;s++){const n=this.bindPoint(i,s);t.push({pointIx:s,valueFields:n.valueFields})}return t}}function ig(o,e,t,i){x([].concat(t?o.yAxis:o.xAxis)[e],i)}w(Wl,{xAxis:{},yAxis:{}}),x(Wl.prototype,Rn);const $l=Wl;class ur extends K{constructor(e,t,i){super(i),this.value=e,this.sector=t}render(){this._rendered||!1===this.visible||(this._rendered=!0,this.createLabel())}createLabel(){const e=this.options.labels,t=this.owner.chartService;let i=this.getLabelText(e);if(e.visible&&(i||0===i)){if(e.position===V||e.position===qo)e.color||(e.color=_o(this.options.color)),e.background||(e.background=this.options.color);else{const s=t.theme.seriesDefaults.labels;e.color=e.color||s.color,e.background=e.background||s.background}this.label=new Ht(i,x({},e,{align:V,vAlign:"",animation:{type:mi,delay:this.animationDelay}}),this.pointData()),this.append(this.label)}}getLabelText(e){let t=kt(e);return t?t(this.pointData()):this.owner.chartService.format.auto(e.format,this.value)}reflow(e){this.render(),this.box=e,this.reflowLabel()}reflowLabel(){const{options:{labels:e},label:t}=this,i=this.sector.clone(),s=e.distance,n=i.middle();if(t){const a=t.box.height(),l=t.box.width();let c;if(e.position===V)i.radius=Math.abs((i.radius-a)/2)+a,c=i.point(n),t.reflow(new k(c.x,c.y-a/2,c.x,c.y));else if(e.position===qo)i.radius=i.radius-a/2,c=i.point(n),t.reflow(new k(c.x,c.y-a/2,c.x,c.y));else{let h;c=i.clone().expand(s).point(n),c.x>=i.center.x?(h=c.x+l,t.orientation=$):(h=c.x-l,t.orientation=N),t.reflow(new k(h,c.y-a,c.x,c.y))}}}createVisual(){const{sector:e,options:t}=this;if(super.createVisual(),this.addAccessibilityAttributesToVisual(),this.value)if(t.visual){const i=(e.startAngle+180)%360,s=t.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,center:new j.A(e.center.x,e.center.y),radius:e.radius,innerRadius:e.innerRadius,startAngle:i,endAngle:i+e.angle,options:t,sender:this.getSender(),createVisual:()=>{const n=new et.A;return this.createSegmentVisual(n),n}});s&&this.visual.append(s)}else this.createSegmentVisual(this.visual)}createSegmentVisual(e){const{sector:t,options:i}=this,s=i.border||{},n=s.width>0?{stroke:{color:s.color,width:s.width,opacity:s.opacity,dashType:s.dashType}}:{},a=i.color,l=gi(i.pattern,{color:a,opacity:i.opacity}),c=this.createSegment(t,x({fill:l,stroke:{opacity:i.opacity},zIndex:i.zIndex},n));e.append(c),yl(i)&&e.append(this.createGradientOverlay(c,{baseColor:a,fallbackFill:l},x({center:[t.center.x,t.center.y],innerRadius:t.innerRadius,radius:t.radius,userSpace:!0},i.overlay)))}createSegment(e,t){return t.singleSegment?new Te.A(new ce.A(new j.A(e.center.x,e.center.y),e.radius),t):To.current.createRing(e,t)}createAnimation(){const{options:e,sector:{center:t}}=this;x(e,{animation:{center:[t.x,t.y],delay:this.animationDelay}}),super.createAnimation()}createHighlight(e){const t=this.options.highlight||{},i=t.border||{};return this.createSegment(this.sector,x({},e,{fill:{color:t.color,opacity:t.opacity},stroke:{opacity:i.opacity,width:i.width,color:i.color,dashType:i.dashType}}))}highlightVisual(){return this.visual.children[0]}highlightVisualArgs(){const e=this.sector;return{options:this.options,radius:e.radius,innerRadius:e.innerRadius,center:new j.A(e.center.x,e.center.y),startAngle:e.startAngle,endAngle:e.angle+e.startAngle,visual:this.visual}}createFocusHighlight(e){const i=this.createSegment(this.sector,x({},e,{stroke:{width:2*this.options.focusHighlight.border.width}})),s=new M.P;return s.paths.push(M.w.fromRect(i.bbox())),s.paths.push(this.createSegment(this.sector,{})),i.clip(s),i}tooltipAnchor(){const e=this.sector.clone().expand(5),t=e.middle();return{point:e.point(t),align:K1(t+180)}}formatValue(e){return this.owner.formatPointValue(this,e)}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}}getIndex(){return this.index}}const Q1=A(Ct(30),q),Z1=A(Ct(60),q);function K1(o){const e=Ct(o),t=A(Math.sin(e),q),i=A(Math.cos(e),q);let s,n;return s=Math.abs(t)>Z1?V:i<0?$:N,n=Math.abs(t)<Q1?V:t<0?Y:U,{horizontal:s,vertical:n}}w(ur,{color:W,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:!1,distance:35,font:Gh,margin:Z(.5),align:jt,zIndex:1,position:Hi},animation:{type:vi},highlight:{visible:!0,border:{width:1}},visible:!0,accessibility:{role:bi,className:_i,ariaRoleDescription:yi}}),x(ur.prototype,_e),x(ur.prototype,Ls);const sg=ur,ng={createLegendItem:function(o,e,t){const i=this.options.legend||{},s=i.labels||{},n=i.inactiveItems||{},a=n.labels||{};if(t&&!1!==t.visibleInLegend){const l=!1!==t.visible,c=l?kt(s):kt(a)||kt(s);let d,p,h=t.category;c&&(h=c({text:h,series:t.series,dataItem:t.dataItem,percentage:t.percentage,value:o})),l?(d={},p=e.color):(d={color:a.color,font:a.font},p=(n.markers||{}).color),Xt(h)&&""!==h&&this.legendItems.push({active:l,pointIndex:t.index,text:h,series:t.series,markerColor:p,pattern:e.pattern,labels:d})}}};class gr extends K{constructor(e,t){super(t),this.plotArea=e,this.chartService=e.chartService,this.points=[],this.legendItems=[],this.render()}render(){this.traverseDataPoints(this.addValue.bind(this))}traverseDataPoints(e){const{options:t,plotArea:{options:{seriesColors:i=[]}}}=this,s=i.length,n=t.series,a=n.length;for(let l=0;l<a;l++){const c=n[l],h=c.data,{total:d,points:p,count:u}=Xp(c),g=360/d;let f,m;isFinite(g)||(f=360/u),m=C(c.startAngle)?c.startAngle:t.startAngle,l!==a-1&&c.labels.position===Hi&&(c.labels.position=V);for(let v=0;v<p.length;v++){const _=p[v];if(!_)continue;const{fields:y,value:P,visible:I}=_,B=0!==P?f||P*g:0,G=1!==h.length&&!!y.explode;at(c.color)||(c.color=y.color||i[v%s]),e(P,new cn(null,0,0,m,B),{owner:this,category:C(y.category)?y.category:"",pattern:C(y.pattern)?y.pattern:c.pattern,index:v,series:c,seriesIx:l,dataItem:h[v],percentage:0!==d?P/d:0,explode:G,visibleInLegend:y.visibleInLegend,visible:I,zIndex:a-l,animationDelay:this.animationDelay(v,l,a)}),!1!==I&&(m+=B)}}}evalSegmentOptions(e,t,i){const s=i.series;Ke(e,{value:t,series:s,dataItem:i.dataItem,category:i.category,percentage:i.percentage},{defaults:s._defaults,excluded:["data","content","template","visual","toggle","ariaTemplate","ariaContent"]})}addValue(e,t,i){const s=x({},i.series,{index:i.index});if(s.pattern=i.pattern||s.pattern,this.evalSegmentOptions(s,e,i),this.createLegendItem(e,s,i),!1===i.visible)return;const n=new sg(e,t,s);Object.assign(n,i),this.append(n),this.points.push(n)}reflow(e){const{options:t,points:i,seriesConfigs:s=[]}=this,n=i.length,a=e.clone(),c=Math.min(a.width(),a.height()),h=c/2,d=c-.85*c,p=new k(a.x1,a.y1,a.x1+c,a.y1+c),u=p.center(),g=a.center(),f=t.series.length,m=[],v=[];let _=R(t.padding,d);this.targetBox=e,_=_>h-5?h-5:_,p.translate(g.x-u.x,g.y-u.y);const y=h-_,P=new L(y+p.x1+_,y+p.y1+_);for(let I=0;I<n;I++){const B=i[I],G=B.sector,Q=B.seriesIx;if(G.radius=y,G.center=P,s.length){const mt=s[Q];G.innerRadius=mt.innerRadius,G.radius=mt.radius}Q===f-1&&B.explode&&(G.center=G.clone().setRadius(.15*G.radius).point(G.middle())),B.reflow(p);const tt=B.label;tt&&tt.options.position===Hi&&Q===f-1&&(tt.orientation===$?v.push(tt):m.push(tt))}m.length>0&&(m.sort(this.labelComparator(!0)),this.leftLabelsReflow(m)),v.length>0&&(v.sort(this.labelComparator(!1)),this.rightLabelsReflow(v)),this.box=p}leftLabelsReflow(e){const t=this.distanceBetweenLabels(e);this.distributeLabels(t,e)}rightLabelsReflow(e){const t=this.distanceBetweenLabels(e);this.distributeLabels(t,e)}distanceBetweenLabels(e){const t=ft(this.points),i=t.sector,s=e.length-1,n=i.radius+t.options.labels.distance,a=[];let l=e[0].box,c=A(l.y1-(i.center.y-n-l.height()-l.height()/2));a.push(c);for(let h=0;h<s;h++)l=e[h].box,c=A(e[h+1].box.y1-l.y2),a.push(c);return c=A(i.center.y+n-e[s].box.y2-e[s].box.height()/2),a.push(c),a}distributeLabels(e,t){const i=e.length;let s,n,a;for(let l=0;l<i;l++)for(a=-e[l],s=n=l;a>0&&(s>=0||n<i);)a=this._takeDistance(e,l,--s,a),a=this._takeDistance(e,l,++n,a);this.reflowLabels(e,t)}_takeDistance(e,t,i,s){let n=s;if(e[i]>0){const a=Math.min(e[i],n);n-=a,e[i]-=a,e[t]+=a}return n}reflowLabels(e,t){const i=ft(this.points),s=i.sector,n=i.options.labels,a=t.length,l=n.distance;let h,c=s.center.y-(s.radius+l)-t[0].box.height();e[0]+=2;for(let d=0;d<a;d++){const p=t[d],u=p.box;c+=e[d],h=this.hAlignLabel(u.x2,s.clone().expand(l),c,c+u.height(),p.orientation===$),p.orientation===$?(n.align!==jt&&(h=s.radius+s.center.x+l),p.reflow(new k(h+u.width(),c,h,c))):(n.align!==jt&&(h=s.center.x-s.radius-l),p.reflow(new k(h-u.width(),c,h,c))),c+=u.height()}}createVisual(){const{options:{connectors:e},points:t}=this,i=t.length;super.createVisual(),this._connectorLines=[];for(let n=0;n<i;n++){const a=t[n],{sector:l,label:c}=a,h=l.middle();if(c){const p=new M.w({stroke:{color:(a.options.connectors||{}).color||e.color,width:e.width},animation:{type:mi,delay:a.animationDelay}});if(c.options.position===Hi){const u=c.box,g=l.center;let v,_,y,f=l.point(h),m=new L(u.x1,u.center().y);f=l.clone().expand(e.padding).point(h),p.moveTo(f.x,f.y),c.orientation===$?(_=new L(u.x1-e.padding,u.center().y),y=og(g,f,m,_),m=new L(_.x-4,_.y),y=y||m,y.x=Math.min(y.x,m.x),this.pointInCircle(y,l.center,l.radius+4)||y.x<l.center.x?(v=l.center.x+l.radius+4,p.lineTo(a.options.labels.align!==Oe?v<m.x?v:f.x+8:v,f.y),p.lineTo(m.x,_.y)):(y.y=_.y,p.lineTo(y.x,y.y))):(_=new L(u.x2+e.padding,u.center().y),y=og(g,f,m,_),m=new L(_.x+4,_.y),y=y||m,y.x=Math.max(y.x,m.x),this.pointInCircle(y,l.center,l.radius+4)||y.x>l.center.x?(v=l.center.x-l.radius-4,p.lineTo(a.options.labels.align!==Oe?v>m.x?v:f.x-8:v,f.y),p.lineTo(m.x,_.y)):(y.y=_.y,p.lineTo(y.x,y.y))),p.lineTo(_.x,_.y),this._connectorLines.push(p),this.visual.append(p)}}}}renderVisual(){if(super.renderVisual(),pd(this.options.series,e=>e.autoFit)){const e=this.targetBox,t=this.box.center(),i=this.visual.bbox();if(!i)return;const s=i.bottomRight(),n=Math.min((t.y-e.y1)/(t.y-i.origin.y),(e.y2-t.y)/(s.y-t.y),(t.x-e.x1)/(t.x-i.origin.x),(e.x2-t.x)/(s.x-t.x));n<1&&this.visual.transform(bt.A().scale(n,n,[t.x,t.y]))}}labelComparator(e){const t=e?-1:1;return function(i,s){return((i.parent.sector.middle()+270)%360-(s.parent.sector.middle()+270)%360)*t}}hAlignLabel(e,t,i,s,n){const{radius:a,center:{x:l,y:c}}=t,h=Math.min(Math.abs(c-i),Math.abs(c-s));return h>a?e:l+Math.sqrt(a*a-h*h)*(n?1:-1)}pointInCircle(e,t,i){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<Math.pow(i,2)}formatPointValue(e,t){return this.chartService.format.auto(t,e.value)}animationDelay(e){return 70*e}stackRoot(){return this}}function og(o,e,t,i){const n=(i.y-t.y)*(e.x-o.x)-(i.x-t.x)*(e.y-o.y);let a;if(0!==n){const l=((i.x-t.x)*(o.y-t.y)-(i.y-t.y)*(o.x-t.x))/n;a=new L(o.x+l*(e.x-o.x),o.y+l*(e.y-o.y))}return a}w(gr,{startAngle:90,connectors:{width:2,color:"#939393",padding:8},inactiveItems:{markers:{},labels:{}}}),x(gr.prototype,ng),gr.prototype.isStackRoot=!0;const rg=gr,ag=class q1 extends wi{render(){this.createPieChart(this.series)}createPieChart(e){const t=e[0],i=new rg(this,{series:e,padding:t.padding,startAngle:t.startAngle,connectors:t.connectors,legend:this.options.legend});this.appendChart(i)}appendChart(e,t){super.appendChart(e,t),Li(this.options.legend.data,e.legendItems)}getPointBelow(e){return this.getPointToTheRight(e)}getPointAbove(e){return this.getPointToTheLeft(e)}};class Ql extends sg{reflowLabel(){const{options:{labels:e},label:t}=this,i=this.sector.clone(),s=i.middle();if(t){const n=t.box.height();if(e.position===V){i.radius-=(i.radius-i.innerRadius)/2;const a=i.point(s);t.reflow(new k(a.x,a.y-n/2,a.x,a.y))}else super.reflowLabel()}}createSegment(e,t){return To.current.createRing(e,t)}}w(Ql,{overlay:{gradient:"roundedGlass"},labels:{position:V},animation:{type:vi}}),x(Ql.prototype,_e);const lg=Ql;class cg extends rg{addValue(e,t,i){const s=x({},i.series,{index:i.index});if(s.pattern=i.pattern||s.pattern,this.evalSegmentOptions(s,e,i),this.createLegendItem(e,s,i),!1===i.visible)return;const n=new lg(e,t,s);Object.assign(n,i),this.append(n),this.points.push(n)}reflow(e){const t=this.options,i=e.clone(),n=Math.min(i.width(),i.height()),a=n/2,c=t.series,h=c.length;let d=R(t.padding,n-.85*n);d=d>a-5?a-5:d;let g,p=a-d,u=0;for(let y=0;y<h;y++){const P=c[y];0===y&&C(P.holeSize)&&(g=P.holeSize,p-=P.holeSize),C(P.size)?p-=P.size:u++,C(P.margin)&&y!==h-1&&(p-=P.margin)}C(g)||(g=(a-d)/(h+.75)*.75,p-=g);let v,_,f=g,m=0;this.seriesConfigs=[];for(let y=0;y<h;y++){const P=c[y];v=R(P.size,p/u),f+=m,_=f+v,this.seriesConfigs.push({innerRadius:f,radius:_}),m=P.margin||0,f=_}super.reflow(e)}animationDelay(e,t,i){return 50*e+pe*(t+1)/(i+1)}}w(cg,{startAngle:90,connectors:{width:2,color:"#939393",padding:8}});const ew=cg,hg=class ow extends wi{initFields(){this.valueAxisRangeTracker=new nr}render(){this.addToLegend(this.series),this.createPolarAxis(),this.createCharts(),this.createValueAxis()}alignAxes(){const e=this.valueAxis,t=e.range(),s=e.getSlot(e.options.reverse?t.max:t.min),n=this.polarAxis.getSlot(0).center,a=e.box.translate(n.x-s.x1,n.y-s.y1);e.reflow(a)}createValueAxis(){const t=this.valueAxisRangeTracker.query(),i=this.valueAxisOptions({roundToMajorUnit:!1,zIndex:-1});let s,n;i.type===Jo?(s=L0,n={min:.1,max:1}):(s=R0,n={min:0,max:1});const a=t||n,l=new s(a.min,a.max,i,this.chartService);this.valueAxis=l,this.appendAxis(l)}reflowAxes(){const{options:{plotArea:e},valueAxis:t,polarAxis:i,box:s}=this,n=.15*Math.min(s.width(),s.height()),a=Z(e.padding||{},n),l=s.clone().unpad(a),c=l.clone();c.y2=c.y1+Math.min(c.width(),c.height()),c.align(l,D,V);const h=c.clone().shrink(0,c.height()/2);i.reflow(c),t.reflow(h);const d=t.lineBox().height()-t.box.height();t.reflow(t.box.unpad({top:d})),this.axisBox=c,this.alignAxes(c)}backgroundBox(){return this.box}detachLabels(){}};class dg extends rr{pointSlot(e,t){const s=L.onCircle(e.center,e.startAngle,e.center.y-t.y1);return new k(s.x,s.y,s.x,s.y)}}w(dg,{clip:!1});const pg=dg;class Zl extends tg{}Zl.prototype.pointSlot=pg.prototype.pointSlot,w(Zl,{clip:!1});const ug=Zl,aw=class rw extends Pl{fillToAxes(e){const t=this._polarAxisCenter();e.lineTo(t.x,t.y)}_polarAxisCenter(){return this.parent.plotArea.polarAxis.box.center()}strokeSegments(){let e=this._strokeSegments;if(!e){const t=this._polarAxisCenter(),i=new Xo(!1),s=this.points();s.push(t),e=this._strokeSegments=i.process(s),e.pop()}return e}},cw=class lw extends Rs{fillToAxes(e){const i=this.parent.plotArea.polarAxis.box.center(),s=new Xe.A([i.x,i.y]);e.segments.unshift(s),e.segments.push(s)}};function dw(o,e){return o.value.x-e.value.x}const pw=class hw extends ug{createSegment(e,t,i){let n;return n=(t.line||{}).style===bs?new aw(e,t,i):new cw(e,t,i),n}createMissingValue(e,t){let i;return Xt(e.x)&&t!==vs&&(i={x:e.x,y:e.y},t===Ye&&(i.y=0)),i}seriesMissingValues(e){return e.missingValues||Ye}_hasMissingValuesGap(){const e=this.options.series;for(let t=0;t<e.length;t++)if("gap"===this.seriesMissingValues(e[t]))return!0}sortPoints(e){if(e.sort(dw),this._hasMissingValuesGap())for(let t=0;t<e.length;t++){const i=e[t];i&&!Xt(i.value.y)&&"gap"===this.seriesMissingValues(i.series)&&delete e[t]}return e}};class Kl extends hg{createPolarAxis(){const e=new O0(this.options.xAxis,this.chartService);this.polarAxis=e,this.axisX=e,this.appendAxis(e)}render(){this.series=[...this.originalSeries],this.createTrendlineSeries(),super.render()}valueAxisOptions(e){return x(e,{majorGridLines:{type:hi},minorGridLines:{type:hi}},this.options.yAxis)}createValueAxis(){super.createValueAxis(),this.axisY=this.valueAxis}trendlineFactory(e,t){const i=$l.prototype.trendlineFactory.call(this,e,t);return i&&(i.type=Zo),i}appendChart(e,t){this.valueAxisRangeTracker.update(e.yAxisRanges),wi.prototype.appendChart.call(this,e,t)}createCharts(){const e=this.filterVisibleSeries(this.series),t=this.panes[0];this.createLineChart(dt(e,[Zo]),t),this.createScatterChart(dt(e,[ol]),t),this.createAreaChart(dt(e,[nl]),t)}createLineChart(e,t){if(0===e.length)return;const i=new ug(this,{series:e});this.appendChart(i,t)}createScatterChart(e,t){if(0===e.length)return;const i=new pg(this,{series:e});this.appendChart(i,t)}createAreaChart(e,t){if(0===e.length)return;const i=new pw(this,{series:e});this.appendChart(i,t)}_dispatchEvent(e,t,i){const s=e._eventCoordinates(t),n=new L(s.x,s.y),a=this.axisX.getValue(n),l=this.axisY.getValue(n);null!==a&&null!==l&&e.trigger(i,{element:me(t),x:a,y:l})}createCrosshairs(){}}w(Kl,{xAxis:{},yAxis:{}}),x(Kl.prototype,Rn,{seriesValues:$l.prototype.seriesValues});const uw=Kl;class gg extends Ml{pointSlot(e,t){const i=e.center.y-t.y1,s=L.onCircle(e.center,e.middle(),i);return new k(s.x,s.y,s.x,s.y)}renderSegments(){if(super.renderSegments(),this._segments&&this._segments.length>1){const e=function gw(o){const e=[];for(let t=0;t<o.length;t++){const i=o[t];e[i.seriesIx]=e[i.seriesIx]||[],e[i.seriesIx].push(i)}return e}(this._segments);for(let t=0;t<e.length;t++){const i=e[t];if(i&&i.length>1){const s=i[0].linePoints[0],n=ft(i),a=ft(n.linePoints);0===s.categoryIx&&a.categoryIx===a.categoriesCount-1&&ft(i).linePoints.push(s)}}}}createSegment(e,t,i){let n;n=t.style===bs?Al:Is;const a=new n(e,t,i),l=this.seriesMissingValues(t);return(e.length===t.data.length||l===vs)&&(a.options.closed=!0),a}}w(gg,{clip:!1,limitPoints:!1});const fg=gg,mw=class fw extends Pl{fillToAxes(){}},vw=class xw extends Rs{fillToAxes(){}},_w=class bw extends fg{createSegment(e,t,i,s){const a=(t.line||{}).style;let l,c,h;return this.options.isStacked&&i>0&&s&&(c=s.linePoints.slice(0),l=s),a===bs?(h=new mw(e,t,i,l,c),h.options.closed=!0):(e.push(e[0]),h=new vw(e,t,i,l,c)),h}seriesMissingValues(e){return e.missingValues||Ye}};class mg extends lg{constructor(e,t){super(e,null,t)}getIndex(){return this.categoryIx}}w(mg,{overlay:{gradient:"none"},labels:{distance:10}});const yw=mg;class xg extends K{constructor(e){super(e),this.forEach=e.rtl?ru:ou}reflow(e){const{options:t,children:i}=this,{gap:s,spacing:n}=t,a=i.length,c=e.angle/(a+s+n*(a-1));let h=e.startAngle+c*(s/2);this.forEach(i,d=>{const p=e.clone();p.startAngle=h,p.angle=c,d.sector&&(p.radius=d.sector.radius),d.reflow(p),d.sector=p,h+=c+c*n})}}w(xg,{gap:1,spacing:0});const ww=xg,kw=class Cw extends K{reflow(e){const{options:{reverse:t},children:i}=this,s=i.length,n=t?s-1:0,a=t?-1:1;this.box=new k;for(let l=n;l>=0&&l<s;l+=a){const c=i[l].sector;c.startAngle=e.startAngle,c.angle=e.angle}}};class Jl extends On{pointType(){return yw}clusterType(){return ww}stackType(){return kw}categorySlot(e,t){return e.getSlot(t)}pointSlot(e,t){const i=e.clone(),s=e.center.y;return i.radius=s-t.y1,i.innerRadius=s-t.y2,i}reflowPoint(e,t){e.sector=t,e.reflow()}createAnimation(){this.options.animation.center=this.box.toRect().center(),super.createAnimation()}}Jl.prototype.reflow=Xi.prototype.reflow,w(Jl,{clip:!1,limitPoints:!1,animation:{type:"pie"}});const Aw=Jl;class ql extends hg{createPolarAxis(){const e=new Za(this.options.categoryAxis,this.chartService);this.polarAxis=e,this.categoryAxis=e,this.appendAxis(e),this.aggregateCategories(),this.createTrendlineSeries(),this.createCategoryAxesLabels()}valueAxisOptions(e){return this._hasBarCharts&&x(e,{majorGridLines:{type:hi},minorGridLines:{type:hi}}),this._isStacked100&&x(e,{roundToMajorUnit:!1,labels:{format:"P0"}}),x(e,this.options.valueAxis)}aggregateCategories(){Je.prototype.aggregateCategories.call(this,this.panes)}createCategoryAxesLabels(){Je.prototype.createCategoryAxesLabels.call(this,this.panes)}filterSeries(e){return e}trendlineFactory(e,t){const i=Je.prototype.trendlineFactory.call(this,e,t);return i&&(i.type=ks),i}createCharts(){const e=this.filterVisibleSeries(this.series),t=this.panes[0];this.createAreaChart(dt(e,[wn]),t),this.createLineChart(dt(e,[ks]),t),this.createBarChart(dt(e,[Ko]),t)}chartOptions(e){const t={series:e},i=e[0];if(i){const s=this.filterVisibleSeries(e),n=i.stack;t.isStacked=n&&s.length>1,t.isStacked100=n&&"100%"===n.type&&s.length>1,t.isStacked100&&(this._isStacked100=!0)}return t}createAreaChart(e,t){if(0===e.length)return;const i=new _w(this,this.chartOptions(e));this.appendChart(i,t)}createLineChart(e,t){if(0===e.length)return;const i=new fg(this,this.chartOptions(e));this.appendChart(i,t)}createBarChart(e,t){if(0===e.length)return;const i=e[0],s=this.chartOptions(e),n=this.filterVisibleSeries(e),a=n.some(h=>h.stack),l=n.some(h=>h.stack&&"100%"===h.stack.type);s.gap=i.gap,s.spacing=i.spacing,s.defaultStack=i.stack&&n.length>1,s.isStacked=a&&n.length>1,s.isStacked100=l&&n.length>1;const c=new Aw(this,s);this.appendChart(c,t),this._hasBarCharts=!0}seriesCategoryAxis(){return this.categoryAxis}_dispatchEvent(e,t,i){const s=e._eventCoordinates(t),n=new L(s.x,s.y),a=this.categoryAxis.getCategory(n),l=this.valueAxis.getValue(n);null!==a&&null!==l&&e.trigger(i,{element:me(t),category:a,value:l})}createCrosshairs(){}_pointsByVertical(e){return super._pointsByVertical(e).sort(this._getSeriesCompareFn())}_getSeriesCompareFn(){return(e,t)=>t.value-e.value}}x(ql.prototype,Rn,{appendChart:Je.prototype.appendChart,aggregateSeries:Je.prototype.aggregateSeries,seriesSourcePoints:Je.prototype.seriesSourcePoints,seriesValues:Je.prototype.seriesValues}),w(ql,{categoryAxis:{categories:[]},valueAxis:{}});const Sw=ql;class fr extends K{constructor(e,t,i){super(t),this.value=e,this.options.index=i.index}getLabelText(e){let t=kt(e);return t?t(this.pointData()):e.format?this.formatValue(e.format):this.value}reflow(e){const t=this.points,i=this.children[0],s=Math.min(t[0].x,t[3].x),n=Math.max(t[1].x,t[2].x);this.box=new k(s,t[0].y,n,t[2].y),i&&i.reflow(new k(e.x1,t[0].y,e.x2,t[2].y))}createVisual(){const e=this.options;let t;super.createVisual(),this.addAccessibilityAttributesToVisual(),t=e.visual?e.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,points:this.points,options:e,sender:this.getSender(),createVisual:()=>this.createPath()}):this.createPath(),t&&this.visual.append(t)}createPath(){const e=this.options,t=e.border;return M.w.fromPoints(this.points,{fill:gi(e.pattern,{color:e.color,opacity:e.opacity}),stroke:{color:t.color,opacity:t.opacity,width:t.width}}).close()}createHighlight(e){return M.w.fromPoints(this.points,e)}highlightVisual(){return this.visual.children[0]}highlightVisualArgs(){const e=M.w.fromPoints(this.points).close();return{options:this.options,path:e}}createFocusHighlight(e){const t=this.options.focusHighlight.border.width,i=M.w.fromPoints(this.points,x({},e,{stroke:{width:2*t}})).close(),s=new M.P;return s.paths.push(M.w.fromRect(this.box.clone().pad(t).toRect())),s.paths.push(M.w.fromPoints(this.points)),i.clip(s),i}tooltipAnchor(){const e=this.box;return{point:new L(e.center().x,e.y1),align:{horizontal:"center",vertical:"top"}}}formatValue(e){return this.owner.formatPointValue(this,e)}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}}getIndex(){return this.index}}w(fr,{color:W,border:{width:1},labels:{format:""},accessibility:{role:bi,className:_i,ariaRoleDescription:yi}}),x(fr.prototype,_e),x(fr.prototype,Ls);const Tw=fr;class tc extends K{constructor(e,t){super(t),this.plotArea=e,this.chartService=e.chartService,this.points=[],this.labels=[],this.legendItems=[],this.render()}formatPointValue(e,t){return this.plotArea.chartService.format.auto(t,e.value)}render(){const{options:t,plotArea:{options:{seriesColors:i=[]}}}=this,s=t.series[0],n=s.data;if(!n)return;const{total:a,points:l}=Xp(s);for(let c=0;c<l.length;c++){const h=l[c];if(!h)continue;let d=h.fields;at(s.color)||(s.color=d.color||i[c%i.length]),d=x({index:c,owner:this,series:s,seriesIx:0,dataItem:n[c],percentage:h.value/a},d,{visible:h.visible});const p=h.valueFields.value,u=this.createSegment(p,d),g=this.createLabel(p,d);u&&g&&u.append(g)}}evalSegmentOptions(e,t,i){const s=i.series;Ke(e,{value:t,series:s,dataItem:i.dataItem,index:i.index},{defaults:s._defaults,excluded:["data","content","template","toggle","visual","ariaTemplate","ariaContent"]})}createSegment(e,t){const i=x({},t.series);if(i.pattern=t.pattern||i.pattern,this.evalSegmentOptions(i,e,t),this.createLegendItem(e,i,t),!1!==t.visible){const s=new Tw(e,i,t);return Object.assign(s,t),this.append(s),this.points.push(s),s}}createLabel(e,t){const{series:i,dataItem:s}=t,n=x({},this.options.labels,i.labels);let a=e;if(n.visible){const l=kt(n),c={dataItem:s,value:e,percentage:t.percentage,category:t.category,series:i};l?a=l(c):n.format&&(a=this.chartService.format.auto(n.format,a)),n.color||(n.color=_o(i.color),n.background||(n.background=i.color)),this.evalSegmentOptions(n,e,t);const h=new Ht(a,x({vAlign:n.position},n),c);return this.labels.push(h),h}}labelPadding(){const e=this.labels,t={left:0,right:0};for(let i=0;i<e.length;i++){const n=e[i].options.align;if(n!==V){const a=e[i].box.width();n===N?t.left=Math.max(t.left,a):t.right=Math.max(t.right,a)}}return t}dynamicSlopeReflow(e,t,i){const{options:s,points:n}=this,a=n.length,l=n[0];let c=l;for(let u=0;u<n.length;u++)n[u].percentage>c.percentage&&(c=n[u]);let h=l.percentage/c.percentage*t,d=(t-h)/2,p=0;for(let u=0;u<a;u++){const g=n[u].percentage,f=n[u+1],m=f?f.percentage:g,v=n[u].points=[],_=s.dynamicHeight?i*g:i/a;let y;y=g?(t-h*(m/g))/2:m?0:t/2,y=O(y,0,t),v.push(new j.A(e.x1+d,e.y1+p)),v.push(new j.A(e.x1+t-d,e.y1+p)),v.push(new j.A(e.x1+t-y,e.y1+_+p)),v.push(new j.A(e.x1+y,e.y1+_+p)),d=y,p+=_+s.segmentSpacing,h=O(t-2*y,0,t)}}constantSlopeReflow(e,t,i){const{options:s,points:n}=this,a=n.length,l=s.neckRatio<=1;let h=l?0:(t-t/s.neckRatio)/2;const p=((l?t:t-2*h)-(l?s.neckRatio*t:t))/2;let u=0;for(let g=0;g<a;g++){const f=n[g].points=[],m=n[g].percentage,v=s.dynamicHeight?p*m:p/a,_=s.dynamicHeight?i*m:i/a;f.push(new j.A(e.x1+h,e.y1+u)),f.push(new j.A(e.x1+t-h,e.y1+u)),f.push(new j.A(e.x1+t-h-v,e.y1+_+u)),f.push(new j.A(e.x1+h+v,e.y1+_+u)),h+=v,u+=_+s.segmentSpacing}}reflow(e){const t=this.points,i=t.length;if(!i)return;const s=this.options,n=e.clone().unpad(this.labelPadding()),a=n.height()-s.segmentSpacing*(i-1),l=n.width();s.dynamicSlope?this.dynamicSlopeReflow(n,l,a):this.constantSlopeReflow(n,l,a);for(let c=0;c<i;c++)t[c].reflow(e)}}w(tc,{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:V,position:V,zIndex:1}}),x(tc.prototype,ng);const vg=tc,Ew=class Pw extends vg{constructor(e,t){t.dynamicSlope=!1,t.neckRatio=1e6,super(e,t)}};var Iw=T(5503);class Fn extends K{constructor(e,t){super(),this.options=t,this.color=t.color||W,this.value=e}render(){this._rendered||(this._rendered=!0,this.createMarker(),this.createLabel(),this.createNote())}createLabel(){const t=this.options.labels;t.visible&&(this.label=this.createLabelElement(t),this.append(this.label))}createLabelElement(e){let t=e.color;return t||(t=_o(this.color)),new Ht(this.getLabelText(e),x({align:V,vAlign:V,margin:{left:5,right:5},zIndex:R(e.zIndex,this.series.zIndex)},e,{color:t}),this.pointData())}getLabelText(e){let t=kt(e);return t?t(this.pointData()):this.formatValue(e.format)}formatValue(e){return this.owner.formatPointValue(this,e)}reflow(e){this.render();const t=this.label;this.box=e,t&&t.reflow(this.markerBox()),this.note&&this.note.reflow(e),this.marker.reflow(this.markerBox())}createVisual(){super.createVisual(),this.addAccessibilityAttributesToVisual()}markerBox(){const t=this.options.markers,i=t.border,s=this.box.toRect(),a=R(t.type,"rect")===$h;let l=R(i.width,a?1:0);const c=Math.round(l/2);if(t.size){const h=s.center();s.size.width=s.size.height=t.size,s.origin.x=Math.round(h.x-s.size.width/2),s.origin.y=Math.round(h.y-s.size.height/2)}return s.size.width-=l,s.size.height-=l,s.origin.y+=c+.5,s.origin.x+=c+.5,ms(s)}markerBorder(){const e=this.options,i=e.markers.border,s=R(i.opacity,e.opacity);return{color:i.color||this.color,width:i.width,opacity:s,dashType:i.dashType}}createMarker(){const e=this.options,t=e.markers,i=new Rt({type:R(t.type,"rect"),width:t.size,height:t.size,rotation:t.rotation,background:this.color,border:this.markerBorder(),pattern:e.pattern,borderRadius:t.borderRadius,opacity:this.series.opacity||e.opacity,zIndex:R(e.zIndex,this.series.zIndex),animation:e.animation,visual:e.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});this.marker=i,this.append(i)}createHighlight(e){const t=this.options,i=this.options.highlight.markers||this.options.markers,s=new Rt({type:R(i.type,"rect"),width:i.size,height:i.size,rotation:i.rotation,background:i.color||this.color,border:this.markerBorder(),borderRadius:i.borderRadius,opacity:this.series.opacity||t.opacity,zIndex:R(t.zIndex,this.series.zIndex)});s.reflow(this.markerBox());const n=s.getElement();return n.options.fill=e.fill,n.options.stroke=e.stroke,n}highlightVisual(){return this.rectVisual}highlightVisualArgs(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}}createFocusHighlight(){const e=this.options.markers,t=this.options.focusHighlight,i=new Rt({type:R(e.type,"rect"),width:e.size,height:e.size,rotation:e.rotation,background:t.color,border:t.border,borderRadius:e.borderRadius,padding:t.border.width/2,zIndex:t.zIndex});return i.reflow(this.markerBox()),i.getElement()}tooltipAnchor(){const e=this.box.center().x;return{point:new L(e,this.box.y1-5),align:{horizontal:V,vertical:Y}}}overlapsBox(e){return this.box.overlaps(e)}unclipElements(){}pointData(){return{x:this.value.x,y:this.value.y,value:this.value.value,dataItem:this.dataItem,series:this.series}}}x(Fn.prototype,_e),x(Fn.prototype,Os),x(Fn.prototype,Ls),Fn.prototype.defaults={markers:{type:"rect",borderRadius:4,border:{color:"transparent"}},padding:{top:1},labels:{visible:!1,padding:3},opacity:1,notes:{label:{}},accessibility:{role:bi,className:_i,ariaRoleDescription:yi}};const bg=Fn;class _g extends K{constructor(e,t){super(t),this.plotArea=e,this.chartService=e.chartService,this._initFields(),this.render()}_initFields(){this.points=[],this.seriesOptions=[],this.valueRange={min:gt,max:wt},this._evalSeries=[]}render(){this.setRange(),this.traverseDataPoints(this.addValue.bind(this))}setRange(){const{options:{series:e}}=this;for(let t=0;t<e.length;t++){const i=e[t];for(let s=0;s<i.data.length;s++){const{valueFields:n}=this.plotArea.bindPoint(i,s);C(n.value)&&null!==n.value&&(this.valueRange.min=Math.min(this.valueRange.min,n.value),this.valueRange.max=Math.max(this.valueRange.max,n.value))}}}addValue(e,t){let i;e&&C(e.value)&&null!==e.value&&(i=this.createPoint(e,t),i&&Object.assign(i,t)),this.points.push(i)}evalPointOptions(e,t,i){const{series:s,seriesIx:n}=i,a={defaults:s._defaults,excluded:["data","tooltip","content","template","visual","toggle","drilldownSeriesFactory","ariaTemplate","ariaContent"]};let l=this._evalSeries[n];C(l)||(this._evalSeries[n]=l=Ke(e,{},a,!0));let c=e;return l&&(c=x({},e),Ke(c,{value:t,series:s,dataItem:i.dataItem,min:this.valueRange.min,max:this.valueRange.max},a)),c}pointType(){return bg}pointOptions(e,t){let i=this.seriesOptions[t];if(!i){const s=this.pointType().prototype.defaults;this.seriesOptions[t]=i=x({},s,{markers:{opacity:e.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},e)}return Object.assign({},i)}createPoint(e,t){const i=t.series;let s=this.pointOptions(i,t.seriesIx),n=t.color||i.color;s.pattern=t.pattern||s.pattern,s=this.evalPointOptions(s,e,t),at(i.color)?n=s.color:0!==this.valueRange.max&&(n=((o,e=.05)=>{const t=(0,Iw.Ay)(o),i=1-e;return s=>{const n=t.toHSL(),a=100-n.l;return n.l+=Math.min((i-s)*a,a),n.toCss()}})(n)(e.value/this.valueRange.max));const a=new bg(e,s);return a.color=n,this.append(a),a}seriesAxes(e){const{xAxis:t,yAxis:i}=e,s=this.plotArea,n=t?s.namedXAxes[t]:s.axisX,a=i?s.namedYAxes[i]:s.axisY;if(!n)throw new Error("Unable to locate X axis with name "+t);if(!a)throw new Error("Unable to locate Y axis with name "+i);return{xAxis:n,yAxis:a}}reflow(e){const t=this.points,i=!this.options.clip;let s=0;this.traverseDataPoints((n,a)=>{const l=t[s++],{xAxis:c,yAxis:h}=this.seriesAxes(a.series),d=c.categoryIndex(n.x),p=h.categoryIndex(n.y),u=c.getSlot(d,d,i),g=h.getSlot(p,p,i);if(l)if(u&&g){const f=this.pointSlot(u,g);l.reflow(f)}else l.visible=!1}),this.box=e}pointSlot(e,t){return new k(e.x1,t.y1,e.x2,t.y2)}traverseDataPoints(e){const{options:{series:t}}=this;for(let i=0;i<t.length;i++){const s=t[i],{xAxis:n,yAxis:a}=this.seriesAxes(s),l=n.currentRangeIndices(),c=a.currentRangeIndices();for(let h=0;h<s.data.length;h++){const{valueFields:d,fields:p}=this.plotArea.bindPoint(s,h),u=n.totalIndex(d.x),g=a.totalIndex(d.y);l.min<=u&&u<=l.max&&c.min<=g&&g<=c.max&&e(d,x({pointIx:h,series:s,seriesIx:i,dataItem:s.data[h],owner:this},p))}}}formatPointValue(e,t){const i=e.value;return this.chartService.format.auto(t,i.x,i.y,i.value)}animationPoints(){const e=this.points,t=[];for(let i=0;i<e.length;i++)t.push((e[i]||{}).marker);return t}}w(_g,{series:[],tooltip:{format:"{0}, {1}: {2}"},labels:{format:"{2}"},clip:!0});const Lw=_g;class ec extends wi{initFields(){this.namedXAxes={},this.namedYAxes={}}render(e=this.panes){this.bindCategories(),this.createAxes(e),this.createCharts(e),this.createAxisLabels()}bindCategories(){const e=this.srcSeries||this.series;for(let t=0;t<e.length;t++){const i=e[t],s=i.data||[],{xAxis:n,yAxis:a}=this.seriesAxes(i),l=fd(n.categories||[]),c=fd(a.categories||[]);for(let h=0;h<s.length;h++){const{x:d,y:p}=ot.current.bindPoint(i,h).valueFields;l.has(d)||l.add(d),c.has(p)||c.add(p)}n.categories=l.values(),a.categories=c.values()}}createCharts(e){const t=this.groupSeriesByPane();for(let i=0;i<e.length;i++){const s=e[i],n=t[s.options.name||"default"]||[];this.addToLegend(n);const a=this.filterVisibleSeries(n);a&&this.createHeatmapChart(dt(a,[sl]),s)}}createHeatmapChart(e,t){const i=new Lw(this,{series:e});this.appendChart(i,t)}seriesPaneName(e){const t=this.options,i=e.xAxis,s=[].concat(t.xAxis),n=Kt(s,function(u){return u.name===i})[0],a=e.yAxis,l=[].concat(t.yAxis),c=Kt(l,function(u){return u.name===a})[0];return(n||{}).pane||(c||{}).pane||(t.panes||[{}])[0].name||"default"}seriesAxes(e){let t,i;const s=this.options,n=[].concat(s.xAxis),a=e.xAxis;t=a?n.find(h=>h.name===a):n[0];const l=[].concat(s.yAxis),c=e.yAxis;if(i=c?l.find(h=>h.name===c):l[0],!t)throw new Error("Unable to locate X axis with name "+a);if(!i)throw new Error("Unable to locate Y axis with name "+c);return{xAxis:t,yAxis:i}}createAxisLabels(){const e=this.axes;for(let t=0;t<e.length;t++)e[t].createLabels()}createXYAxis(e,t,i){const s=e.name,n=t?this.namedYAxes:this.namedXAxes,a=Object.assign({axisCrossingValue:0},e,{vertical:t,reverse:t||this.chartService.rtl?!e.reverse:e.reverse,justified:!1}),c=[a.min,a.max,a.categories?a.categories[0]:null],h=this.series;for(let g=0;g<h.length;g++){const f=h[g],m=f[t?"yAxis":"xAxis"];if(m===a.name||0===i&&!m){const v=ot.current.bindPoint(f,0).valueFields;c.push(v[t?"y":"x"]);break}}let d,p;for(let g=0;g<c.length;g++)if(c[g]instanceof Date){d=!0;break}p=Ze(a.type,Fe)||!a.type&&d?mn:Ge;const u=new p(a,this.chartService);if(u.axisIndex=i,s){if(n[s])throw new Error(`${t?"Y":"X"} axis with name ${s} is already defined`);n[s]=u}return this.appendAxis(u),u.indexCategories(),u}createAxes(e){const t=this.options,i=[].concat(t.xAxis),s=[],n=[].concat(t.yAxis),a=[];for(let l=0;l<i.length;l++)z(this.findPane(i[l].pane),e)&&s.push(this.createXYAxis(i[l],!1,l));for(let l=0;l<n.length;l++)z(this.findPane(n[l].pane),e)&&a.push(this.createXYAxis(n[l],!0,l));this.axisX=this.axisX||s[0],this.axisY=this.axisY||a[0]}removeAxis(e){const t=e.options.name;super.removeAxis(e),e.options.vertical?delete this.namedYAxes[t]:delete this.namedXAxes[t],e===this.axisX&&delete this.axisX,e===this.axisY&&delete this.axisY}_dispatchEvent(e,t,i){const s=e._eventCoordinates(t),n=new L(s.x,s.y),a=this.axes,l=a.length,c=[],h=[];for(let d=0;d<l;d++){const p=a[d];er(p.options.vertical?h:c,p.getCategory(n))}c.length>0&&h.length>0&&e.trigger(i,{element:me(t),originalEvent:t,x:Ds(c),y:Ds(h)})}updateAxisOptions(e,t){const i=e.options.vertical,s=this.groupAxes(this.panes),n=(i?s.y:s.x).indexOf(e);yg(this.options,n,i,t),yg(this.originalOptions,n,i,t)}crosshairOptions(e){return Object.assign({},e.options.crosshair,{zIndex:0})}_pointsByVertical(e,t=0){const i=this.axisX.options.reverse?-1*t:t,s=this.axisX.children;let n=this._getPointAxisXIndex(e)+i;n=xo(n,s.length);const a=s[n].value,l=this.filterPoints(c=>ic(c.pointData().x,a)).sort((c,h)=>this._getPointAxisYIndex(c)-this._getPointAxisYIndex(h));return this.axisY.options.reverse?l.reverse():l}_pointsByHorizontal(e,t=0){const i=this.axisY.options.reverse?-1*t:t,s=this.axisY.children;let n=this._getPointAxisYIndex(e)+i;n=xo(n,s.length);const a=s[n].value,l=this.filterPoints(c=>ic(c.pointData().y,a)).sort((c,h)=>this._getPointAxisXIndex(c)-this._getPointAxisXIndex(h));return this.axisX.options.reverse?l.reverse():l}_getPointAxisXIndex(e){return this._getPointAxisIndex(this.axisX,e.pointData().x)}_getPointAxisYIndex(e){return this._getPointAxisIndex(this.axisY,e.pointData().y)}_getPointAxisIndex(e,t){return e.children.findIndex(i=>ic(t,i.value))}}function ic(o,e){return o instanceof Date&&e instanceof Date?Io(o,e):o===e}function yg(o,e,t,i){x([].concat(t?o.yAxis:o.xAxis)[e],i)}w(ec,{xAxis:{},yAxis:{}}),x(ec.prototype,Rn);const Vw=ec,qt="color",te="first",Nt="max",ei="noteText";qe.current.register(Je,[ue,Oe,$e,Ui,We,ji,ys,Cs,xi,kn,bn,Ts,Cn,Ss,An,ws,As,Gi,...Ms]),qe.current.register($l,[rl,al,_s,...Ms]),qe.current.register(ag,[vi]),qe.current.register(class iw extends ag{render(){this.createDonutChart(this.series)}createDonutChart(e){const t=e[0],i=new ew(this,{series:e,padding:t.padding,connectors:t.connectors,legend:this.options.legend});this.appendChart(i)}getPointBelow(e){return this._getNextPoint(e,this._pointsByVertical,-1)}getPointAbove(e){return this._getNextPoint(e,this._pointsByVertical,1)}},[Qo]),qe.current.register(class Dw extends wi{render(){this.createChart(vg,dt(this.series,[_n])),this.createChart(Ew,dt(this.series,[yn]))}createChart(e,t){const i=t[0];if(!i)return;const s=new e(this,{series:t,legend:this.options.legend,neckRatio:i.neckRatio,dynamicHeight:i.dynamicHeight,dynamicSlope:i.dynamicSlope,segmentSpacing:i.segmentSpacing,highlight:i.highlight});this.appendChart(s)}appendChart(e,t){super.appendChart(e,t),Li(this.options.legend.data,e.legendItems)}_pointsByVertical(e){return this.pointsBySeriesIndex(e.series.index)}getPointToTheRight(e){return this.getPointBelow(e)}getPointToTheLeft(e){return this.getPointAbove(e)}},[_n,yn]),qe.current.register(uw,[nl,Zo,ol,...Ms]),qe.current.register(Sw,[wn,Ko,ks,...Ms]),qe.current.register(Vw,[sl]),ot.current.register([ue,Oe,$e,Ui,We,ji],[Qt],[be,qt,ei,Mp,Pp,Qe,ge]),ot.current.register([Cn,Ss,As,Gi],["from","to"],[be,qt,ei,Qe,ge]),ot.current.register([An,ws],[Qt],[be,qt,ei,"summary",Qe,ge]),ot.current.register([nl,Zo,ol],[E,D],[qt,Qe,ge]),ot.current.register([wn,Ko,ks],[Qt],[be,qt,Qe,ge]),ot.current.register([_n,yn],[Qt],[be,qt,"visibleInLegend","visible",Qe,ge]),$i.current.register([ue,Oe,$e,Ui,We,ji,An,ws],{value:Nt,color:te,noteText:te,errorLow:"min",errorHigh:Nt}),$i.current.register([Cn,Ss,As,Gi],{from:"min",to:Nt,color:te,noteText:te}),$i.current.register([wn,Ko,ks],{value:Nt,color:te}),ot.current.register([rl,al,_s],[E,D],[qt,ei,"xErrorLow","xErrorHigh","yErrorLow","yErrorHigh"]),ot.current.register([_s],[E,D,"size"],[qt,be,ei,ge]),ot.current.register([sl],[E,D,Qt],[qt,ei,ge]),ot.current.register([ys,Cs],["open","high","low","close"],[be,qt,"downColor",ei,ge]),$i.current.register([ys,Cs],{open:Nt,high:Nt,low:"min",close:Nt,color:te,downColor:te,noteText:te}),ot.current.register([bn,Ts],["lower","q1","median","q3","upper","mean","outliers"],[be,qt,ei,Qe,ge]),$i.current.register([bn,Ts],{lower:Nt,q1:Nt,median:Nt,q3:Nt,upper:Nt,mean:Nt,outliers:te,color:te,noteText:te}),ot.current.register([xi,kn],["current","target"],[be,qt,"visibleInLegend",ei,Qe,ge]),$i.current.register([xi,kn],{current:Nt,target:Nt,color:te,noteText:te}),ot.current.register([vi,Qo],[Qt],[be,qt,"explode","visibleInLegend","visible",Qe,ge]);const nc=[be,Qt,E,D],wg="mousedown",Ji="mousemove",Cg="contextmenu",kg="mouseleave",Ag="keydown",Mg="k-chart-overlay-top";class Pg{constructor(e,t,i,s={}){this.observers=[],this.addObserver(s.observer),this.chartService=new La(this,s),this.chartService.theme=i,this._initElement(e);const n=x({},this.options,t);this._originalOptions=x({},n),this._theme=i,this._initTheme(n,i),this._focusState={},this._initHandlers(),this._createSurface=s.createSurface||Bi.A.create.bind(Bi.A),this._initSurface(),this.bindCategories(),Qv.preloadFonts(t,()=>{this.fontLoaded=!0,this._destroyed||(this.trigger("init"),this._redraw(),this._attachEvents(),this._restoreOverlayElement())})}_initElement(e){this._setElementClass(e),e.style.position="relative",e.tabIndex=e.getAttribute("tabindex")?e.getAttribute("tabindex"):0,e.setAttribute("role","graphics-document document");for(let t=e.childNodes.length-1;t>=0;t--){const i=e.childNodes[t];sn(i,"k-chart-overlay")?this.overlayElement=i:e.removeChild(i)}this.element=e}_setElementClass(e){ut(e,"k-chart")}_restoreOverlayElement(){this.overlayElement&&(this._hasSeriesData()?this.overlayElement.style.display="none":(!this.options.title||this.options.title&&this.options.title.position!==Y?ut(this.overlayElement,Mg):mo(this.overlayElement,Mg),this.overlayElement.style.display=""),this.overlayElement.parentElement!==this.element&&this.element.appendChild(this.overlayElement))}_hasSeriesData(){const e=this.options.series||[];return e.length>0&&e.some(i=>i.data&&i.data.length>0)}_initTheme(e,t){const i=[],s=e.series||[];for(let n=0;n<s.length;n++)i.push(Object.assign({},s[n]));e.series=i,function jw(o){const e=nc;for(let t=0;t<e.length;t++){const i=e[t]+"Axes";o[i]&&(o[e[t]+"Axis"]=o[i],delete o[i])}}(e),this.applyDefaults(e,t),null===e.seriesColors&&delete e.seriesColors,Ut(e.title)&&(e.title={text:e.title}),this.options=x({},t,e),this.applySeriesColors()}getSize(){const e=this.options.chartArea||{};return{width:e.width?parseInt(e.width,10):Math.floor(this.element.offsetWidth),height:e.height?parseInt(e.height,10):Math.floor(this.element.offsetHeight)}}resize(e){const t=this.getSize(),i=this._size,s=t.width>0||t.height>0;e||s&&(!i||t.width!==i.width||t.height!==i.height)?(this._size=t,this._resize(t,e),this.trigger("resize",t)):s&&this._selections&&pd(this._selections,n=>!n.visible)&&(this._destroySelections(),this._setupSelection())}_resize(){this._noTransitionsRedraw()}redraw(e){if(this.applyDefaults(this.options),this.applySeriesColors(),e){const t=this._model._plotArea,i=t.findPane(e);t.redraw(i)}else this._redraw()}getAxis(e){return Sp(e,this._plotArea.axes)}findAxisByName(e){return this.getAxis(e)}findPaneByName(e){const t=this._plotArea.panes;for(let i=0;i<t.length;i++)if(t[i].options.name===e)return new Ja(t[i])}findPaneByIndex(e){const t=this._plotArea.panes;if(t[e])return new Ja(t[e])}plotArea(){return new U0(this._plotArea)}toggleHighlight(e,t){const i=this._plotArea,s=(i.srcSeries||i.series||[])[0];let n;if(at(t))n=i.filterPoints(t);else{let a,l;re(t)?(a=t.series,l=t.category):a=l=t,n=s.type===Qo?Eg(i.pointsBySeriesName(a),l):z(s.type,[vi,_n,yn])?Eg((i.charts[0]||{}).points,l):i.pointsBySeriesName(a)}n&&this.togglePointsHighlight(e,n)}togglePointsHighlight(e,t){const i=this._highlight;for(let s=0;s<t.length;s++)i.togglePointHighlight(t[s],e)}showTooltip(e){const t=this._sharedTooltip(),{_tooltip:i,_plotArea:s}=this;let n,a;if(at(e)?(n=s.findPoint(e),n&&t&&(a=n.categoryIx)):t&&C(e)&&(a=s.categoryAxis.categoryIndex(e)),t){if(a>=0){const l=this._plotArea.pointsByCategoryIndex(a);i.showAt(l)}}else n&&i.show(n)}hideTooltip(){this._tooltip.hide()}_initSurface(){const e=this.surface,t=this._surfaceWrap(),i=this.options.chartArea||{};i.width&&ze(t,{width:i.width}),i.height&&ze(t,{height:i.height}),e&&e.options.type===this.options.renderAs?(this.surface.clear(),this.surface.resize()):(this._destroySurface(),this.surface=this._createSurface(t,{type:this.options.renderAs}),this.surface.bind("mouseenter",this._surfaceMouseenterHandler),this.surface.bind("mouseleave",this._surfaceMouseleaveHandler)),this.element._kendoExportVisual=this._kendoExportVisual.bind(this)}_surfaceWrap(){return this.element}_redraw(){const e=this._getModel();this._size={width:e.options.width,height:e.options.height},this._destroyView(),this._setElementAccessibilityAttributes(),this._model=e,this._plotArea=e._plotArea,this._legend=e._legend,e.renderVisual();const t=this.options.transitions;!1!==t&&e.traverse(function(i){i.animation&&(i.animation.options=Object.assign({},i.animation.options,t&&!0!==t?t.loading:t),i.animation.setup())}),this._initSurface(),this.surface.draw(e.visual),!1!==t&&e.traverse(function(i){i.animation&&i.animation.play()}),this._tooltip=this._createTooltip(),this._highlight=new Jy,this._setupSelection(),this._createPannable(),this._createZoomSelection(),this._createMousewheelZoom(),this._setComputedStyles(),this.trigger("render"),Og(this._plotArea.panes),this._navState||this._cancelDomEvents(),this._redrawFocusHighlight()}_setComputedStyles(){const e=this.titleHeight();this.element.style.setProperty("--kendo-chart-computed-title-height",`${e}px`)}_redrawFocusHighlight(){if(this._destroyed)return;const{_focusState:{legendInFocus:e,preserveHighlight:t}}=this;e&&t&&(this._focusElement(this._getFocusedLegendItem(),!1),this._focusState.preserveHighlight=!1)}_setElementAccessibilityAttributes(){let e=this.options.title,t=Ut(e)?e:e.description||e.text;t&&this.element.setAttribute("aria-roledescription",t)}_kendoExportVisual(e){if(e&&e.width&&e.height){const t=this._originalOptions.chartArea||{};return this.exportVisual({width:t.width||e.width,height:t.height||e.height})}return this.exportVisual()}exportVisual(e){let t;if(e&&(e.width||e.height||e.options)){const i=this.options,s=x({},e.options,{chartArea:{width:e.width,height:e.height}});oc(this._originalOptions,s),this.options=x({},this._originalOptions,s),this._initTheme(this.options,this._theme),this.bindCategories();const n=this._getModel();n.renderVisual(),Og(n._plotArea.panes),t=n.visual,this.options=i}else t=this.surface.exportVisual();return t}_sharedTooltip(){return this._plotArea instanceof Je&&this.options.tooltip&&this.options.tooltip.shared}_createPannable(){const e=this.options;!1!==e.pannable&&(this._pannable=new qy(this._plotArea,e.pannable))}_createZoomSelection(){const e=this.options.zoomable,t=(e||{}).selection;!1!==e&&!1!==t&&(this._zoomSelection=new t1(this,t))}_createMousewheelZoom(){const e=this.options.zoomable,t=(e||{}).mousewheel;!1!==e&&!1!==t&&(this._mousewheelZoom=new o1(this,t))}_toggleDragZoomEvents(){const t=this.options.zoomable,s=(t||{}).mousewheel,n=!(this.options.pannable||!1!==t&&!1!==(t||{}).selection||this.requiresHandlers([fl,Sn,Tn])),a=(!1===t||!1===s)&&!this.requiresHandlers([Mn,Ps,Es]),l=this.element;this._dragZoomEnabled&&n&&a?(l.style.touchAction=this._touchAction||"",this._dragZoomEnabled=!1):!this._dragZoomEnabled&&!(n&&a)&&(l.style.touchAction="none",this._dragZoomEnabled=!0),this._toggleDomEvents(!n,!a)}_toggleDomEvents(e,t){const i=this.domEvents;i&&(i.toggleDrag&&i.toggleDrag(e),i.toggleZoom&&i.toggleZoom(t))}_createTooltip(){const{options:{tooltip:e}}=this;let t;return t=this._sharedTooltip()?this._createSharedTooltip(e):new C1(this.chartService,e),t}_createSharedTooltip(e){return new $u(this._plotArea,e)}applyDefaults(e,t){(function Uw(o,e){const t=(e||{}).axisDefaults||{};let i,s,n;function a(l){const c=(l||{}).color||s.color,h=x({},t,t[i],s,s[i],{line:{color:c},labels:{color:c},title:{color:c}},l);return delete h[i],h}for(let l=0;l<nc.length;l++)i=nc[l]+"Axis",s=o.axisDefaults||{},n=[].concat(o[i]),n=n.map(a),o[i]=n.length>1?n:n[0]})(e,t),function Gw(o,e){const t=o.series,i=t.length,s=o.seriesDefaults,n=x({},o.seriesDefaults),a=e?x({},e.seriesDefaults):{},l=x({},a);Dg(n),Dg(l);for(let c=0;c<i;c++){const h=t[c].type||o.seriesDefaults.type,d=x({data:[]},l,a[h],{tooltip:o.tooltip},n,s[h]);t[c]._defaults=d,t[c]=x({},d,t[c]),t[c].data=t[c].data||[]}}(e,t)}applySeriesColors(){const e=this.options,t=e.series,i=e.seriesColors||[];for(let s=0;s<t.length;s++){const n=t[s],a=i[s%i.length],l=n._defaults;n.color=n.color||a,l&&(l.color=l.color||a)}}_getModel(){const e=this.options,t=this._createPlotArea(),i=new qb(this._modelOptions());i.chart=this,i._plotArea=t;const s=pn.buildTitle(e.title),n=pn.buildTitle(e.subtitle,{align:e.title.align,position:e.title.position});if(i.append.apply(i,pn.orderTitles([s,n])),e.legend&&e.legend.visible){const a=new Gu(t.options.legend,this.chartService);i.append(a),i._legend=a}return i.append(t),i.reflow(),this._setTitleBox(s,n),i}_setTitleBox(e,t){if(!e&&!t)return;this._titleBox=(e||t).box.clone();const s=t?t.options.position:"";(e?e.options.position:"")===s&&t?this._titleBox.wrap(t.box):e&&t&&s!==Y&&(this._titleBox=t.box.clone())}_modelOptions(){const e=this.options,t=this.getSize();return x({transitions:e.transitions,width:t.width||600,height:t.height||400},e.chartArea)}_createPlotArea(e){const t=this.options;return qe.current.create(e?[]:t.series,t,this.chartService)}_setupSelection(){const{_plotArea:{axes:e}}=this,t=this._selections=[];for(let i=0;i<e.length;i++){const s=e[i],n=s.options;if(s instanceof Ge&&n.select&&!n.vertical){const a=s.range(),l=new Yu(this,s,x({min:a.min,max:a.max},n.select));t.push(l)}}}_selectStart(e){return this.trigger(ml,e)}_select(e){return this.trigger(Pn,e)}_selectEnd(e){return this.trigger(xl,e)}_initHandlers(){this._clickHandler=this._click.bind(this),this._keydownHandler=this._keydown.bind(this),this._focusHandler=this._focus.bind(this),this._blurHandler=this._blur.bind(this),this._mousedownHandler=this._mousedown.bind(this),this._mousewheelHandler=this._mousewheel.bind(this),this._mouseleaveHandler=this._mouseleave.bind(this),this._surfaceMouseenterHandler=this._mouseover.bind(this),this._surfaceMouseleaveHandler=this._mouseout.bind(this),this._mousemoveThrottled=(0,Gl.A)(this._mousemove.bind(this),20)}addObserver(e){e&&this.observers.push(e)}removeObserver(e){const t=this.observers.indexOf(e);t>=0&&this.observers.splice(t,1)}requiresHandlers(e){const t=this.observers;for(let i=0;i<t.length;i++)if(t[i].requiresHandlers(e))return!0}trigger(e,t={}){t.sender=this,e===Fp?t.anchor.point=this._toDocumentCoordinates(t.anchor.point):e===Lp?this._updateDrilldownPoint(t.point):e===Vp?this._resetDrilldownPoint():e===Ip?(this._focusPoint(t.point),this._startDrilldown(t.point)):e===Op&&this._focusLegendItem(t);const i=this.observers;let s=!1;for(let n=0;n<i.length;n++)i[n].trigger(e,t)&&(s=!0);return s}titleHeight(){return this._titleBox?this._titleBox.height():0}_attachEvents(){const e=this.element;this._touchAction=e.style.touchAction,nn(e,{[Cg]:this._clickHandler,[tr]:this._mousewheelHandler,[kg]:this._mouseleaveHandler,[Ag]:this._keydownHandler,[wg]:this._mousedownHandler,focus:this._focusHandler,blur:this._blurHandler}),this._shouldAttachMouseMove()&&nn(e,{[Ji]:this._mousemoveThrottled}),this.domEvents=ep.create(this.element,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)}),this._toggleDragZoomEvents()}_mouseleave(e){this._hoveredPoint&&(this._hoveredPoint.out(this,e),this._hoveredPoint=null),this._plotAreaHovered&&(this._plotAreaHovered=!1,this.trigger(gl)),this._hasInactiveOpacity()&&this._activeChartInstance&&(this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._updateSeriesOpacity(null,!0))}_cancelDomEvents(){this.domEvents&&this.domEvents.cancel&&this.domEvents.cancel()}_gesturestart(e){this._mousewheelZoom&&!this._stopChartHandlers(e)&&(this._gestureDistance=e.distance,this._unsetActivePoint(),this._clearFocusedElement(),this.surface.suspendTracking())}_gestureend(e){this._zooming&&!this._stopChartHandlers(e)&&(this.surface&&this.surface.resumeTracking(),this._zooming=!1,this.trigger(Es,{}))}_gesturechange(e){const t=this._mousewheelZoom;if(t&&!this._stopChartHandlers(e)){e.preventDefault();let s=-e.distance/this._gestureDistance+1;if(Math.abs(s)>=.1){s=Math.round(10*s),this._gestureDistance=e.distance;const n={delta:s,axisRanges:Nn(this._plotArea.axes),originalEvent:e};if(this._zooming||!this.trigger(Mn,n)){const a=this._eventCoordinates(e);this._zooming||(this._zooming=!0),(n.axisRanges=t.updateRanges(s,a))&&!this.trigger(Ps,n)&&t.zoom()}}}}_mouseout(e){if(e.element){const t=this._drawingChartElement(e.element,e);t&&t.leave&&t.leave(this,e.originalEvent)}}_start(e){const t=this._eventCoordinates(e);this._stopChartHandlers(e)||!this._plotArea.backgroundContainsPoint(t)||(this.requiresHandlers([fl,Sn,Tn])&&this._startNavigation(e,t,fl),this._pannable&&this._pannable.start(e)&&(this.surface.suspendTracking(),this._unsetActivePoint(),this._clearFocusedElement(),this._suppressHover=!0,this.chartService.panning=!0),this._zoomSelection&&this._zoomSelection.start(e)&&this.trigger(Mn,{axisRanges:Nn(this._plotArea.axes),originalEvent:e}))}_move(e){let{_navState:t,_pannable:i}=this;if(!this._stopChartHandlers(e)){if(i){const s=i.move(e);s&&!this.trigger(Sn,{axisRanges:s,originalEvent:e})&&i.pan()}else if(t){const s={},n=t.axes;for(let a=0;a<n.length;a++){const l=n[a];if(l.options.name){const h=l.options.vertical?e.y:e.x,d=h.startLocation-h.location;0!==d&&(s[l.options.name]=l.translateRange(d))}}t.axisRanges=s,this.trigger(Sn,{axisRanges:s,originalEvent:e})}this._zoomSelection&&this._zoomSelection.move(e)}}_end(e){if(this._stopChartHandlers(e))return;const t=this._pannable;if(t&&t.end(e)?(this.surface.resumeTracking(),this.trigger(Tn,{axisRanges:Nn(this._plotArea.axes),originalEvent:e}),this._suppressHover=!1,this.chartService.panning=!1):this._endNavigation(e,Tn),this._zoomSelection){const i=this._zoomSelection.end(e);i&&!this.trigger(Ps,{axisRanges:i,originalEvent:e})&&(this._zoomSelection.zoom(),this.trigger(Es,{axisRanges:i,originalEvent:e}))}}_stopChartHandlers(e){const t=this._selections||[];if(!t.length)return!1;const i=this._eventCoordinates(e),s=this._plotArea.paneByPoint(i);if(s)for(let n=0;n<t.length;n++)if(t[n].onPane(s))return!0}_mousewheelZoomRate(){return R(((this.options.zoomable||{}).mousewheel||{}).rate,.3)}_mousewheel(e){const t=ya(e),i=this._mousewheelZoom,s=this._eventCoordinates(e);if(!this._stopChartHandlers(e)&&this._plotArea.backgroundContainsPoint(s))if(i){const n={delta:t,axisRanges:Nn(this._plotArea.axes),originalEvent:e};(this._zooming||!this.trigger(Mn,n))&&(e.preventDefault(),this._zooming||(this._unsetActivePoint(),this._clearFocusedElement(),this.surface.suspendTracking(),this._zooming=!0),this._mwTimeout&&clearTimeout(this._mwTimeout),n.axisRanges=i.updateRanges(t,s),n.axisRanges&&!this.trigger(Ps,n)&&i.zoom(),this._mwTimeout=setTimeout(()=>{this.trigger(Es,n),this._zooming=!1,this.surface&&this.surface.resumeTracking()},150))}else{let n=this._navState;if(n||this._startNavigation(e,s,Mn)||(n=this._navState),n){const a=n.totalDelta||t;n.totalDelta=a+t;const l=this._navState.axes,c={};for(let h=0;h<l.length;h++){const d=l[h],p=d.options.name;p&&(c[p]=d.scaleRange(-a*this._mousewheelZoomRate(),s))}this.trigger(Ps,{delta:t,axisRanges:c,originalEvent:e}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout(()=>{this._endNavigation(e,Es)},150)}}}_startNavigation(e,t,i){const s=this._model._plotArea,n=s.findPointPane(t),a=s.axes.slice(0);if(!n)return;const l=Nn(a);this.trigger(i,{axisRanges:l,originalEvent:e})?this._cancelDomEvents():(this._suppressHover=!0,this._unsetActivePoint(),this._clearFocusedElement(),this._navState={axisRanges:l,pane:n,axes:a})}_endNavigation(e,t){this._navState&&(this.trigger(t,{axisRanges:this._navState.axisRanges,originalEvent:e}),this._suppressHover=!1,this._navState=null)}_getChartElement(e,t){const i=this.surface.eventTarget(e);if(i)return this._drawingChartElement(i,e,t)}_drawingChartElement(e,t,i){let n,s=e;for(;s&&!n;)n=s.chartElement,s=s.parent;if(n)return n.aliasFor&&(n=n.aliasFor(t,this._eventCoordinates(t))),i&&(n=n.closest(i),n&&n.aliasFor&&(n=n.aliasFor())),n}_eventCoordinates(e){const t=ad(e);return this._toModelCoordinates(t.x,t.y)}_elementPadding(){if(!this._padding){const{paddingLeft:e,paddingTop:t}=ht(this.element,["paddingLeft","paddingTop"]);this._padding={top:t,left:e}}return this._padding}_toDocumentCoordinates(e){const t=this._elementPadding(),i=hs(this.element);return{left:A(e.x+t.left+i.left),top:A(e.y+t.top+i.top)}}_toModelCoordinates(e,t){const i=this.element,s=hs(i),n=this._elementPadding(),a=function ib(o){if(!o)return bo.unit();let e=ud(o),t=o.parentElement;for(;t;){const i=ud(t);e=e.multiplyCopy(i),t=t.parentElement}return e.b=e.c=e.e=e.f=0,e}(i).invert(),l=new j.A(e-s.left-n.left,t-s.top-n.top).transform(a);return new L(l.x,l.y)}_tap(e){const t=this.surface.eventTarget(e),i=this._drawingChartElement(t,e),s=this._sharedTooltip();!this._startHover(t,e)&&!s&&this._unsetActivePoint(),s&&this._trackSharedTooltip(this._eventCoordinates(e),e,!0),this._propagateClick(i,e),this.handlingTap=!0,setTimeout(()=>{this.handlingTap=!1},0)}_click(e){const t=this._getChartElement(e);this._propagateClick(t,e)}_propagateClick(e,t){let i=e;for(;i;)i.click&&i.click(this,t),i=i.parent}_isLegendBeforeChart(){const{options:{legend:{position:e}},_legend:t}=this;return t&&t.hasItems()&&(e===U||e===N)}_focus(){this._preventInitialPointFocus||(this._isLegendBeforeChart()?this._focusFirstLegendItem():this._focusFirstPoint()),this._preventInitialPointFocus=!1}_keydown(e){const{_focusState:{legendInFocus:t,focusedElement:i},_legend:s}=this;if("Tab"===e.key){this._clearFocusedElement();const n=this._isLegendBeforeChart();t&&n!==e.shiftKey?this._navigatePoints(e):!t&&n===e.shiftKey&&s.hasItems()&&this._navigateLegend(e)}else"Escape"===e.key?(i&&e.stopPropagation(),this._tooltip&&this._tooltip.visible?this._hideTooltip():this._blur()):"Enter"===e.key?i&&(this._focusState.preserveHighlight=!0,this._propagateClick(i,e),this._focusElement(i)):t?this._navigateLegend(e):this._navigatePoints(e)}_navigatePoints(e){const{_focusState:t,_plotArea:i}=this;if(t.legendInFocus=!1,!t.focusedElement)return this._focusFirstPoint(),void e.preventDefault();const s=n=>{t.focusedPoint=n,this._focusElement(t.focusedPoint),this._displayTooltip(n),e.preventDefault()};switch(e.key){case Uh:s(i.getPointToTheRight(t.focusedPoint));break;case jh:s(i.getPointToTheLeft(t.focusedPoint));break;case zh:s(i.getPointBelow(t.focusedPoint));break;case Nh:s(i.getPointAbove(t.focusedPoint))}}_navigateLegend(e){const{_focusState:t,_legend:i,chartService:{rtl:s}}=this;if(t.legendInFocus=!0,!t.focusedElement)return this._focusFirstLegendItem(),void e.preventDefault();const n=i.getItems().length,a=l=>{t.focusedLegendItemIndex=l(t.focusedLegendItemIndex,n),this._focusElement(this._getFocusedLegendItem()),e.preventDefault()};switch(e.key){case Nh:case jh:a(s?Jh:qh);break;case zh:case Uh:a(s?qh:Jh)}}_focusFirstPoint(){const e=this._focusState.focusedPoint=this._plotArea.getFirstPoint();e&&(this._focusElement(e),this._displayTooltip(e))}_hasFocus(){return this.element.ownerDocument.activeElement===this.element}_mousedown(){this._hasFocus()||(this._preventInitialPointFocus=!0)}_focusChart(){this._hasFocus()||(this._preventInitialPointFocus=!0,this.element.focus())}_focusPoint(e){this._focusState.focusedPoint=e,this._focusChart(),this._focusElement(e,!0)}_focusFirstLegendItem(){const{_focusState:e}=this;e.focusedLegendItemIndex=0,this._focusElement(this._getFocusedLegendItem()),e.legendInFocus=!0,this._hideTooltip()}_focusLegendItem(e){const{_focusState:t}=this;t.focusedLegendItemIndex=this._legend.getItems().findIndex(i=>i.options.series.index===e.seriesIndex&&i.options.pointIndex===e.pointIndex),t.legendInFocus=!0,this._focusChart(),this._focusElement(this._getFocusedLegendItem(),!0)}_getFocusedLegendItem(){const{_focusState:e,_legend:t}=this;return t.getItems()[e.focusedLegendItemIndex]}_focusElement(e,t){const{_focusState:i}=this;if(this._clearFocusedElement(),e&&(i.focusedElement=e,this._setElementActiveDescendant(e),!t))if(e.focusVisual(),i.legendInFocus){const s=e.options;this._showSeriesInactiveOpacity(s.series.index,s.pointIndex)}else this._showInactiveOpacity(e)}_clearFocusedElement(){const{_focusState:e}=this;e&&(e.focusedElement&&e.focusedElement.clearFocusFromVisual&&(e.focusedElement.clearFocusFromVisual(),this._clearElementActiveDescendant()),e.focusedElement=null)}_setElementActiveDescendant(e){"canvas"===this.options.renderAs&&(this._pseudoFocusedElement=this._createPseudoFocusedElement(e),this.element.append(this._pseudoFocusedElement)),this.element.setAttribute(ls,e._id)}_clearElementActiveDescendant(){this._pseudoFocusedElement&&(this._pseudoFocusedElement.remove(),this._pseudoFocusedElement=null),this.element.removeAttribute(ls)}_createPseudoFocusedElement(e){const t=document.createElement("div"),i=e.options.accessibility;t.id=e._id,t.setAttribute("aria-label",e.getAriaLabelText()),t.setAttribute("role",i.role),t.setAttribute("aria-roledescription",i.ariaRoleDescription);const s=i.ariaChecked;return C(s)&&t.setAttribute("aria-checked",s),t}_blur(){this._focusState.legendInFocus=!1,this._clearFocusedElement(),this._hideInactiveOpacity()}_startHover(e,t){if(this._suppressHover)return!1;let i=this._drawingChartElement(e,t,function(n){return(n.hover||n.over)&&!(n instanceof wi)});const s=this._activePoint;return this._updateHoveredPoint(i,t),i&&s!==i&&i.hover&&(this._activePoint=i,!this._sharedTooltip()&&!i.hover(this,t)&&(this._displayTooltip(i),this._showInactiveOpacity(i))),i}_displayTooltip(e){x({},this.options.tooltip,e.options.tooltip).visible&&(this._sharedTooltip()&&e.box?this._trackSharedTooltip(e.box.center(),{}):this._tooltip.show(e))}_hideTooltip(){this._tooltip&&this._tooltip.hide()}_displayInactiveOpacity(e,t,i){const s=this._activeChartInstance=this._chartInstanceFromPoint(e);if(s)if(t)this._updateSeriesOpacity(e),this._applySeriesOpacity(s.children,null,!0),this._applySeriesOpacity(s.children,e.series),this._highlight.show(i||e);else{let n;if(!s.supportsPointInactiveOpacity())return void this._highlight.show(e);n=this._getInactivePoints(e,s),n&&n.length&&this._highlight.show(n,1-this._getInactiveOpacityForSeries(e.series))}}_getInactivePoints(e,t){return this._getAllPointsOfType(t,e.constructor).filter(s=>s!==e)}_getAllPointsOfType(e,t){let i=[];for(let s=0;s<e.children.length;s++){const n=e.children[s];n.constructor===t?i.push(n):n.children&&n.children.length&&(i=i.concat(this._getAllPointsOfType(n,t)))}return i}_updateHoveredPoint(e,t){const i=this._hoveredPoint;i&&i!==e&&(i.out(this,t),this._hoveredPoint=null),e&&i!==e&&e.over&&(this._hoveredPoint=e,e.over(this,t))}_updateDrilldownPoint(e){if(!e||!e.series)return;const{fields:t}=ot.current.bindPoint(e.series,null,e.dataItem);t.drilldown&&(this._drilldownState={cursor:this.element.style.cursor},this.element.style.cursor="pointer")}_resetDrilldownPoint(){this._drilldownState&&(this.element.style.cursor=this._drilldownState.cursor,this._drilldownState=null)}_startDrilldown(e){if(!e||!e.series)return;const t=e.series,{fields:i}=ot.current.bindPoint(t,null,e.dataItem),s=i.drilldown;s&&this.trigger("drilldown",{series:t,point:e,value:s,sender:this})}_updateSeriesOpacity(e,t){const i=this._plotArea,s=i.series.length;for(let n=0;n<s;n++){const a=i.series[n],l=this._getDefaultOpacityForSeries(a),c=this._getInactiveOpacityForSeries(a);t||a===e.series?(a.opacity=l,a.line&&(a.line.opacity=l)):(a.defaultOpacity=l,a.opacity=c,a.line&&(a.line.opacity=c))}}_applySeriesOpacity(e,t,i,s){for(let n=0;n<e.length;n++){const a=e[n],l=a.series||s;l&&(l.highlight||{}).visible&&a.visual&&(l!==t||i)&&a.visual.opacity(i?1:s?s.opacity:a.series.opacity),a.children&&a.children.length&&this._applySeriesOpacity(a.children,t,i,a.series)}}_chartInstanceFromPoint(e){let t=e.parent;for(;t&&!t.plotArea;)t=t.parent;return t}_showInactiveOpacity(e){const t=this._plotArea.series.length>1;this._hasInactiveOpacity()?this._displayInactiveOpacity(e,t):this._highlight.show(e)}_hideInactiveOpacity(e){const t=this._plotArea.series.length>1;this._hasInactiveOpacity()&&(t&&this._activeChartInstance&&(this._updateSeriesOpacity(e,!0),this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._activeChartInstance=null),this._highlight&&this._highlight.hide(),this._activePoint=null)}_hasInactiveOpacity(){let e=void 0!==this.options.seriesDefaults.highlight.inactiveOpacity,t=this.options.series.filter(i=>void 0!==i.highlight.inactiveOpacity).length>0;return e||t}_getInactiveOpacityForSeries(e){return e.highlight.inactiveOpacity||this.options.seriesDefaults.highlight.inactiveOpacity||e.opacity||1}_getDefaultOpacityForSeries(e){return e.defaultOpacity||e.opacity||1}_mouseover(e){const t=this._startHover(e.element,e.originalEvent);t&&t.tooltipTracking&&!this._mouseMoveTrackHandler&&!this._sharedTooltip()&&(this._mouseMoveTrackHandler=this._mouseMoveTracking.bind(this),nn(document,{[Ji]:this._mouseMoveTrackHandler}))}_mouseMoveTracking(e){const{options:t,_tooltip:i,_highlight:s,_activePoint:n}=this,a=this._eventCoordinates(e);if(this._plotArea.box.containsPoint(a)){if(n&&n.tooltipTracking&&n.series&&n.parent.getNearestPoint){const l=n.parent.getNearestPoint(a.x,a.y,n.seriesIx);l&&l!==n&&(this._activePoint=l,l.hover(this,e)||(x({},t.tooltip,l.options.tooltip).visible&&i.show(l),s.show(l)))}}else on(document,{[Ji]:this._mouseMoveTrackHandler}),this._unsetActivePoint(),this._clearFocusedElement(),this._mouseMoveTrackHandler=null,this._hideInactiveOpacity(n)}_mousemove(e){const t=this._eventCoordinates(e),i=this._plotArea;if(this._trackCrosshairs(t),i.hover){const s=i.backgroundContainsPoint(t);s?(this._plotAreaHovered=!0,this._plotArea.hover(this,e)):this._plotAreaHovered&&!s&&(this._plotAreaHovered=!1,this.trigger(gl))}this._sharedTooltip()&&this._trackSharedTooltip(t,e)}_trackCrosshairs(e){const t=this._plotArea.crosshairs;for(let i=0;i<t.length;i++){const s=t[i];s.box.containsPoint(e)?s.showAt(e):s.hide()}}_trackSharedTooltip(e,t,i){if(this._suppressHover)return;const{options:{tooltip:s},_plotArea:n,_plotArea:{categoryAxis:a},_tooltip:l,_highlight:c}=this;if(n.backgroundContainsPoint(e)){const h=a.pointCategoryIndex(e);if(h!==this._tooltipCategoryIx||!this._sharedHighlight&&i){const d=n.pointsByCategoryIndex(h),p=d.map(function(g){return g.eventArgs(t)}),u=p[0]||{};u.categoryPoints=p,d.length>0&&!this.trigger(Rp,u)?(s.visible&&l.showAt(d,e),c.show(d),this._sharedHighlight=!0):l.hide(),this._tooltipCategoryIx=h}else i&&this._sharedHighlight&&(c.hide(),l.hide(),this._sharedHighlight=!1)}else this._sharedHighlight&&(c.hide(),l.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1)}hideElements(e){const t=this._plotArea;this._mousemoveThrottled.cancel(),t.hideCrosshairs(),this._unsetActivePoint(e)}_unsetActivePoint(e){const{_highlight:t}=this;this._activePoint=null,this._hoveredPoint=null,(!e||!e.keepTooltipOpen)&&this._hideTooltip(),this._tooltipCategoryIx=null,this._sharedHighlight=!1,t&&t.hide()}_deferRedraw(){this._redraw()}_clearRedrawTimeout(){this._redrawTimeout&&(clearInterval(this._redrawTimeout),this._redrawTimeout=null)}bindCategories(){const t=[].concat(this.options.categoryAxis);for(let i=0;i<t.length;i++){const s=t[i];!1!==s.autoBind&&this.bindCategoryAxisFromSeries(s,i)}}bindCategoryAxisFromSeries(e,t){const i=new Set,s=this.options.series.filter(d=>d.categoryAxis===e.name||!d.categoryAxis&&0===t),n=s.some(d=>!!d.categoryField),a=s.filter(d=>d.data&&d.data.length>0),l=a.map(d=>ot.current.bindPoint(d,0).fields.category),c=l.reduce((d,p)=>d||$p(e,p),!1);if(a.filter((d,p)=>d.categoryField||C(l[p])).forEach(d=>d.data.forEach((p,u)=>{let g=ot.current.bindPoint(d,u).fields.category;if(c){const f=Wp(g,p,this.chartService.intl);g=f?f.getTime():void 0}i.add(g)})),i.size>0){let d=Array.from(i.values());c&&(d=d.sort().map(p=>p&&new Date(p))),e.categories=d}else n&&(e.categories=[])}_isBindable(e){const t=ot.current.valueFields(e);let i=!0;for(let s=0;s<t.length;s++){let n=t[s];if(n===Qt?n="field":n+="Field",!C(e[n])){i=!1;break}}return i}_noTransitionsRedraw(){const e=this.options;let t;!1!==e.transitions&&(t=e.transitions,e.transitions=!1),this._redraw(),t&&(e.transitions=t)}_legendItemHover(e,t){this._showSeriesInactiveOpacity(e,t)}_showSeriesInactiveOpacity(e,t){const{_plotArea:i,_highlight:s}=this,n=(i.srcSeries||i.series)[e];let a;a=z(n.type,[vi,Qo,_n,yn])?i.findPoint(function(l){return l.series.index===e&&l.index===t}):i.pointsBySeriesIndex(e),this._hasInactiveOpacity()&&n.visible&&a?this._displayInactiveOpacity(a.length?a[0]:a,i.series.length>1,a):s.show(a)}_shouldAttachMouseMove(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()||this.requiresHandlers([Bp,gl])}updateMouseMoveHandler(){on(this.element,{[Ji]:this._mousemoveThrottled}),this._shouldAttachMouseMove()&&nn(this.element,{[Ji]:this._mousemoveThrottled})}applyOptions(e,t){oc(this._originalOptions,e),this._originalOptions=x(this._originalOptions,e),this.options=x({},this._originalOptions),t&&(this._theme=t,this.chartService.theme=t),this._initTheme(this.options,this._theme),this._toggleDragZoomEvents()}setOptions(e,t){this.applyOptions(e,t),this.bindCategories(),this.redraw(),this.updateMouseMoveHandler(),this._restoreOverlayElement()}setDirection(e){this.chartService.rtl=!!e,this.surface&&"svg"===this.surface.type&&this._destroySurface()}setIntlService(e){this.chartService.intl=e}noTransitionsRedraw(){this._noTransitionsRedraw()}destroy(){this._destroyed=!0,on(this.element,{[Cg]:this._clickHandler,[tr]:this._mousewheelHandler,[Ji]:this._mousemoveThrottled,[kg]:this._mouseleaveHandler,[wg]:this._mousedownHandler,[Ag]:this._keydownHandler,focus:this._focusHandler,blur:this._blurHandler}),this.domEvents&&(this.domEvents.destroy(),delete this.domEvents),this._mouseMoveTrackHandler&&on(document,{[Ji]:this._mouseMoveTrackHandler}),this._focusState=null,this.element._kendoExportVisual=null,this._destroyView(),this._destroySurface(),this._clearRedrawTimeout()}_destroySurface(){const e=this.surface;e&&(e.unbind("mouseenter",this._surfaceMouseenterHandler),e.unbind("mouseleave",this._surfaceMouseleaveHandler),e.destroy(),this.surface=null)}_destroySelections(){const e=this._selections;if(e)for(;e.length>0;)e.shift().destroy()}_destroyView(){const e=this._model;e&&(e.destroy(),this._model=null),this._unsetActivePoint(),this._clearFocusedElement(),this._resetDrilldownPoint(),this._destroySelections(),this._tooltip&&this._tooltip.destroy(),this._highlight&&this._highlight.destroy(),this._zoomSelection&&(this._zoomSelection.destroy(),delete this._zoomSelection),this._pannable&&(this._pannable.destroy(),delete this._pannable),this._mousewheelZoom&&(this._mousewheelZoom.destroy(),delete this._mousewheelZoom)}}function Eg(o,e){if(o)for(let t=0;t<o.length;t++)if(o[t].category===e)return[o[t]]}function Dg(o){delete o.bar,delete o.column,delete o.rangeColumn,delete o.line,delete o.verticalLine,delete o.pie,delete o.donut,delete o.area,delete o.verticalArea,delete o.scatter,delete o.scatterLine,delete o.bubble,delete o.candlestick,delete o.ohlc,delete o.boxPlot,delete o.bullet,delete o.verticalBullet,delete o.polarArea,delete o.polarLine,delete o.radarArea,delete o.radarLine,delete o.waterfall}function Nn(o){const e={};for(let t=0;t<o.length;t++){const i=o[t],s=i.options.name;s&&(e[s]=i.range())}return e}const Hw=["data","categories"];function oc(o,e){for(let t in e)if(!z(t,Hw)&&Aa(e,t)){const i=e[t],s=o[t];if(C(s)){const n=null===i;n||!C(i)?(delete o[t],n&&delete e[t]):s&&re(i)&&re(s)&&oc(s,i)}}}function Og(o){for(let e=0;e<o.length;e++)o[e].notifyRender()}w(Pg,{renderAs:"",chartArea:{},legend:{visible:!0,labels:{},accessibility:{},focusHighlight:{border:{opacity:1,color:pt,width:2}}},categoryAxis:{},seriesDefaults:{type:Oe,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1},accessibility:{},focusHighlight:{border:{opacity:1,width:2},zIndex:200}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{narrowRange:!1},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:!1,zoomable:!1});const rc=Pg,Ww=class Yw extends $u{_slotAnchor(e,t){const s=this.plotArea.categoryAxis.options.vertical,n=s?{horizontal:"left",vertical:"center"}:{horizontal:"center",vertical:"bottom"};let a;return a=s?new L(this.plotArea.box.x2,t.center().y):new L(t.center().x,-2),{point:a,align:n}}_defaultAnchor(e,t){return this._slotAnchor({},t)}},Ig=[ue,xi];function Rg(o){const e=[];for(let t=0;t<o.length;t++){const i=o[t];e[t]=i.style.display,i.style.display="none"}return e}function Lg(o,e){for(let t=0;t<o.length;t++)o[t].style.display=e[t]}function Vg(o){return H(o)?[o]:o}class Bg extends rc{_setElementClass(e){ut(e,"k-sparkline")}_initElement(e){super._initElement(e),this._initialWidth=Math.floor(ze(e).width)}_resize(){const e=this.element,t=Rg(e.childNodes);this._initialWidth=Math.floor(ze(e).width),Lg(e.childNodes,t),super._resize()}_modelOptions(){const e=this.options,t=this._surfaceWrap(),i=Rg(t.childNodes),s=document.createElement("span");s.innerHTML="&nbsp;",t.appendChild(s);const n=x({width:this._autoWidth,height:ze(t).height,transitions:e.transitions},e.chartArea,{inline:!0,align:!1});return ze(t,{width:n.width,height:n.height}),t.removeChild(s),Lg(t.childNodes,i),this.surface&&this.surface.resize(),n}_surfaceWrap(){if(!this.stage){const e=this.stage=document.createElement("span");this.element.appendChild(e)}return this.stage}_createPlotArea(e){const t=super._createPlotArea(e);return this._autoWidth=this._initialWidth||this._calculateWidth(t),t}_calculateWidth(e){const t=this.options,i=Z(t.chartArea.margin),s=e.charts,n=this._surfaceWrap();let a=0;for(let c=0;c<s.length;c++){const h=s[c],d=(h.options.series||[])[0];if(!d)continue;if(d.type===ue)return 150;if(d.type===xi)return 150;if(d.type===vi)return ze(n).height;const p=h.categoryAxis;if(p){const u=p.categoriesCount()*(!h.options.isStacked&&z(d.type,[Oe,kn])?h.seriesOptions.length:1);a=Math.max(a,u)}}let l=a*t.pointWidth;return l>0&&(l+=i.left+i.right),l}_createSharedTooltip(e){return new Ww(this._plotArea,e)}static normalizeOptions(e){let t=Vg(e);return t=Pt(t)?{seriesDefaults:{data:t}}:x({},t),t.series||(t.series=[{data:Vg(t.data)}]),x(t,{seriesDefaults:{type:t.type}}),(z(t.series[0].type,Ig)||z(t.seriesDefaults.type,Ig))&&(t=x({},{categoryAxis:{crosshair:{visible:!1}}},t)),t}}w(Bg,{chartArea:{margin:2},axisDefaults:{visible:!1,majorGridLines:{visible:!1},valueAxis:{narrowRange:!0}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:!0},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:!1},border:{width:0},markers:{size:2,visible:!1}},tooltip:{visible:!0,shared:!0},categoryAxis:{crosshair:{visible:!0,tooltip:{visible:!1}}},legend:{visible:!1},transitions:!1,pointWidth:5,panes:[{clip:!1}]});const ac=Bg,Kw=class Zw extends he{setup(){this._initialOpacity=parseFloat(ht(this.element,"opacity").opacity)}step(e){ht(this.element,{opacity:String(ae(this._initialOpacity,0,e))})}abort(){super.abort(),ht(this.element,{display:"none",opacity:String(this._initialOpacity)})}cancel(){super.abort(),ht(this.element,{opacity:String(this._initialOpacity)})}};function lc(o,e){const t=document.createElement("div");return t.className=o,e&&(t.style.cssText=e),t}class Fg{constructor(e,t,i){this.options=x({},this.options,i),this.container=e,this.chartService=t;const s=ht(e,["paddingLeft","paddingTop"]);this.chartPadding={top:s.paddingTop,left:s.paddingLeft},this.createElements(),e.appendChild(this.element)}createElements(){const e=this.element=lc("k-navigator-hint","display: none; position: absolute; top: 1px; left: 1px;"),t=this.tooltip=lc("k-tooltip k-chart-tooltip"),i=this.scroll=lc("k-scroll");t.innerHTML="&nbsp;",e.appendChild(t),e.appendChild(i)}show(e,t,i){const{element:s,options:n,scroll:a,tooltip:l}=this,c=it(st(e)+st(t-e)/2),h=.4*i.width(),d=i.center().x-h,f=(i.center().x-d)/(n.max-n.min),m=c-n.min;let v=this.chartService.intl.format(n.format,e,t);const _=kt(n);this.clearHideTimeout(),this._visible||(ht(s,{visibility:"hidden",display:"block"}),this._visible=!0),_&&(v=_({from:e,to:t})),l.innerHTML=v,ht(l,{left:i.center().x-l.offsetWidth/2,top:i.y1});const y=ht(l,["marginTop","borderTopWidth","height"]);ht(a,{width:h,left:d+m*f,top:i.y1+y.marginTop+y.borderTopWidth+y.height/2}),ht(s,{visibility:"visible"})}clearHideTimeout(){this._hideTimeout&&clearTimeout(this._hideTimeout),this._hideAnimation&&this._hideAnimation.cancel()}hide(){this.clearHideTimeout(),this._hideTimeout=setTimeout(()=>{this._visible=!1,this._hideAnimation=new Kw(this.element),this._hideAnimation.setup(),this._hideAnimation.play()},this.options.hideDelay)}destroy(){this.clearHideTimeout(),this.container&&this.container.removeChild(this.element),delete this.container,delete this.chartService,delete this.element,delete this.tooltip,delete this.scroll}}w(Fg,{format:"{0:d} - {1:d}",hideDelay:500});const Jw=Fg,ii="_navigator",si=ii,Ng="_default";class mr{constructor(e){this.chart=e;const t=this.options=x({},this.options,e.options.navigator),i=t.select;i&&(i.from=this.parseDate(i.from),i.to=this.parseDate(i.to)),C(t.hint.visible)||(t.hint.visible=t.visible),this.chartObserver=new _a(this,{[Sn]:"_drag",[Tn]:"_dragEnd",[Ps]:"_zoom",[Es]:"_zoomEnd"}),e.addObserver(this.chartObserver)}parseDate(e){return Et(this.chart.chartService.intl,e)}clean(){this.selection&&(this.selection.destroy(),this.selection=null),this.hint&&(this.hint.destroy(),this.hint=null)}destroy(){this.chart&&(this.chart.removeObserver(this.chartObserver),delete this.chart),this.clean()}redraw(){this._redrawSelf(),this.initSelection()}initSelection(){const{chart:e,options:t}=this,i=this.mainAxis(),{min:s,max:n}=i.roundedRange(),{from:a,to:l,mousewheel:c}=t.select,h=function tC(o){return zg.prototype=o,new zg}(i);0!==i.categoriesCount()&&(this.clean(),h.box=i.box,this.selection=new Yu(e,h,{min:s,max:n,from:a||s,to:l||n,mousewheel:R(c,{zoom:"left"}),visible:t.visible},new _a(this,{selectStart:"_selectStart",select:"_select",selectEnd:"_selectEnd"})),t.hint.visible&&(this.hint=new Jw(e.element,e.chartService,{min:s,max:n,template:kt(t.hint),format:t.hint.format})))}setRange(){const t=this.chart._createPlotArea(!0).namedCategoryAxes[si],{min:i,max:s}=t.roundedRange(),n=this.options.select||{};let a=n.from||i;a<i&&(a=i);let l=n.to||s;l>s&&(l=s),this.options.select=x({},n,{from:a,to:l}),this.filterAxes()}_redrawSelf(e){const t=this.chart._plotArea;t&&t.redraw(ft(t.panes),e)}redrawSlaves(){const e=this.chart,t=e._plotArea,i=t.panes.filter(s=>s.options.name!==ii);t.srcSeries=e.options.series,t.options.categoryAxis=e.options.categoryAxis,t.clearSeriesPointsCache(),t.redraw(i)}_drag(e){const{chart:t,selection:i}=this,s=t._eventCoordinates(e.originalEvent),n=this.mainAxis(),a=n.roundedRange(),l=n.pane.box.containsPoint(s),h=e.axisRanges[t._plotArea.categoryAxis.options.name],d=this.options.select;let p;if(!h||l||!i)return;p=d.from&&d.to?st(d.to)-st(d.from):st(i.options.to)-st(i.options.from);const u=it(O(st(h.min),a.min,st(a.max)-p)),g=it(O(st(u)+p,st(a.min)+p,a.max));this.options.select={from:u,to:g},this.options.liveDrag&&(this.filterAxes(),this.redrawSlaves()),i.set(u,g),this.showHint(u,g)}_dragEnd(){this.filterAxes(),this.filter(),this.redrawSlaves(),this.hint&&this.hint.hide()}readSelection(){const{selection:{options:{from:e,to:t}},options:{select:i}}=this;i.from=e,i.to=t}filterAxes(){const{options:{select:e={}},chart:t}=this,i=t.options.categoryAxis,{from:s,to:n}=e;for(let a=0;a<i.length;a++){const l=i[a];l.pane!==ii&&(l.min=s,l.max=n)}}filter(){const{chart:e,options:{select:t}}=this;if(!e.requiresHandlers(["navigatorFilter"]))return;const i=this.mainAxis(),s={from:t.from,to:t.to};if("category"!==i.options.type){const n=new mn(x({baseUnit:"fit"},e.options.categoryAxis[0],{categories:[t.from,t.to]}),e.chartService).options;s.from=Dt(n.min,-n.baseUnitStep,n.baseUnit),s.to=Dt(n.max,n.baseUnitStep,n.baseUnit)}this.chart.trigger("navigatorFilter",s)}_zoom(e){const{chart:{_plotArea:{categoryAxis:t}},selection:i,options:{select:s,liveDrag:n}}=this,a=this.mainAxis();let l=e.delta;if(!i)return;const c=a.categoryIndex(i.options.from),h=a.categoryIndex(i.options.to),d=this.chart._eventCoordinates(e.originalEvent);e.originalEvent.preventDefault(),Math.abs(l)>1&&(l*=3),h-c>1?(i.zoom(l,d),this.readSelection()):(t.options.min=s.from,s.from=t.scaleRange(-e.delta*this.chart._mousewheelZoomRate(),d).min),n&&(this.filterAxes(),this.redrawSlaves()),i.set(s.from,s.to),this.showHint(this.options.select.from,this.options.select.to)}_zoomEnd(e){this._dragEnd(e)}showHint(e,t){this.hint&&this.hint.show(e,t,this.chart._plotArea.backgroundBox())}_selectStart(e){return this.chart._selectStart(e)}_select(e){return this.showHint(e.from,e.to),this.chart._select(e)}_selectEnd(e){return this.hint&&this.hint.hide(),this.readSelection(),this.filterAxes(),this.filter(),this.redrawSlaves(),this.chart._selectEnd(e)}mainAxis(){const e=this.chart._plotArea;if(e)return e.namedCategoryAxes[si]}select(e,t){const i=this.options.select;return e&&t&&(i.from=this.parseDate(e),i.to=this.parseDate(t),this.filterAxes(),this.filter(),this.redrawSlaves(),this.selection.set(e,t)),{from:i.from,to:i.to}}static setup(e={},t={}){if(e.__navi)return;e.__navi=!0;const i=x({},t.navigator,e.navigator),s=e.panes=[].concat(e.panes),n=x({},i.pane,{name:ii});i.visible||(n.visible=!1,n.height=.1),"top"!==e.navigator.position?s.push(n):s.unshift(n),s.forEach(a=>{a.name=a.name||Ng}),mr.attachAxes(e,i),mr.attachSeries(e,i,t)}static attachAxes(e,t){const i=t.series||[],s=e.categoryAxis=[].concat(e.categoryAxis),n=e.valueAxis=[].concat(e.valueAxis);s.concat(n).forEach(p=>{p.pane=p.pane||Ng});const c=0===dt(i,Dp).length,h=x({type:"date",pane:ii,roundToBaseUnit:!c,justified:c,_collapse:!1,majorTicks:{visible:!0},tooltip:{visible:!1},labels:{step:1},autoBind:t.autoBindElements,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]}}),d=t.categoryAxis;s.push(x({},h,{maxDateGroups:200},d,{name:si,title:null,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),x({},h,d,{name:si+"_labels",maxDateGroups:20,baseUnitStep:"auto",labels:{position:""},plotBands:[],autoBaseUnitSteps:{minutes:[]},_overlap:!0}),x({},h,d,{name:si+"_ticks",maxDateGroups:200,majorTicks:{width:.5},plotBands:[],title:null,labels:{visible:!1,mirror:!0},_overlap:!0})),n.push(x({name:si,pane:ii,majorGridLines:{visible:!1},visible:!1},t.valueAxis))}static attachSeries(e,t,i){const s=e.series=e.series||[],n=[].concat(t.series||[]),a=i.seriesColors,l=t.seriesDefaults;for(let c=0;c<n.length;c++)s.push(x({color:a[c%a.length],categoryField:t.dateField,visibleInLegend:!1,tooltip:{visible:!1}},l,n[c],{axis:si,categoryAxis:si,autoBind:t.autoBindElements}))}}function zg(){}const jg=mr;class Ug extends rc{applyDefaults(e,t){const i=ze(this.element).width||600;let s=t;const n={seriesDefaults:{categoryField:e.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:Math.floor(i/28)}}};s&&(s=x({},s,n)),jg.setup(e,s),super.applyDefaults(e,s)}_setElementClass(e){ut(e,"k-chart k-stockchart")}setOptions(e){this.destroyNavigator(),super.setOptions(e)}noTransitionsRedraw(){const e=this.options.transitions;this.options.transitions=!1,this._fullRedraw(),this.options.transitions=e}_resize(){this.noTransitionsRedraw()}_redraw(){const e=this.navigator;!this._dirty()&&e&&e.options.partialRedraw?e.redrawSlaves():this._fullRedraw()}_dirty(){const e=this.options,t=[].concat(e.series,e.navigator.series),i=Kt(t,function(n){return n&&n.visible}).length,s=this._seriesCount!==i;return this._seriesCount=i,s}_fullRedraw(){let e=this.navigator;e||(e=this.navigator=new jg(this),this.trigger("navigatorCreated",{navigator:e})),e.clean(),e.setRange(),super._redraw(),e.initSelection()}_trackSharedTooltip(e){const i=this._plotArea.paneByPoint(e);i&&i.options.name===ii?this._unsetActivePoint():super._trackSharedTooltip(e)}bindCategories(){super.bindCategories(),this.copyNavigatorCategories()}copyNavigatorCategories(){const e=[].concat(this.options.categoryAxis);let t;for(let i=0;i<e.length;i++){const s=e[i];s.name===si?t=s.categories:t&&s.pane===ii&&(s.categories=t)}}destroyNavigator(){this.navigator&&(this.navigator.destroy(),this.navigator=null)}destroy(){this.destroyNavigator(),super.destroy()}_stopChartHandlers(e){const t=this._eventCoordinates(e),i=this._plotArea.paneByPoint(t);return super._stopChartHandlers(e)||i&&i.options.name===ii}_toggleDragZoomEvents(){this._dragZoomEnabled||(this.element.style.touchAction="none",this._dragZoomEnabled=!0)}}w(Ug,{dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!1},highlight:{visible:!1},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}});const iC=Ug,Hg="arrowPointer",jn="barPointer",Wg=Math.PI/180,Ai="inside",xr="linear",cc="outside",$g="radialPointer",Qg="radialRangePointer";function Zg(o,e){const t=o.getOrigin(),i=o.getSize(),s=Z(e);return o.setOrigin([t.x-s.left,t.y-s.top]),o.setSize([i.width+(s.left+s.right),i.height+(s.top+s.bottom)]),o}const{YJ:nC,wA:Kg,EY:oC}=Be;function Jg(o,e){const t=o.box,i=o.children[0].box,s=e.border||{},n=e.background||"",a=Kg.fromRect(new At.A([t.x1,t.y1],[t.width(),t.height()]),{stroke:{}}),l=new oC(o.text,new j.A(i.x1,i.y1),{font:e.font,fill:{color:e.color}}),c=Zg(l.bbox().clone(),e.padding),h=Kg.fromRect(c,{stroke:{color:s.width?s.color:"",width:s.width,opacity:s.opacity,dashType:s.dashType,lineJoin:"round",lineCap:"round"},fill:{color:n}}),d=new nC;return d.append(a),d.append(h),d.append(l),d}function qg(o,e,t){const i=C(o.from)?o.from:wt,s=C(o.to)?o.to:gt;return o.from=Math.max(Math.min(s,i),e),o.to=Math.min(Math.max(s,i),t),o}function tf(o,e){const t=Z(e);return t.left=-t.left,t.top=-t.top,t.right=-t.right,t.bottom=-t.bottom,Zg(o,t)}const{wA:aC,ui:lC}=Be;class ef{constructor(e,t,i,s={}){this.element=e,this.theme=i,this.contextService=new La(this,s),this._originalOptions=x({},this.options,t),this.options=x({},this._originalOptions),this._initTheme(i),this.redraw()}destroy(){this.surface&&(this.surface.destroy(),this.surface=null),delete this.element,delete this.surfaceElement}value(e){const t=this.pointers[0];if(0===arguments.length)return t.value();t.value(e),this._setValueOptions(e)}_draw(){const e=this.surface;e.clear(),e.draw(this._visuals)}exportVisual(){return this._visuals}allValues(e){const t=this.pointers,i=[];if(0===arguments.length){for(let s=0;s<t.length;s++)i.push(t[s].value());return i}if(Pt(e))for(let s=0;s<e.length;s++)H(e[s])&&t[s].value(e[s]);this._setValueOptions(e)}_setValueOptions(e){const t=[].concat(this.options.pointer),i=[].concat(e);for(let s=0;s<i.length;s++)t[s].value=i[s]}resize(){this.noTransitionsRedraw()}noTransitionsRedraw(){const e=this.options.transitions;this._toggleTransitions(!1),this.redraw(),this._toggleTransitions(e)}redraw(){const e=this._surfaceSize(),t=new At.A([0,0],[e.width,e.height]);this._initSurface(),this.gaugeArea=this._createGaugeArea(),this._createModel();const i=tf(t.bbox(),this._gaugeAreaMargin);this.reflow(i)}setOptions(e,t){this._originalOptions=x(this._originalOptions,e),this.options=x({},this._originalOptions),this._initTheme(t),this.redraw()}setDirection(e){this.contextService.rtl=!!e,this.surface&&"svg"===this.surface.type&&(this.surface.destroy(),this.surface=null)}setIntlService(e){this.contextService.intl=e}_initTheme(e){let t=e||this.theme||{};this.theme=t,this.options=x({},t,this.options);const i=this.options,s=i.pointer;if(Pt(s)){const n=[];for(let a=0;a<s.length;a++)n.push(x({},t.pointer,s[a]));i.pointer=n}}_createGaugeArea(){const e=this.options.gaugeArea,t=this.surface.size(),i=e.border||{};let s=new At.A([0,0],[t.width,t.height]);return this._gaugeAreaMargin=e.margin||5,i.width>0&&(s=tf(s,i.width)),aC.fromRect(s,{stroke:{color:i.width?i.color:"",width:i.width,opacity:i.opacity,dashType:i.dashType,lineJoin:"round",lineCap:"round"},fill:{color:e.background}})}_initSurface(){const{options:e,surface:t}=this,i=this._surfaceElement(),s=this._surfaceSize();ze(i,s),t&&t.options.type===e.renderAs?(this.surface.clear(),this.surface.resize()):(t&&t.destroy(),this.surface=lC.create(i,{type:e.renderAs}))}_surfaceSize(){const e=this.options,t=this._getSize();return e.gaugeArea&&x(t,e.gaugeArea),t}_surfaceElement(){return this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.element.appendChild(this.surfaceElement)),this.surfaceElement}getSize(){return this._getSize()}_getSize(){const e=this.element,t=this._defaultSize();let i=e.offsetWidth,s=e.offsetHeight;return i||(i=t.width),s||(s=t.height),{width:i,height:s}}_defaultSize(){return{width:200,height:200}}_toggleTransitions(e){this.options.transitions=e;for(let t=0;t<this.pointers.length;t++)this.pointers[t].options.animation.transitions=e}}w(ef,{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}});const sf=ef,{wA:hc,YJ:Un}=Be,vr=j.A;function cC(o,e){const{position:t,tickX:i,tickY:s}=o;let n,a;return o.vertical?(n=new vr(i,t),a=new vr(i+e.size,t)):(n=new vr(t,s),a=new vr(t,s+e.size)),new hc({stroke:{color:e.color,width:e.width}}).moveTo(n).lineTo(a)}function nf(o,e,t,i){const s=e.length;if(i.visible){const{mirror:n,lineBox:a}=t;for(let l=i.skip;l<s;l+=i.step)l%i.skipUnit!=0&&(t.tickX=n?a.x2:a.x2-i.size,t.tickY=n?a.y1-i.size:a.y1,t.position=e[l],o.append(cC(t,i)))}}class of extends de{constructor(e,t){let i=e||{};!C(i.reverse)&&!1===i.vertical&&(t||{}).rtl&&(i=Object.assign({},i,{reverse:!0})),super(0,1,i,t),this.options.minorUnit=this.options.minorUnit||this.options.majorUnit/10}initUserOptions(e){let t=x({},this.options,e);return t=x({},t,{labels:{mirror:t.mirror}}),t.majorUnit=t.majorUnit||gs(t.min,t.max),t}initFields(){}render(){const e=this.elements=new Un,t=this.renderLabels(),i=this.renderLine(),s=this.renderTicks(),n=this.renderRanges();return e.append(i,t,s,n),e}renderRanges(){const e=this.options,{min:t,max:i,vertical:s,labels:{mirror:n}}=e,a=e.ranges||[],l=new Un,c=a.length,h=e.rangeSize||e.minorTicks.size/2;for(let d=0;d<c;d++){const p=qg(a[d],t,i),u=this.getSlot(p.from,p.to),g=s?this.lineBox():u,f=s?u:this.lineBox();s?g.x1-=h*(n?-1:1):f.y2+=h*(n?-1:1),l.append(hc.fromRect(new At.A([g.x1,f.y1],[g.x2-g.x1,f.y2-f.y1]),{fill:{color:p.color,opacity:p.opacity},stroke:{}}))}return l}renderLabels(){const{labels:e,options:t}=this,i=new Un;for(let s=0;s<e.length;s++)i.append(Jg(e[s],t.labels));return i}renderLine(){const e=this.options.line,t=this.lineBox(),i=new Un;if(e.width>0&&e.visible){const s=new hc({stroke:{color:e.color,dashType:e.dashType,width:e.width}});s.moveTo(t.x1,t.y1).lineTo(t.x2,t.y2),i.append(s)}return i}renderTicks(){const e=new Un,t=this.options,i=t.majorTicks.visible?t.majorUnit:0,s={vertical:t.vertical,mirror:t.labels.mirror,lineBox:this.lineBox()};return nf(e,this.getMajorTickPositions(),s,t.majorTicks),nf(e,this.getMinorTickPositions(),s,x({},{skipUnit:i/t.minorUnit},t.minorTicks)),e}}w(of,{min:0,max:50,majorTicks:{size:15,align:Ai,color:pt,width:.5,visible:!0},minorTicks:{size:10,align:Ai,color:pt,width:.5,visible:!0},line:{width:.5},labels:{position:Ai,padding:2},mirror:!1,_alignLines:!1});const hC=of;class rf{constructor(e,t){const{min:i,max:s}=e.options,n=this.options=x({},this.options,t);n.fill=n.color,this.scale=e,n.value=C(n.value)?O(n.value,i,s):i}value(e){const t=this.options;if(0===arguments.length)return t.value;const{min:s,max:n}=this.scale.options;t._oldValue=C(t._oldValue)?t.value:s,t.value=O(e,s,n),this.elements&&this.repaint()}}w(rf,{color:pt});const dc=rf;class af extends dc{constructor(e,t){super(e,t),this.options=x({track:{visible:C(t.track)}},this.options)}reflow(){const{options:e,scale:t}=this,{mirror:i,vertical:s}=t.options,n=t.lineBox(),a=e.track.size||e.size,l=e.size/2,c=Z(e.margin);let d,p,u,h=s?c[i?"left":"right"]:c[i?"bottom":"top"];h=i?-h:h,s?(u=new k(n.x1+h,n.y1,n.x1+h,n.y2),i?u.x1-=a:u.x2+=a,e.shape!==jn&&(p=new k(n.x2+h,n.y1-l,n.x2+h,n.y2+l),d=p)):(u=new k(n.x1,n.y1-h,n.x2,n.y1-h),i?u.y2+=a:u.y1-=a,e.shape!==jn&&(p=new k(n.x1-l,n.y1-h,n.x2+l,n.y1-h),d=p)),this.trackBox=u,this.pointerRangeBox=p,this.box=d||u.clone().pad(e.border.width)}getElementOptions(){const e=this.options;return{fill:{color:e.color,opacity:e.opacity},stroke:C(e.border)?{color:e.border.width?e.border.color||e.color:"",width:e.border.width,dashType:e.border.dashType,opacity:e.opacity}:null}}_margin(){const{scale:e,options:t}=this,{mirror:i,vertical:s}=e.options,n=Z(t.margin);return s?n[i?"left":"right"]:n[i?"bottom":"top"]}}w(af,{shape:jn,track:{border:{width:1}},color:pt,border:{width:1},opacity:1,margin:Z(3),animation:{type:jn},visible:!0});const lf=af;class pc extends he{setup(){const e=this.options,{margin:t,from:i,to:s,vertical:n}=e,a=n?"x1":"y1";e.mirror===n?(i[a]-=t,s[a]-=t):(i[a]+=t,s[a]+=t);const l=this.fromScale=new j.A(i.x1,i.y1),c=this.toScale=new j.A(s.x1,s.y1);0!==e.duration&&(e.duration=Math.max(l.distanceTo(c)/e.duration*1e3,1))}step(e){const t=ae(this.fromScale.x,this.toScale.x,e),i=ae(this.fromScale.y,this.toScale.y,e);this.element.transform(bt.A().translate(t,i))}}w(pc,{easing:xr,duration:250}),Me.current.register(Hg,pc);const dC=pc,Fs=j.A,pC=M.w,gC=class uC extends lf{constructor(e,t){super(e,t),C(this.options.size)||(this.options.size=.6*this.scale.options.majorTicks.size)}pointerShape(){const{scale:e,options:{size:t}}=this,i=t/2,s=e.options.mirror?-1:1;let n;return n=e.options.vertical?[new Fs(0,0-i),new Fs(0-s*t,0),new Fs(0,0+i)]:[new Fs(0-i,0),new Fs(0,0+s*t),new Fs(0+i,0)],n}repaint(){const{scale:e,options:t}=this,i=new dC(this.elements,x(t.animation,{vertical:e.options.vertical,mirror:e.options.mirror,margin:this._margin(t.margin),from:e.getSlot(t._oldValue),to:e.getSlot(t.value)}));!1===t.animation.transitions&&(i.options.duration=0),i.setup(),i.play()}render(){const{scale:e,options:t}=this,i=this.getElementOptions(),s=this.pointerShape(t.value);t.animation.type=Hg;const n=new pC({stroke:i.stroke,fill:i.fill}).moveTo(s[0]).lineTo(s[1]).lineTo(s[2]).close(),a=e.getSlot(t.value);return n.transform(bt.A().translate(a.x1,a.y1)),this.elements=n,n}};class uc extends he{setup(){const e=this.options,t=this.axis=e.vertical?D:E,i=this.to=e.newPoints[0][t],s=this.from=e.oldPoints[0][t];0!==e.duration&&(e.duration=Math.max(Math.abs(i-s)/e.speed*1e3,1)),this._set(s)}step(e){const t=ae(this.from,this.to,e);this._set(t)}_set(e){const t="set"+this.axis.toUpperCase(),i=this.options.newPoints;i[0][t](e),i[1][t](e)}}w(uc,{easing:xr,speed:250}),Me.current.register(jn,uc);const fC=uc,{YJ:mC,wA:cf}=Be,vC=class xC extends lf{constructor(e,t){super(e,t),C(this.options.size)||(this.options.size=.3*this.scale.options.majorTicks.size)}pointerShape(e){const{scale:t,options:i}=this,{mirror:s,vertical:n}=t.options,a=s===n?-1:1,l=i.size*a,c=t.getSlot(t.options.min),h=t.getSlot(e),d=n?D:E,p=n?E:D,u=this._margin()*a,g=new j.A;g[d]=c[d+"1"],g[p]=c[p+"1"];const f=new j.A;f[d]=h[d+"1"],f[p]=h[p+"1"],n?(g.translate(u,0),f.translate(u,0)):(g.translate(0,u),f.translate(0,u));const m=f.clone(),v=g.clone();return n?(m.translate(l,0),v.translate(l,0)):(m.translate(0,l),v.translate(0,l)),[g,f,m,v]}repaint(){const{scale:e,options:t}=this,i=this.pointerShape(t.value),s=this.pointerPath,n=this.pointerShape(t._oldValue);s.moveTo(i[0]).lineTo(i[1]).lineTo(i[2]).lineTo(i[3]).close();const a=new fC(s,x(t.animation,{reverse:e.options.reverse,vertical:e.options.vertical,oldPoints:[n[1],n[2]],newPoints:[i[1],i[2]]}));!1===t.animation.transitions&&(a.options.duration=0),a.setup(),a.play()}render(){const e=new mC,t=this.getElementOptions();this.options.track.visible&&e.append(this.renderTrack());const i=this.pointerPath=new cf({stroke:t.stroke,fill:t.fill});return e.append(i),this.elements=e,e}renderTrack(){const e=this.options.track,t=e.border||{},i=this.trackBox.clone().pad(t.width||0);return cf.fromRect(i.toRect(),{fill:{color:e.color,opacity:e.opacity},stroke:{color:t.width?t.color||e.color:"",width:t.width,dashType:t.dashType}})}},yC=et.A;w(class wC extends sf{reflow(e){const t=this.pointers,i=e.origin.x,s=e.origin.y,n=new k(i,s,i+e.width(),s+e.height());this.scale.reflow(n),this._shrinkScaleWidth(n);for(let a=0;a<t.length;a++)t[a].reflow();this.bbox=this._getBox(n),this._alignElements(),this._shrinkElements(),this._buildVisual(),this._draw()}_buildVisual(){const e=new yC,t=this.scale.render(),i=this.pointers;e.append(this.gaugeArea),e.append(t);for(let s=0;s<i.length;s++){const n=i[s];e.append(n.render()),n.value(n.options.value)}this._visuals=e}_createModel(){const e=this.options,t=this.scale=new hC(e.scale,this.contextService);this.pointers=[];let i=e.pointer;i=Pt(i)?i:[i];for(let s=0;s<i.length;s++){const n=x({},i[s],{animation:{transitions:e.transitions}});this.pointers.push(new("arrow"===n.shape?gC:vC)(t,n))}}_defaultSize(){const e=this.options.scale.vertical;return{width:e?60:200,height:e?200:60}}_getBox(e){const{scale:t,pointers:i}=this,s=e.center();let a,n=i[0].box.clone().wrap(t.box);for(let l=0;l<i.length;l++)n.wrap(i[l].box.clone());return t.options.vertical?(a=n.width()/2,n=new k(s.x-a,e.y1,s.x+a,e.y2)):(a=n.height()/2,n=new k(e.x1,s.y-a,e.x2,s.y+a)),n}_alignElements(){const{scale:e,pointers:t}=this,i=e.box,s=t[0].box.clone().wrap(e.box),n=this.bbox;for(let l=0;l<t.length;l++)s.wrap(t[l].box.clone());let a;e.options.vertical?(a=n.center().x-s.center().x,e.reflow(new k(i.x1+a,n.y1,i.x2+a,n.y2))):(a=n.center().y-s.center().y,e.reflow(new k(i.x1,i.y1+a,i.x2,i.y2+a)));for(let l=0;l<t.length;l++)t[l].reflow(this.bbox)}_shrinkScaleWidth(e){const{scale:t}=this;if(!t.options.vertical){const i=t.contentBox().width()-e.width();i>0&&(t.box.shrink(i,0),t.box.alignTo(e,"center"),t.reflow(t.box))}}_shrinkElements(){const{scale:e,pointers:t}=this,i=e.box.clone(),s=e.options.vertical?"y":"x",n=t[0].box;for(let a=0;a<t.length;a++)n.wrap(t[a].box.clone());i[s+1]+=Math.max(i[s+1]-n[s+1],0),i[s+2]-=Math.max(n[s+2]-i[s+2],0),e.reflow(i);for(let a=0;a<t.length;a++)t[a].reflow(this.bbox)}},{transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}});const{l5:CC,wA:kC,YJ:_r}=Be;function hf(o,e,t,i){const s=new _r,n=o.center,a=o.getRadiusX();if(i.visible)for(let l=0;l<e.length;l++){const c=o.pointAt(e[l]),h=new j.A(n.x+a-i.size,n.y).rotate(e[l],n);s.append(new kC({stroke:{color:i.color,width:i.width}}).moveTo(c).lineTo(h))}return s}function gc(o,e,t,i){return{from:o,to:e,color:t,opacity:i}}class df extends de{constructor(e,t){super(0,1,e,t)}initUserOptions(e){const t=x({},this.options,e);return t.majorUnit=t.majorUnit||gs(t.min,t.max),t.minorUnit=t.minorUnit||t.majorUnit/10,t}initFields(){}render(e,t){const i=this.renderArc(e,t);this.bbox=i.bbox(),this.labelElements=this.renderLabels(),this.ticks=this.renderTicks(),this.ranges=this.renderRanges()}reflow(e){const t=e.center(),i=Math.min(e.height(),e.width())/2;if(!C(this.bbox))return this.render(t,i);this.bbox=this.arc.bbox(),this.radius(this.arc.getRadiusX()),this.repositionRanges(),this.renderLabels()}slotAngle(e){const{min:t,max:i,reverse:s,startAngle:n,endAngle:a}=this.options,l=a-n;let c;return c=s?a-(e-t)/(i-t)*l:(e-t)/(i-t)*l+n,c+180}hasRanges(){const e=this.options.ranges;return e&&e.length}ticksSize(){const{majorTicks:e,minorTicks:t}=this.options;let i=0;return e.visible&&(i=e.size),t.visible&&(i=Math.max(t.size,i)),i}labelsCount(){let e=super.labelsCount();const t=this.options;return t.endAngle-t.startAngle>=360&&t.max%t.majorUnit==0&&(e-=1),e}renderLabels(){const e=this.options,t=this.arc.clone();let i=t.getRadiusX();const s=this.tickAngles(t,e.majorUnit),n=e.rangeSize=e.rangeSize||.1*i,a=new _r;let l=.05*i;C(e.rangeDistance)?l=e.rangeDistance:e.rangeDistance=l;const c=e.labels,h=c.position===Ai,d=C(this.labelElements);h&&(i-=this.ticksSize(),this.hasRanges()&&!d&&(i-=n+l),t.setRadiusX(i).setRadiusY(i));const p=this.labels,u=p.length,g=Z(c.padding),f=(g.left+g.right)/2,m=(g.top+g.bottom)/2;for(let v=0;v<u;v++){const _=p[v],y=_.box.width()/2,P=_.box.height()/2,I=s[v],B=(I-180)*Wg,G=t.pointAt(I),Q=G.x+Math.cos(B)*(y+f)*(h?1:-1),tt=G.y+Math.sin(B)*(P+m)*(h?1:-1);_.reflow(new k(Q-y,tt-P,Q+y,tt+P));const mt=new j.A(_.box.x1,_.box.y1);let rt;if(d){rt=this.labelElements.children[v];const oe=rt.bbox().origin,Bt=rt.transform()||bt.A();Bt.translate(mt.x-oe.x,mt.y-oe.y),rt.transform(Bt)}else rt=Jg(_,e.labels),a.append(rt);this.bbox=At.A.union(this.bbox,rt.bbox())}return a}repositionRanges(){const e=this.ranges.children;if(e.length>0){const{rangeDistance:t,rangeSize:i}=this.options;let s=this.getRangeRadius();this.options.labels.position===Ai&&(s+=i+t);const n=s+i/2;for(let a=0;a<e.length;a++)e[a]._geometry.setRadiusX(n).setRadiusY(n);this.bbox=At.A.union(this.bbox,this.ranges.bbox())}}renderRanges(){const e=this.rangeSegments(),t=e.length,i=new _r;if(t){const{rangeSize:s,reverse:n,rangeDistance:a}=this.options,l=this.getRangeRadius();this.radius(this.radius()-s-a);for(let c=0;c<t;c++){const h=e[c],d=this.slotAngle(h[n?"to":"from"]),p=this.slotAngle(h[n?"from":"to"]);p-d!=0&&i.append(this.createRange(d,p,l,h))}}return i}createRange(e,t,i,s){const n=this.options.rangeSize,a=new fs.A(this.arc.center,{radiusX:i+n/2,radiusY:i+n/2,startAngle:e,endAngle:t});return new CC(a,{stroke:{width:n,color:s.color,opacity:s.opacity,lineCap:s.lineCap}})}rangeSegments(){const e=this.options,t=e.ranges||[],i=t.length,s=[];if(i){const{min:n,max:a,rangePlaceholderColor:l}=e;s.push(gc(n,a,l));for(let c=0;c<i;c++){const h=qg(t[c],n,a),d=s.length;for(let p=0;p<d;p++){const u=s[p];if(u.from<=h.from&&h.from<=u.to){s.push(gc(h.from,h.to,h.color,h.opacity)),u.from<=h.to&&h.to<=u.to&&s.push(gc(h.to,u.to,l,h.opacity)),u.to=h.from;break}}}}return s}getRangeRadius(){const{arc:e,options:t}=this,{rangeSize:i,rangeDistance:s,majorTicks:{size:n}}=t;let a;return a=t.labels.position===cc?e.getRadiusX()-n-s-i:e.getRadiusX()-i,a}renderArc(e,t){const i=this.options;return this.arc=new fs.A(e,{radiusX:t,radiusY:t,startAngle:i.startAngle+180,endAngle:i.endAngle+180})}renderTicks(){const{arc:e,options:t}=this,i=e.clone();this.majorTickAngles=this.tickAngles(e,t.majorUnit),this.majorTicks=hf(i,this.majorTickAngles,0,t.majorTicks);const s=new _r;s.append(this.majorTicks);const n=t.majorTicks.size,a=t.minorTicks.size;if(this._tickDifference=n-a,t.labels.position===cc){const l=i.getRadiusX();i.setRadiusX(l-n+a).setRadiusY(l-n+a)}return this.minorTickAngles=this.normalizeTickAngles(this.tickAngles(e,t.minorUnit)),this.minorTicks=hf(i,this.minorTickAngles,0,t.minorTicks),s.append(this.minorTicks),s}normalizeTickAngles(e){const t=this.options,i=t.majorUnit/t.minorUnit;for(let s=e.length-1;s>=0;s--)s%i==0&&e.splice(s,1);return e}tickAngles(e,t){const i=this.options,a=e.endAngle-e.startAngle;let l=(i.max-i.min)/t,c=e.startAngle,h=a/l;i.reverse&&(c+=a,h=-h),a>=360&&i.max%t==0&&(l-=1);const d=[];for(let p=0;p<l;p++)d.push(A(c,3)),c+=h;return A(c)<=e.endAngle&&d.push(c),d}radius(e){if(!e)return this.arc.getRadiusX();this.arc.setRadiusX(e).setRadiusY(e),this.repositionTicks(this.majorTicks.children,this.majorTickAngles),this.repositionTicks(this.minorTicks.children,this.minorTickAngles,!0)}repositionTicks(e,t,i){const s=i&&this._tickDifference||0;let n=this.arc;const a=n.getRadiusX();i&&this.options.labels.position===cc&&0!==s&&(n=this.arc.clone(),n.setRadiusX(a-s).setRadiusY(a-s));for(let l=0;l<e.length;l++){const c=n.pointAt(t[l]),h=e[l].segments,d=c.x-h[0].anchor().x,p=c.y-h[0].anchor().y;e[l].transform((new bt.A).translate(d,p))}}}w(df,{min:0,max:100,majorTicks:{size:15,align:Ai,color:pt,width:.5,visible:!0},minorTicks:{size:10,align:Ai,color:pt,width:.5,visible:!0},startAngle:-30,endAngle:210,labels:{position:Ai,padding:2}});const pf=df;class fc extends he{constructor(e,t){super(e,t);const i=this.options;i.duration=Math.max(Math.abs(i.newAngle-i.oldAngle)/i.duration*1e3,1)}step(e){const t=this.options,i=ae(t.oldAngle,t.newAngle,e);this.element.transform(bt.A().rotate(i,t.center))}}w(fc,{easing:xr,duration:150}),Me.current.register($g,fc);const AC=fc,{jl:TC,YJ:MC,wA:PC}=Be;class uf extends dc{setAngle(e){this.elements.transform(bt.A().rotate(e,this.center))}repaint(){const{scale:e,options:t}=this,i=e.slotAngle(t._oldValue),s=e.slotAngle(t.value);!1===t.animation.transitions?this.setAngle(s):new AC(this.elements,x(t.animation,{oldAngle:i,newAngle:s})).play()}render(){const{scale:e,options:t}=this,i=new MC;return!1!==t.animation&&x(t.animation,{startAngle:0,center:e.arc.center,reverse:e.options.reverse}),i.append(this._renderNeedle(),this._renderCap()),this.elements=i,this.setAngle(Wg),i}reflow(e){const t=this.center=e.center,i=O(this.options.length||1,.1,1.5),s=this.radius=e.getRadiusX()*i,n=this.capSize=Math.round(s*this.options.cap.size);this.bbox=At.A.fromPoints(new j.A(t.x-n,t.y-n),new j.A(t.x+n,t.y+n))}_renderNeedle(){const e=this.scale.options.minorTicks.size,t=this.center,i=this.options.color,s=new PC({fill:{color:i},stroke:{color:i,width:.5}});return s.moveTo(t.x+this.radius-e,t.y).lineTo(t.x,t.y-this.capSize/2).lineTo(t.x,t.y+this.capSize/2).close(),s}_renderCap(){const e=this.options,t=e.cap.color||e.color,i=new ce.A(this.center,this.capSize);return new TC(i,{fill:{color:t},stroke:{color:t}})}}w(uf,{cap:{size:.05},arrow:{width:16,height:14},animation:{type:$g,duration:150}});const EC=uf,DC=et.A;w(class OC extends sf{reflow(e){const t=this.pointers;this.scale.reflow(e),this._initialPlotArea=this.scale.bbox;for(let i=0;i<t.length;i++)t[i].reflow(this.scale.arc),this._initialPlotArea=At.A.union(this._initialPlotArea,t[i].bbox);this.fitScale(e),this.alignScale(e),this._buildVisual(this.gaugeArea,t,this.scale),this._draw()}_buildVisual(e,t,i){const s=this._visuals=new DC;s.append(e),s.append(i.ticks),s.append(i.ranges),this._buildPointers(t),s.append(i.labelElements)}_buildPointers(e){for(let t=0;t<e.length;t++){const i=e[t];i.render(),this._visuals.append(i.elements),i.value(i.options.value)}}fitScale(e){const t=this.scale.arc,s=Math.abs(this.getDiff(this._initialPlotArea,e));let l,c,h,d,p,n=A(s,3),a=A(-s,3),u=0,g=0;for(;g++<100&&(u=p===h?u+1:0,!(u>5||n!==d&&(l=this.getPlotBox(n,e,t),0<=l&&l<=2)||a!==d&&(h=this.getPlotBox(a,e,t),0<=h&&h<=2)||(d=l>0&&h>0?2*n:l<0&&h<0?2*a:A((n+a)/2||1,3),c=this.getPlotBox(d,e,t),0<=c&&c<=2)));)p=h,c>0?(a=d,h=c):(n=d,l=c)}getPlotBox(e,t,i){const s=this.scale,n=this.pointers,a=i.getRadiusX(),l=i.clone();l.setRadiusX(a+e).setRadiusY(a+e),s.arc=l,s.reflow(t),this.plotBbox=s.bbox;for(let c=0;c<n.length;c++)n[c].reflow(l),this.plotBbox=At.A.union(this.plotBbox,n[c].bbox);return this.getDiff(this.plotBbox,t)}getDiff(e,t){return Math.min(t.width()-e.width(),t.height()-e.height())}alignScale(e){const t=this.plotBbox.center(),i=e.center(),s=t.x-i.x,n=t.y-i.y,{scale:a,pointers:l}=this;a.arc.center.x-=s,a.arc.center.y-=n,a.reflow(e);for(let c=0;c<l.length;c++)l[c].reflow(a.arc),this.plotBbox=At.A.union(a.bbox,l[c].bbox)}_createModel(){const e=this.options,t=e.pointer,i=this.scale=new pf(e.scale,this.contextService);this.pointers=[];const s=Pt(t)?t:[t];for(let n=0;n<s.length;n++){const a=new EC(i,x({},s[n],{animation:{transitions:e.transitions}}));this.pointers.push(a)}}},{transitions:!0,gaugeArea:{background:""}}),w(class IC extends pf{rangeSegments(){const{min:e,max:t,rangePlaceholderColor:i,rangeLineCap:s}=this.options;return[{from:e,to:t,color:i,lineCap:s}]}hasRanges(){return!0}placeholderRangeAngle(e){const t=this.ranges.children[0].geometry();this.options.reverse?t.setEndAngle(e):t.setStartAngle(e)}addRange(e,t,i){const s=this.options.reverse,n=this.slotAngle(s?t:e),a=this.slotAngle(s?e:t),l=this.createRange(n,a,this.getRangeRadius(),i);return this.ranges.append(l),l}},{min:0,max:100,majorTicks:{visible:!1},minorTicks:{visible:!1},labels:{visible:!1},startAngle:0,endAngle:180,rangeLineCap:"round"});class mc extends he{constructor(e,t){super(e,t);const i=this.options,s=Math.abs(i.newAngle-i.oldAngle)/i.duration*1e3;i.duration=O(s,150,800);const n=e.elements.options.get("stroke.color"),a=e.currentColor();n!==a&&(this.startColor=new Ae.A(n),this.color=new Ae.A(a))}step(e){const{options:t,startColor:i,color:s}=this,n=ae(t.oldAngle,t.newAngle,e);if(this.element.angle(n),s){const a=A(ae(i.r,s.r,e)),l=A(ae(i.g,s.g,e)),c=A(ae(i.b,s.b,e));this.element.stroke(new Ae.A(a,l,c).toHex())}}}w(mc,{easing:xr,duration:150}),Me.current.register(Qg,mc);const LC=mc;w(class VC extends dc{repaint(){const{scale:e,options:t}=this,i=e.slotAngle(t._oldValue),s=e.slotAngle(t.value);this.animation&&this.animation.abort(),!1===t.animation.transitions?(this.angle(s),this.stroke(this.currentColor())):(this.animation=new LC(this,x(t.animation,{oldAngle:i,newAngle:s})),this.animation.play())}angle(e){const t=this.elements.geometry();this.scale.options.reverse?t.setStartAngle(e):t.setEndAngle(e),this.scale.placeholderRangeAngle(e)}stroke(e){this.elements.stroke(e)}render(){if(this.elements)return;const{scale:e,options:t}=this;!1!==t.animation&&x(t.animation,{startAngle:0,center:e.arc.center,reverse:e.options.reverse}),this.elements=e.addRange(e.options.min,this.options.value,{color:this.currentColor(),opacity:t.opacity,lineCap:e.options.rangeLineCap})}currentColor(){const{min:e,max:t}=this.scale.options,{colors:i,color:s,value:n}=this.options,a=H(n)?n:e;if(i)for(let l=0;l<i.length;l++){const{color:c,from:h=e,to:d=t}=i[l];if(h<=a&&a<=d)return c}return s}reflow(){this.render(),this.bbox=this.elements.bbox()}},{animation:{type:Qg,duration:150}});class qi{constructor(e){this.setOptions(e),this.initProperties()}initProperties(){}setOptions(e){this.options=Object.assign({},this.options,e),this.quietZoneLength=this.options.addQuietZone?2*this.options.quietZoneLength:0}encode(e,t,i){const s=C(e)?String(e):e;return this.initValue(s,t,i),this.options.addQuietZone&&this.addQuietZone(),this.addData(),this.options.addQuietZone&&this.addQuietZone(),{baseUnit:this.baseUnit,pattern:this.pattern}}initValue(){}addQuietZone(){this.pattern.push(this.options.quietZoneLength||10)}addData(){}invalidCharacterError(e){throw new Error(`Character "${e}" is not valid for symbology ${this.name}.`)}}w(qi,{quietZoneLength:10,addQuietZone:!0,addCheckSum:!0});const FC=Object.assign;class ff extends qi{initProperties(){super.initProperties(),FC(this,{name:"Code 11",characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221"})}initValue(e,t){this.pattern=[],this.value=e,this.width=t,this.totalUnits=0}addData(){const e=this.value;this.addPattern(this.START);for(let t=0;t<e.length;t++)this.addCharacter(e.charAt(t));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()}setBaseUnit(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)}addCheckSum(){const e=this.value;let t=e.length;const i=this.getWeightedSum(e,t,this.cCheckSumTotal)%this.checkSumMod;if(this.checksum=String(i),this.addPattern(this.characterMap[i]),t++,t>=this.kCheckSumMinLength){let s=(i+this.getWeightedSum(e,t,this.kCheckSumTotal))%this.checkSumMod;this.checksum+=s,this.addPattern(this.characterMap[s])}}getWeightedSum(e,t,i){let s=0;for(let n=0;n<e.length;n++)s+=this.weightedValue(this.getValue(e.charAt(n)),t,n,i);return s}weightedValue(e,t,i,s){return((t-i)%s||s)*e}getValue(e){return isNaN(e)?(e!==this.DASH&&this.invalidCharacterError(e),this.DASH_VALUE):parseInt(e,10)}addCharacter(e){const t=this.getValue(e);this.addPattern(this.characterMap[t])}addPattern(e){let t;for(let i=0;i<e.length;i++)t=parseInt(e.charAt(i),10),this.pattern.push(t),this.totalUnits+=t}}w(ff,{addCheckSum:!0});const mf=Object.assign;class xf extends qi{initProperties(){super.initProperties(),mf(this,{minBaseUnitLength:.7})}addData(){const e=this.value;this.addStart();for(let t=0;t<e.length;t++)this.addCharacter(e.charAt(t));this.options.addCheckSum&&this.pushCheckSum(),this.addStop(),this.prepareValues()}addCharacter(e){const t=this.characterMap[e];t||this.invalidCharacterError(e),this.addBase(t)}addBase(){}}class xc extends xf{initProperties(){super.initProperties(),mf(this,{name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}}})}initValue(e,t,i){this.width=t,this.height=i,this.value=e,this.dataLength=e.length,this.pattern=[],this.patternString=""}prepareValues(){const e=this.minBaseUnitLength,t=this.minRatio,i=Math.ceil(Math.max(.15*this.width,24));let s,n=this.maxRatio;if(this.height<i)throw new Error(`Insufficient height for Code39 encoding: the current height is ${this.height}px and the minimum height is ${i}px.`);for(s=this.getBaseUnit(n);s<e&&n>t;)n=parseFloat((n-.1).toFixed(1)),s=this.getBaseUnit(n);if(s<e){let a=Math.ceil(this.getBaseWidth(t)*e);throw new Error(`Insufficient width for Code39 encoding: the current width is ${this.width}px and the minimum width for value "${this.value}" is ${a}px.`)}this.ratio=n,this.baseUnit=s,this.patternString=this.patternString.substring(0,this.patternString.length-1),this.pattern=this.pattern.concat(this.patternString.replace(/ratio/g,n).split(this.splitCharacter))}getBaseUnit(e){return this.width/this.getBaseWidth(e)}getBaseWidth(e){return this.quietZoneLength+3*(e+2)*(this.dataLength+2)+this.gapWidth*(this.dataLength+1)}addStart(){this.addPattern(this.characterMap.START.pattern),this.addCharacterGap()}addBase(e){this.addPattern(e.pattern),this.addCharacterGap()}addStop(){this.addPattern(this.characterMap.START.pattern)}addPattern(e){for(let t=0;t<e.length;t++)this.patternString+=this.patternMappings[e.charAt(t)]}addCharacterGap(){this.patternString+=this.gapWidth+this.splitCharacter}}w(xc,{addCheckSum:!1});const vf={addCharacter(o){this.characterMap[o]?this.addBase(this.characterMap[o]):o.charCodeAt(0)>127?this.invalidCharacterError(o):this.addExtended(o.charCodeAt(0))},addExtended(o){let e;for(let t=0;t<this.extendedMappings.length;t++)if(e=this.extendedMappings[t].call(this,o),e){for(let i=0;i<e.length;i++)this.addBase(e[i]);return void(this.dataLength+=e.length-1)}},extendedMappings:[function(o){if(97<=o&&o<=122)return[this.characterMap[this.shiftCharacters[0]],this.characterMap[String.fromCharCode(o-32)]]},function(o){if(33<=o&&o<=58)return[this.characterMap[this.shiftCharacters[1]],this.characterMap[String.fromCharCode(o+32)]]},function(o){if(1<=o&&o<=26)return[this.characterMap[this.shiftCharacters[2]],this.characterMap[String.fromCharCode(o+64)]]},function(o){let e,t;if(this.specialAsciiCodes[o]){e=[];for(let i=0;i<this.specialAsciiCodes[o].length;i++)e.push(this.characterMap[this.shiftCharacters[3]]),e.push(this.characterMap[this.specialAsciiCodes[o][i]])}else t=6*Math.floor(o/32)+(o-27)%32+64,e=[this.characterMap[this.shiftCharacters[3]],this.characterMap[String.fromCharCode(t)]];return e}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":!1,"/":!1,$:!1,"%":!1},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]},zC=Object.assign;class bf extends xf{initProperties(){super.initProperties(),zC(this,{name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}})}initValue(e,t,i){this.value=e,this.width=t,this.height=i,this.pattern=[],this.values=[],this.dataLength=e.length}prepareValues(){let e=Math.ceil(Math.max(.15*this.width,24));if(this.height<e)throw new Error(`Insufficient height for Code93 encoding: the current height is ${this.height}px, the minimum required height is ${e}px.`);if(this.setBaseUnit(),this.baseUnit<this.minBaseUnitLength){const t=Math.ceil(this.minBaseUnitLength*(this.width/this.baseUnit));throw new Error(`Insufficient width for Code93 encoding: the current width is ${this.width}px and the minimum required width for value "${this.value}" is ${t}px.`)}}setBaseUnit(){this.baseUnit=this.width/(9*(this.dataLength+2+2)+this.quietZoneLength+1)}addStart(){this.addPattern(this.characterMap.START.pattern)}addStop(){this.addStart(),this.pattern.push(this.characterMap.TERMINATION_BAR)}addBase(e){this.addPattern(e.pattern),this.values.push(e.value)}pushCheckSum(){const e=this._getCheckValues();let t;this.checksum=e.join("");for(let i=0;i<e.length;i++)t=this.characterMap[this._findCharacterByValue(e[i])],this.addPattern(t.pattern)}_getCheckValues(){const e=this.values,t=e.length;let s,n,a,i=0;for(a=t-1;a>=0;a--)i+=this.weightedValue(e[a],t-a,this.cCheckSumTotal);for(s=i%this.checkSumMod,i=this.weightedValue(s,1,this.kCheckSumTotal),a=t-1;a>=0;a--)i+=this.weightedValue(e[a],t-a+1,this.kCheckSumTotal);return n=i%this.checkSumMod,[s,n]}_findCharacterByValue(e){for(let t in this.characterMap)if(this.characterMap[t].value===e)return t}weightedValue(e,t,i){return(t%i||i)*e}addPattern(e){let t;for(let i=0;i<e.length;i++)t=parseInt(e.charAt(i),10),this.pattern.push(t)}}const UC=/^\d+$/,GC=Object.assign,vc=/^\d+$/,XC=/^[a-z0-9]+$/i,ye=Object.assign;class yr{constructor(e){this.encoding=e,this.initProperties()}initProperties(){}addStart(){}is(){}isCode(){return!1}move(){}pushState(){}}class _f extends yr{constructor(e,t){super(e),this.states=t,this._initMoves(t)}initProperties(){super.initProperties(),x(this,{FNC4:"FNC4",SHIFT:98})}addStart(){this.encoding.addPattern(this.START)}is(e,t){let i=e.charCodeAt(t);return this.isCode(i)}move(e){let t=0;for(;!this._moves[t].call(this,e)&&t<this._moves.length;)t++}pushState(e){let n,i=e.value,s=i.length;if(z("C",this.states)){let a=i.substr(e.index).match(/\d{4,}/g);a&&(s=i.indexOf(a[0],e.index))}for(;(n=e.value.charCodeAt(e.index))>=0&&this.isCode(n)&&e.index<s;)this.encoding.addPattern(this.getValue(n)),e.index++}_initMoves(e){this._moves=[],z(this.FNC4,e)&&this._moves.push(this._moveFNC),z(this.shiftKey,e)&&this._moves.push(this._shiftState),this._moves.push(this._moveState)}_moveFNC(e){if(e.fnc)return e.fnc=!1,e.previousState===this.key}_shiftState(e){if(e.previousState===this.shiftKey&&(e.index+1>=e.value.length||this.encoding[this.shiftKey].is(e.value,e.index+1)))return this.encoding.addPattern(this.SHIFT),e.shifted=!0,!0}_moveState(){return this.encoding.addPattern(this.MOVE),!0}}const Ns={};Ns.A=class extends _f{initProperties(){super.initProperties(),ye(this,{key:"A",shiftKey:"B",MOVE:101,START:103})}isCode(e){return 0<=e&&e<96}getValue(e){return e<32?e+64:e-32}},Ns.B=class extends _f{initProperties(){super.initProperties(),ye(this,{key:"B",shiftKey:"A",MOVE:100,START:104})}isCode(e){return 32<=e&&e<128}getValue(e){return e-32}},Ns.C=class extends yr{initProperties(){super.initProperties(),ye(this,{key:"C",MOVE:99,START:105})}addStart(){this.encoding.addPattern(this.START)}is(e,t){let i=bc(e,t,4);return(t+4<=e.length||2===e.length)&&vc.test(i)}move(){this.encoding.addPattern(this.MOVE)}pushState(e){let t;for(;(t=bc(e.value,e.index,2))&&vc.test(t)&&2===t.length;)this.encoding.addPattern(parseInt(t,10)),e.index+=2}getValue(e){return e}},Ns.FNC4=class extends yr{constructor(e,t){super(e),this._initSubStates(t)}initProperties(){super.initProperties(),ye(this,{key:"FNC4",dependentStates:["A","B"]})}addStart(e){let t=e.value.charCodeAt(0)-128,i=this._getSubState(t);this.encoding[i].addStart()}is(e,t){let i=e.charCodeAt(t);return this.isCode(i)}isCode(e){return 128<=e&&e<256}pushState(e){let n,t=this._initSubState(e),i=this.encoding,s=t.value.length;if(e.index+=s,s<3)for(;t.index<s;t.index++)n=t.value.charCodeAt(t.index),t.state=this._getSubState(n),t.previousState!==t.state&&(t.previousState=t.state,i[t.state].move(t)),i.addPattern(i[t.state].MOVE),i.addPattern(i[t.state].getValue(n));else t.state!==t.previousState&&i[t.state].move(t),this._pushStart(t),i.pushData(t,this.subStates),e.index<e.value.length&&this._pushStart(t);e.fnc=!0,e.state=t.state}_pushStart(e){this.encoding.addPattern(this.encoding[e.state].MOVE),this.encoding.addPattern(this.encoding[e.state].MOVE)}_initSubState(e){const t={value:this._getAll(e.value,e.index),index:0};return t.state=this._getSubState(t.value.charCodeAt(0)),t.previousState=e.previousState===this.key?t.state:e.previousState,t}_initSubStates(e){this.subStates=[];for(let t=0;t<e.length;t++)z(e[t],this.dependentStates)&&this.subStates.push(e[t])}_getSubState(e){for(let t=0;t<this.subStates.length;t++)if(this.encoding[this.subStates[t]].isCode(e))return this.subStates[t]}_getAll(e,t){let i,s="",n=t;for(;(i=e.charCodeAt(n++))&&this.isCode(i);)s+=String.fromCharCode(i-128);return s}},Ns.FNC1=class extends yr{constructor(e,t){super(e),this.states=t}initProperties(){super.initProperties(),ye(this,{key:"FNC1",startState:"C",startAI:"(",endAI:")",dependentStates:["C","B"],applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[-9]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102})}addStart(){this.encoding[this.startState].addStart()}is(){return z(this.key,this.states)}pushState(e){let l,c,h,t=this.encoding,i=e.value.replace(/\s/g,""),s=new RegExp("["+this.startAI+this.endAI+"]","g"),n=e.index,a={state:this.startState};for(t.addPattern(this.START);;){if(a.index=0,h=i.charAt(n)===this.startAI?2:0,l=h>0?this.getBySeparator(i,n):this.getByLength(i,n),l.ai.length)c=n+h+l.id.length+l.ai.length;else if(c=i.indexOf(this.startAI,n+1),c<0){if(n+l.ai.max+l.id.length+h<i.length)throw new Error("Separators are required after variable length identifiers");c=i.length}if(a.value=i.substring(n,c).replace(s,""),this.validate(l,a.value),t.pushData(a,this.dependentStates),c>=i.length)break;n=c,a.state!==this.startState&&(t[this.startState].move(a),a.state=this.startState),l.ai.length||t.addPattern(this.START)}e.index=e.value.length}validate(e,t){let i=t.substr(e.id.length),s=e.ai;if(!s.type&&!vc.test(i))throw new Error("Application identifier "+e.id+" is numeric only but contains non numeric character(s).");if("alphanumeric"===s.type&&!XC.test(i))throw new Error("Application identifier "+e.id+" is alphanumeric only but contains non alphanumeric character(s).");if(s.length&&s.length!==i.length)throw new Error("Application identifier "+e.id+" must be "+s.length+" characters long.");if(s.min&&s.min>i.length)throw new Error("Application identifier "+e.id+" must be at least "+s.min+" characters long.");if(s.max&&s.max<i.length)throw new Error("Application identifier "+e.id+" must be at most "+s.max+" characters long.")}getByLength(e,t){let i,s;for(let n=2;n<=4;n++)if(i=bc(e,t,n),s=this.getApplicationIdentifier(i)||this.getApplicationIdentifier(i.substring(0,i.length-1)),s)return{id:i,ai:s};this.unsupportedAIError(i)}unsupportedAIError(e){throw new Error("'"+e+"' is not a supported Application Identifier")}getBySeparator(e,t){let i=e.indexOf(this.startAI,t),s=e.indexOf(this.endAI,i),n=e.substring(i+1,s),a=this.getApplicationIdentifier(n)||this.getApplicationIdentifier(n.substr(n.length-1));return a||this.unsupportedAIError(n),{ai:a,id:n}}getApplicationIdentifier(e){let t=this.applicationIdentifiers,i=t.multiKey;if(t[e])return t[e];for(let s=0;s<i.length;s++){if(i[s].ids&&z(e,i[s].ids))return i[s].type;if(i[s].ranges){let n=i[s].ranges;for(let a=0;a<n.length;a++)if(n[a][0]<=e&&e<=n[a][1])return i[s].type}}}};class Gn extends qi{constructor(e){super(e),this._initStates()}initProperties(){super.initProperties(),ye(this,{characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106})}_initStates(){for(let e=0;e<this.states.length;e++)this[this.states[e]]=new Ns[this.states[e]](this,this.states)}initValue(e,t,i){this.pattern=[],this.value=e,this.width=t,this.height=i,this.checkSum=0,this.totalUnits=0,this.index=0,this.position=1}addData(){let e={value:this.value,index:0,state:""};0!==this.value.length&&(e.state=e.previousState=this.getNextState(e,this.states),this.addStart(e),this.pushData(e,this.states),this.addCheckSum(),this.addStop(),this.setBaseUnit())}pushData(e,t){for(;this[e.state].pushState(e),!(e.index>=e.value.length);)if(e.shifted){let s=e.state;e.state=e.previousState,e.previousState=s,e.shifted=!1}else e.previousState=e.state,e.state=this.getNextState(e,t),this[e.state].move(e)}addStart(e){this[e.state].addStart(e),this.position=1}addCheckSum(){this.checksum=this.checkSum%103,this.addPattern(this.checksum)}addStop(){this.addPattern(this.STOP)}setBaseUnit(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)}addPattern(e){const t=this.characterMap[e].toString();let i;for(let s=0;s<t.length;s++)i=parseInt(t.charAt(s),10),this.pattern.push(i),this.totalUnits+=i;this.checkSum+=e*this.position++}getNextState(e,t){for(let i=0;i<t.length;i++)if(this[t[i]].is(e.value,e.index))return t[i];this.invalidCharacterError(e.value.charAt(e.index))}}function bc(o,e,t){return o.substring(e,e+t)}const Hn=Object.assign;class wr extends qi{initProperties(){super.initProperties(),Hn(this,{characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:"",checkSums:ek})}initValue(e,t){this.pattern=[],this.value=e,this.checkSumLength=0,this.width=t}setBaseUnit(){this.baseUnit=this.width/(12*(this.value.length+this.checkSumLength)+this.quietZoneLength+7)}addData(){const e=this.value;this.addPattern(this.START);for(let t=0;t<e.length;t++)this.addCharacter(e.charAt(t));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()}addCharacter(e){const t=this.characterMap[e];t||this.invalidCharacterError(e),this.addPattern(t)}addPattern(e){for(let t=0;t<e.length;t++)this.pattern.push(parseInt(e.charAt(t),10))}addCheckSum(){const t=this.checkSums[this.checkSumType].call(this.checkSums,this.value);this.checksum=t.join("");for(let i=0;i<t.length;i++)this.checkSumLength++,this.addPattern(this.characterMap[t[i]])}}const ek={Modulo10(o){let i,s,n,e=[0,""],t=o.length%2;for(i=0;i<o.length;i++)e[(i+t)%2]+=parseInt(o.charAt(i),10);for(n=e[0],s=(2*e[1]).toString(),i=0;i<s.length;i++)n+=parseInt(s.charAt(i),10);return[(10-n%10)%10]},Modulo11(o){let s,n,e=0,i=o.length;for(let a=0;a<i;a++)s=((i-a)%6||6)+1,e+=s*o.charAt(a);return n=(11-e%11)%11,10!==n?[n]:[1,0]},Modulo11Modulo10(o){let t,e=this.Modulo11(o);return t=o+e[0],e.concat(this.Modulo10(t))},Modulo10Modulo10(o){let t,e=this.Modulo10(o);return t=o+e[0],e.concat(this.Modulo10(t))}},ik=Object.assign;class yf extends qi{initProperties(){super.initProperties(),ik(this,{name:"EAN 13",keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}})}initValue(e,t,i){const s=String(e);if(12!==s.length||/\D/.test(s))throw new Error('The value of the "EAN13" encoding should be 12 symbols');this.pattern=[],this.options.height=i,this.baseUnit=t/(95+this.quietZoneLength),this.value=s,this.checksum=this.calculateChecksum(),this.leftKey=s[0],this.leftPart=s.substr(1,6),this.rightPart=s.substr(7)+this.checksum}addData(){this.addPieces(this.characterMap.start),this.addSide(this.leftPart,this.leftKey),this.addPieces(this.characterMap.middle),this.addSide(this.rightPart),this.addPieces(this.characterMap.start)}addSide(e,t){for(let i=0;i<e.length;i++)t&&parseInt(this.keyTable[t].charAt(i),10)?this.addPieces(Array.prototype.slice.call(this.characterMap.digits[e.charAt(i)]).reverse(),!0):this.addPieces(this.characterMap.digits[e.charAt(i)],!0)}addPieces(e,t){for(let i=0;i<e.length;i++)this.pattern.push(t?{y1:0,y2:.95*this.options.height,width:e[i]}:e[i])}calculateChecksum(){let e=0,t=0,i=this.value.split("").reverse().join("");for(let n=0;n<i.length;n++)n%2?t+=parseInt(i.charAt(n),10):e+=parseInt(i.charAt(n),10);return(10-(3*e+t)%10)%10}}const sk=Object.assign,wf={code11:ff,code39:xc,code39extended:class NC extends xc{initProperties(){super.initProperties(),x(this,vf,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}})}},code93:bf,code93extended:class jC extends bf{initProperties(){super.initProperties(),x(this,vf,{name:"Code 93 extended",pushCheckSum:function(){const e=this._getCheckValues();let t;this.checksum=e.join("");for(let i=0;i<e.length;i++)if(t=e[i],this.shiftValuesAsciiCodes[t])this.addExtended(this.shiftValuesAsciiCodes[t]);else{const s=this._findCharacterByValue(t);this.addPattern(this.characterMap[s].pattern)}}})}},code128:class QC extends Gn{initProperties(){super.initProperties(),ye(this,{name:"Code 128",states:["C","B","A","FNC4"]})}},code128a:class YC extends Gn{initProperties(){super.initProperties(),ye(this,{name:"Code 128 A",states:["A"]})}},code128b:class WC extends Gn{initProperties(){super.initProperties(),ye(this,{name:"Code 128 B",states:["B"]})}},code128c:class $C extends Gn{initProperties(){super.initProperties(),ye(this,{name:"Code 128 C",states:["C"]})}},"gs1-128":class ZC extends Gn{initProperties(){super.initProperties(),ye(this,{name:"Code GS1-128",states:["FNC1","C","B"]})}},msimod10:class KC extends wr{initProperties(){super.initProperties(),Hn(this,{name:"MSI Modulo10",checkSumType:"Modulo10"})}},msimod11:class JC extends wr{initProperties(){super.initProperties(),Hn(this,{name:"MSI Modulo11",checkSumType:"Modulo11"})}},msimod1010:class qC extends wr{initProperties(){super.initProperties(),Hn(this,{name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"})}},msimod1110:class tk extends wr{initProperties(){super.initProperties(),Hn(this,{name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"})}},postnet:class HC extends qi{initProperties(){super.initProperties(),GC(this,{name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]})}initValue(e,t,i){this.height=i,this.width=t,this.baseHeight=i/2,this.value=e.replace(new RegExp(this.DIGIT_SEPARATOR,"g"),""),this.pattern=[],this.validate(this.value),this.checkSum=0,this.setBaseUnit()}addData(){const e=this.value;this.addPattern(this.START);for(let t=0;t<e.length;t++)this.addCharacter(e.charAt(t));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.START),this.pattern.pop()}addCharacter(e){const t=this.characterMap[e];this.checkSum+=parseInt(e,10),this.addPattern(t)}addCheckSum(){this.checksum=(10-this.checkSum%10)%10,this.addCharacter(this.checksum)}setBaseUnit(){this.baseUnit=this.width/(10*(this.value.length+1)+3+this.quietZoneLength)}validate(e){if(UC.test(e)||this.invalidCharacterError(e.match(/[^0-9]/)[0]),!z(e.length,this.VALID_CODE_LENGTHS))throw new Error("Invalid value length. Valid lengths for the Postnet symbology are "+this.VALID_CODE_LENGTHS.join(",")+".")}addPattern(e){let t;for(let i=0;i<e.length;i++)t=this.height-this.baseHeight*e.charAt(i),this.pattern.push({width:1,y1:t,y2:this.height}),this.pattern.push(1)}},ean8:class nk extends yf{initProperties(){super.initProperties(),sk(this,{name:"EAN 8"})}initValue(e,t,i){if(7!==e.length||/\D/.test(e))throw new Error("Invalid value provided");this.value=e,this.options.height=i,this.checksum=this.calculateChecksum(this.value),this.leftPart=this.value.substr(0,4),this.rightPart=this.value.substr(4)+this.checksum,this.pattern=[],this.baseUnit=t/(67+this.quietZoneLength)}},ean13:yf};function Cf(o,e){const t=o.style.display;"canvas"===e&&(o.style.display="block");const i={width:o.clientWidth,height:o.clientHeight};return o.style.display=t,i}w(class ak{constructor(e,t,i=md){this.options=x({},this.options,t),this.element=e,this.onError=i,this._initElement(),this._initSurface(),this._setOptions(t),t&&C(t.value)&&this.redraw()}destroy(){this._destroySurface()}_initElement(){ut(this.element,"k-barcode")}_initSurface(){const{options:e,surface:t}=this;(!t||t.options.type!==e.renderAs)&&(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())}_createSurface(){return Bi.A.create(this.surfaceElement,{type:this.options.renderAs})}_destroySurface(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())}_initSurfaceElement(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))}_destroySurfaceElement(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)}setOptions(e){this._setOptions(e),this._initSurface(),this.redraw()}redraw(){let e=this._getSize();this.surface.clear(),this.surface.setSize({width:e.width,height:e.height}),this.createVisual(),this.surface.draw(this.visual)}getSize(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}}_resize(){this.redraw()}createVisual(){this.visual=this._render()}_render(){const e=this.options,t=e.value,i=e.text,s=Z(i.margin),n=this._getSize(),a=e.border||{},l=this.encoding,c=new k(0,0,n.width,n.height).unpad(a.width).unpad(e.padding);let d,p,u,h=c.height();const g=new et.A;this.contentBox=c,g.append(this._getBackground(n)),i.visible&&(u=Yd.A(t,{font:i.font}).height,h-=u+s.top+s.bottom);try{d=l.encode(t,c.width(),h)}catch(f){return this.onError(f),g}return i.visible&&(p=t,e.checksum&&C(l.checksum)&&(p+=" "+l.checksum),g.append(this._getText(p))),this.barHeight=h,this._bandsGroup=this._getBands(d.pattern,d.baseUnit),g.append(this._bandsGroup),g}exportVisual(){return this._render()}_getSize(){const t=Cf(this.element,this.options.renderAs),i=new Xl.A(300,100);return t.width>0&&(i.width=t.width),t.height>0&&(i.height=t.height),this.options.width&&(i.width=this.options.width),this.options.height&&(i.height=this.options.height),i}value(e){if(!C(e))return this.options.value;this.options.value=String(e),this.redraw()}_getBands(e,t){const i=this.contentBox;let n,a,s=i.x1;const l=new et.A;for(let c=0;c<e.length;c++){if(a=re(e[c])?e[c]:{width:e[c],y1:0,y2:this.barHeight},n=a.width*t,c%2){const h=At.A.fromPoints(new j.A(s,a.y1+i.y1),new j.A(s+n,a.y2+i.y1)),d=M.w.fromRect(h,{fill:{color:this.options.color},stroke:null});l.append(d)}s+=n}return l}_getBackground(e){const t=this.options,i=t.border||{},s=new k(0,0,e.width,e.height).unpad(i.width/2);return M.w.fromRect(s.toRect(),{fill:{color:t.background},stroke:{color:i.width?i.color:"",width:i.width,dashType:i.dashType}})}_getText(e){const t=this.options.text,i=this._textbox=new Ht(e,{font:t.font,color:t.color,align:"center",vAlign:"bottom",margin:t.margin});return i.reflow(this.contentBox),i.renderVisual(),i.visual}_setOptions(e){if(this.type=(e.type||this.options.type).toLowerCase(),"upca"===this.type&&(this.type="ean13",e.value="0"+e.value),"upce"===this.type&&(this.type="ean8",e.value="0"+e.value),!wf[this.type])throw new Error(`Encoding '${this.type}' is not supported.`);this.encoding=new wf[this.type],this.options=x({},this.options,e)}},{name:"Barcode",renderAs:"svg",value:"",type:"code39",checksum:!1,width:0,height:0,color:"black",background:"white",text:{visible:!0,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}});var hk=T(3244);const zs=Object.assign;function kf(o,e){let t=[],i=0;for(;i<o.length;)t.push(o.substring(i,i+e)),i+=e;return t}function Yt(o,e){let t=Number(o).toString(2);return t.length<e&&(t=new Array(e-t.length+1).join(0)+t),t}function Cr(o){return parseInt(o,2)}class dk{constructor(e){this.matrix=e,this.row=e.length-1,this.column=e.length-1,this.startColumn=this.column,this.dir=-1,this.c=0}move(){this.row+=this.dir*this.c,this.c^=1,this.column=this.startColumn-this.c}getNextCell(){for(;void 0!==this.matrix[this.row][this.column];)this.move(),(this.row<0||this.row>=this.matrix.length)&&(this.dir=-this.dir,this.startColumn-=8!==this.startColumn?2:3,this.column=this.startColumn,this.row=this.dir<0?this.matrix.length-1:0);return{row:this.row,column:this.column}}getNextRemainderCell(){if(this.move(),void 0===this.matrix[this.row][this.column])return{row:this.row,column:this.column}}}class Af{constructor(e,t){this.dataString=e,this.version=t}}const Sf="alphanumeric",gk=/^\d+/,Tf="A-Z0-9 $%*+./:-",mk=new RegExp("^[A-Z $%*+./:-]+"),Mf=new RegExp("^["+Tf+"]+"),Pf=new RegExp("^[^"+Tf+"]+");function Ef(o,e,t,i,s){let p,u,n=gk.exec(o),a=n?n[0]:"",l=mk.exec(o),c=l?l[0]:"",h=Mf.exec(o),d=h?h[0]:"";return a&&(a.length>=e||o.length===a.length||a.length>=t&&!Mf.test(o.charAt(a.length)))?(p="numeric",u=a):d&&(o.length===d.length||d.length>=i||s===Sf)?(p=Sf,u=a||c):(p="byte",u=d?d+Pf.exec(o.substring(d.length))[0]:Pf.exec(o)[0]),{mode:p,modeString:u}}class _c{constructor(){this.initProperties()}initProperties(){zs(this,{modeIndicator:"",bitsInCharacterCount:[]})}getVersionIndex(e){return e<10?0:e>26?2:1}getBitsCharacterCount(e){return this.bitsInCharacterCount[this.getVersionIndex(e||40)]}getModeCountString(e,t){return this.modeIndicator+Yt(e,this.getBitsCharacterCount(t))}encode(){}getStringBitsLength(){}getValue(){}}let yc={numeric:new class xk extends _c{initProperties(){super.initProperties(),zs(this,{bitsInCharacterCount:[10,12,14],modeIndicator:"0001"})}getValue(e){return parseInt(e,10)}encode(e,t){let a,s=kf(e,3),n=this.getModeCountString(e.length,t);for(a=0;a<s.length-1;a++)n+=Yt(s[a],10);return n+Yt(s[a],1+3*s[a].length)}getStringBitsLength(e,t){let i=e%3;return 4+this.getBitsCharacterCount(t)+10*Math.floor(e/3)+3*i+(0===i?0:1)}},alphanumeric:new class vk extends _c{initProperties(){super.initProperties(),zs(this,{characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010"})}getValue(e){return this.characters[e]}encode(e,t){let n,a,i=kf(e,2),s=this.getModeCountString(e.length,t);for(a=0;a<i.length-1;a++)n=45*this.getValue(i[a].charAt(0))+this.getValue(i[a].charAt(1)),s+=Yt(n,11);return n=2===i[a].length?45*this.getValue(i[a].charAt(0))+this.getValue(i[a].charAt(1)):this.getValue(i[a].charAt(0)),s+Yt(n,1+5*i[a].length)}getStringBitsLength(e,t){return 4+this.getBitsCharacterCount(t)+11*Math.floor(e/2)+e%2*6}},byte:new class bk extends _c{initProperties(){super.initProperties(),zs(this,{bitsInCharacterCount:[8,16,16],modeIndicator:"0100"})}getValue(e){let t=e.charCodeAt(0);if(t<=127||160<=t&&t<=255)return t;throw new Error(`Unsupported character in QR Code: "${e}".`)}encode(e,t){let i=this,s=i.getModeCountString(e.length,t);for(let n=0;n<e.length;n++)s+=Yt(i.getValue(e.charAt(n)),8);return s}getStringBitsLength(e,t){return 4+this.getBitsCharacterCount(t)+8*e}}};const Xn=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}];function Df(o,e){let t=0,i=Xn.length-1,s=Math.floor(Xn.length/2);do{o<Xn[s][e].totalDataCodewords?i=s:t=s,s=t+Math.floor((i-t)/2)}while(i-t>1);return o<=Xn[t][e].totalDataCodewords?s+1:i+1}class Ok{getEncodingResult(e,t){let i=function Dk(o){let t,e=[],i=0,s=o;for(e.push(Ef(s,8,5,8,t)),t=e[0].mode,s=s.substr(e[0].modeString.length);s.length>0;){let n=Ef(s,17,9,16,t);n.mode!==t?(t=n.mode,e.push(n),i++):e[i].modeString+=n.modeString,s=s.substr(n.modeString.length)}return e}(e),s=function Ck(o){let t,e=0;for(let i=0;i<o.length;i++)t=yc[o[i].mode],e+=t.getStringBitsLength(o[i].modeString.length);return Math.ceil(e/8)}(i),n=Df(s,t),a=function kk(o,e){let i,t="";for(let s=0;s<o.length;s++)i=yc[o[s].mode],t+=i.encode(o[s].modeString,e);return t}(i,n);return new Af(a,n)}}class Rk{constructor(){this.initProperties(),this.mode=yc[this.encodingMode]}initProperties(){zs(this,{encodingMode:"byte",utfBOM:"111011111011101110111111",initialModeCountStringLength:20,ranges:[128,2048,65536,2097152,67108864]})}getEncodingResult(e,t){let i=this.encode(e),n=Df(this.getDataCodewordsCount(i),t),a=this.mode.getModeCountString(i.length/8,n)+i;return new Af(a,n)}getDataCodewordsCount(e){return Math.ceil((this.initialModeCountStringLength+e.length)/8)}encode(e){let t=this.utfBOM;for(let i=0;i<e.length;i++)t+=this.encodeCharacter(e.charCodeAt(i));return t}encodeCharacter(e){let t=this.getBytesCount(e),i=t-1,s="";if(1===t)s=Yt(e,8);else{let n=8-t;for(let a=0;a<i;a++)s=Yt(e>>6*a&63|128,8)+s;s=(e>>6*i|255>>n<<n).toString(2)+s}return s}getBytesCount(e){let t=this.ranges;for(let i=0;i<t.length;i++)if(e<t[i])return i+1}}let wc={1:0},Si={0:1},Lk={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},Cc=[1,0,1,1,1],Vk=[1,0,1],Bk={L:"01",M:"00",Q:"11",H:"10"},jk=["11101100","00010001"],Uk=93,kc=[(o,e)=>(o+e)%2==0,(o,e)=>o%2==0,(o,e)=>e%3==0,(o,e)=>(o+e)%3==0,(o,e)=>(Math.floor(o/2)+Math.floor(e/3))%2==0,(o,e)=>o*e%2+o*e%3==0,(o,e)=>(o*e%2+o*e%3)%2==0,(o,e)=>((o+e)%2+o*e%3)%2==0];const Ac=[[1,0],[1,25,0]];function zt(o,e,t,i){for(let s=0;s<o.length;s++)o[s][t][i]=e}function If(o,e,t,i){for(let s=0;s<kc.length;s++)o[s][t][i]=kc[s](t,i)?1^e:parseInt(e,10)}function Yk(o,e){let t=[];for(let s=o.length-2;s>=0;s--)t[s]=o[s]^e[s];return t}function Wk(o,e){let t=[];for(let i=0;i<o.length;i++)for(let s=0;s<e.length;s++)t[i+s]=void 0===t[i+s]?(o[i]+(e[s]>=0?e[s]:0))%255:wc[Si[t[i+s]]^Si[(o[i]+e[s])%255]];return t}function Qk(o,e){let t=[],i=o.length-1;do{t[i]=Si[(o[i]+e)%255],i--}while(void 0!==o[i]);return t}function Zk(o,e){let l,c,t=Ac[e-1],i=new Array(e).concat(o),s=new Array(i.length-t.length).concat(t),n=o.length,a=[];for(c=0;c<n;c++)l=Qk(s,wc[i[i.length-1]]),s.splice(0,1),i=Yk(l,i);for(c=i.length-1;c>=0;c--)a[e-1-c]=Yt(i[c],8);return a}function Rf(o,e,t){let i=Cr(e),s=e.length-1,n=o<<s,l=Yt(o,t-s),c=function qk(o,e){let t=e.toString(2).length,i=o.toString(2).length,s=o;do{s^=e<<i-t,i=s.toString(2).length}while(i>=t);return s}(n,i);return c=l+Yt(c,s),c}function Yn(o,e){return parseInt(o.charAt(e),10)}function Lf(o,e){let i,s,t=o[0],n=0,a=e.length;for(i=0,s=8;i<=8;i++)6!==i&&zt(o,Yn(e,a-1-n++),i,s);for(i=8,s=7;s>=0;s--)6!==s&&zt(o,Yn(e,a-1-n++),i,s);for(n=0,s=t.length-1,i=8;s>=t.length-8;s--)zt(o,Yn(e,a-1-n++),i,s);for(zt(o,1,t.length-8,8),i=t.length-7,s=8;i<t.length;i++)zt(o,Yn(e,a-1-n++),i,s)}function Vf(o,e){let c,h,d,i=o[0].length,n=i-11,a=i-11;for(let p=0;p<e.length;p++)c=Math.floor(p/3),h=p%3,d=Yn(e,e.length-p-1),zt(o,d,0+c,n+h),zt(o,d,a+h,0+c)}function kr(o,e,t,i){let a,s=e.length+2,n=e.length+1;for(let l=0;l<e.length;l++)for(let c=l;c<s-l;c++)a=e[l],zt(o,a,t+c,i+l),zt(o,a,t+l,i+c),zt(o,a,t+n-c,i+n-l),zt(o,a,t+n-l,i+n-c)}function Sc(o,e,t,i){let s=t,n=i,a=o[0];do{zt(o,0,s,i),zt(o,0,t,n),s+=e[0],n+=e[1]}while(s>=0&&s<a.length)}function Bf(o,e,t,i,s){e[o][i]=(e[o][i]<<1^s)%128,e[o][i]===Uk&&(t[o]+=40)}function Ff(o,e,t,i,s,n){t[o][n]===i?s[o][n]++:(t[o][n]=i,s[o][n]>=5&&(e[o]+=3+s[o][n]-5),s[o][n]=1)}function rA(o,e){let t=Math.floor(o/e*100),i=t%5,s=Math.abs(t-i-50),n=Math.abs(t+5-i-50);return 10*Math.min(s/5,n/5)}(function Xk(){let o,e;for(e=1;e<255;e++)o=2*Si[e-1],o>255&&(o^=285),Si[e]=o,wc[o]=e;o=2*Si[e-1]^285,Si[e]=o,Si[-1]=0})(),function $k(){for(let e=2;e<=68;e++)Ac[e]=Wk(Ac[e-1],[e,0])}();const Wn=Math.round,cA=[[0,1],[1,1],[1,2],[2,2],[2,1],[3,1],[3,0],[2,0],[2,-1],[1,-1],[1,0]],Nf=[[0,1],[1,1],[1,0]];w(class hA{constructor(e,t,i=md){this.options=x({},this.options,t),this.element=e,this.wrapper=this.element,this.onError=i,this._initElement(),this._initSurface(),this.setOptions(t)}destroy(){this._destroySurface()}_initElement(){ut(this.element,"k-qrcode")}_initSurface(){const{options:e,surface:t}=this;(!t||t.options.type!==e.renderAs)&&(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())}_createSurface(){return Bi.A.create(this.surfaceElement,{type:this.options.renderAs})}_destroySurface(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())}_initSurfaceElement(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))}_destroySurfaceElement(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)}redraw(){let e=this._getSize();this.surface.clear(),this.surface.setSize({width:e,height:e}),this.createVisual(),this.surface.draw(this.visual)}getSize(){const e=this.element,t=e.clientWidth,i=e.clientHeight,s={width:0,height:0};return t>0&&(s.width=t),i&&(s.height=i),s}_resize(){this.redraw()}createVisual(){this.visual=this._render()}exportVisual(){return this._render()}_render(){let t,a,l,c,h,d,e=this._value,i=this.options.border||{},s=this.options.padding||0,n=i.width||0;i.width=n;let p=new et.A;try{e&&(l=function lA(o,e,t){let i=function aA(o){return o&&o.toLowerCase().indexOf("utf_8")>=0?new Rk:new Ok}(t),s=i.getEncodingResult(o,e),n=s.version,a=Xn[n-1][e],l=function Hk(o,e){let t=8*e,i=0,s=0,n=o;for(;n.length<t&&i<4;)n+="0000".charAt(i++);for(n.length%8!=0&&(n+=new Array(9-n.length%8).join("0"));n.length<t;)n+=jk[s],s^=1;return n}(s.dataString,a.totalDataCodewords),c=function Kk(o,e){let n,l,c,h,d,t=0,i=[],s=[],a=e.groups;for(let p=0;p<a.length;p++){c=a[p][0];for(let u=0;u<c;u++){l=a[p][1],n=[],h=[];for(let g=1;g<=l;g++)d=o.substring(t,t+8),n.push(d),h[l-g]=Cr(d),t+=8;i.push(n),s.push(Zk(h,e.errorCodewordsPerBlock))}}return[i,s]}(l,a),h=function tA(o){let e=[],t=17+4*o;for(let i=0;i<kc.length;i++){e[i]=new Array(t);for(let s=0;s<t;s++)e[i][s]=new Array(t)}return e}(n);(function iA(o){let e=o[0].length;kr(o,Cc,0,0),Sc(o,[-1,-1],7,7),kr(o,Cc,e-7,0),Sc(o,[1,-1],e-8,7),kr(o,Cc,0,e-7),Sc(o,[-1,1],7,e-8)})(h),function sA(o,e){if(e<2)return;let a,l,t=o[0],i=t.length,s=Math.floor(e/7),n=[6],c=0;for((a=Lk[e])?l=(i-13-a)/s:a=l=(i-13)/(s+1),n.push(n[c++]+a);n[c]+l<i;)n.push(n[c++]+l);for(let h=0;h<n.length;h++)for(let d=0;d<n.length;d++)void 0===t[n[h]][n[d]]&&kr(o,Vk,n[h]-2,n[d]-2)}(h,n),function nA(o){let i=1,s=o[0].length;for(let n=8;n<s-8;n++)zt(o,i,6,n),zt(o,i,n,6),i^=1}(h),n>=7&&Vf(h,Yt(0,18)),Lf(h,Yt(0,15)),function Gk(o,e){let i,s,n,t=new dk(o[0]);for(let a=0;a<e.length;a++)for(i=e[a],s=0;i.length>0;){for(let l=0;l<i.length;l++)for(let c=0;c<8;c++)n=t.getNextCell(),If(o,i[l][s].charAt(c),n.row,n.column);for(s++;i[0]&&s===i[0].length;)i.splice(0,1)}for(;n=t.getNextRemainderCell();)If(o,0,n.row,n.column)}(h,c);let d=function oA(o){let a,l,e=[],t=[],i=[],s=[],n=[],d=o[0].length;for(l=0;l<o.length;l++)e[l]=0,i[l]=0,n[l]=[0,0],s[l]=[0,0],t[l]=[];for(let f=0;f<d;f++)for(let m=0;m<d;m++)for(let v=0;v<o.length;v++)a=o[v],i[v]+=parseInt(a[f][m],10),t[v][0]===a[f][m]&&f+1<d&&m-1>=0&&a[f+1][m]===t[v][0]&&a[f+1][m-1]===t[v][0]&&(e[v]+=3),Bf(v,s,e,0,a[f][m]),Bf(v,s,e,1,a[m][f]),Ff(v,e,t,a[f][m],n,0),Ff(v,e,t,a[m][f],n,1);let u,p=d*d,g=Number.MAX_VALUE;for(l=0;l<e.length;l++)e[l]+=rA(i[l],p),e[l]<g&&(g=e[l],u=l);return u}(h),p=h[d];return n>=7&&Vf([p],function eA(o){return Rf(o,"1111100100101",18)}(n)),Lf([p],function Jk(o){let t,i="";if(0===Cr(o))return"101010000010010";t=Rf(Cr(o),"10100110111",15);for(let s=0;s<t.length;s++)i+=t.charAt(s)^"101010000010010".charAt(s);return i}(Bk[e]+Yt(d,3))),p}(e,this.options.errorCorrection,this.options.encoding),c=this._getSize(),d=c-2*(n+s),t=this._calculateBaseUnit(d,l.length),h=l.length*t,a=n+s+(d-h)/2,p.append(this._renderBackground(c,i)),p.append(this._renderMatrix(l,t,a)),this._hasCustomLogo()?p.append(this._renderLogo(c,t)):this._isSwiss()&&p.append(this._renderSwissCode(c,t)))}catch(u){this.onError(u)}return p}_renderLogo(e,t){let i,s,n=Wn(e/2),a=this._getLogoSize(7*t),l=this.options.overlay.imageUrl,c={x:n-a.width/2,y:n-a.height/2};return s=new At.A(new j.A(c.x,c.y),new Xl.A(a.width,a.height)),i=new hk.A(l,s),i}_renderSwissCode(e,t){let i=this._getLogoSize(7*t);i=Math.max(i.width,i.height);let s=i/4,n=s/2,a=e/2,l={},c=new et.A;return l.x=l.y=Math.ceil(a-t-i/2),c.append(this._renderShape(l,Math.ceil(i+2*t),Nf,"#fff")),l.x=l.y=a-i/2,c.append(this._renderShape(l,i,Nf,this.options.color)),l.x=a+n-i/2,l.y=a+n+s-i/2,c.append(this._renderShape(l,s,cA,"#fff")),c}_renderShape(e,t,i,s){let n=new M.P({fill:{color:s},stroke:null});n.moveTo(e.x,e.y);for(let a=0;a<i.length;a++)n.lineTo(e.x+t*i[a][0],e.y+t*i[a][1]);return n.close(),n}_getSize(){let e;if(this.options.size)e=parseInt(this.options.size,10);else{const i=Cf(this.element,this.options.renderAs),s=Math.min(i.width,i.height);e=s>0?s:200}return e}_calculateBaseUnit(e,t){let i=Math.floor(e/t);if(i<1){const s=Math.ceil(1*t);this.onError(new Error(`Insufficient size for QR Code: the current size is ${e}px and the minimum size is ${s}px.`))}else i*t>=e&&i-1>=1&&i--;return i}_renderMatrix(e,t,i){let s=new M.P({fill:{color:this.options.color},stroke:null});for(let n=0;n<e.length;n++){let a=i+n*t,l=0;for(;l<e.length;){for(;0===e[n][l]&&l<e.length;)l++;if(l<e.length){let c=l;for(;1===e[n][l];)l++;let h=Wn(i+c*t),d=Wn(a),p=Wn(i+l*t),u=Wn(a+t);s.moveTo(h,d).lineTo(h,u).lineTo(p,u).lineTo(p,d).close()}}}return s}_renderBackground(e,t){const i=new k(0,0,e,e).unpad(t.width/2);return M.w.fromRect(i.toRect(),{fill:{color:this.options.background},stroke:{color:t.color,width:t.width}})}setOptions(e){this.options=zs(this.options,e||{}),void 0!==e.value&&(this._value=String(this.options.value)),this._initSurface(),this.redraw()}value(e){if(void 0===e)return this._value;this._value=String(e),this.redraw()}_hasCustomLogo(){return!!this.options.overlay.imageUrl}_isSwiss(){return"swiss"===this.options.overlay.type}_getLogoSize(e){let t=this.options.overlay.width,i=this.options.overlay.height;return t||i?t&&!i?i=t:!t&&i&&(t=i):t=i=e,{width:t,height:i}}},{name:"QRCode",renderAs:"svg",encoding:"ISO_8859_1",value:"",errorCorrection:"L",background:"#fff",color:"#000",size:"",padding:0,border:{color:"",width:0},overlay:{type:"image",imageUrl:"",width:0,height:0}});const Tc={WGS84:{a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149}};function Ie(o){return o*o}let Ti=Math,pA=Ti.abs,zf=Ti.atan,Ar=Ti.atan2,Mi=Ti.cos,oi=Ti.sin,jf=Ti.tan;class lt{constructor(e,t){this.initProperties(),1===arguments.length?(this.lat=e[0],this.lng=e[1]):(this.lat=e,this.lng=t)}initProperties(){x(this,{DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6}{1:N6}"})}toArray(){return[this.lat,this.lng]}equals(e){return e&&e.lat===this.lat&&e.lng===this.lng}clone(){return new lt(this.lat,this.lng)}round(e){return this.lng=A(this.lng,e),this.lat=A(this.lat,e),this}wrap(){return this.lng=this.lng%180,this.lat=this.lat%90,this}distanceTo(e,t){return this.greatCircleTo(e,t).distance}destination(e,t,i){let s=Ct(t),n=i||Tc.WGS84,a=Ct(this.lat),l=Ct(this.lng),c=e/n.a,h=Ti.asin(oi(a)*Mi(c)+Mi(a)*oi(c)*Mi(s)),d=l+Ar(oi(s)*oi(c)*Mi(a),Mi(c)-oi(a)*oi(h));return new lt(di(h),di(d))}greatCircleTo(e,t){let i=lt.create(i),s=t||Tc.WGS84;if(!i||this.clone().round(8).equals(i.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};let v,P,I,B,G,Q,tt,mt,n=s.a,a=s.b,l=s.f,c=Ct(i.lng-this.lng),h=zf((1-l)*jf(Ct(this.lat))),d=oi(h),p=Mi(h),u=zf((1-l)*jf(Ct(i.lat))),g=oi(u),f=Mi(u),m=c,_=this.DISTANCE_ITERATIONS,y=!1;for(;!y&&_-- >0;){P=oi(m),I=Mi(m),B=Ti.sqrt(Ie(f*P)+Ie(p*g-d*f*I)),Q=d*g+p*f*I,mt=Ar(B,Q);let ct=p*f*P/B;G=1-Ie(ct),tt=0,0!==G&&(tt=Q-2*d*g/G),v=m;let St=l/16*G*(4+l*(4-3*G));m=c+(1-St)*l*ct*(mt+St*B*(tt+St*Q*(2*Ie(tt)-1))),y=pA(m-v)<=this.DISTANCE_CONVERGENCE}let rt=G*(Ie(n)-Ie(a))/Ie(a),oe=1+rt/16384*(4096+rt*(rt*(320-175*rt)-768)),Bt=rt/1024*(256+rt*(rt*(74-47*rt)-128)),po=Bt*B*(tt+Bt/4*(Q*(2*Ie(tt)-1)-Bt/6*tt*(4*Ie(B)-3)*(4*Ie(tt)-3))),uo=Ar(f*P,p*g-d*f*I),nt=Ar(p*P,-d*f+p*g*I);return{distance:A(a*oe*(mt-po),this.DISTANCE_PRECISION),azimuthFrom:di(uo),azimuthTo:di(nt)}}toString(){return String(this.lat)+","+String(this.lng)}static fromLngLat(e){return new lt(e[1],e[0])}static fromLatLng(e){return new lt(e[0],e[1])}static create(e,t){if(C(e))return e instanceof lt?e.clone():1===arguments.length&&2===e.length?lt.fromLatLng(e):new lt(e,t)}}let Pi=Math,Mc=Pi.atan,Uf=Pi.exp,Gf=Pi.pow,Hf=Pi.sin,Xf=Pi.log,Yf=Pi.tan,Wf=j.A,Sr=Pi.PI,Pc=Sr/2,$f=Sr/4,uA=Sr/180,gA=Tc.WGS84;class Ec{constructor(e){this.initProperties(),this._initOptions(e)}_initOptions(e){this.options=x({},this.options,e)}initProperties(){x(this,{MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12})}forward(e,t){let i=this,s=i.options,a=s.datum.a,l=s.centralMeridian,c=O(e.lat,-i.MAX_LAT,i.MAX_LAT),h=t?O(e.lng,-i.MAX_LNG,i.MAX_LNG):e.lng,d=Ct(h-l)*a,p=i._projectLat(c);return new Wf(d,p)}_projectLat(e){let t=this.options.datum,i=t.e,s=t.a,n=Ct(e),a=Yf($f+n/2),l=i*Hf(n),c=Gf((1-l)/(1+l),i/2);return s*Xf(a*c)}inverse(e,t){let i=this,s=i.options,c=e.x/(uA*s.datum.a)+s.centralMeridian,h=O(i._inverseY(e.y),-i.MAX_LAT,i.MAX_LAT);return t&&(c=O(c,-i.MAX_LNG,i.MAX_LNG)),new lt(h,c)}_inverseY(e){let h,t=this,i=t.options.datum,n=i.e,a=n/2,l=Uf(-e/i.a),c=Pc-2*Mc(l);for(h=0;h<=t.INVERSE_ITERATIONS;h++){let d=n*Hf(c),p=Gf((1-d)/(1+d),a),u=Pc-2*Mc(l*p)-c;if(c+=u,Pi.abs(u)<=t.INVERSE_CONVERGENCE)break}return di(c)}}w(Ec,{centralMeridian:0,datum:gA});class fA extends Ec{initProperties(){super.initProperties(),x(this,{MAX_LAT:85.0511287798})}_projectLat(e){let t=this.options.datum.a,i=Ct(e),s=Yf($f+i/2);return t*Xf(s)}_inverseY(e){let i=Uf(-e/this.options.datum.a);return di(Pc-2*Mc(i))}}class xA{constructor(){let t=this._proj=new fA,i=this.c=2*Sr*t.options.datum.a;this._tm=bt.A().translate(.5,.5).scale(1/i,-1/i),this._itm=bt.A().scale(i,-i).translate(-.5,-.5)}toPoint(e,t,i){return this._proj.forward(e,i).transform(this._tm).scale(t||1)}toLocation(e,t,i){let s=e.clone().scale(1/(t||1)).transform(this._itm);return this._proj.inverse(s,i)}}const _t=(o,e)=>o.bind(e);let ts=o=>{const e=document.createElement("div");return e.innerHTML=o,e.firstChild},$n=o=>{for(;o.firstChild;)o.removeChild(o.firstChild)},Qf=(o,e)=>{e.insertBefore(o,e.firstChild)},Zf=o=>o.replace(/([a-z][A-Z])/g,function(t){return t.charAt(0)+"-"+t.charAt(1).toLowerCase()}),Kf=o=>{let e;return e=o&&String(o).endsWith("px")?o:String(o)+"px",e};const Tr=(o,e)=>{const t=o.prototype;t.events?e.forEach(i=>{t.events.indexOf(i)<0&&t.events.push(i)}):t.events=e},Jf=o=>{let e=[];if(o){let t=Zf(o).split("-");for(let i=0;i<t.length;i++)e.push("k-pos-"+t[i])}return e.join(" ")};class qf extends le{constructor(e,t){super(),this.element=e,this._initOptions(t),this.items=[],ut(this.element,"k-widget k-attribution")}_initOptions(e){this.options=x({},this.options,e)}filter(e,t){this._extent=e,this._zoom=t,this._render()}add(e){let t=e;C(e)&&("string"==typeof e&&(t={text:e}),this.items.push(t),this._render())}remove(e){let t=[];for(let i=0;i<this.items.length;i++){let s=this.items[i];s.text!==e&&t.push(s)}this.items=t,this._render()}clear(){this.items=[],$n(this.element)}_render(){let e=[];for(let t=0;t<this.items.length;t++){let s=this._itemText(this.items[t]);""!==s&&e.push(s)}e.length>0?($n(this.element),((o,e)=>{const t=document.createElement("div");for(t.innerHTML=o;t.childNodes.length>0;)e.appendChild(t.childNodes[0])})(e.join(this.options.separator),this.element),this.showElement()):this.hideElement()}hideElement(){this.element.style.display="none"}showElement(){this.element.style.display=""}_itemText(e){let t="",i=this._inZoomLevel(e.minZoom,e.maxZoom),s=this._inArea(e.extent);return i&&s&&(t+=e.text),t}_inZoomLevel(e,t){let i=!0,s=R(e,-Number.MAX_VALUE),n=R(t,Number.MAX_VALUE);return i=this._zoom>s&&this._zoom<n,i}_inArea(e){let t=!0;return e&&(t=e.contains(this._extent)),t}}w(qf,{name:"Attribution",separator:"&nbsp;|&nbsp;"});const wA={up:{className:"k-navigator-n",iconClass:"k-i-caret-alt-up"},down:{className:"k-navigator-s",iconClass:"k-i-caret-alt-down"},right:{className:"k-navigator-e",iconClass:"k-i-caret-alt-right"},left:{className:"k-navigator-w",iconClass:"k-i-caret-alt-left"}};function Mr(o,e){const t='<button type="button" class="k-button k-button-square k-rounded-full k-button-flat k-button-flat-base k-icon-button '+wA[o].className+'" aria-label="move '+o+'">'+ds({icon:`caret-alt-${o}`,iconClass:"k-button-icon",svgIcons:e.svgIcons,type:e.type})+"</button>";return ts(t)}class Dc extends le{constructor(e,t){super(),this.element=e,this._initOptions(t);const i=Mr("up",t.icons),s=Mr("right",t.icons),n=Mr("down",t.icons),a=Mr("left",t.icons);this.element.appendChild(i),this.element.appendChild(s),this.element.appendChild(n),this.element.appendChild(a),ut(this.element,"k-widget k-navigator"),Gt(this.element,"click",".k-button",_t(this._click,this));let l=this.element.parentNode.closest("[data-role]");this._keyroot=l||this.element,this._tabindex(this._keyroot),this._keydownHandler=_t(this._keydown,this),Gt(this._keyroot,"keydown",this._keydownHandler)}destroy(){this.dispose()}dispose(){Jt(this._keyroot,"keydown",this._keydownHandler)}_tabindex(e){const t=e||this.wrapper||this.element;let i=this.element,s="tabindex",n=t.getAttribute(s)||i.getAttribute(s);i.removeAttribute(s),t.setAttribute(s,isNaN(n)?0:n)}_initOptions(e){this.options=x({},this.options,e)}_pan(e,t){let i=this.options.panStep;this.trigger("pan",{x:e*i,y:t*i})}_click(e){let t=0,i=0,s=e.currentTarget;s.matches(".k-navigator-n")?i=1:s.matches(".k-navigator-s")?i=-1:s.matches(".k-navigator-e")?t=1:s.matches(".k-navigator-w")&&(t=-1),this._pan(t,i),e.preventDefault()}_keydown(e){switch(e.which){case 38:this._pan(0,1),e.preventDefault();break;case 40:this._pan(0,-1),e.preventDefault();break;case 39:this._pan(1,0),e.preventDefault();break;case 37:this._pan(-1,0),e.preventDefault()}}}function em(o,e,t){const i='<button type="button" class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-zoom-'+o+'" title="zoom-'+o+'" aria-label="zoom-'+o+'">'+ds({icon:e,iconClass:"k-button-icon",svgIcons:t.svgIcons,type:t.type})+"</button>";return ts(i)}w(Dc,{name:"Navigator",panStep:1}),Tr(Dc,["pan"]);class Oc extends le{constructor(e,t,i){super(),this.element=e,this._initOptions(t);const s=em("in","plus",i),n=em("out","minus",i);this.element.appendChild(s),this.element.appendChild(n),this.element.setAttribute("role","group"),ut(this.element,"k-widget k-zoom-control k-button-group k-group-horizontal"),this._clickHandler=this._click.bind(this),Gt(this.element,"click",".k-button",this._clickHandler);let a=this.element.parentNode.closest("[data-role]");this._keyroot=a||this.element,this._tabindex(this._keyroot),this._keydownHandler=this._keydown.bind(this),Gt(this._keyroot,"keydown",this._keydownHandler)}destroy(){this.element&&Jt(this.element,"click",this._clickHandler),this._keyroot&&Jt(this._keyroot,"keydown",this._keydownHandler)}_tabindex(e){const t=e||this.wrapper||this.element;let i=this.element,s="tabindex",n=t.getAttribute(s)||i.getAttribute(s);i.removeAttribute(s),t.setAttribute(s,isNaN(n)?0:n)}_initOptions(e){this.options=x({},this.options,e)}_change(e){this.trigger("change",{delta:e*this.options.zoomStep})}_click(e){let i=1;sn(e.currentTarget,"k-zoom-out")&&(i=-1),this._change(i),e.preventDefault()}_keydown(e){switch(e.which){case 107:case 187:case 61:this._change(1);break;case 109:case 189:case 173:this._change(-1)}}}w(Oc,{name:"ZoomControl",zoomStep:1}),Tr(Oc,["change"]);let sm=Math,nm=sm.max,om=sm.min;class ri{constructor(e,t){let i=lt.create(e),s=lt.create(t);i.lng+180>s.lng+180&&i.lat+90<s.lat+90?(this.se=i,this.nw=s):(this.se=s,this.nw=i)}contains(e){let t=this.nw,i=this.se,s=R(e.lng,e[1]),n=R(e.lat,e[0]);return e&&s+180>=t.lng+180&&s+180<=i.lng+180&&n+90>=i.lat+90&&n+90<=t.lat+90}center(){let e=this.nw,t=this.se;return new lt(e.lat+(t.lat-e.lat)/2,e.lng+(t.lng-e.lng)/2)}containsAny(e){let t=!1;for(let i=0;i<e.length;i++)t=t||this.contains(e[i]);return t}include(e){let t=this.nw,i=this.se,s=R(e.lng,e[1]),n=R(e.lat,e[0]);t.lng=om(t.lng,s),t.lat=nm(t.lat,n),i.lng=nm(i.lng,s),i.lat=om(i.lat,n)}includeAll(e){for(let t=0;t<e.length;t++)this.include(e[t])}edges(){let e=this.nw,t=this.se;return{nw:this.nw,ne:new lt(e.lat,t.lng),se:this.se,sw:new lt(t.lat,e.lng)}}toArray(){let e=this.nw,t=this.se;return[e,new lt(e.lat,t.lng),t,new lt(t.lat,e.lng)]}overlaps(e){return this.containsAny(e.toArray())||e.containsAny(this.toArray())}static create(e,t){return e instanceof ri?e:e&&t?new ri(e,t):e&&4===e.length&&!t?new ri([e[0],e[1]],[e[2],e[3]]):void 0}static get World(){return new ri([90,-180],[-90,180])}}const rm="centerChange";class am{constructor(e,t){this.widgetService=e,this.options=x({},this.options,t),this.offset={x:0,y:0}}show(e,t){this.location!==t.location&&(this.anchor=e,this.location=t.location,this.widgetService.notify("showTooltip",Object.assign({anchor:this.anchor},t)),this.visible=!0)}hide(){this.widgetService&&this.widgetService.notify("hideTooltip"),this.visible=!1,this.location=null}get anchor(){return this._anchor}set anchor(e){const t=this.widgetService.widget._toDocumentCoordinates({x:e.left-this.offset.x,y:e.top-this.offset.y});this._anchor={left:t.left,top:t.top}}destroy(){this.widgetService=null}}w(am,{border:{width:1},opacity:1});class Ic{constructor(e,t){this.support=ln(),this._initOptions(t),this.map=e;let i=document.createElement("div");ut(i,"k-layer"),i.style.zIndex=this.options.zIndex,i.style.opacity=this.options.opacity,this.element=i,e.scrollElement.appendChild(this.element),this._beforeReset=this._beforeReset.bind(this),this._reset=this._reset.bind(this),this._resize=this._resize.bind(this),this._panEnd=this._panEnd.bind(this),this._activate(),this._updateAttribution()}destroy(){this._deactivate()}_initOptions(e){this.options=x({},this.options,e)}show(){this.reset(),this._activate(),this._applyExtent(!0)}hide(){this._deactivate(),this._setVisibility(!1)}reset(){this._beforeReset(),this._reset()}_reset(){this._applyExtent()}_beforeReset(){}_resize(){}_panEnd(){this._applyExtent()}_applyExtent(){let e=this.options,t=this.map.zoom(),i=!C(e.minZoom)||t>=e.minZoom,s=!C(e.maxZoom)||t<=e.maxZoom,n=ri.create(e.extent),a=!n||n.overlaps(this.map.extent());this._setVisibility(i&&s&&a)}_setVisibility(e){this.element.style.display=e?"":"none"}_activate(){let e=this.map;this._deactivate(),e.bind("beforeReset",this._beforeReset),e.bind("reset",this._reset),e.bind("resize",this._resize),e.bind("panEnd",this._panEnd)}_deactivate(){let e=this.map;e.unbind("beforeReset",this._beforeReset),e.unbind("reset",this._reset),e.unbind("resize",this._resize),e.unbind("panEnd",this._panEnd)}_updateAttribution(){const e=this.map.attribution;e&&e.add(this.options.attribution)}_readData(){return this.options.data||[]}_hasData(){return this._data&&this._data.length>0}_layerIndex(){return(this.map.layers||[]).indexOf(this)}}let Ei=Math,Rc=j.A;function lm(o){return at(o)?o:vo.compile(o)}function cm(o){let e=o;return"string"!=typeof o&&(e+="px"),e}class hm extends Ic{constructor(e,t){super(e,t),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));let i=this._viewType();this._view=new i(this.element,this.options)}destroy(){super.destroy(),this._view.destroy(),this._view=null}_beforeReset(){let e=this.map,t=e.locationToLayer(e.extent().nw).round();this._view.viewOrigin(t)}_reset(){super._reset(),this._updateView(),this._view.reset()}_viewType(){return OA}_activate(){super._activate(),this.support.mobileOS||(this._pan||(this._pan=(0,Gl.A)(this._render.bind(this),100)),this.map.bind("pan",this._pan))}_deactivate(){super._deactivate(),this._pan&&this.map.unbind("pan",this._pan)}_updateView(){let e=this._view,t=this.map,i=t.extent(),s={nw:t.locationToLayer(i.nw).round(),se:t.locationToLayer(i.se).round()};e.center(t.locationToLayer(t.center())),e.extent(s),e.zoom(t.zoom())}_resize(){this._render()}_panEnd(e){super._panEnd(e),this._render()}_render(){this._updateView(),this._view.render()}}w(hm,{tileSize:256,subdomains:["a","b","c"],urlTemplate:"",zIndex:1});class OA{constructor(e,t){this.element=e,this._initOptions(t),this.pool=new pm}_initOptions(e){this.options=x({},this.options,e)}center(e){this._center=e}extent(e){this._extent=e}viewOrigin(e){this._viewOrigin=e}zoom(e){this._zoom=e}pointToTileIndex(e){return new Rc(Ei.floor(e.x/this.options.tileSize),Ei.floor(e.y/this.options.tileSize))}tileCount(){let e=this.size(),t=this.pointToTileIndex(this._extent.nw),i=this._extent.nw,s=this.indexToPoint(t).translate(-i.x,-i.y);return{x:Ei.ceil((Ei.abs(s.x)+e.width)/this.options.tileSize),y:Ei.ceil((Ei.abs(s.y)+e.height)/this.options.tileSize)}}size(){let e=this._extent.nw,i=this._extent.se.clone().translate(-e.x,-e.y);return{width:i.x,height:i.y}}indexToPoint(e){return new Rc(e.x*this.options.tileSize,e.y*this.options.tileSize)}subdomainText(){let e=this.options.subdomains;return e[this.subdomainIndex++%e.length]}destroy(){$n(this.element),this.pool.empty()}reset(){this.pool.reset(),this.subdomainIndex=0,this.render()}render(){let i,s,n,e=this.tileCount(),t=this.pointToTileIndex(this._extent.nw);for(s=0;s<e.x;s++)for(n=0;n<e.y;n++)i=this.createTile({x:t.x+s,y:t.y+n}),i.visible||i.show()}createTile(e){let t=this.tileOptions(e),i=this.pool.get(this._center,t);return i.element.parentNode||this.element.append(i.element),i}tileOptions(e){let t=this.wrapIndex(e),i=this.indexToPoint(e),s=this._viewOrigin,n=i.clone().translate(-s.x,-s.y);return{index:t,currentIndex:e,point:i,offset:(o=n,new Rc(A(o.x),A(o.y))),zoom:this._zoom,size:this.options.tileSize,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate};var o}wrapIndex(e){let t=Ei.pow(2,this._zoom);return{x:this.wrapValue(e.x,t),y:O(e.y,0,t-1)}}wrapValue(e,t){let i=Ei.abs(e)%t,s=e;return s=e>=0?i:t-(0===i?t:i),s}}class dm{constructor(e,t){this.id=e,this.visible=!0,this._initOptions(t),this.createElement(),this.show()}destroy(){const e=this.element,t=e?e.parentNode:null;e&&(t&&t.removeChild(e),this.element=null)}_initOptions(e){this.options=x({},this.options,e)}createElement(){let e=document.createElement("img");const t=this.options.size+"px";e.setAttribute("alt",""),e.style.position="absolute",e.style.display="block",e.style.width=e.style.maxWidth=t,e.style.height=e.style.maxHeight=t,this.element=e}show(){let e=this.element;e.style.top=cm(this.options.offset.y),e.style.left=cm(this.options.offset.x);let t=this.url();t&&e.setAttribute("src",t),e.style.visibility="visible",this.visible=!0}hide(){this.element.style.visibility="hidden",this.visible=!1}url(){return lm(this.options.urlTemplate)(this.urlOptions())}errorUrl(){return lm(this.options.errorUrlTemplate)(this.urlOptions())}urlOptions(){let e=this.options;return{zoom:e.zoom,subdomain:e.subdomain,z:e.zoom,x:e.index.x,y:e.index.y,s:e.subdomain,quadkey:e.quadkey,q:e.quadkey,culture:e.culture,c:e.culture}}}w(dm,{urlTemplate:"",errorUrlTemplate:""});class pm{constructor(){this._items=[]}get(e,t){return this._items.length>=this.options.maxSize&&this._remove(e),this._create(t)}empty(){let e=this._items;for(let t=0;t<e.length;t++)e[t].destroy();this._items=[]}reset(){let e=this._items;for(let t=0;t<e.length;t++)e[t].hide()}_create(e){let i,t=this._items,s=Wv(e.point.toString()+e.offset.toString()+e.zoom+e.urlTemplate);for(let n=0;n<t.length;n++)if(t[n].id===s){i=t[n];break}return i?i.show():(i=new dm(s,e),this._items.push(i)),i}_remove(e){let t=this._items,i=-1,s=-1;for(let n=0;n<t.length;n++){let a=t[n].options.point.distanceTo(e);a>i&&!t[n].visible&&(s=n,i=a)}-1!==s&&(t[s].destroy(),t.splice(s,1))}}w(pm,{maxSize:100});const es=Object.assign,Qn="change";class IA extends le{constructor(e,t){super();let i=this,s=e[0]||e;i.capture=!1,s.addEventListener?(us.down.split(" ").forEach(function(n){s.addEventListener(n,_t(i._press,i),!0)}),us.up.split(" ").forEach(function(n){s.addEventListener(n,_t(i._release,i),!0)})):(us.down.split(" ").forEach(function(n){s.attachEvent(n,_t(i._press,i))}),us.up.split(" ").forEach(function(n){s.attachEvent(n,_t(i._release,i))})),i.bind(["press","release"],t||{})}captureNext(){this.capture=!0}cancelCapture(){this.capture=!1}_press(e){this.trigger("press"),this.capture&&e.preventDefault()}_release(e){let t=this;t.trigger("release"),t.capture&&(e.preventDefault(),t.cancelCapture())}}class um extends le{constructor(e){super();let t=this;t.forcedEnabled=!1,es(t,e),t.scale=1,t.horizontal?(t.measure="offsetWidth",t.scrollSize="scrollWidth",t.axis="x"):(t.measure="offsetHeight",t.scrollSize="scrollHeight",t.axis="y")}makeVirtual(){es(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})}virtualSize(e,t){(this._virtualMin!==e||this._virtualMax!==t)&&(this._virtualMin=e,this._virtualMax=t,this.update())}outOfBounds(e){return e>this.max||e<this.min}forceEnabled(){this.forcedEnabled=!0}getSize(){return this.container[this.measure]}getTotal(){return this.element[this.scrollSize]}rescale(e){this.scale=e}update(e){let t=this,i=t.virtual?t._virtualMax:t.getTotal(),s=i*t.scale,n=t.getSize();0===i&&!t.forcedEnabled||(t.max=t.virtual?-t._virtualMin:0,t.size=n,t.total=s,t.min=Math.min(t.max,n-s),t.minScale=n/i,t.centerOffset=(s-n)/2,t.enabled=t.forcedEnabled||s>n,e||t.trigger(Qn,t))}}class RA extends le{constructor(e){super();let t=this;t.x=new um(es({horizontal:!0},e)),t.y=new um(es({horizontal:!1},e)),t.container=e.container,t.forcedMinScale=e.minScale,t.maxScale=e.maxScale||100,t.bind(Qn,e)}rescale(e){this.x.rescale(e),this.y.rescale(e),this.refresh()}centerCoordinates(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}}refresh(){let e=this;e.x.update(),e.y.update(),e.enabled=e.x.enabled||e.y.enabled,e.minScale=e.forcedMinScale||Math.min(e.x.minScale,e.y.minScale),e.fitScale=Math.max(e.x.minScale,e.y.minScale),e.trigger(Qn)}}class gm extends le{constructor(e){super(),es(this,e)}outOfBounds(){return this.dimension.outOfBounds(this.movable[this.axis])}dragMove(e){let t=this,i=t.dimension,s=t.axis,n=t.movable,a=n[s]+e;if(!i.enabled)return;let l=e;(a<i.min&&e<0||a>i.max&&e>0)&&(l*=t.resistance),n.translateAxis(s,l),t.trigger(Qn,t)}}class LA{constructor(e){let i,s,n,a,t=this;es(t,{elastic:!0},e),n=t.elastic?.5:0,a=t.movable,t.x=i=new gm({axis:"x",dimension:t.dimensions.x,resistance:n,movable:a}),t.y=s=new gm({axis:"y",dimension:t.dimensions.y,resistance:n,movable:a}),t.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart(l){t.gesture=l,t.offset=hs(t.dimensions.container)},press(l){const c=l.event.target.closest("a");c&&c.matches("[data-navigate-on-press=true]")&&l.sender.cancel()},gesturechange(l){let f,c=t.gesture,h=c.center,d=l.center,p=l.distance/c.distance,g=t.dimensions.maxScale;a.scale<=t.dimensions.minScale&&p<1&&(p+=.8*(1-p)),a.scale*p>=g&&(p=g/a.scale);let m=a.x+t.offset.left,v=a.y+t.offset.top;f={x:(m-h.x)*p+d.x-m,y:(v-h.y)*p+d.y-v},a.scaleWith(p),i.dragMove(f.x),s.dragMove(f.y),t.dimensions.rescale(a.scale),t.gesture=l,l.preventDefault()},move(l){l.event.target.tagName.match(/textarea|input/i)||(i.dimension.enabled||s.dimension.enabled?(i.dragMove(l.x.delta),s.dragMove(l.y.delta),l.preventDefault()):l.touch.skip())},end(l){l.preventDefault()}})}}let fm=function(o,e,t){return"translate3d("+o+"px,"+e+"px,0) scale("+t+")"};class Lc extends le{constructor(e){super();let t=this;t.element=e,t.element.style.transformOrigin="left top",t.x=0,t.y=0,t.scale=1;const i=fm(t.x,t.y,t.scale);t.element.style.transform=i,t._saveCoordinates(i)}translateAxis(e,t){this[e]+=t,this.refresh()}scaleTo(e){this.scale=e,this.refresh()}scaleWith(e){this.scale*=e,this.refresh()}translate(e){this.x+=e.x,this.y+=e.y,this.refresh()}moveAxis(e,t){this[e]=t,this.refresh()}moveTo(e){es(this,e),this.refresh()}refresh(){let s,e=this,t=e.x,i=e.y;e.round&&(t=Math.round(t),i=Math.round(i)),s=fm(t,i,e.scale),s!==e.coordinates&&(e.element.style.transform=s,e._saveCoordinates(s),e.trigger(Qn))}_saveCoordinates(e){this.coordinates=e}}const Vc=et.A;class Bc extends Ic{constructor(e,t){super(e,t),this._pan=_t(this._pan,this),this.surface=Bi.A.create(this.element,{width:e.scrollElement.clientWidth,height:e.scrollElement.clientHeight}),this._initRoot(),this.movable=new Lc(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave),this.surface.bind("mouseenter",this._mouseenter.bind(this))}destroy(){super.destroy(),this.surface.destroy()}_reset(){super._reset(),this._translateSurface(),this._data=this._readData(),this._hasData()&&this._load(this._data)}_initRoot(){this._root=new Vc,this.surface.draw(this._root)}_beforeReset(){this.surface.clear(),this._initRoot()}_resize(){this.surface.size(this.map.size())}_readData(){const e=super._readData();return"FeatureCollection"===e.type?e.features:"GeometryCollection"===e.type?e.geometries:e}_load(e){this._data=e,this._clearMarkers(),this._loader||(this._loader=new VA(this.map,this.options.style,this));let t=new Vc;for(let i=0;i<e.length;i++){let s=this._loader.parse(e[i]);s&&t.append(s)}this._root.clear(),this._root.append(t)}shapeCreated(e){let t=!1;return e instanceof Te.A&&this.map.options.renderPointsAsMarkers&&(t=C(this._createMarker(e))),t||(t=this.map.trigger("shapeCreated",{layer:this,shape:e})),t}featureCreated(e){e.layer=this,this.map.trigger("shapeFeatureCreated",e)}_createMarker(e){let t=this.map.markers.bind({location:e.location},e.dataItem);return t&&this._markers.push(t),t}_clearMarkers(){for(let e=0;e<this._markers.length;e++)this.map.markers.remove(this._markers[e]);this._markers=[]}_pan(){this._panning||(this._panning=!0,this.surface.suspendTracking())}_panEnd(e){super._panEnd(e),this._translateSurface(),this.surface.resumeTracking(),this._panning=!1}_translateSurface(){let e=this.map,t=e.locationToView(e.extent().nw);this.surface.translate&&(this.surface.translate(t),this.movable.moveTo({x:t.x,y:t.y}))}_eventArgs(e){return{layer:this,layerIndex:this._layerIndex(),shape:e.element,shapeIndex:(this._data||[]).indexOf(e.element.dataItem),originalEvent:e.originalEvent}}_handler(e){return t=>{t.element&&this.map.trigger(e,this._eventArgs(t))}}_mouseenter(e){if(!e.element)return;this.map.trigger("shapeMouseEnter",this._eventArgs(e));const t=e.element,i=this._tooltipAnchor(e);this.map._tooltip.show(i,this._tooltipContext(t))}_tooltipContext(e){return{type:"shape",layerIndex:this._layerIndex(),className:"k-map-shape-tooltip",dataItem:e.dataItem,location:e.location}}_tooltipAnchor(e){const t=this.map.eventOffset(e.originalEvent);return{top:t.y,left:t.x}}_activate(){super._activate(),this._panHandler=_t(this._pan,this),this.map.bind("pan",this.panHandler)}_deactivate(){super._deactivate(),this.map.unbind("pan",this._panHandler)}}w(Bc,{autoBind:!0,zIndex:100});class VA{constructor(e,t,i){this.observer=i,this.locator=e,this.style=t}parse(e){let t=new Vc,i=!0;return"Feature"===e.type?(i=!1,this._loadGeometryTo(t,e.geometry,e),this._featureCreated(t,e)):this._loadGeometryTo(t,e,e),i&&t.children.length<2&&(t=t.children[0]),t}_shapeCreated(e){let t=!1;return this.observer&&this.observer.shapeCreated&&(t=this.observer.shapeCreated(e)),t}_featureCreated(e,t){this.observer&&this.observer.featureCreated&&this.observer.featureCreated({group:e,dataItem:t,properties:t.properties})}_loadGeometryTo(e,t,i){let n,a,s=t.coordinates;switch(t.type){case"LineString":a=this._loadPolygon(e,[s],i),this._setLineFill(a);break;case"MultiLineString":for(n=0;n<s.length;n++)a=this._loadPolygon(e,[s[n]],i),this._setLineFill(a);break;case"Polygon":this._loadPolygon(e,s,i);break;case"MultiPolygon":for(n=0;n<s.length;n++)this._loadPolygon(e,s[n],i);break;case"Point":this._loadPoint(e,s,i);break;case"MultiPoint":for(n=0;n<s.length;n++)this._loadPoint(e,s[n],i)}}_setLineFill(e){let t=e.segments;(t.length<4||!t[0].anchor().equals(ft(t).anchor()))&&(e.options.fill=null)}_loadShape(e,t){return this._shapeCreated(t)||e.append(t),t}_loadPolygon(e,t,i){let s=this._buildPolygon(t);return s.dataItem=i,s.location=this.locator.viewToLocation(s.bbox().center()),this._loadShape(e,s)}_buildPolygon(e){let i=new(e.length>1?M.P:M.w)(this.style);for(let s=0;s<e.length;s++)for(let n=0;n<e[s].length;n++){let a=this.locator.locationToView(lt.fromLngLat(e[s][n]));0===n?i.moveTo(a.x,a.y):i.lineTo(a.x,a.y)}return i}_loadPoint(e,t,i){let s=lt.fromLngLat(t),n=this.locator.locationToView(s),a=new ce.A(n,10),l=new Te.A(a,this.style);return l.dataItem=i,l.location=s,this._loadShape(e,l)}}class mm extends Bc{_readData(){return this.options.data||[]}_load(e){if(this._data=e,this.surface.clear(),0===e.length)return;let t=this.options,i=Ne(t.valueField),s=e.slice(0);s.sort(function(c,h){return i(h)-i(c)});let a,n=this._scaleType(),l=Ne(this.options.locationField);for(let c=0;c<s.length;c++){let h=s[c],d=l(h),p=i(h);if(C(d)&&C(p)){a||(a=new n([0,p],[t.minSize,t.maxSize])),d=lt.create(d);let u=this.map.locationToView(d),g=a.map(p),f=this._createSymbol({center:u,size:g,style:t.style,dataItem:h,location:d});f.dataItem=h,f.location=d,f.value=p,this._drawSymbol(f)}}}_scaleType(){let e=this.options.scale;return at(e)?e:FA[e]}_createSymbol(e){let t=this.options.symbol;return at(t)||(t=NA[t]),t(e)}_drawSymbol(e){this.map.trigger("shapeCreated",{layer:this,shape:e})||this.surface.draw(e)}_tooltipContext(e){return{type:"bubble",layerIndex:this._layerIndex(),className:"k-map-bubble-tooltip",dataItem:e.dataItem,location:e.location,value:e.value}}_tooltipAnchor(e){const i=e.element.bbox().center();return{top:i.y,left:i.x}}}w(mm,{locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle",zIndex:200});let FA={sqrt:class BA{constructor(e,t){this._domain=e,this._range=t;let i=Math.sqrt(e[1])-Math.sqrt(e[0]);this._ratio=(t[1]-t[0])/i}map(e){let t=(Math.sqrt(e)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+t}}},NA={circle:function(o){let e=new ce.A(o.center,o.size/2);return new Te.A(e,o.style)},square:function(o){let e=new M.w(o.style),t=o.size/2,i=o.center;return e.moveTo(i.x-t,i.y-t).lineTo(i.x+t,i.y-t).lineTo(i.x+t,i.y+t).lineTo(i.x-t,i.y+t).close(),e}};const vm="mouseenter",bm="mouseleave",zA=Object.assign,_m="k-marker",Fc="."+_m;class Nc extends Ic{constructor(e,t){super(e,t),this._markerClickHandler=_t(this._markerClick,this),Gt(this.element,"click",Fc,this._markerClickHandler),this.items=[],this._load(this._readData())}destroy(){super.destroy(),Jt(this.element,"click",this._markerClickHandler),this.clear()}add(e){if(!Pt(e))return this._addOne(e);for(let t=0;t<e.length;t++)this._addOne(e[t])}remove(e){e.destroy();let t=(this.items||[]).indexOf(e);t>-1&&this.items.splice(t,1)}clear(){for(let e=0;e<this.items.length;e++)this.items[e].destroy();this.items=[]}update(e){let t=e.location();t&&(e.showAt(this.map.locationToView(t)),this.map.trigger("markerActivate",{marker:e,layer:this}))}_reset(){super._reset();let e=this.items;for(let t=0;t<e.length;t++)this.update(e[t])}bind(e,t){let i=Zn.create(e,this.options);if(i.dataItem=t,!this.map.trigger("markerCreated",{marker:i,layer:this}))return this.add(i),i}_addOne(e){let t=Zn.create(e,this.options);return t.addTo(this),t}_readData(){return this.options.data||[]}_load(e){this._data=e,this.clear();let t=Ne(this.options.locationField),i=Ne(this.options.titleField);for(let s=0;s<e.length;s++){let n=e[s];this.bind({location:t(n),title:i(n)},n)}}_markerClick(e){const t=e.currentTarget._kendoNode;let i={layer:this,layerIndex:this._layerIndex(),marker:t,markerIndex:(this.items||[]).indexOf(t),originalEvent:e};this.map.trigger("markerClick",i)}_markerMouseEnter(e){const t=this._createMarkerEventArgs(e);this.map.trigger("markerMouseEnter",t)}_markerMouseLeave(e){const t=this._createMarkerEventArgs(e);this.map.trigger("markerMouseLeave",t)}_createMarkerEventArgs(e){const t=e.marker;return zA({},{layer:this,layerIndex:this._layerIndex(),marker:t,markerIndex:(this.items||[]).indexOf(t)},e)}}w(Nc,{zIndex:1e3,autoBind:!0,locationField:"location",titleField:"title",template:""});class Zn{constructor(e){this.options=e||{}}destroy(){this.layer=null,this.unbindEvents(),this.hide()}addTo(e){this.layer=e.markers||e,this.layer.items.push(this),this.layer.update(this)}location(e){return e?(this.options.location=lt.create(e).toArray(),this.layer&&this.layer.update(this),this):lt.create(this.options.location)}showAt(e){this.render(),this._anchor={left:Math.round(e.x),top:Math.round(e.y)},this.element.style.left=Kf(this._anchor.left),this.element.style.top=Kf(this._anchor.top)}hide(){this.element&&(this.element.remove(),this.element=null)}bindEvents(){this.element&&(this._mouseEnterHandler=_t(this._mouseEnter,this),Gt(this.element,vm,Fc,this._mouseEnterHandler),this._mouseLeaveHandler=_t(this._mouseLeave,this),Gt(this.element,bm,Fc,this._mouseLeaveHandler))}unbindEvents(){this.element&&(Jt(this.element,vm,this._mouseEnterHandler),Jt(this.element,bm,this._mouseLeaveHandler))}render(){if(!this.element){let e=this.options,t=this.layer,i=document.createElement("span");if(ut(i,_m),this.options.template){const a=this._compileTemplate(this.options.template)(this.dataItem),l=ts(a);i.appendChild(l)}else if(e.svgIcon)ds(i,{icon:e.svgIcon,iconClass:"k-icon-xxl",svgIcons:this.options.icons.svgIcons,type:"svg"});else{let n={icon:"map-marker",iconClass:"k-icon-xxl",svgIcons:this.options.icons.svgIcons,type:this.options.icons.type};e.shape?"pinTarget"===e.shape?(n.icon="map-marker-target",ds(i,n)):"pin"===e.shape?ds(i,n):ut(i,"k-icon k-icon-xxl k-i-marker-"+Zf(e.shape||"pin")):ds(i,n)}e.title&&i.setAttribute("title",e.title);const s=e.attributes||{};Object.keys(s).forEach(function(n){i.setAttribute(n,s[n])}),i._kendoNode=this,i.style.zIndex=e.zIndex,this.element=i,t&&t.element.appendChild(this.element),this.bindEvents()}}_mouseEnter(e){const t=this._createEventArgs(e);this.layer._markerMouseEnter(t),this.layer.map._tooltip.show({top:this._anchor.top-this.element.offsetHeight,left:this._anchor.left},this._tooltipContext())}_tooltipContext(){return{type:"marker",layerIndex:this.layer._layerIndex(),className:"k-map-marker-tooltip",dataItem:this.dataItem,title:this.options.title,location:this.location()}}_mouseLeave(e){const t=this._createEventArgs(e);this.layer._markerMouseLeave(t)}_createEventArgs(e){return{marker:this,originalEvent:e}}_compileTemplate(e){return vo.compile(e,{paramName:"dataItem",useWithBlock:!1})}static create(e,t){return e instanceof Zn?e:new Zn(x({},t,e))}}const jA=Object.assign;function ym(o){window.requestAnimationFrame(o)}class Pr{constructor(){let e=this;e._tickProxy=_t(e._tick,e),e._started=!1}tick(){}done(){}onEnd(){}onCancel(){}start(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,ym(this._tickProxy)))}enabled(){return!0}cancel(){this._started=!1,this.onCancel()}_tick(){let e=this;e._started&&(e.tick(),e.done()?(e._started=!1,e.onEnd()):ym(e._tickProxy))}}class wm extends Pr{constructor(e){super(),jA(this,e)}done(){return this.timePassed()>=this.duration}timePassed(){return Math.min(this.duration,ui()-this.startDate)}moveTo(e){let t=this;t.initial=t.movable[t.axis],t.delta=e.location-t.initial,t.duration="number"==typeof e.duration?e.duration:300,t.tick=t._easeProxy(e.ease),t.startDate=ui(),t.start()}_easeProxy(e){let t=this;return function(){t.movable.moveAxis(t.axis,e(t.timePassed(),t.initial,t.delta,t.duration))}}static easeOutExpo(e,t,i,s){return e===s?t+i:i*(1-Math.pow(2,-10*e/s))+t}}let js=Object.assign,is=Math.abs,Er="change";class ZA extends Pr{constructor(e){super(e);let t=this;js(t,e),t.userEvents.bind("gestureend",t.start.bind(this)),t.tapCapture.bind("press",t.cancel.bind(this))}enabled(){return this.movable.scale<this.dimensions.minScale}done(){return this.dimensions.minScale-this.movable.scale<.01}tick(){let e=this.movable;e.scaleWith(1.1),this.dimensions.rescale(e.scale)}onEnd(){let e=this.movable;e.scaleTo(this.dimensions.minScale),this.dimensions.rescale(e.scale)}}class KA extends Pr{constructor(e){super();let t=this;js(t,e,{transition:new wm({axis:e.axis,movable:e.movable,onEnd(){t._end()}})}),t.tapCapture.bind("press",function(){t.cancel()}),t.userEvents.bind("end",_t(t.start,t)),t.userEvents.bind("gestureend",_t(t.start,t)),t.userEvents.bind("tap",_t(t.onEnd,t))}onCancel(){this.transition.cancel()}freeze(e){this.cancel(),this._moveTo(e)}onEnd(){let e=this;e.paneAxis.outOfBounds()?e._snapBack():e._end()}done(){return is(this.velocity)<1}start(e){let i,t=this;t.dimension.enabled&&(t.paneAxis.outOfBounds()?t.transition._started?(t.transition.cancel(),t.velocity=Math.min(e.touch[t.axis].velocity*t.velocityMultiplier,55),super.start()):t._snapBack():(i=2===e.touch.id?0:e.touch[t.axis].velocity,t.velocity=Math.max(Math.min(i*t.velocityMultiplier,55),-55),t.tapCapture.captureNext(),super.start()))}tick(){let e=this,t=e.dimension,i=e.paneAxis.outOfBounds()?.5:e.friction,s=e.velocity*=i,n=e.movable[e.axis]+s;!e.elastic&&t.outOfBounds(n)&&(n=Math.max(Math.min(n,t.max),t.min),e.velocity=0),e.movable.moveAxis(e.axis,n)}_end(){this.tapCapture.cancelCapture(),this.end()}_snapBack(){let e=this,t=e.dimension;e._moveTo(e.movable[e.axis]>t.max?t.max:t.min)}_moveTo(e){this.transition.moveTo({location:e,duration:500,ease:wm.easeOutExpo})}}class JA extends Pr{constructor(e){super(e),js(this,e,{origin:{},destination:{},offset:{}})}tick(){this._updateCoordinates(),this.moveTo(this.origin)}done(){return is(this.offset.y)<5&&is(this.offset.x)<5}onEnd(){this.moveTo(this.destination),this.callback&&this.callback.call()}setCoordinates(e,t){this.offset={},this.origin=e,this.destination=t}setCallback(e){e&&at(e)?this.callback=e:e=void 0}_updateCoordinates(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}}class qA{constructor(e){let t=this,i="x"===e.axis;const n=ts('<div class="km-touch-scrollbar km-'+(i?"horizontal":"vertical")+'-scrollbar" />');js(t,e,{element:n,elementSize:0,movable:new Lc(n),scrollMovable:e.movable,alwaysVisible:e.alwaysVisible,size:i?"width":"height"}),t.scrollMovable.bind(Er,t.refresh.bind(t)),t.container.appendChild(n),e.alwaysVisible&&t.show()}refresh(){let e=this,t=e.axis,i=e.dimension,s=i.size,a=s/i.total,l=Math.round(-e.scrollMovable[t]*a),c=Math.round(s*a);this.element.style.display=a>=1?"none":"",l+c>s?c=s-l:l<0&&(c+=l,l=0),e.elementSize!==c&&(e.element.style[e.size]=c+"px",e.elementSize=c),e.movable.moveAxis(t,l)}show(){this.element.style.opacity=.7,this.element.style.visibility="visible"}hide(){this.alwaysVisible||(this.element.style.opacity=0)}}class jc extends le{constructor(e,t){super();let i=this;this.element=e,this._initOptions(t);const s=(o=>{const{mobileOS:e}=ln();return e.ios||e.android})(navigator);i._native=i.options.useNative&&s;const n=ts('<div class="km-scroll-header"/>');if(i._native)return ut(e,"km-native-scroller"),Qf(n,e),void js(i,{scrollElement:e,fixedContainer:e.children[0]});e.style.overflow="hidden",ut(e,"km-scroll-wrapper"),((o,e)=>{for(o.appendChild(e);o.firstChild!==e;)e.appendChild(o.firstChild)})(e,ts('<div class="km-scroll-container"/>')),Qf(n,e);let l=e.children[1],c=new IA(e),h=new Lc(l),d=new RA({element:l,container:e,forcedEnabled:i.options.zoom}),p=this.options.avoidScrolling,u=new Vi(e,{touchAction:"none",allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:i.options.zoom,supportDoubleTap:i.options.supportDoubleTap,start(v){d.refresh();let _=is(v.x.velocity),y=is(v.y.velocity),P=2*_>=y,B=2*y>=_;!i.fixedContainer.contains(v.event.target)&&!p(v)&&i.enabled&&(d.x.enabled&&P||d.y.enabled&&B)?u.capture():u.cancel()}}),g=new LA({movable:h,dimensions:d,userEvents:u,elastic:i.options.elastic}),f=new ZA({movable:h,dimensions:d,userEvents:u,tapCapture:c}),m=new JA({moveTo(v){i.scrollTo(v.x,v.y)}});h.bind(Er,function(){i.scrollTop=-h.y,i.scrollLeft=-h.x,i.trigger("scroll",{scrollTop:i.scrollTop,scrollLeft:i.scrollLeft})}),i.options.mousewheelScrolling&&(this._wheelScrollHandler=this._wheelScroll.bind(this),Gt(e,"wheel",this._wheelScrollHandler)),js(i,{movable:h,dimensions:d,zoomSnapBack:f,animatedScroller:m,userEvents:u,pane:g,tapCapture:c,pulled:!1,enabled:!0,scrollElement:l,scrollTop:0,scrollLeft:0,fixedContainer:e.children[0]}),i._initAxis("x"),i._initAxis("y"),i._wheelEnd=function(){i._wheel=!1,i.userEvents.end(0,i._wheelY)},d.refresh(),i.options.pullToRefresh&&i._initPullToRefresh()}_initOptions(e){this.options=x({},this.options,e)}_wheelScroll(e){if(e.ctrlKey)return;this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);let t=(o=>{const e=o.wheelDeltaY;let t;return o.wheelDelta?(void 0===e||e)&&(t=o.wheelDelta):o.detail&&o.axis===o.VERTICAL_AXIS&&(t=10*-o.detail),t})(e);t&&(this._wheelY+=t,this.userEvents.move(0,this._wheelY)),e.preventDefault()}makeVirtual(){this.dimensions.y.makeVirtual()}virtualSize(e,t){this.dimensions.y.virtualSize(e,t)}height(){return this.dimensions.y.size}scrollHeight(){return this.scrollElement.scrollHeight}scrollWidth(){return this.scrollElement.scrollWidth}_resize(){this._native||this.contentResized()}setOptions(e){this._initOptions(e),e.pullToRefresh&&this._initPullToRefresh()}reset(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))}contentResized(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)}zoomOut(){let e=this.dimensions;e.refresh(),this._scale(e.fitScale),this.movable.moveTo(e.centerCoordinates())}enable(){this.enabled=!0}disable(){this.enabled=!1}scrollTo(e,t){this._native?(this.scrollElement.scrollLeft(is(e)),this.scrollElement.scrollTop(is(t))):(this.dimensions.refresh(),this.movable.moveTo({x:e,y:t}))}animatedScrollTo(e,t,i){let s,n;this._native?this.scrollTo(e,t):(s={x:this.movable.x,y:this.movable.y},n={x:e,y:t},this.animatedScroller.setCoordinates(s,n),this.animatedScroller.setCallback(i),this.animatedScroller.start())}pullHandled(){}destroy(){Jt(this.element,"wheel",this._wheelScrollHandler),this.userEvents&&this.userEvents.destroy()}_scale(e){this.dimensions.rescale(e),this.movable.scaleTo(e)}_initPullToRefresh(){}_dragEnd(){}_paneChange(){}_initAxis(e){let t=this,i=t.movable,s=t.dimensions[e],n=t.tapCapture,a=t.pane[e],l=new qA({axis:e,movable:i,dimension:s,container:t.element,alwaysVisible:t.options.visibleScrollHints});s.bind(Er,function(){l.refresh()}),a.bind(Er,function(){l.show()}),t[e+"inertia"]=new KA({axis:e,paneAxis:a,movable:i,tapCapture:n,userEvents:t.userEvents,dimension:s,elastic:t.options.elastic,friction:t.options.friction||.96,velocityMultiplier:t.options.velocityMultiplier||10,end(){l.hide(),t.trigger("scrollEnd",{axis:e,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft})}})}}w(jc,{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:()=>!1,pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}}),Tr(jc,["pull","scroll","resize"]);const eS=class tS{constructor(e,t={}){this.sender=t.sender||e,this.widget=e,this.rtl=!!t.rtl}notify(e,t){this.widget&&this.widget.trigger(e,t)}};let Di=Math,Am=Di.min,Uc=Di.pow,Sm=j.A,Dr="marker",Or="location";const aS={bubble:mm,shape:Bc,tile:hm,[Dr]:Nc};class Mm extends le{constructor(e,t={},i={},s={}){super(),this._init(e,t,i,s)}destroy(){this.scroller.destroy(),this._tooltip&&this._tooltip.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),Pt(this.markers)?this.markers.forEach(e=>{e.destroy()}):this.markers.destroy();for(let e=0;e<this.layers.length;e++)this.layers[e].destroy();Jt(this.element,"wheel",this._mousewheelHandler),super.destroy()}_init(e,t={},i={},s={}){this.support=ln(),this.context=s,this.initObserver(s),this.initServices(s),this._notifyObserver("init"),this._initOptions(t),this._setEvents(t),this.crs=new xA,this._initElement(e),this._viewOrigin=this._getOrigin(),this._tooltip=this._createTooltip(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset();const n=(0,Gl.A)(this._mousewheel.bind(this),50);this._mousewheelHandler=a=>{a.preventDefault(),n(a)},Gt(this.element,"wheel",this._mousewheelHandler)}_initOptions(e){this.options=x({},this.options,e)}_initElement(e){this.element=e,ut(e,"k-map"),e.style.position="relative",e.setAttribute("data-role","map"),$n(e);const t=ts("<div />");this.element.appendChild(t)}initServices(e={}){this.widgetService=new eS(this,e)}initObserver(e={}){this.observers=[],this.addObserver(e.observer)}addObserver(e){e&&this.observers.push(e)}removeObserver(e){const t=this.observers.indexOf(e);t>=0&&this.observers.splice(t,1)}requiresHandlers(e){const t=this.observers;for(let i=0;i<t.length;i++)if(t[i].requiresHandlers(e))return!0}trigger(e,t={}){t.sender=this;const i=this.observers;let s=!1;for(let n=0;n<i.length;n++)i[n].trigger(e,t)&&(s=!0);return s||super.trigger(e,t),s}_notifyObserver(e,t={}){t.sender=this;const i=this.observers;let s=!1;for(let n=0;n<i.length;n++)i[n].trigger(e,t)&&(s=!0);return s}zoom(e){let i,t=this.options;if(C(e)){const s=Di.round(O(e,t.minZoom,t.maxZoom));t.zoom!==s&&(t.zoom=s,this.widgetService.notify("zoomChange",{zoom:t.zoom}),this._reset()),i=this}else i=t.zoom;return i}center(e){let t;if(e){const i=lt.create(e),s=lt.create(this.options.center);i.equals(s)||(this.options.center=i.toArray(),this.widgetService.notify(rm,{center:this.options.center}),this._reset()),t=this}else t=lt.create(this.options.center);return t}extent(e){let t;return e?(this._setExtent(e),t=this):t=this._getExtent(),t}setOptions(e={}){const t=this.element;this.destroy(),$n(t),this._init(t,e,{},this.context),this._reset()}locationToLayer(e,t){let i=!this.options.wraparound;const s=lt.create(e);return this.crs.toPoint(s,this._layerSize(t),i)}layerToLocation(e,t){let i=!this.options.wraparound;const s=Sm.create(e);return this.crs.toLocation(s,this._layerSize(t),i)}locationToView(e){const t=lt.create(e);let i=this.locationToLayer(this._viewOrigin);return this.locationToLayer(t).translateWith(i.scale(-1))}viewToLocation(e,t){const i=this.locationToLayer(this._getOrigin(),t),n=Sm.create(e).clone().translateWith(i);return this.layerToLocation(n,t)}eventOffset(e){let t,i,s=hs(this.element);if(e.x&&e.x[Or]||e.y&&e.y[Or])t=e.x[Or]-s.left,i=e.y[Or]-s.top;else{let a=e.originalEvent||e;t=R(a.pageX,a.clientX)-s.left,i=R(a.pageY,a.clientY)-s.top}return new j.A(t,i)}eventToView(e){let t=this.eventOffset(e);return this.locationToView(this.viewToLocation(t))}eventToLayer(e){return this.locationToLayer(this.eventToLocation(e))}eventToLocation(e){let t=this.eventOffset(e);return this.viewToLocation(t)}viewSize(){let e=this.element,t=this._layerSize(),i=e.clientWidth;return this.options.wraparound||(i=Am(t,i)),{width:i,height:Am(t,e.clientHeight)}}exportVisual(){return this._reset(),!1}hideTooltip(){this._tooltip&&this._tooltip.hide()}_setOrigin(e,t){let s,i=this.viewSize();const n=this._origin=lt.create(e);return s=this.locationToLayer(n,t),s.x+=i.width/2,s.y+=i.height/2,this.options.center=this.layerToLocation(s,t).toArray(),this.widgetService.notify(rm,{center:this.options.center}),this}_getOrigin(e){let i,t=this.viewSize();return(e||!this._origin)&&(i=this.locationToLayer(this.center()),i.x-=t.width/2,i.y-=t.height/2,this._origin=this.layerToLocation(i)),this._origin}_setExtent(e){let t=ri.create(e),i=t.se.clone();this.options.wraparound&&i.lng<0&&e.nw.lng>0&&(i.lng=180+(180+i.lng));const s=new ri(t.nw,i);this.center(s.center());let l,n=this.element.clientWidth,a=this.element.clientHeight;for(l=this.options.maxZoom;l>=this.options.minZoom;l--){let c=this.locationToLayer(s.nw,l),h=this.locationToLayer(s.se,l),d=Di.abs(h.x-c.x),p=Di.abs(h.y-c.y);if(d<=n&&p<=a)break}this.zoom(l)}_getExtent(){let e=this._getOrigin(),t=this.locationToLayer(e),i=this.viewSize();t.x+=i.width,t.y+=i.height;let s=this.layerToLocation(t);return new ri(e,s)}_zoomAround(e,t){this._setOrigin(this.layerToLocation(e,t),t),this.zoom(t)}_initControls(){let e=this.options.controls;e.attribution&&this._createAttribution(e.attribution),this.support.mobileOS||(e.navigator&&this._createNavigator(e.navigator),e.zoom&&this._createZoomControl(e.zoom))}_createControlElement(e,t){let i=e.position||t,s="."+Jf(i).replace(" ","."),n=this.element.querySelector(".k-map-controls"+s)||[];if(0===n.length){let l=document.createElement("div");ut(l,"k-map-controls "+Jf(i)),n=l,this.element.appendChild(n)}let a=document.createElement("div");return n.appendChild(a),a}_createAttribution(e){let t=this._createControlElement(e,"bottomRight");this.attribution=new qf(t,e)}_createNavigator(e){let t=this._createControlElement(e,"topLeft"),i=this.navigator=new Dc(t,x({},e,{icons:this.options.icons}));this._navigatorPan=this._navigatorPan.bind(this),i.bind("pan",this._navigatorPan),this._navigatorCenter=this._navigatorCenter.bind(this),i.bind("center",this._navigatorCenter)}_navigatorPan(e){let t=this.scroller,i=t.scrollLeft+e.x,s=t.scrollTop-e.y,n=this._virtualSize,l=this.element.clientHeight;i=O(i,n.x.min,n.x.max-this.element.clientWidth),s=O(s,n.y.min,n.y.max-l),this.scroller.one("scroll",_t(this._scrollEnd,this)),this.scroller.scrollTo(-i,-s)}_navigatorCenter(){this.center(this.options.center)}_createZoomControl(e){let t=this._createControlElement(e,"topLeft"),i=this.zoomControl=new Oc(t,e,this.options.icons);this._zoomControlChange=this._zoomControlChange.bind(this),i.bind("change",this._zoomControlChange)}_zoomControlChange(e){this.trigger("zoomStart",{originalEvent:e})||(this.zoom(this.zoom()+e.delta),this.trigger("zoomEnd",{originalEvent:e}))}_initScroller(){let i=this.scroller=new jc(this.element.children[0],{friction:this.support.mobileOS?.93:.9,velocityMultiplier:5,zoom:!1!==this.options.zoomable,mousewheelScrolling:!1,supportDoubleTap:!0});i.bind("scroll",_t(this._scroll,this)),i.bind("scrollEnd",_t(this._scrollEnd,this)),i.userEvents.bind("gesturestart",_t(this._scaleStart,this)),i.userEvents.bind("gestureend",_t(this._scale,this)),i.userEvents.bind("doubleTap",_t(this._doubleTap,this)),i.userEvents.bind("tap",_t(this._tap,this)),this.scrollElement=i.scrollElement}_initLayers(){let e=this.options.layers,t=this.layers=[];for(let i=0;i<e.length;i++){const n=this._createLayer(e[i]);t.push(n)}}_createLayer(e){let t=e.type||"shape",i=this.options.layerDefaults[t],s=t===Dr?x({},this.options.markerDefaults,e,{icons:this.options.icons}):x({},i,e),a=new(0,aS[t])(this,s);return t===Dr&&(this.markers=a),a}_createTooltip(){return new am(this.widgetService,this.options.tooltip)}_initMarkers(){(this.options.layers||[]).filter(t=>t&&t.type===Dr).length>0||(this.markers=new Nc(this,x({},this.options.markerDefaults,{icons:this.options.icons})),this.markers.add(this.options.markers))}_scroll(e){let t=this.locationToLayer(this._viewOrigin).round(),i=e.sender.movable,s=new j.A(i.x,i.y).scale(-1).scale(1/i.scale);t.x+=s.x,t.y+=s.y,this._scrollOffset=s,this._tooltip.offset=s,this.hideTooltip(),this._setOrigin(this.layerToLocation(t)),this.trigger("pan",{originalEvent:e,origin:this._getOrigin(),center:this.center()})}_scrollEnd(e){!this._scrollOffset||!this._panComplete()||(this._scrollOffset=null,this._panEndTimestamp=ui(),this.trigger("panEnd",{originalEvent:e,origin:this._getOrigin(),center:this.center()}))}_panComplete(){return ui()-(this._panEndTimestamp||0)>50}_scaleStart(e){if(this.trigger("zoomStart",{originalEvent:e})){let t=e.touches[1];t&&t.cancel()}}_scale(e){let i=this._scaleToZoom(this.scroller.movable.scale),s=new j.A(e.center.x,e.center.y),n=this.viewToLocation(s,i),l=this.locationToLayer(n,i).translate(-s.x,-s.y);this._zoomAround(l,i),this.trigger("zoomEnd",{originalEvent:e})}_scaleToZoom(e){let i=this._layerSize()*e/this.options.minSize,s=Di.log(i)/Di.log(2);return Di.round(s)}_reset(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.hideTooltip(),this.trigger("beforeReset"),this.trigger("reset")}_resetScroller(){let e=this.scroller,t=e.dimensions.x,i=e.dimensions.y,s=this._layerSize(),n=this.extent().nw,a=this.locationToLayer(n).round();e.movable.round=!0,e.reset(),e.userEvents.cancel();let l=this.zoom();e.dimensions.forcedMinScale=Uc(2,this.options.minZoom-l),e.dimensions.maxScale=Uc(2,this.options.maxZoom-l);let c={min:-a.x,max:s-a.x},h={min:-a.y,max:s-a.y};if(this.options.wraparound&&(c.max=20*s,c.min=-c.max),!1===this.options.pannable){let d=this.viewSize();c.min=h.min=0,c.max=d.width,h.max=d.height}t.makeVirtual(),i.makeVirtual(),t.virtualSize(c.min,c.max),i.virtualSize(h.min,h.max),this._virtualSize={x:c,y:h}}_renderLayers(){}_layerSize(e){const t=R(e,this.options.zoom);return this.options.minSize*Uc(2,t)}_tap(e){if(!this._panComplete())return;let t=this.eventOffset(e);this.hideTooltip(),this.trigger("click",{originalEvent:e,location:this.viewToLocation(t)})}_doubleTap(e){if(!1!==this.options.zoomable&&!this.trigger("zoomStart",{originalEvent:e})){let i=this.zoom()+1,s=this.eventOffset(e),n=this.viewToLocation(s),l=this.locationToLayer(n,i).translate(-s.x,-s.y);this._zoomAround(l,i),this.trigger("zoomEnd",{originalEvent:e})}}_mousewheel(e){let t=ya(e)>0?-1:1,i=this.options,s=this.zoom(),n=O(s+t,i.minZoom,i.maxZoom);if(!1!==i.zoomable&&n!==s&&!this.trigger("zoomStart",{originalEvent:e})){let a=this.eventOffset(e),l=this.viewToLocation(a),h=this.locationToLayer(l,n).translate(-a.x,-a.y);this._zoomAround(h,n),this.trigger("zoomEnd",{originalEvent:e})}}_toDocumentCoordinates(e){const t=hs(this.element);return{left:A(e.x+t.left),top:A(e.y+t.top)}}}w(Mm,{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],icons:{type:"font",svgIcons:{}},zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0,renderPointsAsMarkers:!1}),Tr(Mm,["beforeReset","click","markerActivate","markerClick","markerCreated","markerMouseEnter","markerMouseLeave","pan","panEnd","reset","shapeClick","shapeCreated","shapeFeatureCreated","shapeMouseEnter","shapeMouseLeave","zoomEnd","zoomStart"]);const Gc=(o,e)=>o.map(e).reduce((t,i)=>t+i,0),Ir=(o,e)=>o.y0===e.y0?o.index-e.index:o.y0+o.y1-e.y0-e.y1,hS=(o,e)=>Ir(o.source,e.source),dS=(o,e)=>Ir(o.target,e.target),Hc=o=>o.value;function Xc(o){o.forEach(e=>{e.targetLinks.forEach(t=>{t.source.sourceLinks.sort(dS)}),e.sourceLinks.forEach(t=>{t.target.targetLinks.sort(hS)})})}const pS=(o,e)=>"left"===o.align?o.depth:"right"===o.align?e-o.height:o.sourceLinks.length?o.depth:e;class uS{constructor(e){const{offset:t={},align:i}=e.nodesOptions;this.data={nodes:e.nodes.map(s=>x({},{offset:t,align:i},s)),links:e.links.map(s=>x({},s))},this.width=e.width,this.height=e.height,this.offsetX=e.offsetX||0,this.offsetY=e.offsetY||0,this.nodeWidth=e.nodesOptions.width,this.nodePadding=e.nodesOptions.padding,this.reverse=e.reverse,this.targetColumnIndex=e.targetColumnIndex,this.loops=e.loops,this.autoLayout=e.autoLayout}calculate(){const{nodes:e,links:t}=this.data;this.connectLinksToNodes(e,t),this.calculateNodeValues(e);const i=this.calculateNodeHeights(e);if(i)return{nodes:[],links:[],columns:[],circularLinks:i};this.calculateNodeDepths(e);const s=this.calculateNodeColumns(e);return this.calculateNodeBreadths(s),this.applyNodesOffset(e),this.calculateLinkBreadths(e),Object.assign({},this.data,{columns:s})}connectLinksToNodes(e,t){const i=new Map;e.forEach((s,n)=>{s.index=n,s.sourceLinks=[],s.targetLinks=[],s.id=void 0!==s.id?s.id:s.label.text,i.set(s.id,s)}),t.forEach(s=>{s.source=i.get(s.sourceId),s.target=i.get(s.targetId),s.source.sourceLinks.push(s),s.target.targetLinks.push(s)})}calculateNodeValues(e){e.forEach(t=>{t.value=Math.max(Gc(t.sourceLinks,Hc),Gc(t.targetLinks,Hc))})}calculateNodeDepths(e){let t=new Set(e),i=new Set,s=0;for(;t.size;){const n=Array.from(t);for(let a=0;a<n.length;a++){const l=n[a];l.depth=s;for(let c=0;c<l.sourceLinks.length;c++)i.add(l.sourceLinks[c].target)}s++,t=i,i=new Set}}calculateNodeHeights(e){const t=e.length;let i=new Set(e),s=new Set,n=0;const a=l=>{l.height=n,l.targetLinks.forEach(c=>{s.add(c.source)})};for(;i.size;){if(i.forEach(a),n++,n>t)return!0;i=s,s=new Set}return!1}calculateNodeColumns(e){const t=Math.max.apply(null,e.map(n=>n.depth)),i=(this.width-this.offsetX-this.nodeWidth)/t,s=new Array(t+1);for(let n=0;n<e.length;n++){const a=e[n],l=Math.max(0,Math.min(t,pS(a,t)));a.x0=this.offsetX+l*i,a.x1=a.x0+this.nodeWidth,a.layer=l,s[l]=s[l]||[],s[l].push(a)}return s}calculateNodeBreadths(e){const t=((o,e)=>Math.min.apply(null,o.map(e)))(e,i=>(this.height-this.offsetY-(i.length-1)*this.nodePadding)/Gc(i,Hc));if(e.forEach(i=>{let s=this.offsetY;i.forEach(n=>{n.y0=s,n.y1=s+n.value*t,s=n.y1+this.nodePadding,n.sourceLinks.forEach(a=>{a.width=a.value*t})}),s=(this.height-s+this.nodePadding)/(i.length+1),i.forEach((n,a)=>{n.y0+=s*(a+1),n.y1+=s*(a+1)})}),!1!==this.autoLayout){const i=void 0!==this.loops?this.loops:e.length-1,s=this.targetColumnIndex||1;for(let n=0;n<i;n++)this.reverse?(this.uncurlLinksToRight(e,s),this.uncurlLinksToLeft(e,s)):(this.uncurlLinksToLeft(e,s),this.uncurlLinksToRight(e,s))}e.forEach(Xc)}applyNodesOffset(e){e.forEach(t=>{const i=(t.offset?t.offset.left:0)||0,s=(t.offset?t.offset.top:0)||0;t.x0+=i,t.x1+=i,t.y0+=s,t.y1+=s})}calculateLinkBreadths(e){e.forEach(t=>{const{sourceLinks:i,targetLinks:s}=t;let n=t.y0,a=n;i.forEach(l=>{l.x0=l.source.x1,l.y0=n+l.width/2,n+=l.width}),s.forEach(l=>{l.x1=l.target.x0,l.y1=a+l.width/2,a+=l.width})})}uncurlLinksToRight(e,t){const i=e.length;for(let s=t;s<i;s++){const n=e[s];n.forEach(a=>{let l=0,c=0;a.targetLinks.forEach(d=>{let p=d.value*(a.layer-d.source.layer);l+=this.targetTopPos(d.source,a)*p,c+=p});let h=0===l?0:l/c-a.y0;a.y0+=h,a.y1+=h,Xc([a])}),n.sort(Ir),this.arrangeNodesVertically(n)}}uncurlLinksToLeft(e,t){for(let n=e.length-1-t;n>=0;n--){const a=e[n];for(let l=0;l<a.length;l++){const c=a[l];let h=0,d=0;c.sourceLinks.forEach(u=>{let g=u.value*(u.target.layer-c.layer);h+=this.sourceTopPos(c,u.target)*g,d+=g});let p=0===h?0:h/d-c.y0;c.y0+=p,c.y1+=p,Xc([c])}a.sort(Ir),this.arrangeNodesVertically(a)}}arrangeNodesVertically(e){this.arrangeUp(e,this.height,e.length-1),this.arrangeDown(e,this.offsetY,0)}arrangeDown(e,t,i){let s=t;for(let n=i;n<e.length;n++){const a=e[n],l=Math.max(0,s-a.y0);a.y0+=l,a.y1+=l,s=a.y1+this.nodePadding}}arrangeUp(e,t,i){let s=t;for(let n=i;n>=0;--n){const a=e[n],l=Math.max(0,a.y1-s);a.y0-=l,a.y1-=l,s=a.y0-this.nodePadding}}sourceTopPos(e,t){let i=t.y0-(t.targetLinks.length-1)*this.nodePadding/2;for(let s=0;s<t.targetLinks.length;s++){const n=t.targetLinks[s];if(n.source===e)break;i+=n.width+this.nodePadding}for(let s=0;s<e.sourceLinks.length;s++){const n=e.sourceLinks[s];if(n.target===t)break;i-=n.width}return i}targetTopPos(e,t){let i=e.y0-(e.sourceLinks.length-1)*this.nodePadding/2;for(let s=0;s<e.sourceLinks.length;s++){const n=e.sourceLinks[s];if(n.target===t)break;i+=n.width+this.nodePadding}for(let s=0;s<t.targetLinks.length;s++){const n=t.targetLinks[s];if(n.source===e)break;i-=n.width}return i}}const Us=o=>new uS(o).calculate();function Rr(o,e,t,i,s,n){const a=(n-e)*(t-o),l=(i-e)*(s-o);return a>l?1:a===l?0:-1}function fS(o,e){const t=Rr(o.x0,o.y0,o.x1,o.y1,e.x1,e.y1),i=Rr(o.x0,o.y0,o.x1,o.y1,e.x0,e.y0),s=Rr(o.x0,o.y0,e.x0,e.y0,e.x1,e.y1),n=Rr(o.x1,o.y1,e.x0,e.y0,e.x1,e.y1);return t!==i&&s!==n}class Kn{constructor(e){this.options=x({},this.options,e),this.createVisual()}createVisual(){this.visual=this.createElement()}exportVisual(){return this.visual}createElement(){const e=this.options.visual;let t;return t=e?e({sender:this.getSender(),options:this.visualOptions(),createVisual:()=>this.getElement()}):this.getElement(),t}getSender(){return this}}class Pm extends Kn{getElement(){return M.w.fromRect(this.getRect(),this.visualOptions())}getRect(){const e=this.options.node;return new At.A([e.x0,e.y0],[e.x1-e.x0,e.y1-e.y0])}getLabelText(e){let t=e.labels.ariaTemplate;if(t)return t({node:e.node})}visualOptions(){const e=x({},this.options,this.options.node),t=this.getLabelText(e);return{fill:{color:e.color,opacity:e.opacity},stroke:{width:0},className:"k-sankey-node",role:"graphics-symbol",ariaRoleDescription:"Node",ariaLabel:t}}createFocusHighlight(){if(this.options.navigatable)return this._highlight=M.w.fromRect(this.getRect(),{stroke:this.options.focusHighlight.border,visible:!1}),this._highlight}focus(e){if(this._highlight){const{highlight:t=!0}=e||{};t&&this._highlight.options.set("visible",!0);const i=this.options.node.id;this.visual.options.set("id",i),this.options.root()&&this.options.root().setAttribute(ls,i)}}blur(){this._highlight&&(this._highlight.options.set("visible",!1),this.visual.options.set("id",""),this.options.root()&&this.options.root().removeAttribute(ls))}}const mS=(o,e,t)=>o.color||e[t%e.length],Em=(o,e,t,i)=>{const s=x({},e,e.node);return x({},{color:mS(o,t,i)},s,{node:o},{visual:o.visual,opacity:o.opacity,offset:o.offset,color:o.color})},Lr=(o,e,t,i,s)=>{const n=1-s,a=n*n,l=s*s;return o*a*n+3*e*s*a+3*t*l*n+i*l*s};class _S extends Kn{getElement(){const e=this.options.link,{x0:t,x1:i,y0:s,y1:n}=e,a=(t+i)/2;return new M.w(this.visualOptions()).moveTo(t,s).curveTo([a,s],[a,n],[i,n])}getLabelText(e){let t=e.labels.ariaTemplate;if(t)return t({link:e.link})}visualOptions(){const e=this.options,t=this.options.link,i=this.getLabelText(e);return{stroke:{width:e.link.width,color:t.color||e.color,opacity:C(t.opacity)?t.opacity:e.opacity},role:"graphics-symbol",ariaRoleDescription:"Link",ariaLabel:i}}createFocusHighlight(){if(!this.options.navigatable)return;const{link:e}=this.options,{x0:t,x1:i,y0:s,y1:n}=e,a=(t+i)/2,l=e.width/2,c=((o,e)=>{const t=o.width/2,i=e?o.x1:o.x0,s=e?o.x0:o.x1,n=e?o.y1:o.y0,a=e?o.y0:o.y1,l=(i+s)/2,c=[l,Lr(n,n,a,a,.5)],h=.4999,d=[Lr(i,l,l,s,h),Lr(n,n,a,a,h)],p=function xS(o,e,t,i,s){let l,c,n=(o+t)/2,a=(e+i)/2;if(e===i)l=0,c=s/2;else if(o===t)l=s/2,c=0;else{let u=-1/((i-e)/(t-o));l=s/2/Math.sqrt(1+u*u),c=u*l}return{P1:{x:n-l,y:a-c},P2:{x:n+l,y:a+c}}}(c[0],c[1],d[0],d[1],o.width),u=[l,Lr(n+t,n+t,a+t,a+t,.5)],g=p.P1.y>p.P2.y?p.P1:p.P2,I=function vS(o,e,t,i,s){const n_x=(o.x+e.x)/2,n_y=(o.y+e.y)/2;let c=-(e.y-o.y),h=e.x-o.x;const d=Math.sqrt(c*c+h*h);c=c/d*t,h=h/d*t;const p_x=n_x+c,p_y=n_y+h,u_x=n_x-c,u_y=n_y-h,g=s.x-i.x,f=s.y-i.y,m=f*(p_x-u_x)-g*(p_y-u_y);if(Math.abs(m)<1e-10)return null;const v=(g*(u_y-i.y)-f*(u_x-i.x))/m,_=((p_x-u_x)*(u_y-i.y)-(p_y-u_y)*(u_x-i.x))/m;return v>=0&&v<=1&&_>=0&&_<=1?{x:u_x+v*(p_x-u_x)}:null}(g,{x:u[0],y:u[1]},t,{x:u[0],y:u[1]},{x:Math.max(1,u[0]+(n>a?1:-1)*t),y:u[1]})||{x:(u[0]+g.x)/2};return l-(I.x-.125*i-.125*s)/.75})(e,this.options.rtl);this._highlight=new M.w({stroke:this.options.focusHighlight.border,visible:!1}).moveTo(t,s+l).lineTo(t,s-l).curveTo([a+c,s-l],[a+c,n-l],[i,n-l]).lineTo(i,n+l).curveTo([a-c,n+l],[a-c,s+l],[t,s+l])}focus(e){if(this._highlight){const{highlight:t=!0}=e||{};t&&this._highlight.options.set("visible",!0);const i=`${this.options.link.sourceId}->${this.options.link.targetId}`;this.visual.options.set("id",i),this.options.root()&&this.options.root().setAttribute(ls,i)}}blur(){this._highlight&&(this._highlight.options.set("visible",!1),this.visual.options.set("id",""),this.options.root()&&this.options.root().removeAttribute(ls))}}const Vr="inside",Gs="before",Br="after";class Yc extends Kn{getElement(){const e=x({},this.options,this.options.node.label),{node:t,diagramMinX:i,diagramMaxX:s,text:n,offset:a,rtl:l}=e;let c=e.position;if(l&&c!==Vr&&(c=c===Gs?Br:Gs),!e.visible||!n)return null;const h=new k(t.x0,t.y0,t.x1,t.y1),d=this.visualOptions();l&&!d.align&&(d.align="right");const p=new Ht(n,d);p.reflow(new k);const u=p.box,g=h.center().y-u.height()/2,f=t.x1+u.width()>s,m=t.x0-u.width()<i;let v=c===Gs||c===Vr&&f?Gs:Br;l&&(v=c===Br||c===Vr&&m?Br:Gs);const _=[v===Gs?t.x0-u.width():t.x1,g],y=new k(_[0],_[1],_[0]+u.width(),_[1]+u.height());return y.translate(a.left||0,a.top||0),p.reflow(y),p.renderVisual(),p.visual}visualOptions(){const e=x({},this.options,this.options.node.label);return{color:e.color,font:e.font,border:e.border,margin:e.margin,padding:e.padding,align:e.align,paintOrder:e.paintOrder,stroke:e.stroke}}}w(Yc,{position:Vr});const Dm=(o,e,t,i,s)=>x({},e,{node:o,diagramMinX:i,diagramMaxX:s,rtl:t,visual:o.label.visual,visible:o.label.visible,margin:o.label.margin,padding:o.label.padding,border:o.label.border,align:o.label.align,offset:o.label.offset});class Wc extends Kn{getElement(){const e=this.options,{drawingRect:t,text:i}=e;if(!1===e.visible||!i)return null;const s=pn.buildTitle(i,e);return s.reflow(t),s.renderVisual(),s.visual}createElement(){return this.getElement()}}w(Wc,{align:V,border:{width:0},margin:Z(5),padding:Z(5)});const wS=(o,e)=>o.node.x0-e.node.x0!=0?o.node.x0-e.node.x0:o.node.y0-e.node.y0,CS=(o,e)=>o.node.x1-e.node.x1!=0?o.node.x1-e.node.x1:e.node.y0-o.node.y0;class Fr extends Kn{getElement(){const e=this.options,{drawingRect:t,rtl:i,nodes:s=[],item:n,position:a}=e;if(!1===e.visible||!s.length)return null;const l=e.labels||{};let c;l.content&&(c=kt(l));const h=s.map(u=>{const g=u.label&&u.label.text||"";return{text:c?c({text:g,node:u}):g,area:{background:void 0!==n.areaBackground?n.areaBackground:u.color,opacity:void 0!==n.areaOpacity?n.areaOpacity:u.opacity},node:u}});h.sort(i?CS:wS);const p=new Gu(Object.assign({},e,{data:h,reverse:i&&a!==N&&a!==$}),{rtl:i});return p.reflow(t),p.renderVisual(),p.visual}createElement(){return this.getElement()}}w(Fr,{markers:{visible:!1},item:{type:We,cursor:xa,opacity:1},position:Y,align:V,accessibility:{role:"presentation",ariaLabel:null,ariaRoleDescription:null},border:{width:0}});const Jn="link",Hs="node";class Om extends le{constructor(e,t,i){super(),this._initTheme(i),this._setOptions(t),this._initElement(e),this._initSurface(),t&&t.data&&(this._redraw(),this._initResizeObserver(),this._initNavigation(e))}destroy(){this.unbind(),this._destroySurface(),this._destroyResizeObserver(),this.element&&(this.element.removeEventListener("keydown",this._keydownHandler),this.element.removeEventListener("focus",this._focusHandler),this.element.removeEventListener("mousedown",this._onDownHandler),this.element.removeEventListener("touchstart",this._onDownHandler),this.element.removeEventListener("pointerdown",this._onDownHandler)),this._focusState=null,this.element=null}_initElement(e){this.element=e,ut(e,["k-chart","k-sankey"]),e.setAttribute("role","graphics-document");const{title:t}=this.options;t.text&&e.setAttribute("aria-label",t.text),t.description&&e.setAttribute("aria-roledescription",t.description)}_initSurface(){this.surface||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())}_initNavigation(e){e.tabIndex=e.getAttribute("tabindex")||0,!this.options.disableKeyboardNavigation&&(this._keydownHandler=this._keydown.bind(this),this._focusHandler=this._focus.bind(this),this._blurHandler=this._blur.bind(this),this._onDownHandler=this._onDown.bind(this),e.addEventListener("keydown",this._keydownHandler),e.addEventListener("focus",this._focusHandler),e.addEventListener("blur",this._blurHandler),e.addEventListener("mousedown",this._onDownHandler),e.addEventListener("touchstart",this._onDownHandler),e.addEventListener("pointerdown",this._onDownHandler),this._focusState={node:this.firstFocusableNode(),link:null})}firstFocusableNode(){return this.columns[0][0]}_initResizeObserver(){const e=new ResizeObserver(t=>{t.forEach(i=>{const{width:s,height:n}=i.contentRect;i.target!==this.element||this.size&&this.size.width===s&&this.size.height===n||(this.size={width:s,height:n},this.surface.setSize(this.size),this.resize=!0,this._redraw())})});this._resizeObserver=e,e.observe(this.element)}_createSurface(){return Bi.A.create(this.surfaceElement,{mouseenter:this._mouseenter.bind(this),mouseleave:this._mouseleave.bind(this),mousemove:this._mousemove.bind(this),click:this._click.bind(this)})}_initTheme(e){let t=e||this.theme||{};this.theme=t,this.options=x({},t,this.options)}setLinksOpacity(e){this.linksVisuals.forEach(t=>{this.setOpacity(t,e,t.linkOptions.opacity)})}setLinksInactivityOpacity(e){this.linksVisuals.forEach(t=>{this.setOpacity(t,e,t.linkOptions.highlight.inactiveOpacity)})}setOpacity(e,t,i){e.options.set("stroke",Object.assign({},e.options.stroke,{opacity:C(i)?i:t}))}trigger(e,t){const n=Object.assign({},t,{type:e,targetType:t.element.type,dataItem:t.element.dataItem});return super.trigger(e,n)}_mouseenter(e){const t=e.element,i=t.type===Jn,s=t.type===Hs,n=!(!t.chartElement||!t.chartElement.options.node);if(i&&this.trigger("linkEnter",e)||s&&this.trigger("nodeEnter",e))return;const{highlight:a}=this.options.links;if(i)this.setLinksInactivityOpacity(a.inactiveOpacity),this.setOpacity(t,a.opacity,t.linkOptions.highlight.opacity);else if(s)this.highlightLinks(t,a);else if(n){const l=this.nodesVisuals.get(t.chartElement.options.node.id);this.highlightLinks(l,a)}}_mouseleave(e){const t=e.element,i=t.type===Jn,s=t.type===Hs,n=!(!t.chartElement||!t.chartElement.options.node),a=e.originalEvent.relatedTarget;i&&a&&"text"===a.nodeName||((i||s)&&(this.tooltipTimeOut&&(clearTimeout(this.tooltipTimeOut),this.tooltipTimeOut=null),this.tooltipShown=!1,this.trigger("tooltipHide",e)),!(i&&this.trigger("linkLeave",e)||s&&this.trigger("nodeLeave",e))&&(i||s||n)&&this.linksVisuals.forEach(l=>{this.setOpacity(l,this.options.links.opacity,l.linkOptions.opacity)}))}_mousemove(e){const{followPointer:t,delay:i}=this.options.tooltip,s=e.element,n=s.type;if(n!==Jn&&n!==Hs||this.tooltipShown&&!t)return;const a=e.originalEvent,l=this.element.getBoundingClientRect();if(e.tooltipData={popupOffset:{left:a.pageX,top:a.pageY},popupAlign:{horizontal:a.clientX-l.left<l.width/2?"left":"right",vertical:a.clientY-l.top<l.height/2?"top":"bottom"}},n===Hs){const{sourceLinks:p,targetLinks:u}=s.dataItem;e.nodeValue=(u.length?u:p).reduce((f,m)=>f+m.value,0)}this.tooltipTimeOut&&(clearTimeout(this.tooltipTimeOut),this.tooltipTimeOut=null),this.tooltipTimeOut=setTimeout(()=>{this.trigger("tooltipShow",e),this.tooltipShown=!0,this.tooltipTimeOut=null},t&&this.tooltipShown?0:i)}_click(e){const t=e.element,i=t.dataItem,s=t.type===Jn,a=this._focusState||{};if(t.type===Hs)!a.link&&this.sameNode(a.node,i)||(this._focusState={node:i,link:null},this._focusNode({highlight:!1})),this.trigger("nodeClick",e);else if(s){const l={sourceId:i.source.id,targetId:i.target.id,value:i.value};this.sameLink(a.link,l)||(this._focusState={node:i.source,link:l},this._focusLink({highlight:!1})),this.trigger("linkClick",e)}}sameNode(e,t){return e&&t&&e.id===t.id}sameLink(e,t){return e&&t&&e.sourceId===t.sourceId&&e.targetId===t.targetId}_focusNode(e){this._cleanFocusHighlight(),this.models.map.get(this._focusState.node.id).focus(e)}_focusLink(e){this._cleanFocusHighlight();const t=this._focusState.link;this.models.map.get(`${t.sourceId}-${t.targetId}`).focus(e)}_focusNextNode(e=1){const t=this._focusState.node,i=this.columns.findIndex(l=>l.find(c=>c.id===t.id)),s=this.columns[i],n=s.findIndex(l=>l.id===t.id),a=s[n+e];a&&(this._focusState.node=a,this._focusNode())}_focusNextLink(e=1){const t=this._focusState.node,i=this._focusState.link,s=t.sourceLinks.findIndex(a=>a.sourceId===i.sourceId&&a.targetId===i.targetId),n=t.targetLinks.findIndex(a=>a.sourceId===i.sourceId&&a.targetId===i.targetId);if(-1!==s){const a=t.sourceLinks[s+e];a&&(this._focusState.link=a,this._focusLink())}else if(-1!==n){const a=t.targetLinks[n+e];a&&(this._focusState.link=a,this._focusLink())}}_focusSourceNode(){const t=this.models.map.get(this._focusState.link.sourceId);this._focusState={node:t.options.node,link:null},this._focusNode()}_focusTargetNode(){const t=this.models.map.get(this._focusState.link.targetId);this._focusState={node:t.options.node,link:null},this._focusNode()}_focusSourceLink(){const i=this._focusState.node.sourceLinks[0];i&&(this._focusState.link=i,this._focusLink())}_focusTargetLink(){const i=this._focusState.node.targetLinks[0];i&&(this._focusState.link=i,this._focusLink())}_focus(){this._skipFocusHighlight||(this._focusState.link?this._focusLink():this._focusNode()),this._skipFocusHighlight=!1}_blur(){this._cleanFocusHighlight()}_onDown(){this._hasFocus()||(this._skipFocusHighlight=!0)}_hasFocus(){return this.element.ownerDocument.activeElement===this.element}_cleanFocusHighlight(){this.models.nodes.forEach(e=>e.blur()),this.models.links.forEach(e=>e.blur())}_keydown(e){let t=this["on"+e.key];const i=this.options.rtl;i&&"ArrowLeft"===e.key?t=this.onArrowRight:i&&"ArrowRight"===e.key&&(t=this.onArrowLeft),t&&t.call(this,e)}onEscape(e){e.preventDefault(),this._focusState={node:this.firstFocusableNode(),link:null},this._focusNode()}onArrowDown(e){e.preventDefault(),this._focusState.link?this._focusNextLink(1):this._focusNextNode(1)}onArrowUp(e){e.preventDefault(),this._focusState.link?this._focusNextLink(-1):this._focusNextNode(-1)}onArrowLeft(e){e.preventDefault(),this._focusState.link?this._focusSourceNode():this._focusTargetLink()}onArrowRight(e){e.preventDefault(),this._focusState.link?this._focusTargetNode():this._focusSourceLink()}highlightLinks(e,t){e&&(this.setLinksInactivityOpacity(t.inactiveOpacity),e.links.forEach(i=>{this.setOpacity(i,t.opacity,i.linkOptions.highlight.opacity)}))}_destroySurface(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())}_destroyResizeObserver(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}_initSurfaceElement(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.element.appendChild(this.surfaceElement))}_destroySurfaceElement(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)}setOptions(e,t){this._setOptions(e),this._initTheme(t),this._initSurface(),this._redraw()}_redraw(){this.surface.clear();const{width:e,height:t}=this._getSize();this.size={width:e,height:t},this.surface.setSize(this.size),this.createVisual(),this.surface.draw(this.visual)}_getSize(){return this.element.getBoundingClientRect()}createVisual(){this.visual=this._render()}titleBox(e,t){return e&&!1!==e.visible&&e.text?new Wc(Object.assign({},{drawingRect:t},e)).exportVisual().chartElement.box:null}legendBox(e,t,i){return e&&!1!==e.visible?new Fr(Object.assign({},{nodes:t},e,{drawingRect:i})).exportVisual().chartElement.box:null}calculateSankey(e,t){const{title:i,legend:s,data:n,nodes:a,labels:l,nodeColors:c,disableAutoLayout:h,disableKeyboardNavigation:d,rtl:p}=t,u=!h,f=d?0:(((a.focusHighlight||{}).border||{}).width||0)/2,m=new k(0,0,e.width,e.height);m.unpad(f);const v=this.titleBox(i,m);let _=m.clone();if(v){const J=v.height();i.position===U?(m.unpad({top:J}),_=new k(0,J,e.width,e.height)):(m.shrink(0,J),_=new k(0,0,e.width,e.height-J))}const y=this.legendBox(s,n.nodes,_),P=s&&s.position||Fr.prototype.options.position;y&&(P===N&&m.unpad({left:y.width()}),P===$&&m.shrink(y.width(),0),P===U&&m.unpad({top:y.height()}),P===Y&&m.shrink(0,y.height()));const{nodes:I,circularLinks:B}=Us(Object.assign({},e,{offsetX:0,offsetY:0,width:m.width(),height:m.height()}));if(B)return console.warn("Circular links detected. Kendo Sankey diagram does not support circular links."),{sankey:{nodes:[],links:[],columns:[[]],circularLinks:B},legendBox:y,titleBox:v};const G=new k,Q=I.reduce((J,Ft)=>Math.min(J,Ft.x0),1/0),tt=I.reduce((J,Ft)=>Math.max(J,Ft.x1),0);I.forEach((J,Ft)=>{if(p){const{x0:nD,x1:oD}=J;J.x0=tt-oD,J.x1=tt-nD}const Bh=Em(J,a,c,Ft),la=new Pm(Bh);G.wrap(ms(la.exportVisual().rawBBox()));const wv=new Yc(Dm(J,l,p,Q,tt)).exportVisual();wv&&G.wrap(ms(wv.rawBBox()))});let mt=m.x1,rt=m.y1,oe=m.width()+mt,Bt=m.height()+rt;if(oe-=G.x2>m.width()?G.x2-m.width():0,Bt-=G.y2>m.height()?G.y2-m.height():0,mt+=G.x1<0?-G.x1:0,rt+=G.y1<0?-G.y1:0,!1===u)return{sankey:Us(Object.assign({},e,{offsetX:mt,offsetY:rt,width:oe,height:Bt,autoLayout:!1})),legendBox:y,titleBox:v};if(this.resize&&u&&this.permutation)return this.resize=!1,{sankey:Us(Object.assign({},e,{offsetX:mt,offsetY:rt,width:oe,height:Bt},this.permutation)),legendBox:y,titleBox:v};const nt=Us(Object.assign({},e,{offsetX:mt,offsetY:rt,width:oe,height:Bt,autoLayout:!1})).columns.length,ct=[],St=(J,Ft)=>{let la=(o=>{let e=0;const t=o.length;for(let i=0;i<t;i++){const s=o[i];for(let n=i+1;n<t;n++){const a=o[n];fS(s,a)&&(e+=Math.min(s.value,a.value))}}return e})(Us(Object.assign({},e,{offsetX:mt,offsetY:rt,width:oe,height:Bt,loops:2,targetColumnIndex:J,reverse:Ft})).links);return ct.push({crosses:la,reverse:Ft,targetColumnIndex:J}),0===la};for(let J=1;J<=nt-1&&!St(J,!1)&&!St(J,!0);J++);const It=Math.min.apply(null,ct.map(J=>J.crosses)),fe=ct.find(J=>J.crosses===It);return this.permutation={targetColumnIndex:fe.targetColumnIndex,reverse:fe.reverse},{sankey:Us(Object.assign({},e,{offsetX:mt,offsetY:rt,width:oe,height:Bt},this.permutation)),legendBox:y,titleBox:v}}_render(e,t){const i=e||this.options,s=t||this,{labels:n,nodes:a,links:l,nodeColors:c,title:h,legend:d,rtl:p,disableKeyboardNavigation:u}=i;let g=i.data;const{width:f,height:m}=s.size,v=Object.assign({},g,{width:f,height:m,nodesOptions:a,title:h,legend:d}),{sankey:_,titleBox:y,legendBox:P}=this.calculateSankey(v,i);p&&(o=>{const{nodes:e,links:t}=o,i=Math.min(...e.map(a=>a.x0)),n=Math.max(...e.map(a=>a.x1))-i;e.forEach(a=>{const c=n-(a.x0-2*i);a.x0=n-(a.x1-2*i),a.x1=c}),t.forEach(a=>{const c=n-(a.x0-2*i);a.x1=n-(a.x1-2*i),a.x0=c})})(_);const{nodes:I,links:B,columns:G}=_;s.columns=G.map(nt=>{const ct=nt.slice();return ct.sort((St,It)=>St.y0-It.y0),ct});const Q=new et.A({clip:M.w.fromRect(new At.A([0,0],[f,m]))});if(y){const ct=new Wc(Object.assign({},h,{drawingRect:y})).exportVisual();Q.append(ct)}if(_.circularLinks)return Q;const tt=new Map;s.nodesVisuals=tt;const mt={nodes:[],links:[],map:new Map};s.models=mt;const rt=[];I.forEach((nt,ct)=>{const St=Em(nt,a,c,ct);St.root=()=>s.element,St.navigatable=!0!==u;const It=new Pm(St),fe=It.exportVisual();fe.links=[],fe.type=Hs,nt.color=St.color,nt.opacity=St.opacity,fe.dataItem=Object.assign({},g.nodes[ct],{color:St.color,opacity:St.opacity,sourceLinks:nt.sourceLinks.map($t=>({sourceId:$t.sourceId,targetId:$t.targetId,value:$t.value})),targetLinks:nt.targetLinks.map($t=>({sourceId:$t.sourceId,targetId:$t.targetId,value:$t.value}))}),tt.set(nt.id,fe),mt.nodes.push(It),mt.map.set(nt.id,It),Q.append(fe),It.createFocusHighlight(),It._highlight&&rt.push(It._highlight)});const oe=B.slice().sort((nt,ct)=>ct.value-nt.value),Bt=[];s.linksVisuals=Bt,oe.forEach(nt=>{const{source:ct,target:St}=nt,It=tt.get(ct.id),fe=tt.get(St.id),$t=((o,e,t,i)=>{const s=x({},e,{link:o,opacity:o.opacity,color:o.color,colorType:o.colorType,visual:o.visual,highlight:o.highlight});return"source"===s.colorType?s.color=t.options.fill.color:"target"===s.colorType&&(s.color=i.options.fill.color),s})(nt,l,It,fe);$t.root=()=>s.element,$t.navigatable=!0!==u,$t.rtl=p;const J=new _S($t),Ft=J.exportVisual();Ft.type=Jn,Ft.dataItem={source:Object.assign({},It.dataItem),target:Object.assign({},fe.dataItem),value:nt.value},Ft.linkOptions=$t,Bt.push(Ft),It.links.push(Ft),fe.links.push(Ft),mt.links.push(J),mt.map.set(`${ct.id}-${St.id}`,J),J.createFocusHighlight(),J._highlight&&rt.push(J._highlight),Q.append(Ft)});const po=I.reduce((nt,ct)=>Math.min(nt,ct.x0),1/0),uo=I.reduce((nt,ct)=>Math.max(nt,ct.x1),0);if(I.forEach(nt=>{const ct=Dm(nt,n,p,po,uo),It=new Yc(ct).exportVisual();It&&Q.append(It)}),P){const ct=new Fr(Object.assign({},d,{rtl:p,drawingRect:P,nodes:I})).exportVisual();Q.append(ct)}if(0!==rt.length){const nt=new et.A;nt.append(...rt),Q.append(nt)}return Q}exportVisual(e){const t=e&&e.options?x({},this.options,e.options):this.options,i={size:{width:C(e&&e.width)?e.width:this.size.width,height:C(e&&e.height)?e.height:this.size.height}};return this._render(t,i)}_setOptions(e){this.options=x({},this.options,e)}}const Im={opacity:1,width:2,color:pt};w(Om,{title:{position:U},labels:{visible:!0,margin:{left:8,right:8},padding:0,border:{width:0},paintOrder:"stroke",stroke:{lineJoin:"round",width:1},offset:{left:0,top:0}},nodes:{width:24,padding:16,opacity:1,align:"stretch",offset:{left:0,top:0},focusHighlight:{border:Object.assign({},Im)},labels:{ariaTemplate:({node:o})=>o.label.text}},links:{colorType:"static",opacity:.4,highlight:{opacity:.8,inactiveOpacity:.2},focusHighlight:{border:Object.assign({},Im)},labels:{ariaTemplate:({link:o})=>`${o.source.label.text} to ${o.target.label.text}`}},tooltip:{followPointer:!1,delay:200}});const F=Object.freeze({seriesType:0,stacked:1,categoryAxisX:2,valueAxisY:3,seriesChange:4,areaMarginLeft:5,areaMarginRight:6,areaMarginTop:7,areaMarginBottom:8,areaBackground:9,titleText:10,titleFontName:11,titleFontSize:12,titleColor:13,subtitleText:14,subtitleFontName:15,subtitleFontSize:16,subtitleColor:17,seriesColor:18,seriesLabel:19,legendVisible:20,legendFontName:21,legendFontSize:22,legendColor:23,legendPosition:24,categoryAxisTitleText:25,categoryAxisTitleFontName:26,categoryAxisTitleFontSize:27,categoryAxisTitleColor:28,categoryAxisLabelsFontName:29,categoryAxisLabelsFontSize:30,categoryAxisLabelsColor:31,categoryAxisLabelsRotation:32,categoryAxisReverseOrder:33,valueAxisTitleText:34,valueAxisTitleFontName:35,valueAxisTitleFontSize:36,valueAxisTitleColor:37,valueAxisLabelsFormat:38,valueAxisLabelsFontName:39,valueAxisLabelsFontSize:40,valueAxisLabelsColor:41,valueAxisLabelsRotation:42}),$c="12px",Lm=[{text:"Arial",value:"Arial, Helvetica, sans-serif",style:{fontFamily:"Arial, Helvetica, sans-serif"}},{text:"Courier New",value:"'Courier New', Courier, monospace",style:{fontFamily:"'Courier New', Courier, monospace"}},{text:"Georgia",value:"Georgia, serif",style:{fontFamily:"Georgia, serif"}},{text:"Impact",value:"Impact, Charcoal, sans-serif",style:{fontFamily:"Impact, Charcoal, sans-serif"}},{text:"Lucida Console",value:"'Lucida Console', Monaco, monospace",style:{fontFamily:"'Lucida Console', Monaco, monospace"}},{text:"Tahoma",value:"Tahoma, Geneva, sans-serif",style:{fontFamily:"Tahoma, Geneva, sans-serif"}},{text:"Times New Roman",value:"'Times New Roman', Times,serif",style:{fontFamily:"'Times New Roman', Times,serif"}},{text:"Trebuchet MS",value:"'Trebuchet MS', Helvetica, sans-serif",style:{fontFamily:"'Trebuchet MS', Helvetica, sans-serif"}},{text:"Verdana",value:"Verdana, Geneva, sans-serif",style:{fontFamily:"Verdana, Geneva, sans-serif"}}],ss=Lm[0].value,Fm="scatter",IS=["column","bar","line",Fm],RS={type:"line",width:0};function qn(o){return o&&IS.includes(o)}const to=["string","date","number"],eo=["number"],Nm={bar:[{axisType:"category",types:to},{axisType:"value",types:eo}],column:[{axisType:"category",types:to},{axisType:"value",types:eo}],line:[{axisType:"category",types:to},{axisType:"value",types:eo}],pie:[{axisType:"category",types:to},{axisType:"value",types:eo,count:1}],scatter:[{axisType:"category",types:to},{axisType:"value",types:eo}]};function zm(o,e){return`${e||""} ${o||""}`.trim()}function Qc(o){const e=(o||"").indexOf(" ");return{size:o&&o.substring(0,e),name:o&&o.substring(e+1)}}const ns=(o,e,t)=>{const{size:i}=Qc(t);return o?zm(o,i||e):""},os=(o,e,t)=>{const{name:i}=Qc(t);return o?zm(i||e,o):""},io=o=>null!=o,jm=o=>{const e=structuredClone(o[0]);return e.forEach((t,i)=>{if(!io(t.value))for(let s=0;s<o.length;s++){const n=o[s][i].value;if(io(n)){t.value=n;break}}}),e},Um=(o,e)=>{const t=[],i=jm(o);e.types.forEach(n=>{i.forEach((a,l)=>{typeof a.value===n&&t.push(l)})});const s=t.findIndex(n=>{const a=o.map(l=>l[n].value);return new Set(a).size===a.length});return Math.max(s,0)},Gm=(o,e)=>{const t=[],i=jm(o);return e.forEach(s=>{s.types.forEach(n=>{i.forEach((a,l)=>{typeof a.value===n&&t.push(l)})})}),t},Hm=()=>structuredClone({columns:[],data:[],series:[],initialSeries:[],categoryAxis:[{categories:[],labels:{visible:!0,rotation:"auto"},title:{text:""}}],valueAxis:[{labels:{visible:!0,rotation:"auto"}}],area:{margin:{left:void 0,right:void 0,top:void 0,bottom:void 0}},title:{text:""},subtitle:{text:""},stack:!1}),Xm=(o,e,t)=>{const i=Hm();i.seriesType=e,i.data=o||[],i.legend={visible:!0,position:"bottom"};const s=Nm[e];if(!s||!o.length)return i;const n=o[0].slice();i.columns=o[0].map(u=>String(u.field));const a=s.find(u=>"category"===u.axisType);let l=-1;a&&(l=t&&t.categoryAxis?i.columns.indexOf(t.categoryAxis):Um(o,a));const c=s.filter(u=>"value"===u.axisType);let h=Gm(o,c);h.includes(l)&&(h.length>1?h=h.filter(u=>u!==l):l=-1);const d=[];h.forEach(u=>{const g=n[u],f=[];o.forEach(m=>{f.push(m[u].value)}),d.push(Object.assign({},{name:g.field,type:e,data:f,stack:!1,labels:{visible:!1}},e===Fm?RS:{}))});const p=l>-1?o.map(u=>String(io(u[l].value)?u[l].value:" ")):[];return d.length&&(i.series=d.map((u,g)=>Object.assign({},u,{id:g})),i.initialSeries=structuredClone(i.series)),i.categoryAxis=[{categories:p,labels:{visible:!0,rotation:"auto"}}],i.categoryField=i.columns[l],i},Zc=(o,e,t)=>{const i=Hm();i.seriesType=e,i.data=o||[];const s=Nm[e];if(!s||!o.length)return i;const n=o[0].map(u=>u.field),a=s.find(u=>"category"===u.axisType);let l=-1;a&&(l=t&&t.categoryAxis?n.indexOf(t.categoryAxis):Um(o,a));const c=s.filter(u=>"value"===u.axisType);let h=[];h=t&&t.valueAxis?[n.indexOf(t.valueAxis)]:Gm(o,c),h.includes(l)&&h.length>1&&(h=h.filter(u=>u!==l)),"number"==typeof c[0].count&&(h=h.slice(0,c[0].count));const d=l>-1?o.map(u=>String(u[l].value)):[],p=[];return o.forEach(u=>{const g={};h.forEach(f=>{const m=u[f];g[m.field]=m.value||0,g[u[l].field]=u[l].value||" "}),p.push(g)}),i.columns=n,i.categoryAxis=[{categories:d,title:{text:""}}],i.series=[{id:0,data:p,type:e,name:n[l],labels:{visible:!0},categoryField:n[l],field:n[h[0]]}],i.categoryField=n[l],i.valueField=n[h[0]],i.initialSeries=structuredClone(i.series),i};function Kc(o,e){return(qn(e)?Xm:Zc)(o,e)}function Nr(o,e){const t=structuredClone(e);if(t.legend=o.legend,t.area=o.area,t.title=o.title,t.subtitle=o.subtitle,t.series.length===o.series.length)for(let i=0;i<t.series.length;i++)t.series[i].color=o.series[i].color,t.series[i].labels=o.series[i].labels;return o.series.every(i=>i.labels&&i.labels.visible)&&qn(t.seriesType)&&qn(o.seriesType)&&t.series.forEach(i=>{i.labels=i.labels||{},i.labels.visible=!0}),t}function Ym(o,e,t){const i=Object.assign({},o);switch(e){case F.seriesType:return Kc(i.data,t);case F.stacked:return i.series=i.series.map(s=>Object.assign({},s,{stack:t})),i.stack=t,i;case F.categoryAxisX:return i.seriesType&&qn(i.seriesType)?Nr(i,Xm(i.data,i.seriesType,{categoryAxis:t})):"pie"===i.seriesType?Nr(i,Zc(i.data,i.seriesType,{categoryAxis:t})):i;case F.valueAxisY:return"pie"===i.seriesType?Nr(i,Zc(i.data,i.seriesType,{categoryAxis:i.categoryField,valueAxis:t})):i;case F.seriesChange:return i.series=t,i;case F.areaMarginLeft:return i.area=Object.assign({},i.area,{margin:Object.assign({},i.area&&i.area.margin||{},{left:t})}),i;case F.areaMarginRight:return i.area=Object.assign({},i.area,{margin:Object.assign({},i.area&&i.area.margin||{},{right:t})}),i;case F.areaMarginTop:return i.area=Object.assign({},i.area,{margin:Object.assign({},i.area&&i.area.margin||{},{top:t})}),i;case F.areaMarginBottom:return i.area=Object.assign({},i.area,{margin:Object.assign({},i.area&&i.area.margin||{},{bottom:t})}),i;case F.areaBackground:return i.area=Object.assign({},i.area,{background:t}),i;case F.titleText:return i.title=Object.assign({},i.title,{text:t}),i;case F.titleFontName:return i.title=Object.assign({},i.title,{font:ns(t,"20px",i.title&&i.title.font)}),i;case F.titleFontSize:return i.title=Object.assign({},i.title,{font:os(t,ss,i.title&&i.title.font)}),i;case F.titleColor:return i.title=Object.assign({},i.title,{color:t}),i;case F.subtitleText:return i.subtitle=Object.assign({},i.subtitle,{text:t}),i;case F.subtitleFontName:return i.subtitle=Object.assign({},i.subtitle,{font:ns(t,"16px",i.subtitle&&i.subtitle.font)}),i;case F.subtitleFontSize:return i.subtitle=Object.assign({},i.subtitle,{font:os(t,ss,i.subtitle&&i.subtitle.font)}),i;case F.subtitleColor:return i.subtitle=Object.assign({},i.subtitle,{color:t}),i;case F.seriesColor:return i.series=i.series.map(s=>Object.assign({},s,{color:t.seriesName===s.name?t.color:s.color})),i;case F.seriesLabel:return i.series=i.series.map(s=>t.all||t.seriesName===s.name?Object.assign({},s,{labels:{visible:t.visible}}):s),i;case F.legendVisible:return i.legend=Object.assign({},i.legend,{visible:t}),i;case F.legendFontName:{const s=i.legend||{};return i.legend=Object.assign({},s,{labels:Object.assign({},s.labels,{font:ns(t,$c,s.labels&&s.labels.font)})}),i}case F.legendFontSize:{const s=i.legend||{};return i.legend=Object.assign({},s,{labels:Object.assign({},s.labels,{font:os(t,ss,s.labels&&s.labels.font)})}),i}case F.legendColor:{const s=i.legend||{};return i.legend=Object.assign({},s,{labels:Object.assign({},s.labels,{color:t})}),i}case F.legendPosition:return i.legend=Object.assign({},i.legend,{position:t}),i;case F.categoryAxisTitleText:return i.categoryAxis=(i.categoryAxis||[]).map(s=>Object.assign({},s,{title:Object.assign({},s.title,{text:t})})),i;case F.categoryAxisTitleFontName:return i.categoryAxis=(i.categoryAxis||[]).map(s=>Object.assign({},s,{title:Object.assign({},s.title,{font:ns(t,"16px",s.title&&s.title.font)})})),i;case F.categoryAxisTitleFontSize:return i.categoryAxis=(i.categoryAxis||[]).map(s=>Object.assign({},s,{title:Object.assign({},s.title,{font:os(t,ss,s.title&&s.title.font)})})),i;case F.categoryAxisTitleColor:return i.categoryAxis=(i.categoryAxis||[]).map(s=>Object.assign({},s,{title:Object.assign({},s.title,{color:t})})),i;case F.categoryAxisLabelsFontName:return i.categoryAxis=(i.categoryAxis||[]).map(s=>Object.assign({},s,{labels:Object.assign({},s.labels,{font:ns(t,$c,s.labels&&s.labels.font)})})),i;case F.categoryAxisLabelsFontSize:return i.categoryAxis=(i.categoryAxis||[]).map(s=>Object.assign({},s,{labels:Object.assign({},s.labels,{font:os(t,ss,s.labels&&s.labels.font)})})),i;case F.categoryAxisLabelsColor:return i.categoryAxis=(i.categoryAxis||[]).map(s=>Object.assign({},s,{labels:Object.assign({},s.labels,{color:t})})),i;case F.categoryAxisLabelsRotation:{const s=io(t)?t:"auto";return i.categoryAxis=(i.categoryAxis||[]).map(n=>Object.assign({},n,{labels:Object.assign({},n.labels,{rotation:s})})),i}case F.categoryAxisReverseOrder:return i.categoryAxis=(i.categoryAxis||[]).map(s=>Object.assign({},s,{reverse:t})),i;case F.valueAxisTitleText:return i.valueAxis=i.valueAxis&&0!==i.valueAxis.length?(i.valueAxis||[]).map(s=>Object.assign({},s,{title:Object.assign({},s.title,{text:t})})):[{title:{text:t}}],i;case F.valueAxisTitleFontName:return i.valueAxis=(i.valueAxis||[]).map(s=>Object.assign({},s,{title:Object.assign({},s.title,{font:ns(t,"16px",s.title&&s.title.font)})})),i;case F.valueAxisTitleFontSize:return i.valueAxis=(i.valueAxis||[]).map(s=>Object.assign({},s,{title:Object.assign({},s.title,{font:os(t,ss,s.title&&s.title.font)})})),i;case F.valueAxisTitleColor:return i.valueAxis=(i.valueAxis||[]).map(s=>Object.assign({},s,{title:Object.assign({},s.title,{color:t})})),i;case F.valueAxisLabelsFormat:return i.valueAxis=(i.valueAxis||[]).map(s=>Object.assign({},s,{labels:Object.assign({},s.labels,{format:t})})),i;case F.valueAxisLabelsFontName:return i.valueAxis=(i.valueAxis||[]).map(s=>Object.assign({},s,{labels:Object.assign({},s.labels,{font:ns(t,$c,s.labels&&s.labels.font)})})),i;case F.valueAxisLabelsFontSize:return i.valueAxis=(i.valueAxis||[]).map(s=>Object.assign({},s,{labels:Object.assign({},s.labels,{font:os(t,ss,s.labels&&s.labels.font)})})),i;case F.valueAxisLabelsColor:return i.valueAxis=(i.valueAxis||[]).map(s=>Object.assign({},s,{labels:Object.assign({},s.labels,{color:t})})),i;case F.valueAxisLabelsRotation:{const s=io(t)?t:"auto";return i.valueAxis=(i.valueAxis||[]).map(n=>Object.assign({},n,{labels:Object.assign({},n.labels,{rotation:s})})),i}default:return i}}const VS=Object.freeze({windowTitle:"Chart Preview",exportButton:"Export",exportPDFButton:"PDF File",exportSVGButton:"SVG File",exportPNGButton:"PNG File",tabChart:"Chart",tabData:"Data",tabFormat:"Format",barChart:"Bar Chart",barChartBar:"Bar",barChartStackedBar:"Stacked Bar",barChart100StackedBar:"100% Stacked Bar",pieChart:"Pie Chart",pieChartPie:"Pie",columnChart:"Column Chart",columnChartColumn:"Column",columnChartStackedColumn:"Stacked Column",columnChart100StackedColumn:"100% Stacked Column",lineChart:"Line Chart",lineChartLine:"Line",lineChartStackedLine:"Stacked Line",lineChart100StackedLine:"100% Stacked Line",scatterChart:"Scatter Chart",scatterChartScatter:"Scatter",configuration:"Configuration",configurationCategoryAxis:"Category Axis",configurationXAxis:"X Axis",configurationValueAxis:"Value Axis",configurationSeries:"Series",configurationSeriesAdd:"Add",formatChartArea:"Chart Area",formatChartAreaMargins:"Margins",formatChartAreaMarginsAuto:"Auto",formatChartAreaMarginsLeft:"Left",formatChartAreaMarginsRight:"Right",formatChartAreaMarginsTop:"Top",formatChartAreaMarginsBottom:"Bottom",formatChartAreaBackground:"Background",formatChartAreaBackgroundColor:"Color",formatTitle:"Title",formatTitleApplyTo:"Apply to",formatTitleChartTitle:"Chart Title",formatTitleChartSubtitle:"Chart Subtitle",formatTitleLabel:"Title",formatTitleFont:"Font",formatTitleFontPlaceholder:"(inherited font)",formatTitleSize:"Size",formatTitleSizePlaceholder:"px",formatTitleColor:"Color",formatSeries:"Series",formatSeriesApplyTo:"Apply to",formatSeriesAllSeries:"All Series",formatSeriesColor:"Color",formatSeriesShowLabels:"Show Labels",formatLegend:"Legend",formatLegendShowLegend:"Show Legend",formatLegendFont:"Font",formatLegendFontPlaceholder:"(inherited font)",formatLegendSize:"Size",formatLegendSizePlaceholder:"px",formatLegendColor:"Color",formatLegendPosition:"Position",formatLegendPositionTop:"Top",formatLegendPositionBottom:"Bottom",formatLegendPositionLeft:"Left",formatLegendPositionRight:"Right",formatCategoryAxis:"Category Axis",formatXAxis:"X Axis",formatCategoryAxisTitle:"Title",formatCategoryAxisTitlePlaceholder:"Axis Title",formatCategoryAxisTitleFont:"Font",formatCategoryAxisTitleFontPlaceholder:"(inherited font)",formatCategoryAxisTitleSize:"Size",formatCategoryAxisTitleSizePlaceholder:"px",formatCategoryAxisTitleColor:"Color",formatCategoryAxisLabels:"Labels",formatCategoryAxisLabelsFont:"Font",formatCategoryAxisLabelsFontPlaceholder:"(inherited font)",formatCategoryAxisLabelsSize:"Size",formatCategoryAxisLabelsSizePlaceholder:"px",formatCategoryAxisLabelsColor:"Color",formatCategoryAxisLabelsRotation:"Rotation",formatCategoryAxisLabelsRotationAuto:"Auto",formatCategoryAxisLabelsReverseOrder:"Reverse Order",formatValueAxis:"Value Axis",formatYAxis:"Y Axis",formatValueAxisTitle:"Title",formatValueAxisTitlePlaceholder:"Axis Title",formatValueAxisTitleFont:"Font",formatValueAxisTitleFontPlaceholder:"(inherited font)",formatValueAxisTitleSize:"Size",formatValueAxisTitleSizePlaceholder:"px",formatValueAxisTitleColor:"Color",formatValueAxisLabels:"Labels",formatValueAxisLabelsFormat:"Label Format",formatValueAxisLabelsFormatText:"Text",formatValueAxisLabelsFormatNumber:"Number",formatValueAxisLabelsFormatCurrency:"Currency",formatValueAxisLabelsFormatPercent:"Percent",formatValueAxisLabelsFont:"Font",formatValueAxisLabelsFontPlaceholder:"(inherited font)",formatValueAxisLabelsSize:"Size",formatValueAxisLabelsSizePlaceholder:"px",formatValueAxisLabelsColor:"Color",formatValueAxisLabelsRotation:"Rotation",formatValueAxisLabelsRotationAuto:"Auto"}),Jc=(Object.freeze({getWizardDataFromDataRows:function TS(o){const e=[];return o.forEach(t=>{const{dataItem:i,dataColumns:s}=t,n=[];s.forEach(a=>{n.push({field:a.title||a.field,value:Ne(a.field)(i)})}),e.push(n)}),e},ActionTypes:F,createInitialState:function LS(o,e,t){const i=Kc(o,t&&t.seriesType||e);return typeof(t&&t.stack)<"u"?Ym(i,F.stacked,t.stack):i},createState:Kc,fontNames:Lm,fontSizes:[{text:"10",value:"10px"},{text:"12",value:"12px"},{text:"14",value:"14px"},{text:"16",value:"16px"},{text:"20",value:"20px"},{text:"28",value:"28px"},{text:"42",value:"42px"},{text:"56",value:"56px"}],isCategorical:qn,mergeStates:Nr,parseFont:Qc,updateState:Ym,messages:VS}),"Arial, Helvetica, sans-serif"),BS="11px "+Jc,zr="12px "+Jc,$m="16px "+Jc,Qm="transparent",Ys={type:$e},jr={type:We},Lt=Object.assign({},jr,{markers:{visible:!1},highlight:{visible:!1}}),Km=()=>({icon:{border:{width:1}},label:{font:zr,padding:3},line:{length:10,width:2},legendItem:Lt,visible:!0}),Jm=()=>({highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},legendItem:jr,opacity:.4}),qm=()=>({highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},legendItem:jr,opacity:.4}),tx=()=>({outliersField:"",meanField:"",border:{_brightness:.8,width:1},downColor:"#fff",gap:1,highlight:{border:{opacity:1,width:2},whiskers:{width:3},mean:{width:2},median:{width:2}},mean:{width:2},median:{width:2},spacing:.3,whiskers:{width:2},legendItem:Lt}),ex=()=>({gap:1.5,spacing:.4,target:{color:"#ff0000"},legendItem:Lt}),ix=()=>({width:2,legendItem:Ys}),sx=()=>({line:{opacity:1,width:0},markers:{size:6,visible:!1},legendItem:jr,opacity:.5}),nx=()=>({markers:{visible:!1},legendItem:Ys,width:2}),ox=()=>({gap:.5,line:{color:"#000",width:1},legendItem:Lt,spacing:.4}),rx=()=>({labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}},legendItem:Lt}),JS=rx,Ws=o=>Object.assign({color:Wh,trendline:{},markers:{visible:!1},width:1,dashType:"longDash",legendItem:Ys},o),t2=o=>({visible:!0,labels:{font:BS},overlay:o.gradients?{}:{gradient:"none"},area:Jm(),rangeArea:qm(),verticalRangeArea:qm(),bar:{gap:1.5,spacing:.4,legendItem:Lt},boxPlot:tx(),bubble:{border:{width:0},labels:{background:Qm},legendItem:Lt,opacity:.6},bullet:ex(),candlestick:{border:{_brightness:.8,width:1},downColor:"#fff",gap:1,highlight:{border:{opacity:1,width:2},line:{width:2}},line:{color:"#000",width:1},legendItem:Lt,spacing:.3},column:{gap:1.5,spacing:.4,legendItem:Lt},heatmap:{labels:{color:"",background:Qm,visible:!0},highlight:{border:{width:0}},legendItem:Lt},pie:{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}},legendItem:Lt},donut:{margin:1,legendItem:Lt},funnel:rx(),pyramid:JS(),horizontalWaterfall:ox(),line:ix(),notes:Km(),ohlc:{gap:1,highlight:{line:{opacity:1,width:3}},line:{width:1},legendItem:Lt,spacing:.3},radarArea:sx(),radarLine:nx(),radarColumn:{legendItem:Lt},polarArea:sx(),polarLine:nx(),polarScatter:{legendItem:Ys},rangeBar:{gap:1.5,spacing:.4,legendItem:Lt},rangeColumn:{gap:1.5,spacing:.4,legendItem:Lt},scatter:{legendItem:Ys},scatterLine:{width:1,legendItem:Ys},verticalArea:Jm(),verticalBoxPlot:tx(),verticalBullet:ex(),verticalLine:ix(),waterfall:ox(),linearTrendline:Ws(),exponentialTrendline:Ws({style:"smooth"}),logarithmicTrendline:Ws({style:"smooth"}),polynomialTrendline:Ws({style:"smooth"}),powerTrendline:Ws({style:"smooth"}),movingAverageTrendline:Ws()}),ax=(o={})=>({axisDefaults:{labels:{font:zr},notes:Km(),title:{font:$m,margin:5}},categoryAxis:{majorGridLines:{visible:!0}},navigator:{pane:{height:90,margin:{top:10}}},seriesDefaults:t2(o),title:{font:$m},subtitle:{font:zr},legend:{labels:{font:zr}}}),lx="--kendo-chart-series-",no=o=>o.ownerDocument.defaultView.getComputedStyle(o),qc={},Ot=(o,e)=>{let t=no(o).getPropertyValue(e);return/^color-mix/i.test(t)&&(t=((o,e)=>{if(qc[o])return qc[o];const t=e.style.color;e.style.color=o;const i=no(e).color;return e.style.color=t,qc[o]=i,i})(t,o)),t},th=(o,e)=>parseFloat(no(o).getPropertyValue(e)),Ur=(o,e,t,i)=>{const s=no(o);return[s.getPropertyValue(e),s.getPropertyValue(t),s.getPropertyValue(i)||s.fontFamily].join(" ")},cx=o=>{const e=no(o),t=[];let i=1,s=e.getPropertyValue(`${lx}${i}`);for(;s||i<=30;)t.push(s),i++,s=e.getPropertyValue(`${lx}${i}`);return t},Gr=o=>Ur(o,"--kendo-font-weight","--kendo-chart-font-size","--kendo-font-family"),hx=o=>Ur(o,"--kendo-chart-pane-title-font-weight","--kendo-chart-pane-title-font-size","--kendo-font-family"),Hr=o=>Ot(o,"--kendo-chart-text"),dx=o=>({color:Hr(o),font:Ur(o,"--kendo-font-weight","--kendo-chart-title-font-size","--kendo-font-family")}),px=o=>{const e=Hr(o);return{labels:{color:e,font:Gr(o)},title:{color:e}}},r2=o=>{const e=Ot(o,"--kendo-chart-inactive");return Object.assign({},{inactiveItems:{labels:{color:e},markers:{color:e}}},px(o))};var ux=T(7053),h2=T(7793),d2=T(4059),p2=T(9563),u2=T(4898);function gx(o,e){let t=function g2(o){const e=new p2.A({skipBaseHref:!0}),t=o.clippedBBox();let i=o;if(t){const n=t.getOrigin(),a=new et.A;a.transform((0,bt.A)().translate(-n.x,-n.y)),a.children.push(o),i=a}e.load([i]);const s=`<?xml version='1.0' ?><svg xmlns='${u2.Rc}' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>${e.render()}</svg>`;return e.destroy(),s}(o);return(!e||!e.raw)&&(t="data:image/svg+xml;base64,"+(0,h2.A)(t)),(0,d2.A)().resolve(t)}var Xr=T(5987),f2=T(1413),m2=T(4412),fx=T(4572),x2=T(8359),eh=T(3798),mx=T(8141),we=T(1730),v2=T(2446),Yr=T(8936),xx=T(3974);T(1553);const ih=["content"];function b2(o,e){if(1&o&&(r.j41(0,"div",1),r.EFF(1),r.k0s()),2&o){const t=r.XpG();r.Y8G("ngStyle",t.style),r.R7$(),r.SpI(" ",t.value," ")}}function _2(o,e){if(1&o&&r.nrm(0,"kendo-chart-crosshair-tooltip",1),2&o){const t=e.$implicit,i=r.XpG();r.Y8G("key",t)("popupSettings",i.popupSettings)}}function y2(o,e){}function w2(o,e){if(1&o&&r.DNE(0,y2,0,0,"ng-template",5),2&o){const t=r.XpG(2);r.Y8G("ngTemplateOutlet",t.seriesTooltipTemplateRef)("ngTemplateOutletContext",t.seriesTooltipContext)}}function C2(o,e){}function k2(o,e){if(1&o&&r.DNE(0,C2,0,0,"ng-template",5),2&o){const t=r.XpG(2);r.Y8G("ngTemplateOutlet",t.seriesSharedTooltipTemplateRef)("ngTemplateOutletContext",t.seriesSharedTooltipContext)}}function A2(o,e){if(1&o&&(r.j41(0,"div",3),r.DNE(1,w2,1,2,null,4)(2,k2,1,2,null,4),r.k0s()),2&o){const t=r.XpG();r.Y8G("ngClass",t.popupClasses)("ngStyle",t.style),r.R7$(),r.Y8G("ngIf",!t.shared),r.R7$(),r.Y8G("ngIf",t.shared)}}function S2(o,e){1&o&&r.nrm(0,"span",6),2&o&&r.Y8G("innerHTML",e.formattedValue,r.npT)}function T2(o,e){if(1&o&&(r.j41(0,"td"),r.nrm(1,"span",8),r.k0s()),2&o){const t=r.XpG().$implicit;r.R7$(),r.xc7("background-color",t.series.color)}}function M2(o,e){if(1&o&&(r.qex(0),r.EFF(1),r.bVm()),2&o){const t=r.XpG(2).$implicit;r.R7$(),r.JRh(t.series.name)}}function P2(o,e){1&o&&(r.qex(0),r.EFF(1,"\xa0"),r.bVm())}function E2(o,e){if(1&o&&(r.j41(0,"td"),r.DNE(1,M2,2,1,"ng-container",4)(2,P2,2,0,"ng-container",4),r.k0s()),2&o){const t=r.XpG().$implicit;r.R7$(),r.Y8G("ngIf",void 0!==t.series.name),r.R7$(),r.Y8G("ngIf",void 0===t.series.name)}}function D2(o,e){}function O2(o,e){if(1&o&&(r.j41(0,"tr"),r.DNE(1,T2,2,2,"td",4)(2,E2,3,2,"td",4),r.j41(3,"td"),r.DNE(4,D2,0,0,"ng-template",5),r.k0s()()),2&o){const t=e.$implicit,i=r.XpG(),s=i.colorMarker,n=i.nameColumn;r.R7$(),r.Y8G("ngIf",s),r.R7$(),r.Y8G("ngIf",n),r.R7$(2),r.Y8G("ngTemplateOutlet",t.template)("ngTemplateOutletContext",t)}}function I2(o,e){if(1&o&&(r.j41(0,"table")(1,"tr")(2,"th"),r.EFF(3),r.k0s()(),r.DNE(4,O2,5,4,"tr",7),r.k0s()),2&o){const t=e.points,i=e.categoryText,s=e.colspan;r.R7$(2),r.BMQ("colspan",s),r.R7$(),r.SpI(" ",i," "),r.R7$(),r.Y8G("ngForOf",t)}}const R2=["surface"];function L2(o,e){}function V2(o,e){if(1&o&&r.DNE(0,L2,0,0,"ng-template",13),2&o){const t=r.XpG(2);r.Y8G("ngTemplateOutlet",t.noDataTemplate.templateRef)}}function B2(o,e){if(1&o&&r.EFF(0),2&o){const t=r.XpG(2);r.SpI(" ",t.messageFor("noData")," ")}}function F2(o,e){if(1&o&&(r.j41(0,"div",10)(1,"div",11),r.DNE(2,V2,1,1,null,12)(3,B2,1,1,"ng-template",null,1,r.C5r),r.k0s()()),2&o){const t=r.sdS(4),i=r.XpG();r.xc7("display","none"),r.R7$(2),r.Y8G("ngIf",i.noDataTemplate)("ngIfElse",t)}}function N2(o,e){}function z2(o,e){if(1&o&&(r.j41(0,"div",14),r.DNE(1,N2,0,0,"ng-template",13),r.k0s()),2&o){const t=r.XpG();r.Y8G("ngStyle",t.donutCenterStyle),r.R7$(),r.Y8G("ngTemplateOutlet",t.donutCenterTemplate.templateRef)}}function j2(o,e){if(1&o&&r.nrm(0,"div",15),2&o){const t=r.XpG();r.Y8G("licenseMessage",t.licenseMessage)}}function U2(o,e){if(1&o&&r.nrm(0,"div",6),2&o){const t=r.XpG();r.Y8G("licenseMessage",t.licenseMessage)}}function G2(o,e){if(1&o&&r.nrm(0,"div",6),2&o){const t=r.XpG();r.Y8G("licenseMessage",t.licenseMessage)}}const H2=["breadcrumb"];function X2(o,e){}function Y2(o,e){if(1&o&&r.DNE(0,X2,0,0,"ng-template",6),2&o){const t=r.XpG(2);r.Y8G("ngTemplateOutlet",t.nodeTooltipTemplateRef)("ngTemplateOutletContext",t.nodeTooltipContext)}}function W2(o,e){}function $2(o,e){if(1&o&&r.DNE(0,W2,0,0,"ng-template",6),2&o){const t=r.XpG(2);r.Y8G("ngTemplateOutlet",t.linkTooltipTemplateRef)("ngTemplateOutletContext",t.linkTooltipContext)}}function Q2(o,e){if(1&o&&(r.j41(0,"div",3)(1,"div",4),r.DNE(2,Y2,1,2,null,5)(3,$2,1,2,null,5),r.k0s()()),2&o){const t=r.XpG();r.Y8G("ngStyle",t.style),r.R7$(2),r.Y8G("ngIf",t.isNode),r.R7$(),r.Y8G("ngIf",t.isLink)}}function Z2(o,e){if(1&o&&(r.j41(0,"div",7),r.nrm(1,"div",8),r.j41(2,"span",7),r.EFF(3),r.k0s(),r.j41(4,"span",7),r.EFF(5),r.k0s()()),2&o){const t=e.color,i=e.label,s=e.value,n=r.XpG();r.Y8G("ngStyle",n.tooltipStyle),r.R7$(),r.Y8G("color",t),r.R7$(),r.Y8G("ngStyle",n.textStyle),r.R7$(),r.JRh(i.text),r.R7$(),r.Y8G("ngStyle",n.textStyle),r.R7$(),r.JRh(n.formatUnits(s))}}function K2(o,e){if(1&o&&(r.j41(0,"div",7),r.nrm(1,"div",8),r.j41(2,"span",7),r.EFF(3),r.k0s(),r.nrm(4,"kendo-icon-wrapper",9)(5,"div",8),r.j41(6,"span",7),r.EFF(7),r.k0s(),r.j41(8,"span",7),r.EFF(9),r.k0s()()),2&o){const t=e.source,i=e.target,s=e.value,n=r.XpG();r.Y8G("ngStyle",n.tooltipStyle),r.R7$(),r.Y8G("color",t.color),r.R7$(),r.Y8G("ngStyle",n.textStyle),r.R7$(),r.JRh(null==t.label?null:t.label.text),r.R7$(),r.Y8G("name",n.arrowIcon.name)("svgIcon",n.arrowIcon),r.R7$(),r.Y8G("color",i.color),r.R7$(),r.Y8G("ngStyle",n.textStyle),r.R7$(),r.JRh(null==i.label?null:i.label.text),r.R7$(),r.Y8G("ngStyle",n.textStyle),r.R7$(),r.JRh(n.formatUnits(s))}}const J2=["instance"];function q2(o,e){if(1&o&&r.nrm(0,"div",5),2&o){const t=r.XpG();r.Y8G("licenseMessage",t.licenseMessage)}}const eT=xp.prototype.options.labels.dateFormats,bx={milliseconds:"HH:mm:ss.SSS",seconds:{time:"medium"},minutes:{time:"short"},hours:{time:"short"},days:{skeleton:"Md"},weeks:{skeleton:"Md"},months:{skeleton:"yyMMM"},years:{skeleton:"y"}};Object.assign(mn.prototype.options.labels.dateFormats,bx),Object.assign(eT,bx);let _x=(()=>{class o{templateRef;constructor(t){this.templateRef=t}static \u0275fac=function(i){return new(i||o)(r.rXU(r.C4Q,8))};static \u0275dir=r.FsC({type:o,selectors:[["","kendoChartDonutCenterTemplate",""]],standalone:!0})}return o})(),yx=(()=>{class o{templateRef;constructor(t){this.templateRef=t}static \u0275fac=function(i){return new(i||o)(r.rXU(r.C4Q,8))};static \u0275dir=r.FsC({type:o,selectors:[["","kendoChartNoDataTemplate",""]],standalone:!0})}return o})();class iT{sender;options;constructor(e,t){this.sender=e,this.options=t}}let yt=(()=>{class o{onItemChange$;source;constructor(){this.source=new f2.B,this.onItemChange$=this.source.asObservable()}notify(t){this.source.next(t)}static \u0275fac=function(i){return new(i||o)};static \u0275prov=r.jDH({token:o,factory:o.\u0275fac})}return o})();const sh=1e3/60;class nh{key;value;constructor(e,t){this.key=e,this.value=t}}let b=(()=>{class o{ngZone;onChange$;onFastChange$;store={};source=new m2.t({});constructor(t){this.ngZone=t,this.initSource()}initSource(){this.onFastChange$=this.source.asObservable(),this.onChange$=this.onFastChange$.pipe((0,eh.Z)(sh))}push(t){this.store=t,this.next()}notify(t){this.set(t.key,t.value),this.next()}set(t,i){let s=this.store;const n=t.split(".");let a=n.shift();for(;n.length>0;)s=s[a]=s[a]||{},a=n.shift();s[a]=i}next(){this.ngZone.runOutsideAngular(()=>{this.source.next(this.store)})}static \u0275fac=function(i){return new(i||o)(r.KVO(r.SKi))};static \u0275prov=r.jDH({token:o,factory:o.\u0275fac})}return o})();function Wr(o,e){for(const t in o){if(!Object.hasOwnProperty.call(o,t))continue;const i=o[t].currentValue;void 0===i?delete e[t]:e[t]=i}}function $r(o){const e={};for(const t in o)Object.hasOwnProperty.call(o,t)&&(e[t]=new r.FRM(null,o[t],!1));return e}let $s=(()=>{class o{configurationService;collectionService;subscription;options={};hidden=!1;constructor(t,i){this.configurationService=t,this.collectionService=i,this.subscription=t.onFastChange$.subscribe(s=>{this.options=s,this.notify()})}ngOnChanges(t){const i=this.configurationService.store;Wr(t,i),this.configurationService.push(i)}notifyChanges(t){this.ngOnChanges($r(t))}ngOnDestroy(){this.subscription.unsubscribe()}notify(){this.collectionService&&this.collectionService.notify(new iT(this,this.options))}static \u0275fac=function(i){return new(i||o)(r.rXU(b),r.rXU(yt))};static \u0275dir=r.FsC({type:o,features:[r.OA$]})}return o})(),S=(()=>{class o{configKey;configurationService;store={};constructor(t,i){if(this.configKey=t,this.configurationService=i,void 0===t)throw new Error("Configuration key not set")}ngOnDestroy(){this.store=void 0,this.notify()}ngOnChanges(t){Wr(t,this.store),this.notify()}notifyChanges(t){this.ngOnChanges($r(t))}markAsVisible(){this.store.visible=!0,this.notify()}notify(){this.configurationService.notify(new nh(this.configKey,this.store))}static \u0275fac=function(i){r.QTQ()};static \u0275dir=r.FsC({type:o,features:[r.OA$]})}return o})(),Qr=(()=>{class o extends S{configurationService;background;border;color;font;format;padding;visible;seriesTooltipTemplate;constructor(t){super("tooltip",t),this.configurationService=t,this.markAsVisible()}get seriesTooltipTemplateRef(){return this.seriesTooltipTemplate}static \u0275fac=function(i){return new(i||o)(r.rXU(b))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-chart-series-item-tooltip"]],contentQueries:function(i,s,n){if(1&i&&r.wni(n,r.C4Q,5),2&i){let a;r.mGM(a=r.lsd())&&(s.seriesTooltipTemplate=a.first)}},inputs:{background:"background",border:"border",color:"color",font:"font",format:"format",padding:"padding",visible:"visible"},standalone:!0,features:[r.Vt3,r.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})(),oh=(()=>{class o{templateRef;constructor(t){this.templateRef=t}static \u0275fac=function(i){return new(i||o)(r.rXU(r.C4Q,8))};static \u0275dir=r.FsC({type:o,selectors:[["","kendoChartDrilldownSeries",""]],standalone:!0})}return o})();const wx=o=>void 0!==o&&!o;let Wt=(()=>{class o extends $s{configurationService;collectionService;aggregate;autoFit;axis;border;categoryAxis;categoryField;closeField;color;colorField;connectors;currentField;dashType;data;downColor;downColorField;drilldownField;dynamicHeight;dynamicSlope;errorHighField;errorLowField;explodeField;field;fromField;gap;highField;holeSize;line;lowField;lowerField;margin;maxSize;mean;meanField;median;medianField;minSize;missingValues;name;neckRatio;negativeColor;negativeValues;noteTextField;opacity;openField;outliersField;overlay;padding;q1Field;q3Field;segmentSpacing;size;sizeField;spacing;stack;startAngle;style;summaryField;target;toField;type;upperField;visible;visibleInLegend;visibleInLegendField;visual;width;whiskers;xAxis;xErrorHighField;xErrorLowField;xField;yAxis;yErrorHighField;yErrorLowField;yField;zIndex;trendline;for;legendItem;pattern;patternField;errorBars;extremes;highlight;labels;markers;notes;outliers;tooltip;seriesTooltip;drilldownTemplate;constructor(t,i){super(t,i),this.configurationService=t,this.collectionService=i}toggleVisibility(){this.options.visible=wx(this.options.visible),this.notify()}togglePointVisibility(t){const i=this.options.pointVisibility=this.options.pointVisibility||{};i[t]=wx(i[t]),this.notify()}get seriesTooltipTemplateRef(){if(this.seriesTooltip)return this.seriesTooltip.seriesTooltipTemplateRef}static \u0275fac=function(i){return new(i||o)(r.rXU(b),r.rXU(yt))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-chart-series-item"]],contentQueries:function(i,s,n){if(1&i&&(r.wni(n,Qr,5),r.wni(n,oh,5)),2&i){let a;r.mGM(a=r.lsd())&&(s.seriesTooltip=a.first),r.mGM(a=r.lsd())&&(s.drilldownTemplate=a.first)}},inputs:{aggregate:"aggregate",autoFit:"autoFit",axis:"axis",border:"border",categoryAxis:"categoryAxis",categoryField:"categoryField",closeField:"closeField",color:"color",colorField:"colorField",connectors:"connectors",currentField:"currentField",dashType:"dashType",data:"data",downColor:"downColor",downColorField:"downColorField",drilldownField:"drilldownField",dynamicHeight:"dynamicHeight",dynamicSlope:"dynamicSlope",errorHighField:"errorHighField",errorLowField:"errorLowField",explodeField:"explodeField",field:"field",fromField:"fromField",gap:"gap",highField:"highField",holeSize:"holeSize",line:"line",lowField:"lowField",lowerField:"lowerField",margin:"margin",maxSize:"maxSize",mean:"mean",meanField:"meanField",median:"median",medianField:"medianField",minSize:"minSize",missingValues:"missingValues",name:"name",neckRatio:"neckRatio",negativeColor:"negativeColor",negativeValues:"negativeValues",noteTextField:"noteTextField",opacity:"opacity",openField:"openField",outliersField:"outliersField",overlay:"overlay",padding:"padding",q1Field:"q1Field",q3Field:"q3Field",segmentSpacing:"segmentSpacing",size:"size",sizeField:"sizeField",spacing:"spacing",stack:"stack",startAngle:"startAngle",style:"style",summaryField:"summaryField",target:"target",toField:"toField",type:"type",upperField:"upperField",visible:"visible",visibleInLegend:"visibleInLegend",visibleInLegendField:"visibleInLegendField",visual:"visual",width:"width",whiskers:"whiskers",xAxis:"xAxis",xErrorHighField:"xErrorHighField",xErrorLowField:"xErrorLowField",xField:"xField",yAxis:"yAxis",yErrorHighField:"yErrorHighField",yErrorLowField:"yErrorLowField",yField:"yField",zIndex:"zIndex",trendline:"trendline",for:"for",legendItem:"legendItem",pattern:"pattern",patternField:"patternField",errorBars:"errorBars",extremes:"extremes",highlight:"highlight",labels:"labels",markers:"markers",notes:"notes",outliers:"outliers",tooltip:"tooltip"},standalone:!0,features:[r.Jv_([b]),r.Vt3,r.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})();const nT={horizontal:"fit",vertical:"fit"};let rh=(()=>{class o{popupService;localizationService;animate;style={};templateRef;popupRef=null;popupSettings;constructor(t,i){this.popupService=t,this.localizationService=i}get active(){return null!==this.popupRef}show(t){const i=t.anchor.align,s=this.position(t.anchor.point);if(this.style=t.style,this.popupRef){const n=this.popupRef.popup.instance;n.offset=s,n.popupAlign=i}else this.popupRef=this.popupService.open(Object.assign({offset:s,popupAlign:i,animate:this.animate,content:this.templateRef,collision:nT,positionMode:"absolute"},this.popupSettings)),this.localizationService.rtl&&this.popupRef.popupElement.setAttribute("dir","rtl"),this.onInit()}onInit(){}hide(){this.popupRef&&(this.popupRef.close(),this.popupRef=null)}ngOnDestroy(){this.hide()}position(t){if(!this.popupSettings||!this.popupSettings.appendTo)return t;const i=this.popupSettings.appendTo.element.nativeElement,s=i.getBoundingClientRect(),{scrollLeft:n,scrollTop:a}=this.scrollOffset(i);return{left:t.left-s.left-n,top:t.top-s.top-a}}scrollOffset(t){if(!t)return null;let i=t.scrollLeft,s=t.scrollTop,n=t.parentElement;for(;n;)i+=n.scrollLeft,s+=n.scrollTop,n=n.parentElement;return{scrollLeft:i,scrollTop:s}}static \u0275fac=function(i){return new(i||o)(r.rXU(we.OQ),r.rXU(vt.Pi))};static \u0275dir=r.FsC({type:o,inputs:{popupSettings:"popupSettings"}})}return o})();function ah(){if((0,xt.nm)())return new r.aKT(document.body)}let Zr=(()=>{class o extends rh{renderer;templateRef;key;value;animate=!1;constructor(t,i,s){super(t,i),this.renderer=s}onInit(){this.popupRef?.popupElement&&this.renderer.addClass(this.popupRef.popupElement,"k-chart-tooltip-wrapper")}show(t){super.show(t),this.value=t.value,this.popupRef.popup.changeDetectorRef.detectChanges()}static \u0275fac=function(i){return new(i||o)(r.rXU(we.OQ),r.rXU(vt.Pi),r.rXU(r.sFG))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-chart-crosshair-tooltip"]],viewQuery:function(i,s){if(1&i&&r.GBs(ih,7),2&i){let n;r.mGM(n=r.lsd())&&(s.templateRef=n.first)}},inputs:{key:"key"},standalone:!0,features:[r.Jv_([we.OQ,{provide:we.Fy,useFactory:ah}]),r.Vt3,r.aNF],decls:2,vars:0,consts:[["content",""],[1,"k-chart-tooltip","k-chart-crosshair-tooltip",3,"ngStyle"]],template:function(i,s){1&i&&r.DNE(0,b2,2,2,"ng-template",null,0,r.C5r)},dependencies:[X.B3],encapsulation:2})}return o})();const Cx=["categoryAxis","valueAxis","xAxis","yAxis"];let Qs=(()=>{class o{popupSettings;crossahairTooltipComponents;tooltipKeys=[];tooltipsMap={};show(t){const i=this.crossahairTooltipComponents.toArray(),s=t.axisName,n=t.axisIndex;for(let a=0;a<i.length;a++)if(i[a].key===s+n){i[a].show(t);break}}hide(){const t=this.crossahairTooltipComponents.toArray();for(let i=0;i<t.length;i++)t[i].hide()}get active(){return this.tooltipKeys.length>0}createCrosshairTooltips(t){const i=this.mapTooltips(t),s=this.tooltipsMap;for(const n in s)i[n]||(this.removeTooltip(n),delete s[n]);for(const n in i)!s[n]&&"constructor"!==n&&"__proto__"!==n&&"prototype"!==n&&(s[n]=i[n],this.tooltipKeys.push(n))}removeTooltip(t){const i=this.tooltipKeys;for(let s=0;s<i.length;s++)if(i[s]===t){i.splice(s,1);break}}mapTooltips(t){const i={};for(let s=0;s<Cx.length;s++){const n=this.axesCrosshairTooltipOptions(t,Cx[s]);for(let a=0;a<n.length;a++){const l=n[a];i[l.name+l.index]=l}}return i}axesCrosshairTooltipOptions(t,i){const s=[];if(t[i]){const n=[].concat(t[i]);for(let a=0;a<n.length;a++){const l=(n[a].crosshair||{}).tooltip;l&&l.visible&&s.push({index:a,name:i})}}return s}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-chart-crosshair-tooltips-container"]],viewQuery:function(i,s){if(1&i&&r.GBs(Zr,5),2&i){let n;r.mGM(n=r.lsd())&&(s.crossahairTooltipComponents=n)}},inputs:{popupSettings:"popupSettings"},standalone:!0,features:[r.aNF],decls:1,vars:1,consts:[[3,"key","popupSettings",4,"ngFor","ngForOf"],[3,"key","popupSettings"]],template:function(i,s){1&i&&r.DNE(0,_2,1,2,"kendo-chart-crosshair-tooltip",0),2&i&&r.Y8G("ngForOf",s.tooltipKeys)},dependencies:[X.pM,Zr],encapsulation:2})}return o})(),rs=(()=>{class o{templateRef;constructor(t){this.templateRef=t}static \u0275fac=function(i){return new(i||o)(r.rXU(r.C4Q,8))};static \u0275dir=r.FsC({type:o,selectors:[["","kendoChartSeriesTooltipTemplate",""]],standalone:!0})}return o})(),oo=(()=>{class o{templateRef;constructor(t){this.templateRef=t}static \u0275fac=function(i){return new(i||o)(r.rXU(r.C4Q,8))};static \u0275dir=r.FsC({type:o,selectors:[["","kendoChartSharedTooltipTemplate",""]],standalone:!0})}return o})();class kx{value;category;categoryIndex;series;dataItem;percentage;runningTotal;total;low;high;xLow;xHigh;yLow;yHigh;template;point;format;constructor(e,t,i){this.value=e.value,this.category=e.category,this.categoryIndex=e.categoryIx,this.series=e.series,this.dataItem=e.dataItem,this.percentage=e.percentage,this.runningTotal=e.runningTotal,this.total=e.total,this.low=e.low,this.high=e.high,this.xLow=e.xLow,this.xHigh=e.xHigh,this.yLow=e.yLow,this.yHigh=e.yHigh,this.template=i,this.point=e,this.format=t}get formattedValue(){return this.format?this.point.formatValue(this.format):String(this.value)}}function lh(o,e){let t=o;for(;t&&t!==e;)t=t.parentNode;return!!t}let as=(()=>{class o{seriesTemplates;template;sharedTemplate;setTemplate(t){this.template=t}getTemplate(t){return this.seriesTemplates&&this.seriesTemplates[t]?this.seriesTemplates[t]:this.template}setSeriesTemplates(t){this.seriesTemplates=t}setSharedTemplate(t){this.sharedTemplate=t}getSharedTemplate(){return this.sharedTemplate}static \u0275fac=function(i){return new(i||o)};static \u0275prov=r.jDH({token:o,factory:o.\u0275fac})}return o})(),Zs=(()=>{class o extends rh{popupService;templateService;localizationService;ngZone;seriesTooltipTemplateRef;seriesSharedTooltipTemplateRef;seriesTooltipContext={};seriesSharedTooltipContext={};shared;defaultSeriesTooltipTemplate;defaultSharedTooltipTemplate;templateRef;animate=!0;classNames;wrapperClass="k-chart-tooltip-wrapper";leave=new r.bkB;popupClasses={};mouseleaveSubscription;constructor(t,i,s,n){super(t,s),this.popupService=t,this.templateService=i,this.localizationService=s,this.ngZone=n}show(t){this.shared=t.shared,this.popupClasses=Object.assign({"k-chart-shared-tooltip":t.shared,"k-chart-tooltip":!0,[t.className]:!!t.className},this.classNames),t.shared?(this.seriesSharedTooltipTemplateRef=this.templateService.getSharedTemplate()||this.defaultSharedTooltipTemplate.templateRef,this.seriesSharedTooltipContext=this.sharedTemplateContext(t)):(this.seriesTooltipContext=new kx(t.point,t.format),this.seriesTooltipTemplateRef=this.pointTemplateRef(t.point)),super.show(t)}containsElement(t){if(this.popupRef)return lh(t,this.popupRef.popupElement)}sharedTemplateContext(t){const s=t.points.filter(l=>typeof l.series.name<"u").length>0,n=t.series.length>1;let a=1;return s&&a++,n&&a++,{category:t.category,categoryText:t.categoryText,colorMarker:n,colspan:a,nameColumn:s,points:this.wrapPoints(t.points,t.format)}}pointTemplateRef(t){return this.templateService.getTemplate(t.series.index)||this.defaultSeriesTooltipTemplate.templateRef}wrapPoints(t,i){const s=[];for(let n=0;n<t.length;n++){const a=t[n],l=this.pointTemplateRef(a);s.push(new kx(a,((a.options||{}).tooltip||{}).format||i,l))}return s}onInit(){this.ngZone.runOutsideAngular(()=>{this.mouseleaveSubscription=this.popupRef.popupElement.addEventListener("mouseleave",t=>{this.leave.emit(t)})}),this.popupRef.popupElement.className+=` ${this.wrapperClass}`}hide(){this.mouseleaveSubscription&&(this.mouseleaveSubscription(),this.mouseleaveSubscription=null),super.hide()}static \u0275fac=function(i){return new(i||o)(r.rXU(we.OQ),r.rXU(as),r.rXU(vt.Pi),r.rXU(r.SKi))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-chart-tooltip-popup"]],viewQuery:function(i,s){if(1&i&&(r.GBs(rs,5),r.GBs(oo,5),r.GBs(ih,7)),2&i){let n;r.mGM(n=r.lsd())&&(s.defaultSeriesTooltipTemplate=n.first),r.mGM(n=r.lsd())&&(s.defaultSharedTooltipTemplate=n.first),r.mGM(n=r.lsd())&&(s.templateRef=n.first)}},inputs:{animate:"animate",classNames:"classNames",wrapperClass:"wrapperClass"},outputs:{leave:"leave"},standalone:!0,features:[r.Jv_([we.OQ,{provide:we.Fy,useFactory:ah}]),r.Vt3,r.aNF],decls:4,vars:0,consts:[["content",""],["kendoChartSeriesTooltipTemplate",""],["kendoChartSharedTooltipTemplate",""],[3,"ngClass","ngStyle"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"],[4,"ngFor","ngForOf"],[1,"k-chart-shared-tooltip-marker"]],template:function(i,s){1&i&&r.DNE(0,A2,3,4,"ng-template",null,0,r.C5r)(2,S2,1,1,"ng-template",1)(3,I2,5,3,"ng-template",2)},dependencies:[X.YU,X.B3,X.bT,X.T3,rs,oo,X.pM],encapsulation:2})}return o})();class aT extends _a{handlerMap={hideTooltip:"onHideTooltip",legendItemClick:"onLegendItemClick",render:"onRender",showTooltip:"onShowTooltip",init:"onInit"};constructor(e){super(e)}}let ro=(()=>{class o extends b{loaded=!1;element;loadTheme(){this.loaded||!(0,xt.nm)()||(this.createElement(),this.readTheme(),this.destroyElement(),this.loaded=!0,this.next())}reset(){this.store={},this.loaded=!1,this.loadTheme()}readTheme(){let t={};try{t=(o=>{const e=Ot(o,"--kendo-chart-major-lines"),t=Ot(o,"--kendo-chart-text"),i=Ur(o,"--kendo-font-weight","--kendo-chart-label-font-size","--kendo-font-family"),s=Ot(o,"--kendo-chart-bg"),n=(o=>({icon:{background:Ot(o,"--kendo-chart-notes-bg"),border:{color:Ot(o,"--kendo-chart-notes-border")}},line:{color:Ot(o,"--kendo-chart-notes-lines")},label:{font:Gr(o)}}))(o),a=th(o,"--kendo-chart-area-opacity"),l=Ot(o,"--kendo-color-surface"),c=Ot(o,"--kendo-chart-primary-bg"),h=()=>({downColor:e,mean:{color:l},median:{color:l},whiskers:{color:c}}),d=()=>({line:{color:e}}),p=()=>({opacity:a,highlight:{inactiveOpacity:th(o,"--kendo-chart-area-inactive-opacity")}}),u=()=>({highlight:{inactiveOpacity:th(o,"--kendo-chart-line-inactive-opacity")}}),g=()=>({target:{color:t}});return{axisDefaults:{crosshair:{color:Ot(o,"--kendo-chart-crosshair-bg")},labels:{color:t,font:i},line:{color:e},majorGridLines:{color:e},minorGridLines:{color:Ot(o,"--kendo-chart-minor-lines")},notes:structuredClone(n),title:{color:t,font:Gr(o)}},chartArea:{background:s},legend:r2(o),seriesColors:cx(o),seriesDefaults:{area:p(),verticalArea:p(),radarArea:p(),boxPlot:h(),verticalBoxPlot:h(),bullet:g(),verticalBullet:g(),horizontalWaterfall:d(),waterfall:d(),line:u(),verticalLine:u(),candlestick:{downColor:t,line:{color:t}},errorBars:{color:Ot(o,"--kendo-chart-error-bars-bg")},icon:{border:{color:e}},labels:{background:s,color:t,font:i,opacity:a},notes:structuredClone(n)},subtitle:{color:t,font:hx(o)},title:dx(o),paneDefaults:{title:{font:hx(o)}}}})(this.element)}catch{t={}}const s=t.chartArea&&t.chartArea.background?x(ax(),t):Object.assign({},ax(),{axisDefaults:{crosshair:{color:"rgba(0, 0, 0, 0.5)"},labels:{color:"rgb(101, 101, 101)",font:"12px serif"},line:{color:"rgba(0, 0, 0, 0.08)"},majorGridLines:{color:"rgba(0, 0, 0, 0.08)"},minorGridLines:{color:"rgba(0, 0, 0, 0.04)"},notes:{icon:{background:"rgba(0, 0, 0, 0.5)",border:{color:"rgba(0, 0, 0, 0.5)"}},line:{color:"rgba(0, 0, 0, 0.5)"},label:{font:"14px serif"}},title:{color:"rgb(101, 101, 101)",font:"14px serif"}},chartArea:{background:"rgb(255, 255, 255)"},legend:{inactiveItems:{labels:{color:"rgba(102, 102, 102, 0.5)"},markers:{color:"rgba(102, 102, 102, 0.5)"}},labels:{color:"rgb(101, 101, 101)",font:"14px serif"}},seriesDefaults:{boxPlot:{downColor:"rgba(0, 0, 0, 0.08)",mean:{color:"rgb(246, 246, 246)"},median:{color:"rgb(246, 246, 246)"},whiskers:{color:"rgb(255, 99, 88)"}},bullet:{target:{color:"rgb(101, 101, 101)"}},candlestick:{downColor:"rgb(101, 101, 101)",line:{color:"rgb(101, 101, 101)"}},errorBars:{color:"rgba(0, 0, 0, 0.5)"},horizontalWaterfall:{line:{color:"rgba(0, 0, 0, 0.08)"}},icon:{border:{color:"rgba(0, 0, 0, 0.08)"}},labels:{background:"rgb(255, 255, 255)",color:"rgb(101, 101, 101)",opacity:.8,font:"12px serif"},notes:{icon:{background:"rgba(0, 0, 0, 0.5)",border:{color:"rgba(0, 0, 0, 0.5)"}},line:{color:"rgba(0, 0, 0, 0.5)"},label:{font:"14px serif"}},overlay:{gradient:"none"},verticalBoxPlot:{downColor:"rgba(0, 0, 0, 0.08)",mean:{color:"rgb(246, 246, 246)"},median:{color:"rgb(246, 246, 246)"},whiskers:{color:"rgb(255, 99, 88)"}},verticalBullet:{target:{color:"rgb(101, 101, 101)"}},waterfall:{line:{color:"rgba(0, 0, 0, 0.08)"}},area:{opacity:.8}},title:{color:"rgb(101, 101, 101)",font:"16px serif"},seriesColors:["rgb(255, 99, 88)","rgb(255, 210, 70)","rgb(120, 210, 55)","rgb(40, 180, 200)","rgb(45, 115, 245)","rgb(170, 70, 190)"]});this.push(s)}createElement(){const t=this.element=document.createElement("div");t.className="k-chart",t.style.display="none",document.body.appendChild(t)}destroyElement(){this.element&&(document.body.removeChild(this.element),this.element=void 0)}static \u0275fac=(()=>{let t;return function(s){return(t||(t=r.xGo(o)))(s||o)}})();static \u0275prov=r.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),ee=(()=>{class o{sender;constructor(t){this.sender=t}static \u0275fac=function(i){r.QTQ()};static \u0275dir=r.FsC({type:o})}return o})(),ai=(()=>{class o extends ee{prevented=!1;preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}static \u0275fac=(()=>{let t;return function(s){return(t||(t=r.xGo(o)))(s||o)}})();static \u0275dir=r.FsC({type:o,features:[r.Vt3]})}return o})();class ch extends ai{series;seriesIndex;pointIndex;text;constructor(e,t){super(t),this.series=e.series,this.seriesIndex=e.seriesIndex,this.pointIndex=e.pointIndex,this.text=e.text}}class hh extends ee{category;dataItem;series;value;visual;constructor(e,t){super(t),this.category=e.category,this.dataItem=e.dataItem,this.series=e.series,this.value=e.value,this.visual=e.visual}}class Ax extends ee{constructor(e,t){super(t)}}class dh extends ai{category;dataItem;originalEvent;percentage;point;series;stackValue;value;constructor(e,t){super(t),this.category=e.category,this.dataItem=e.dataItem,this.originalEvent=e.originalEvent,this.percentage=e.percentage,this.point=e.point,this.series=e.series,this.stackValue=e.stackValue,this.value=e.value}}const Sx={axisLabelClick:class cT extends ee{axis;dataItem;index;text;value;constructor(e,t){super(t),this.axis=e.axis,this.dataItem=e.dataItem,this.index=e.index,this.text=e.text,this.value=e.value}},drag:class hT extends ai{axisRanges;originalEvent;constructor(e,t){super(t),this.axisRanges=e.axisRanges,this.originalEvent=e.originalEvent}},dragEnd:class dT extends ee{axisRanges;originalEvent;constructor(e,t){super(t),this.axisRanges=e.axisRanges,this.originalEvent=e.originalEvent}},dragStart:class pT extends ai{axisRanges;originalEvent;constructor(e,t){super(t),this.axisRanges=e.axisRanges,this.originalEvent=e.originalEvent}},legendItemHover:class uT extends ch{preventDefault(){super.preventDefault()}},legendItemLeave:class gT extends ch{preventDefault(){}isDefaultPrevented(){return!1}},noteClick:class fT extends hh{},noteHover:class mT extends hh{},noteLeave:class xT extends hh{},paneRender:class vT extends ee{pane;index;name;constructor(e,t){super(t),Object.assign(this,e)}},plotAreaClick:class bT extends ee{category;originalEvent;value;x;y;constructor(e,t){super(t),this.category=e.category,this.originalEvent=e.originalEvent,this.value=e.value,this.x=e.x,this.y=e.y}},plotAreaHover:class _T extends ee{category;originalEvent;value;x;y;constructor(e,t){super(t),this.category=e.category,this.originalEvent=e.originalEvent,this.value=e.value,this.x=e.x,this.y=e.y}},plotAreaLeave:class yT extends ee{},render:Ax,select:class wT extends ai{axis;from;to;constructor(e,t){super(t),this.axis=e.axis,this.from=e.from,this.to=e.to}},selectEnd:class CT extends ee{axis;from;to;constructor(e,t){super(t),this.axis=e.axis,this.from=e.from,this.to=e.to}},selectStart:class kT extends ai{axis;from;to;constructor(e,t){super(t),this.axis=e.axis,this.from=e.from,this.to=e.to}},seriesClick:class AT extends ee{category;dataItem;originalEvent;percentage;point;series;stackValue;value;constructor(e,t){super(t),this.category=e.category,this.dataItem=e.dataItem,this.originalEvent=e.originalEvent,this.percentage=e.percentage,this.point=e.point,this.series=e.series,this.stackValue=e.stackValue,this.value=e.value}},seriesHover:class ST extends dh{},seriesOver:class TT extends dh{},seriesLeave:class MT extends dh{},zoom:class PT extends ai{axisRanges;delta;originalEvent;constructor(e,t){super(t),this.axisRanges=e.axisRanges,this.delta=e.delta,this.originalEvent=e.originalEvent}},zoomEnd:class ET extends ee{axisRanges;originalEvent;constructor(e,t){super(t),this.axisRanges=e.axisRanges,this.originalEvent=e.originalEvent}},zoomStart:class DT extends ai{axisRanges;originalEvent;constructor(e,t){super(t),this.axisRanges=e.axisRanges,this.originalEvent=e.originalEvent}}};let ao=class{create(e,t,i){if(Sx[e])return new Sx[e](t,i)}};class OT extends ch{preventDefault(){super.preventDefault()}}const Oi={name:"@progress/kendo-angular-charts",productName:"Kendo UI for Angular",productCode:"KENDOUIANGULAR",productCodes:["KENDOUIANGULAR"],publishDate:1755030631,version:"19.3.0",licensingDocsUrl:"https://www.telerik.com/kendo-angular-ui/my-license/"};let Ks=(()=>{class o{configKey;configurationService;collectionService;children;subscription;items=[];constructor(t,i,s){this.configKey=t,this.configurationService=i,this.collectionService=s,this.subscription=s.onItemChange$.subscribe(n=>this.processChanges(n))}ngOnDestroy(){this.subscription.unsubscribe()}ngAfterContentInit(){this.readItems(),this.children.changes.subscribe(()=>this.readItems())}processChanges(t){if(!this.children)return;const i=this.children.toArray().filter(s=>!s.hidden).indexOf(t.sender);i<0||(this.items[i]=t.options,this.change())}readItems(){this.items=this.children.filter(t=>!t.hidden).map(t=>t.options),this.change()}change(){this.configurationService.notify(new nh(this.configKey,0===this.items.length?void 0:this.items))}static \u0275fac=function(i){r.QTQ()};static \u0275dir=r.FsC({type:o})}return o})(),ie=(()=>{class o extends Ks{configurationService;collectionService;tooltipTemplateService;viewContainer;children;constructor(t,i,s,n){super("series",t,i),this.configurationService=t,this.collectionService=i,this.tooltipTemplateService=s,this.viewContainer=n}ngAfterContentChecked(){this.readTooltipTemplates()}readTooltipTemplates(){const t=this.children.map(i=>i.seriesTooltipTemplateRef);this.tooltipTemplateService.setSeriesTemplates(t)}static \u0275fac=function(i){return new(i||o)(r.rXU(b),r.rXU(yt),r.rXU(as),r.rXU(r.c1b))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-chart-series"]],contentQueries:function(i,s,n){if(1&i&&r.wni(n,Wt,5),2&i){let a;r.mGM(a=r.lsd())&&(s.children=a)}},standalone:!0,features:[r.Jv_([yt]),r.Vt3,r.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})();class IT extends ai{value;point;series;constructor(e,t){super(t),this.value=e.value,this.point=e.point,this.series=e.series}}function Kr(o){return o.observers.length>0}let Jr=(()=>{class o extends vt.EX{noData;static \u0275fac=(()=>{let t;return function(s){return(t||(t=r.xGo(o)))(s||o)}})();static \u0275dir=r.FsC({type:o,selectors:[["","kendoChartMessages",""]],inputs:{noData:"noData"},features:[r.Vt3]})}return o})(),Tx=(()=>{class o extends Jr{service;constructor(t){super(),this.service=t}static \u0275fac=function(i){return new(i||o)(r.rXU(vt.Pi))};static \u0275dir=r.FsC({type:o,selectors:[["","kendoChartLocalizedMessages",""]],standalone:!0,features:[r.Jv_([{provide:Jr,useExisting:(0,r.Rfq)(()=>o)}]),r.Vt3]})}return o})(),se=(()=>{class o{configurationService;themeService;element;intl;localizationService;ngZone;instanceEventService;changeDetector;renderer;pannable;renderAs;seriesColors;subtitle;title;noData=!0;transitions;zoomable;axisDefaults;categoryAxis;chartArea;legend;panes;paneDefaults;plotArea;series;seriesDefaults;tooltip;valueAxis;xAxis;yAxis;axisLabelClick=new r.bkB;drag=new r.bkB;dragEnd=new r.bkB;dragStart=new r.bkB;legendItemHover=new r.bkB;legendItemLeave=new r.bkB;noteClick=new r.bkB;noteHover=new r.bkB;noteLeave=new r.bkB;paneRender=new r.bkB;plotAreaClick=new r.bkB;plotAreaHover=new r.bkB;plotAreaLeave=new r.bkB;render=new r.bkB;select=new r.bkB;selectEnd=new r.bkB;selectStart=new r.bkB;seriesClick=new r.bkB;drilldown=new r.bkB;seriesHover=new r.bkB;seriesOver=new r.bkB;seriesLeave=new r.bkB;zoom=new r.bkB;zoomEnd=new r.bkB;zoomStart=new r.bkB;legendItemClick=new r.bkB;drilldownLevelChange=new r.bkB;resizeRateLimit=10;popupSettings;get drilldownLevel(){return this.drilldownState.length}set drilldownLevel(t){const i=this.drilldownState.length;i<=t||!this.seriesComponents||(this.drilldownState.slice(t,i).forEach(s=>{s.hiddenSeries?.forEach(a=>{a.hidden=!1}),s.destroy()}),this.drilldownState.length=t,this.drilldownLevelChange.emit(t))}surface;seriesCollectionComponent;seriesComponents;donutCenterTemplate;noDataTemplate;tooltipInstance;crossahirTooltips;surfaceElement;donutCenterStyle;messageFor(t){return this.localizationService.get(t)}showLicenseWatermark=!1;licenseMessage;instance;options;theme=null;optionsChange;suppressTransitions=!1;resizeTimeout;redrawTimeout;domSubscriptions;destroyed;subscriptions;rtl=!1;hostClasses=["k-chart","k-widget"];drilldownState=[];constructor(t,i,s,n,a,l,c,h,d){this.configurationService=t,this.themeService=i,this.element=s,this.intl=n,this.localizationService=a,this.ngZone=l,this.instanceEventService=c,this.changeDetector=h,this.renderer=d;const p=(0,Xr.$j)(Oi);this.licenseMessage=(0,xt.FK)(Oi),this.showLicenseWatermark=(0,xt.Em)(p),this.themeService.loadTheme(),this.refreshWait()}ngOnInit(){this.element&&(this.hostClasses.forEach(t=>{this.renderer.addClass(this.element.nativeElement,t)}),this.renderer.setStyle(this.element.nativeElement,"position","relative"))}ngAfterViewInit(){this.canRender&&this.ngZone.runOutsideAngular(()=>{const t=this.renderer.listen(this.surfaceElement.nativeElement,"mouseleave",this.chartMouseleave.bind(this));this.domSubscriptions=()=>{t()}}),this.setDirection(),this.subscriptions=this.intl.changes.subscribe(this.intlChange.bind(this)),this.subscriptions.add(this.localizationService.changes.subscribe(this.rtlChange.bind(this)))}onDrilldown(t){const i=this.seriesComponents.find(c=>c.name===t.series.name),s=this.seriesCollectionComponent.first;if(!i?.drilldownTemplate||!s)return;const n=new IT(t,this);if(this.run(()=>this.drilldown.emit(n)),n.isDefaultPrevented())return;const a=[];this.seriesComponents.forEach(c=>{c.hidden||(c.hidden=!0,a.push(c))});const l=s.viewContainer.createEmbeddedView(i.drilldownTemplate.templateRef,{drilldownValue:t.value,point:t.point,series:t.series});l.hiddenSeries=a,l.markForCheck(),this.drilldownState.push(l),this.drilldownLevelChange.emit(this.drilldownLevel)}ngAfterViewChecked(){this.instance&&this.autoResize&&this.ngZone.runOutsideAngular(()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.resize()},0)})}ngOnChanges(t){const i=this.configurationService.store;Wr(t,i),i.popupSettings=null,this.configurationService.push(i)}notifyChanges(t){this.ngOnChanges($r(t))}ngOnDestroy(){this.destroyed=!0,this.optionsChange&&this.optionsChange.unsubscribe(),this.domSubscriptions&&(this.domSubscriptions(),this.domSubscriptions=null),this.instance&&(this.instance.destroy(),this.instance=null),this.subscriptions&&this.subscriptions.unsubscribe(),clearTimeout(this.resizeTimeout),clearTimeout(this.redrawTimeout)}createInstance(t,i){this.instance=new rc(t,this.options,this.theme,{intlService:this.intl,observer:i,rtl:this.rtl,sender:this})}exportImage(t={}){return(0,ux.A)(this.exportVisual(t),t)}exportSVG(t={}){return gx(this.exportVisual(t),t)}exportVisual(t={}){return this.instance.exportVisual(t)}findAxisByName(t){if(this.instance)return this.instance.findAxisByName(t)}findPaneByIndex(t){if(this.instance)return this.instance.findPaneByIndex(t)}findPaneByName(t){if(this.instance)return this.instance.findPaneByName(t)}getPlotArea(){if(this.instance)return this.instance.plotArea()}toggleHighlight(t,i){this.instance&&this.instance.toggleHighlight(t,i)}hideTooltip(){this.instance&&this.instance.hideTooltip()}showTooltip(t){this.instance&&this.instance.showTooltip(t)}init(){if(!this.canRender)return;const t=this.surfaceElement.nativeElement,i=new aT(this);this.createInstance(t,i)}resize(){this.instance&&this.instance.resize()}onResize(){this.autoResize&&this.resize()}reloadTheme(){this.instance&&(this.themeService.reset(),this.instance.destroy(),this.instance=null)}onLegendItemClick(t){this.run(()=>{const i=new OT(t,this);if(this.legendItemClick.emit(i),!i.isDefaultPrevented()){const s=this.seriesComponents.toArray()[t.series.index];if(!s)return;void 0!==t.pointIndex?s.togglePointVisibility(t.pointIndex):s.toggleVisibility(),this.suppressTransitions=!0}},Kr(this.legendItemClick),this.seriesComponents.length>0)}onInit(t){this.instance=t.sender}onRender(t){const i=this.getDonutCenterStyle();this.run(()=>{const s=new Ax(t,this);this.surface=t.sender.surface,this.render.emit(s),this.donutCenterStyle=i},Kr(this.render),this.donutCenterStyle!==i)}onShowTooltip(t){this.run(()=>{t.crosshair?this.crossahirTooltips.show(t):this.tooltipInstance.show(t)},!t.crosshair,!0)}onHideTooltip(t){t.crosshair?this.crossahirTooltips.active&&(this.crossahirTooltips.hide(),this.detectChanges()):this.tooltipInstance.active&&(this.tooltipInstance.hide(),this.detectChanges())}trigger(t,i){if("resize"===t)return;if("drilldown"===t)return void this.onDrilldown(i);const s=this.activeEmitter(t);if(s){const n=this.instanceEventService.create(t,i,this);return this.run(()=>{s.emit(n)}),n.isDefaultPrevented&&n.isDefaultPrevented()}}requiresHandlers(t){for(let i=0;i<t.length;i++)if(this.activeEmitter(t[i]))return!0;return!1}refresh(){if(clearTimeout(this.redrawTimeout),this.updateDirection(),this.crossahirTooltips.createCrosshairTooltips(this.options),this.setChartAreaSize(),!this.instance)return void this.init();const t=this.options.transitions;this.suppressTransitions&&(this.options.transitions=!1),this.updateOptions(),this.suppressTransitions&&(this.options.transitions=t,this.suppressTransitions=!1)}setChartAreaSize(){if(!this.element)return;const t=this.element.nativeElement,i=this.options.chartArea||{};i.width&&(t.style.width=`${i.width}px`),i.height&&(t.style.height=`${i.height}px`)}updateOptions(){this.instance.setOptions(this.options)}tooltipMouseleave(t){const i=t.relatedTarget;this.instance&&(!i||!lh(i,this.element.nativeElement))&&this.instance.hideElements()}chartMouseleave(t){const i=t.relatedTarget,s=this.element.nativeElement;this.instance&&(!i||!this.tooltipInstance.containsElement(i)&&!lh(i,s))&&!this.instance.handlingTap&&this.instance.hideElements()}get canRender(){return(0,xt.nm)()&&!!this.surfaceElement}get autoResize(){return this.resizeRateLimit>0}activeEmitter(t){const i=this[t];if(i&&i.emit&&Kr(i))return i}getDonutCenterStyle(){if(!this.instance||!this.options||!this.options.series)return;const t=this.options.series[0],i=this.instance._plotArea.charts;if(!t||"donut"!==t.type||!i||0===i[0].points.length)return;const s=i[0].points[0],n=s.box.center(),a=s.sector.innerRadius,h=2*a;return{height:h+"px",left:n.x-a+"px",top:n.y-a+"px",width:h+"px"}}refreshWait(){this.ngZone.runOutsideAngular(()=>{this.optionsChange=(0,fx.z)(this.configurationService.onChange$,this.themeService.onChange$).pipe((0,mx.M)(t=>{this.options=t[0],this.theme=t[1]}),(0,eh.Z)(sh)).subscribe(()=>{this.refresh()})})}run(t,i=!0,s){i?(s&&this.changeDetector.markForCheck(),this.ngZone.run(t)):(t(),s&&this.detectChanges())}detectChanges(){this.destroyed||this.changeDetector.detectChanges()}intlChange(){this.instance&&this.deferredRedraw()}rtlChange(){this.instance&&this.rtl!==this.isRTL&&this.deferredRedraw()}deferredRedraw(){this.ngZone.runOutsideAngular(()=>{clearTimeout(this.redrawTimeout),this.redrawTimeout=setTimeout(()=>{this.updateDirection(),this.instance.noTransitionsRedraw()},0)})}updateDirection(){const t=this.isRTL;this.rtl!==t&&(this.setDirection(),this.instance&&this.instance.setDirection(t))}setDirection(){this.rtl=this.isRTL,this.element&&this.renderer.setAttribute(this.element.nativeElement,"dir",this.rtl?"rtl":"ltr")}get isRTL(){return!!this.localizationService.rtl}static \u0275fac=function(i){return new(i||o)(r.rXU(b),r.rXU(ro),r.rXU(r.aKT),r.rXU(ci.Bs),r.rXU(vt.Pi),r.rXU(r.SKi),r.rXU(ao),r.rXU(r.gRc),r.rXU(r.sFG))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-chart"]],contentQueries:function(i,s,n){if(1&i&&(r.wni(n,_x,5),r.wni(n,yx,5),r.wni(n,ie,4),r.wni(n,Wt,5)),2&i){let a;r.mGM(a=r.lsd())&&(s.donutCenterTemplate=a.first),r.mGM(a=r.lsd())&&(s.noDataTemplate=a.first),r.mGM(a=r.lsd())&&(s.seriesCollectionComponent=a),r.mGM(a=r.lsd())&&(s.seriesComponents=a)}},viewQuery:function(i,s){if(1&i&&(r.GBs(Zs,7),r.GBs(Qs,7),r.GBs(R2,7)),2&i){let n;r.mGM(n=r.lsd())&&(s.tooltipInstance=n.first),r.mGM(n=r.lsd())&&(s.crossahirTooltips=n.first),r.mGM(n=r.lsd())&&(s.surfaceElement=n.first)}},inputs:{pannable:"pannable",renderAs:"renderAs",seriesColors:"seriesColors",subtitle:"subtitle",title:"title",noData:"noData",transitions:"transitions",zoomable:"zoomable",axisDefaults:"axisDefaults",categoryAxis:"categoryAxis",chartArea:"chartArea",legend:"legend",panes:"panes",paneDefaults:"paneDefaults",plotArea:"plotArea",series:"series",seriesDefaults:"seriesDefaults",tooltip:"tooltip",valueAxis:"valueAxis",xAxis:"xAxis",yAxis:"yAxis",resizeRateLimit:"resizeRateLimit",popupSettings:"popupSettings",drilldownLevel:"drilldownLevel"},outputs:{axisLabelClick:"axisLabelClick",drag:"drag",dragEnd:"dragEnd",dragStart:"dragStart",legendItemHover:"legendItemHover",legendItemLeave:"legendItemLeave",noteClick:"noteClick",noteHover:"noteHover",noteLeave:"noteLeave",paneRender:"paneRender",plotAreaClick:"plotAreaClick",plotAreaHover:"plotAreaHover",plotAreaLeave:"plotAreaLeave",render:"render",select:"select",selectEnd:"selectEnd",selectStart:"selectStart",seriesClick:"seriesClick",drilldown:"drilldown",seriesHover:"seriesHover",seriesOver:"seriesOver",seriesLeave:"seriesLeave",zoom:"zoom",zoomEnd:"zoomEnd",zoomStart:"zoomStart",legendItemClick:"legendItemClick",drilldownLevelChange:"drilldownLevelChange"},exportAs:["kendoChart"],standalone:!0,features:[r.Jv_([b,as,ao,vt.Pi,{provide:vt.$R,useValue:"kendo.chart"}]),r.OA$,r.aNF],decls:9,vars:6,consts:()=>{let t;return t=$localize`:kendo.chart.noData|The message to display when no series are defined, or all series are empty:No data available`,[["surface",""],["noDataMessage",""],["kendoChartLocalizedMessages","","noData",t],[1,"k-chart-surface"],["class","k-chart-overlay",3,"display",4,"ngIf"],[3,"popupSettings"],[3,"leave","popupSettings"],[3,"resize","rateLimit"],["class","k-chart-donut-center",3,"ngStyle",4,"ngIf"],["kendoWatermarkOverlay","",3,"licenseMessage",4,"ngIf"],[1,"k-chart-overlay"],[1,"k-no-data"],[4,"ngIf","ngIfElse"],[3,"ngTemplateOutlet"],[1,"k-chart-donut-center",3,"ngStyle"],["kendoWatermarkOverlay","",3,"licenseMessage"]]},template:function(i,s){if(1&i){const n=r.RV6();r.eu8(0,2),r.j41(1,"div",3,0),r.DNE(3,F2,5,4,"div",4),r.k0s(),r.nrm(4,"kendo-chart-crosshair-tooltips-container",5),r.j41(5,"kendo-chart-tooltip-popup",6),r.bIt("leave",function(l){return r.eBV(n),r.Njj(s.tooltipMouseleave(l))}),r.k0s(),r.j41(6,"kendo-resize-sensor",7),r.bIt("resize",function(){return r.eBV(n),r.Njj(s.onResize())}),r.k0s(),r.DNE(7,z2,2,2,"div",8)(8,j2,1,1,"div",9)}2&i&&(r.R7$(3),r.Y8G("ngIf",s.noData),r.R7$(),r.Y8G("popupSettings",s.popupSettings),r.R7$(),r.Y8G("popupSettings",s.popupSettings),r.R7$(),r.Y8G("rateLimit",s.resizeRateLimit),r.R7$(),r.Y8G("ngIf",s.donutCenterStyle&&s.donutCenterTemplate),r.R7$(),r.Y8G("ngIf",s.showLicenseWatermark))},dependencies:[Tx,Qs,Zs,xt.M0,X.bT,X.B3,X.T3,xt.S$],encapsulation:2,changeDetection:0})}return o})(),Ex=(()=>{class o extends b{static \u0275fac=(()=>{let t;return function(s){return(t||(t=r.xGo(o)))(s||o)}})();static \u0275prov=r.jDH({token:o,factory:o.\u0275fac})}return o})();const Dx={navigatorFilter:class qT extends ee{from;to;constructor(e,t){super(t),this.from=e.from,this.to=e.to}}};class Ox extends ao{create(e,t,i){return Dx[e]?new Dx[e](t,i):super.create(e,t,i)}}const tM={autoBindElements:!0,liveDrag:!1,partialRedraw:!0};let Ix=(()=>{class o extends se{configurationService;themeService;element;intl;localizationService;ngZone;instanceEventService;changeDetector;renderer;navigator;pannable;zoomable;drilldown=new r.bkB;drilldownLevelChange=new r.bkB;get drilldownLevel(){return this.drilldownState.length}navigatorFilter=new r.bkB;showLicenseWatermark=!1;redrawSlaves=!1;hostClasses=["k-chart","k-stockchart"];constructor(t,i,s,n,a,l,c,h,d){super(t,i,s,n,a,l,c,h,d),this.configurationService=t,this.themeService=i,this.element=s,this.intl=n,this.localizationService=a,this.ngZone=l,this.instanceEventService=c,this.changeDetector=h,this.renderer=d;const p=(0,Xr.$j)(Oi);this.licenseMessage=(0,xt.FK)(Oi),this.showLicenseWatermark=(0,xt.Em)(p)}skipNavigatorRedraw(){this.redrawSlaves=!0}createInstance(t,i){if(this.applyNavigatorDefaults(),this.isDevMode()&&(this.options.zoomable||this.options.pannable))throw new Error("The pannable and zoomable options are not supported by the StockChart component.");this.instance=new iC(t,this.options,this.theme,{intlService:this.intl,observer:i,rtl:this.rtl,sender:this})}updateOptions(){this.applyNavigatorDefaults(),this.redrawSlaves?(this.instance.applyOptions(this.options),this.instance.bindCategories(),this.instance.navigator.redrawSlaves()):this.instance.setOptions(this.options),this.redrawSlaves=!1}applyNavigatorDefaults(){this.options.navigator=Object.assign({},this.options.navigator,tM)}isDevMode(){return(0,r.naY)()}static \u0275fac=function(i){return new(i||o)(r.rXU(b),r.rXU(ro),r.rXU(r.aKT),r.rXU(ci.Bs),r.rXU(vt.Pi),r.rXU(r.SKi),r.rXU(Ox),r.rXU(r.gRc),r.rXU(r.sFG))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-stockchart"]],inputs:{navigator:"navigator",pannable:"pannable",zoomable:"zoomable",drilldownLevel:"drilldownLevel"},outputs:{drilldown:"drilldown",drilldownLevelChange:"drilldownLevelChange",navigatorFilter:"navigatorFilter"},exportAs:["kendoStockChart"],standalone:!0,features:[r.Jv_([b,as,{provide:Ex,useExisting:b},Ox,vt.Pi,{provide:vt.$R,useValue:"kendo.chart"}]),r.Vt3,r.aNF],decls:6,vars:3,consts:[["surface",""],[1,"k-chart-surface"],[3,"popupSettings"],[3,"leave","popupSettings"],[3,"resize"],["kendoWatermarkOverlay","",3,"licenseMessage",4,"ngIf"],["kendoWatermarkOverlay","",3,"licenseMessage"]],template:function(i,s){if(1&i){const n=r.RV6();r.nrm(0,"div",1,0)(2,"kendo-chart-crosshair-tooltips-container",2),r.j41(3,"kendo-chart-tooltip-popup",3),r.bIt("leave",function(l){return r.eBV(n),r.Njj(s.tooltipMouseleave(l))}),r.k0s(),r.j41(4,"kendo-resize-sensor",4),r.bIt("resize",function(){return r.eBV(n),r.Njj(s.onResize())}),r.k0s(),r.DNE(5,U2,1,1,"div",5)}2&i&&(r.R7$(2),r.Y8G("popupSettings",s.popupSettings),r.R7$(),r.Y8G("popupSettings",s.popupSettings),r.R7$(2),r.Y8G("ngIf",s.showLicenseWatermark))},dependencies:[Qs,Zs,xt.M0,X.bT,xt.S$],encapsulation:2,changeDetection:0})}return o})();new r.nKC("configuration prefix");let ne=(()=>{class o extends $s{configurationService;collectionService;intl;autoBaseUnitSteps;axisCrossingValue;background;baseUnit;baseUnitStep;categories;color;justified;line;majorGridLines;majorTicks;max;maxDateGroups;maxDivisions;min;minorGridLines;minorTicks;name;pane;plotBands;reverse;roundToBaseUnit;startAngle;type;visible;weekStartDay;crosshair;labels;notes;select;title;rangeLabels;intlSubscription;constructor(t,i,s,n){super(t,i),this.configurationService=t,this.collectionService=i,this.intl=s,s.localeId=n,this.notifyChanges({weekStartDay:s.firstDay(s.localeId)}),this.intlSubscription=s.changes.subscribe(()=>{this.notifyChanges({weekStartDay:s.firstDay(s.localeId)})})}ngOnDestroy(){this.intlSubscription&&this.intlSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||o)(r.rXU(b),r.rXU(yt),r.rXU(ci.Bs),r.rXU(r.xe9))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-chart-category-axis-item"]],inputs:{autoBaseUnitSteps:"autoBaseUnitSteps",axisCrossingValue:"axisCrossingValue",background:"background",baseUnit:"baseUnit",baseUnitStep:"baseUnitStep",categories:"categories",color:"color",justified:"justified",line:"line",majorGridLines:"majorGridLines",majorTicks:"majorTicks",max:"max",maxDateGroups:"maxDateGroups",maxDivisions:"maxDivisions",min:"min",minorGridLines:"minorGridLines",minorTicks:"minorTicks",name:"name",pane:"pane",plotBands:"plotBands",reverse:"reverse",roundToBaseUnit:"roundToBaseUnit",startAngle:"startAngle",type:"type",visible:"visible",weekStartDay:"weekStartDay",crosshair:"crosshair",labels:"labels",notes:"notes",select:"select",title:"title",rangeLabels:"rangeLabels"},standalone:!0,features:[r.Jv_([b]),r.Vt3,r.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})(),Lx=(()=>{class o extends se{configurationService;themeService;element;intl;localizationService;ngZone;instanceEventService;changeDetector;renderer;type;data;drilldown=new r.bkB;drilldownLevelChange=new r.bkB;noData=!1;get drilldownLevel(){return this.drilldownState.length}tooltipWrapperClass="k-sparkline-tooltip-wrapper";tooltipContentClasses={"k-sparkline-tooltip":!0};showLicenseWatermark=!1;hostClasses=["k-sparkline","k-widget"];constructor(t,i,s,n,a,l,c,h,d){super(t,i,s,n,a,l,c,h,d),this.configurationService=t,this.themeService=i,this.element=s,this.intl=n,this.localizationService=a,this.ngZone=l,this.instanceEventService=c,this.changeDetector=h,this.renderer=d;const p=(0,Xr.$j)(Oi);this.licenseMessage=(0,xt.FK)(Oi),this.showLicenseWatermark=(0,xt.Em)(p)}createInstance(t,i){this.instance=new ac(t,ac.normalizeOptions(this.options),this.theme,{intlService:this.intl,observer:i,rtl:this.rtl,sender:this})}updateOptions(){this.instance.setOptions(ac.normalizeOptions(this.options))}static \u0275fac=function(i){return new(i||o)(r.rXU(b),r.rXU(ro),r.rXU(r.aKT),r.rXU(ci.Bs),r.rXU(vt.Pi),r.rXU(r.SKi),r.rXU(ao),r.rXU(r.gRc),r.rXU(r.sFG))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-sparkline"]],inputs:{type:"type",data:"data",noData:"noData",drilldownLevel:"drilldownLevel"},outputs:{drilldown:"drilldown",drilldownLevelChange:"drilldownLevelChange"},exportAs:["kendoSparkline"],standalone:!0,features:[r.Jv_([b,as,ao,vt.Pi,{provide:vt.$R,useValue:"kendo.chart"}]),r.Vt3,r.aNF],decls:6,vars:6,consts:[["surface",""],[1,"k-chart-surface"],[3,"popupSettings"],[3,"leave","animate","wrapperClass","classNames","popupSettings"],[3,"resize"],["kendoWatermarkOverlay","",3,"licenseMessage",4,"ngIf"],["kendoWatermarkOverlay","",3,"licenseMessage"]],template:function(i,s){if(1&i){const n=r.RV6();r.nrm(0,"span",1,0)(2,"kendo-chart-crosshair-tooltips-container",2),r.j41(3,"kendo-chart-tooltip-popup",3),r.bIt("leave",function(l){return r.eBV(n),r.Njj(s.tooltipMouseleave(l))}),r.k0s(),r.j41(4,"kendo-resize-sensor",4),r.bIt("resize",function(){return r.eBV(n),r.Njj(s.onResize())}),r.k0s(),r.DNE(5,G2,1,1,"div",5)}2&i&&(r.R7$(2),r.Y8G("popupSettings",s.popupSettings),r.R7$(),r.Y8G("animate",!1)("wrapperClass",s.tooltipWrapperClass)("classNames",s.tooltipContentClasses)("popupSettings",s.popupSettings),r.R7$(2),r.Y8G("ngIf",s.showLicenseWatermark))},dependencies:[Qs,Zs,xt.M0,X.bT,xt.S$],encapsulation:2,changeDetection:0})}return o})(),Ce=(()=>{class o extends Ks{configurationService;collectionService;children;constructor(t,i){super("categoryAxis",t,i),this.configurationService=t,this.collectionService=i}static \u0275fac=function(i){return new(i||o)(r.rXU(b),r.rXU(yt))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-chart-category-axis"]],contentQueries:function(i,s,n){if(1&i&&r.wni(n,ne,4),2&i){let a;r.mGM(a=r.lsd())&&(s.children=a)}},standalone:!0,features:[r.Jv_([yt]),r.Vt3,r.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})(),Re=(()=>{class o extends S{configurationService;align;background;border;height;labels;margin;offsetX;offsetY;orientation;padding;position;reverse;visible;width;markers;spacing;inactiveItems;item;title;focusHighlight;constructor(t){super("legend",t),this.configurationService=t,this.markAsVisible()}static \u0275fac=function(i){return new(i||o)(r.rXU(b))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-chart-legend"]],inputs:{align:"align",background:"background",border:"border",height:"height",labels:"labels",margin:"margin",offsetX:"offsetX",offsetY:"offsetY",orientation:"orientation",padding:"padding",position:"position",reverse:"reverse",visible:"visible",width:"width",markers:"markers",spacing:"spacing",inactiveItems:"inactiveItems",item:"item",title:"title",focusHighlight:"focusHighlight"},standalone:!0,features:[r.Vt3,r.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})(),ia=(()=>{class o extends S{configurationService;align;background;border;color;font;margin;padding;position;text;description;visible;constructor(t){super("title",t),this.configurationService=t}static \u0275fac=function(i){return new(i||o)(r.rXU(b))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-chart-title"]],inputs:{align:"align",background:"background",border:"border",color:"color",font:"font",margin:"margin",padding:"padding",position:"position",text:"text",description:"description",visible:"visible"},standalone:!0,features:[r.Vt3,r.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})(),lo=(()=>{class o extends S{configurationService;templateService;background;border;color;font;format;opacity;padding;shared;visible;seriesTooltipTemplate;sharedTooltipTemplate;constructor(t,i){super("tooltip",t),this.configurationService=t,this.templateService=i,this.markAsVisible()}ngAfterContentChecked(){this.templateService.setTemplate(this.seriesTooltipTemplate?this.seriesTooltipTemplate.templateRef:null),this.templateService.setSharedTemplate(this.sharedTooltipTemplate?this.sharedTooltipTemplate.templateRef:null)}static \u0275fac=function(i){return new(i||o)(r.rXU(b),r.rXU(as))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-chart-tooltip"]],contentQueries:function(i,s,n){if(1&i&&(r.wni(n,rs,5),r.wni(n,oo,5)),2&i){let a;r.mGM(a=r.lsd())&&(s.seriesTooltipTemplate=a.first),r.mGM(a=r.lsd())&&(s.sharedTooltipTemplate=a.first)}},inputs:{background:"background",border:"border",color:"color",font:"font",format:"format",opacity:"opacity",padding:"padding",shared:"shared",visible:"visible"},standalone:!0,features:[r.Vt3,r.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2})}return o})(),ke=(()=>{class o extends $s{configurationService;collectionService;axisCrossingValue;background;color;line;majorGridLines;majorTicks;majorUnit;max;min;minorGridLines;minorTicks;minorUnit;name;narrowRange;pane;plotBands;reverse;type;visible;crosshair;labels;notes;title;constructor(t,i){super(t,i),this.configurationService=t,this.collectionService=i}static \u0275fac=function(i){return new(i||o)(r.rXU(b),r.rXU(yt))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-chart-value-axis-item"]],inputs:{axisCrossingValue:"axisCrossingValue",background:"background",color:"color",line:"line",majorGridLines:"majorGridLines",majorTicks:"majorTicks",majorUnit:"majorUnit",max:"max",min:"min",minorGridLines:"minorGridLines",minorTicks:"minorTicks",minorUnit:"minorUnit",name:"name",narrowRange:"narrowRange",pane:"pane",plotBands:"plotBands",reverse:"reverse",type:"type",visible:"visible",crosshair:"crosshair",labels:"labels",notes:"notes",title:"title"},standalone:!0,features:[r.Jv_([b]),r.Vt3,r.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})(),Le=(()=>{class o extends Ks{configurationService;collectionService;children;constructor(t,i){super("valueAxis",t,i),this.configurationService=t,this.collectionService=i}static \u0275fac=function(i){return new(i||o)(r.rXU(b),r.rXU(yt))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-chart-value-axis"]],contentQueries:function(i,s,n){if(1&i&&r.wni(n,ke,4),2&i){let a;r.mGM(a=r.lsd())&&(s.children=a)}},standalone:!0,features:[r.Jv_([yt]),r.Vt3,r.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})(),Oh=(()=>{class o extends S{configurationService;background;border;color;content;font;format;margin;mirror;padding;position;rotation;skip;step;visible;visual;constructor(t){super("labels",t),this.configurationService=t}static \u0275fac=function(i){return new(i||o)(r.rXU(b))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-chart-value-axis-item-labels"]],inputs:{background:"background",border:"border",color:"color",content:"content",font:"font",format:"format",margin:"margin",mirror:"mirror",padding:"padding",position:"position",rotation:"rotation",skip:"skip",step:"step",visible:"visible",visual:"visual"},standalone:!0,features:[r.Vt3,r.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})(),sa=(()=>{class o{chart;rootItem={icon:"home",svgIcon:Yr.P0s,title:"Home"};items;breadcrumb;subscription=new x2.yU;ngOnInit(){if(this.items=[this.rootItem],this.chart)this.subscription.add(this.chart.drilldown.subscribe(this.onDrilldown.bind(this))),this.subscription.add(this.chart.drilldownLevelChange.subscribe(this.onDrilldownLevelChange.bind(this)));else if((0,r.naY)())throw new Error('Chart Breadcrumb: No Chart instance supplied. Please add a reference using the "chart" attribute. For example: \n<kendo-chart-breadcrumb [chart]="instance" />\n<kendo-chart #instance>')}ngOnChanges(t){const i=t.rootItem;i&&this.items&&(this.items[0]=i.currentValue)}ngOnDestroy(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}onItemClick(t){this.chart.drilldownLevel=this.items.findIndex(i=>i===t)}onDrilldown(t){this.items=[...this.items,{text:t.point.category.toString()}]}onDrilldownLevelChange(t){this.items=this.items.slice(0,t+1)}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-chart-breadcrumb"]],viewQuery:function(i,s){if(1&i&&r.GBs(H2,7),2&i){let n;r.mGM(n=r.lsd())&&(s.breadcrumb=n.first)}},inputs:{chart:"chart",rootItem:"rootItem"},exportAs:["kendoChartBreadcrumb"],standalone:!0,features:[r.OA$,r.aNF],decls:1,vars:1,consts:[[3,"itemClick","items"]],template:function(i,s){1&i&&(r.j41(0,"kendo-breadcrumb",0),r.bIt("itemClick",function(a){return s.onItemClick(a)}),r.k0s()),2&i&&r.Y8G("items",s.items)},dependencies:[v2.JD],encapsulation:2})}return o})(),MM=(()=>{class o extends ro{readTheme(){const t=(o=>({labels:{color:Hr(o),font:Gr(o),stroke:{color:Ot(o,"--kendo-chart-bg")}},links:{color:Ot(o,"--kendo-color-subtle")},nodeColors:cx(o),title:dx(o),legend:px(o)}))(this.element);this.push(t)}static \u0275fac=(()=>{let t;return function(s){return(t||(t=r.xGo(o)))(s||o)}})();static \u0275prov=r.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();class pv extends xt.PM{sender;originalEvent;constructor(e,t){super(),this.sender=t,this.originalEvent=e.originalEvent}}class Ih extends pv{dataItem;constructor(e,t){super(e,t),this.dataItem=e.dataItem}}class Rh extends pv{dataItem;constructor(e,t){super(e,t),this.dataItem=e.dataItem}}const PM={nodeEnter:Ih,nodeLeave:Ih,linkEnter:Rh,linkLeave:Rh,nodeClick:Ih,linkClick:Rh};class uv{create(e,t,i){return new PM[e](t,i)}}class EM{source;target;value;constructor(e){const t=e.dataItem;this.source=t.source,this.target=t.target,this.value=t.value}}let na=(()=>{class o{templateRef;constructor(t){this.templateRef=t}static \u0275fac=function(i){return new(i||o)(r.rXU(r.C4Q,8))};static \u0275dir=r.FsC({type:o,selectors:[["","kendoSankeyLinkTooltipTemplate",""]],standalone:!0})}return o})();class DM{color;label;value;constructor(e){const t=e.dataItem;this.label=t.label,this.color=t.color,this.value=e.nodeValue}}let oa=(()=>{class o{templateRef;constructor(t){this.templateRef=t}static \u0275fac=function(i){return new(i||o)(r.rXU(r.C4Q,8))};static \u0275dir=r.FsC({type:o,selectors:[["","kendoSankeyNodeTooltipTemplate",""]],standalone:!0})}return o})(),Lh=(()=>{class o{nodeTemplate;linkTemplate;static \u0275fac=function(i){return new(i||o)};static \u0275prov=r.jDH({token:o,factory:o.\u0275fac})}return o})(),OM=(()=>{class o{color;size=15;display="inline-flex";marginLeft=3;static \u0275fac=function(i){return new(i||o)};static \u0275dir=r.FsC({type:o,selectors:[["","squareSymbol",""]],hostVars:10,hostBindings:function(i,s){2&i&&r.xc7("background-color",s.color)("width",s.size,"px")("height",s.size,"px")("display",s.display)("margin-left",s.marginLeft,"px")},inputs:{color:"color",size:"size"},standalone:!0})}return o})(),ra=(()=>{class o extends rh{element;popupService;templateService;localizationService;intlService;ngZone;renderer;nodeTooltipTemplateRef;linkTooltipTemplateRef;nodeTooltipContext;linkTooltipContext;defaultNodeTooltipTemplate;defaultLinkTooltipTemplate;templateRef;animate=!1;wrapperClass="k-chart-tooltip-wrapper";tooltipUnitFormat;offset;isNode;isLink;arrowIcon=Yr.ZM9;textStyle={margin:"0 3px"};tooltipStyle={display:"flex",alignItems:"center"};subscriptions;rtl=!1;constructor(t,i,s,n,a,l,c){super(i,n),this.element=t,this.popupService=i,this.templateService=s,this.localizationService=n,this.intlService=a,this.ngZone=l,this.renderer=c}onInit(){this.popupRef.popupElement.className+=` ${this.wrapperClass}`}ngAfterViewInit(){this.setDirection(),this.subscriptions=this.localizationService.changes.subscribe(this.rtlChange.bind(this))}ngOnDestroy(){super.ngOnDestroy(),this.subscriptions&&this.subscriptions.unsubscribe()}show(t){this.isNode="node"===t.targetType,this.isLink="link"===t.targetType,this.nodeTooltipTemplateRef=this.templateService.nodeTemplate||this.defaultNodeTooltipTemplate.templateRef,this.nodeTooltipContext=new DM(t),this.linkTooltipTemplateRef=this.templateService.linkTemplate||this.defaultLinkTooltipTemplate.templateRef,this.linkTooltipContext=new EM(t),super.show({style:{position:"static"},anchor:{align:t.tooltipData.popupAlign,point:this.tooltipAnchor(t)}})}tooltipAnchor(t){const i=this.element.nativeElement,s_width=i.offsetWidth,s_height=i.offsetHeight,n={...t.tooltipData.popupOffset},a=t.tooltipData.popupAlign,l=this.offset||12;return n.left+="left"===a.horizontal?l:-1*l,"right"===a.horizontal&&(n.left-=s_width),"bottom"===a.vertical?n.top-=s_height+l:n.top+=l,n}formatUnits(t){return this.intlService.format(this.tooltipUnitFormat,t??0)}rtlChange(){this.arrowIcon=this.rtl?Yr.i1n:Yr.ZM9}setDirection(){this.rtl=this.isRTL,this.element&&this.renderer.setAttribute(this.element.nativeElement,"dir",this.rtl?"rtl":"ltr")}get isRTL(){return!!this.localizationService.rtl}static \u0275fac=function(i){return new(i||o)(r.rXU(r.aKT),r.rXU(we.OQ),r.rXU(Lh),r.rXU(vt.Pi),r.rXU(ci.Bs),r.rXU(r.SKi),r.rXU(r.sFG))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-sankey-tooltip-popup"]],viewQuery:function(i,s){if(1&i&&(r.GBs(oa,5),r.GBs(na,5),r.GBs(ih,7)),2&i){let n;r.mGM(n=r.lsd())&&(s.defaultNodeTooltipTemplate=n.first),r.mGM(n=r.lsd())&&(s.defaultLinkTooltipTemplate=n.first),r.mGM(n=r.lsd())&&(s.templateRef=n.first)}},inputs:{animate:"animate",wrapperClass:"wrapperClass",tooltipUnitFormat:"tooltipUnitFormat",offset:"offset"},standalone:!0,features:[r.Jv_([we.OQ,{provide:we.Fy,useFactory:ah}]),r.Vt3,r.aNF],decls:4,vars:0,consts:[["content",""],["kendoSankeyNodeTooltipTemplate",""],["kendoSankeyLinkTooltipTemplate",""],[1,"k-tooltip","k-sankey-tooltip","k-chart-tooltip","k-chart-shared-tooltip",3,"ngStyle"],[1,"k-tooltip-content"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngStyle"],["squareSymbol","",3,"color"],[3,"name","svgIcon"]],template:function(i,s){1&i&&r.DNE(0,Q2,4,3,"ng-template",null,0,r.C5r)(2,Z2,6,6,"ng-template",1)(3,K2,10,11,"ng-template",2)},dependencies:[X.B3,X.bT,X.T3,oa,OM,na,xx.QK],encapsulation:2})}return o})(),aa=(()=>{class o extends vt.EX{tooltipUnitFormat;static \u0275fac=(()=>{let t;return function(s){return(t||(t=r.xGo(o)))(s||o)}})();static \u0275dir=r.FsC({type:o,selectors:[["","kendoSankeyMessages",""]],inputs:{tooltipUnitFormat:"tooltipUnitFormat"},features:[r.Vt3]})}return o})(),gv=(()=>{class o extends aa{service;constructor(t){super(),this.service=t}static \u0275fac=function(i){return new(i||o)(r.rXU(vt.Pi))};static \u0275dir=r.FsC({type:o,selectors:[["","kendoSankeyLocalizedMessages",""]],standalone:!0,features:[r.Jv_([{provide:aa,useExisting:(0,r.Rfq)(()=>o)}]),r.Vt3]})}return o})(),Vh=(()=>{class o{element;configurationService;themeService;localizationService;instanceEventService;ngZone;changeDetector;renderer;intlService;data;links;nodes;labels;title;legend;tooltip;disableAutoLayout;navigable=!0;popupSettings;nodeEnter=new r.bkB;nodeLeave=new r.bkB;nodeClick=new r.bkB;linkEnter=new r.bkB;linkLeave=new r.bkB;linkClick=new r.bkB;tooltipInstance;instanceElement;showLicenseWatermark=!1;licenseMessage;instance;options;theme;optionsChange;redrawTimeout;destroyed;subscriptions;rtl=!1;hostClasses=["k-chart","k-sankey"];constructor(t,i,s,n,a,l,c,h,d){this.element=t,this.configurationService=i,this.themeService=s,this.localizationService=n,this.instanceEventService=a,this.ngZone=l,this.changeDetector=c,this.renderer=h,this.intlService=d;const p=(0,Xr.$j)(Oi);this.licenseMessage=(0,xt.FK)(Oi),this.showLicenseWatermark=(0,xt.Em)(p),this.themeService.loadTheme(),this.refreshWait()}ngOnInit(){this.element&&this.hostClasses.forEach(t=>{this.renderer.addClass(this.element.nativeElement,t)})}ngAfterViewInit(){this.setDirection(),this.subscriptions=this.intlService.changes.subscribe(this.intlChange.bind(this)),this.subscriptions.add(this.localizationService.changes.subscribe(this.rtlChange.bind(this)))}ngOnChanges(t){const i=this.configurationService.store;Wr(t,i),i.popupSettings=null,this.configurationService.push(i)}notifyChanges(t){this.ngOnChanges($r(t))}ngOnDestroy(){this.destroyed=!0,this.optionsChange&&this.optionsChange.unsubscribe(),this.instance&&(this.instance.destroy(),this.instance=null),this.subscriptions&&this.subscriptions.unsubscribe(),clearTimeout(this.redrawTimeout)}messageFor(t){return this.localizationService.get(t)}createInstance(t){this.instance=new Om(t,this.instanceOptions,this.theme),["nodeEnter","nodeLeave","nodeClick","linkEnter","linkLeave","linkClick"].forEach(i=>this.instance.bind(i,s=>this.trigger(i,s))),this.instance.bind("tooltipShow",i=>this.onShowTooltip(i)),this.instance.bind("tooltipHide",()=>this.onHideTooltip()),this.hostClasses.forEach(i=>{this.renderer.removeClass(this.instanceElement.nativeElement,i)})}exportImage(t={}){return(0,ux.A)(this.exportVisual(t),t)}exportSVG(t={}){return gx(this.exportVisual(t),t)}exportVisual(t={}){return this.instance.exportVisual(t)}init(){this.canRender&&this.createInstance(this.instanceElement.nativeElement)}reloadTheme(){this.instance&&(this.themeService.reset(),this.instance.destroy(),this.instance=null)}onShowTooltip(t){this.run(()=>{this.tooltipInstance.show(t)},!0,!0)}onHideTooltip(){this.tooltipInstance.active&&(this.tooltipInstance.hide(),this.detectChanges())}trigger(t,i){const s=this.activeEmitter(t);if(s){const n=this.instanceEventService.create(t,i,this);return this.run(()=>{s.emit(n)}),n.isDefaultPrevented&&n.isDefaultPrevented()}}requiresHandlers(t){for(let i=0;i<t.length;i++)if(this.activeEmitter(t[i]))return!0;return!1}refresh(){clearTimeout(this.redrawTimeout),this.instance?this.updateOptions():this.init()}updateOptions(){this.instance.setOptions(this.instanceOptions)}get canRender(){return(0,xt.nm)()&&!!this.instanceElement}get instanceOptions(){return{...this.options,rtl:this.rtl,disableKeyboardNavigation:!this.navigable}}activeEmitter(t){const i=this[t];if(i&&i.emit&&Kr(i))return i}refreshWait(){this.ngZone.runOutsideAngular(()=>{this.optionsChange=(0,fx.z)([this.configurationService.onChange$,this.themeService.onChange$]).pipe((0,mx.M)(t=>{this.options=t[0],this.theme=t[1]}),(0,eh.Z)(sh)).subscribe(()=>{this.refresh()})})}run(t,i=!0,s){i?(s&&this.changeDetector.markForCheck(),this.ngZone.run(t)):(t(),s&&this.detectChanges())}detectChanges(){this.destroyed||this.changeDetector.detectChanges()}intlChange(){this.instance&&this.refresh()}rtlChange(){this.instance&&this.rtl!==this.isRTL&&this.refresh()}setDirection(){this.rtl=this.isRTL,this.element&&this.renderer.setAttribute(this.element.nativeElement,"dir",this.rtl?"rtl":"ltr")}get isRTL(){return!!this.localizationService.rtl}static \u0275fac=function(i){return new(i||o)(r.rXU(r.aKT),r.rXU(b),r.rXU(MM),r.rXU(vt.Pi),r.rXU(uv),r.rXU(r.SKi),r.rXU(r.gRc),r.rXU(r.sFG),r.rXU(ci.Bs))};static \u0275cmp=r.VBU({type:o,selectors:[["kendo-sankey"]],viewQuery:function(i,s){if(1&i&&(r.GBs(ra,7),r.GBs(J2,7)),2&i){let n;r.mGM(n=r.lsd())&&(s.tooltipInstance=n.first),r.mGM(n=r.lsd())&&(s.instanceElement=n.first)}},inputs:{data:"data",links:"links",nodes:"nodes",labels:"labels",title:"title",legend:"legend",tooltip:"tooltip",disableAutoLayout:"disableAutoLayout",navigable:"navigable",popupSettings:"popupSettings"},outputs:{nodeEnter:"nodeEnter",nodeLeave:"nodeLeave",nodeClick:"nodeClick",linkEnter:"linkEnter",linkLeave:"linkLeave",linkClick:"linkClick"},exportAs:["kendoSankey"],standalone:!0,features:[r.Jv_([b,vt.Pi,uv,Lh,{provide:vt.$R,useValue:"kendo.sankey"}]),r.OA$,r.aNF],decls:5,vars:3,consts:()=>{let t;return t=$localize`:kendo.sankey.tooltipUnitFormat|The format string to use when displaying node and link values in the tooltip:({0} units)`,[["instance",""],["kendoSankeyLocalizedMessages","","tooltipUnitFormat",t],[1,"k-chart-surface"],[3,"popupSettings","tooltipUnitFormat"],["kendoWatermarkOverlay","",3,"licenseMessage",4,"ngIf"],["kendoWatermarkOverlay","",3,"licenseMessage"]]},template:function(i,s){1&i&&(r.eu8(0,1),r.nrm(1,"div",2,0)(3,"kendo-sankey-tooltip-popup",3),r.DNE(4,q2,1,1,"div",4)),2&i&&(r.R7$(3),r.Y8G("popupSettings",s.popupSettings)("tooltipUnitFormat",s.messageFor("tooltipUnitFormat")),r.R7$(),r.Y8G("ngIf",s.showLicenseWatermark))},dependencies:[gv,ra,X.bT,xt.S$],encapsulation:2,changeDetection:0})}return o})();let Ii=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=r.$C({type:o});static \u0275inj=r.G2t({providers:[xx.o3,xt.yr,we.OQ,ro],imports:[se,sa,Lx,Ix,sa,Vh,ra]})}return o})();var Ve=T(9514),Js=T(7467),Ri=T(8716),Vt=T(4341),co=T(8430),ho=T(7944);const WM=["tooltipDir"],$M=()=>({text:"Month"}),QM=()=>({text:"NCR count"});function ZM(o,e){if(1&o){const t=r.RV6();r.j41(0,"div",14)(1,"h2",15),r.EFF(2),r.k0s(),r.j41(3,"kendo-chart",16),r.bIt("seriesClick",function(s){r.eBV(t);const n=r.XpG();return r.Njj(n.onBarClick(s))}),r.nrm(4,"kendo-chart-legend",17),r.j41(5,"kendo-chart-category-axis"),r.nrm(6,"kendo-chart-category-axis-item",18),r.k0s(),r.j41(7,"kendo-chart-value-axis"),r.nrm(8,"kendo-chart-value-axis-item",19),r.k0s(),r.j41(9,"kendo-chart-series"),r.nrm(10,"kendo-chart-series-item",20),r.k0s()(),r.j41(11,"div",21)(12,"kendo-pager",22),r.bIt("pageChange",function(s){r.eBV(t);const n=r.XpG();return r.Njj(n.pageChange(s))}),r.k0s()()()}if(2&o){const t=r.XpG();r.R7$(2),r.SpI("NCR Count by Month - ",t.currentYear,""),r.R7$(),r.Y8G("transitions",!1)("zoomable",!0),r.R7$(3),r.Y8G("categories",t.months)("title",r.lJ4(14,$M)),r.R7$(2),r.Y8G("title",r.lJ4(15,QM)),r.R7$(2),r.Y8G("data",t.currentYearDataCounts)("color","#1976d2")("gap",5.5)("spacing",.08),r.R7$(2),r.Y8G("total",t.pagedNcrData.length)("pageSize",t.pageSize)("skip",t.skip)("info",!1)}}function KM(o,e){if(1&o){const t=r.RV6();r.j41(0,"div",26)(1,"div",27)(2,"h3"),r.EFF(3),r.k0s()(),r.j41(4,"div",28)(5,"button",29),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.toggleCollapse())}),r.j41(6,"span",30),r.EFF(7),r.k0s()(),r.j41(8,"button",31),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.open("dialog"))}),r.j41(9,"span",30),r.EFF(10,"settings"),r.k0s()(),r.j41(11,"button",32),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.closeGrid())}),r.j41(12,"span",30),r.EFF(13,"close"),r.k0s()()()()}if(2&o){const t=r.XpG(2);r.R7$(3),r.Lme("Tabular View of ",t.selectedMonth," ",t.currentYear," "),r.R7$(2),r.FS9("title",t.isGridExpanded?"Collapse Grid":"Expand Grid"),r.R7$(2),r.JRh(t.isGridExpanded?"fullscreen_exit":"fullscreen")}}function JM(o,e){if(1&o){const t=r.RV6();r.j41(0,"div",26)(1,"div",27)(2,"h3"),r.EFF(3,"Activities"),r.k0s(),r.j41(4,"span",33),r.EFF(5),r.k0s()(),r.j41(6,"div",28)(7,"button",29),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.toggleCollapse())}),r.j41(8,"span",30),r.EFF(9),r.k0s()(),r.j41(10,"button",31),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.open("dialog"))}),r.j41(11,"span",30),r.EFF(12,"settings"),r.k0s()()()()}if(2&o){const t=r.XpG(2);r.R7$(5),r.SpI("Result: ",t.gridView.length,""),r.R7$(2),r.FS9("title",t.isGridExpanded?"Collapse Grid":"Expand Grid"),r.R7$(2),r.JRh(t.isGridExpanded?"fullscreen_exit":"fullscreen")}}function qM(o,e){if(1&o&&(r.j41(0,"div",23),r.DNE(1,KM,14,4,"div",24)(2,JM,13,3,"div",24),r.nrm(3,"iep-grid",25),r.k0s()),2&o){const t=r.XpG();r.R7$(),r.Y8G("ngIf",t.isBarChartData),r.R7$(),r.Y8G("ngIf",!t.isBarChartData),r.R7$(),r.Y8G("data",t.gridView)("columns",t.mapView)("pageable",!0)("enablescrolling",!1)}}let tP=(()=>{class o{constructor(){this.dataService=(0,r.WQX)(Ri.G),this.gridView=[],this.mapView=[],this.viewAsOptions=["Tabular View","Chart View"],this.functionsOptions=["Individual","Project","Office"],this.selectedViewAs="Chart View",this.selectedFunction="Individual",this.showWarning=!0,this.isExpanded=!1,this.isGridExpanded=!1,this.mySelection=[],this.dialogOpened=!1,this.searchValue="",this.selectedMonth="",this.selectedCount=0,this.showGrid=!1,this.gridData=[],this.collapsed=!1,this.isBarChartData=!1,this.pageSize=1,this.skip=0,this.ncrData=[],this.loading=!0,this.pagedNcrData=[],this.data=[],this.sort=[],(0,r.QZP)(()=>{const t=this.dataService.getTreeData();if(t&&t.length>0){const i=t.split(",");this.selectedProjects=i,this.gridView=this.data.filter(s=>{const n=s.id||s.ProjectID||s.projectId||s.ProjectId;return i.includes(n?.toString())})}else this.gridView=this.data})}ngOnInit(){this.dataService.getNCRData().subscribe(t=>{this.data=t.tabularData||[],this.ncrData=t.chartData.monthlyNCR||[],this.pagedNcrData=this.groupNcrDataByYear(this.ncrData),this.loading=!1,this.gridView=this.data.map(i=>Object.fromEntries(Object.entries(i).map(([s,n])=>[s.replace(/\s+/g,""),n]))),this.data&&(this.mapView=Object.keys(this.data[0]).map(i=>({field:i.replace(/\s+/g,""),title:i.replace("_"," ").toUpperCase()})))})}groupNcrDataByYear(t){const i={};return t.forEach(s=>{i[s.year]||(i[s.year]=[]),i[s.year].push({month:s.month,count:s.count})}),Object.keys(i).sort((s,n)=>+n-+s).map(s=>({year:+s,data:i[+s]}))}get currentYearData(){return this.pagedNcrData[this.skip]?.data||[]}get currentYear(){return this.pagedNcrData[this.skip]?.year||""}get months(){return this.currentYearData.map(t=>t.month)}get currentYearDataCounts(){return this.currentYearData.map(t=>t.count)}pageChange(t){this.skip=t.skip}onBarClick(t){this.isBarChartData=!0;const i=t.category,s=["January","February","March","April","May","June","July","August","September","October","November","December"];let n=null;"string"==typeof i?(n=s.indexOf(i)+1,this.selectedMonth=i):"number"==typeof i&&(this.selectedMonth=this.months[i],n=s.indexOf(this.selectedMonth)+1),this.selectedCount=this.currentYearDataCounts[i],this.dataService.getNCRDataBymonth({month:n,year:this.currentYear}).subscribe(l=>{this.gridView=[],console.log("data is ==>",l),this.data=l,this.data.length>0&&(this.gridView=this.data.map(c=>Object.fromEntries(Object.entries(c).map(([h,d])=>[h.replace(/\s+/g,""),d]))),this.data&&(this.mapView=Object.keys(this.data[0]).map(c=>({field:c.replace(/\s+/g,""),title:c.replace("_"," ").toUpperCase()}))))}),this.showGrid=!0}closeGrid(){this.showGrid=!1}clearFilter(){}close(t){this.dialogOpened=!1}open(t){this.dialogOpened=!0}action(t){console.log(`Dialog result: ${t}`),this.dialogOpened=!1}onFilter(t){const i=t.toLowerCase();this.gridView=this.data.map(s=>Object.fromEntries(Object.entries(s).map(([n,a])=>[n.replace(/\s+/g,""),a]))),i&&(this.gridView=this.gridView.filter(s=>Object.values(s).some(n=>n&&n.toString().toLowerCase().includes(i))))}onSortChange(t){this.sort=t,this.gridView=(0,co.My)(this.gridView,this.sort)}showTooltip(t){const i=t.target;"TD"!==i.nodeName&&"k-column-title"!==i.className||"kendo-checkbox"===i.nodeName?this.tooltipDir.hide():this.tooltipDir.toggle(i)}clearFilters(){this.searchValue="",this.onFilter("")}showGridOrTable(){this.isGridExpanded=!this.isGridExpanded,this.showGrid="Tabular View"!=this.selectedViewAs}toggleCollapse(){this.collapsed=!this.collapsed}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=r.VBU({type:o,selectors:[["copilot-iep-nx-ncr"]],viewQuery:function(i,s){if(1&i&&r.GBs(WM,5),2&i){let n;r.mGM(n=r.lsd())&&(s.tooltipDir=n.first)}},standalone:!0,features:[r.aNF],decls:17,vars:11,consts:[[1,"ncr-bar-chart-wrapper"],[1,"filter-expansion-panel"],[1,"filter-expansion-header"],[1,"filter-title"],[1,"filter-header-actions"],["type","button",1,"clear-filter-btn","primary",3,"click"],["type","button",1,"expansion-toggle-btn","primary",3,"click","title"],[1,"material-symbols-outlined","primary"],[1,"filter-expansion-content"],[1,"dropdown-row"],["name","selectedview",1,"filter-dropdown",3,"ngModelChange","selectionChange","data","ngModel"],["name","selectedfns",1,"filter-dropdown",3,"ngModelChange","data","ngModel"],["class","chart-view",4,"ngIf"],["class","ncr-grid-wrapper",4,"ngIf"],[1,"chart-view"],[1,"ncr-bar-chart-title"],[3,"seriesClick","transitions","zoomable"],["position","top"],[3,"categories","title"],[3,"title"],["type","column","name","NCR Count",3,"data","color","gap","spacing"],[1,"pager-right"],[1,"ncr-pager",3,"pageChange","total","pageSize","skip","info"],[1,"ncr-grid-wrapper"],["class","iep-grid-header",4,"ngIf"],[3,"data","columns","pageable","enablescrolling"],[1,"iep-grid-header"],[1,"header-left"],[1,"header-right"],[1,"icon-btn",3,"click","title"],[1,"material-symbols-outlined"],["title","Settings",1,"icon-btn",3,"click"],[1,"icon-btn",3,"click"],[1,"result-count"]],template:function(i,s){1&i&&(r.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),r.EFF(4,"Filter Activities"),r.k0s(),r.j41(5,"div",4)(6,"button",5),r.bIt("click",function(){return s.clearFilter()}),r.EFF(7," Clear Filter "),r.k0s(),r.j41(8,"button",6),r.bIt("click",function(){return s.isExpanded=!s.isExpanded}),r.j41(9,"span",7),r.EFF(10),r.k0s()()()(),r.j41(11,"div",8)(12,"div",9)(13,"kendo-dropdownlist",10),r.mxI("ngModelChange",function(a){return r.DH7(s.selectedViewAs,a)||(s.selectedViewAs=a),a}),r.bIt("selectionChange",function(){return s.showGridOrTable()}),r.k0s(),r.j41(14,"kendo-dropdownlist",11),r.mxI("ngModelChange",function(a){return r.DH7(s.selectedFunction,a)||(s.selectedFunction=a),a}),r.k0s()()()(),r.DNE(15,ZM,13,16,"div",12)(16,qM,4,6,"div",13),r.k0s()),2&i&&(r.R7$(),r.AVh("expanded",s.isExpanded),r.R7$(7),r.Y8G("title",s.isExpanded?"Collapse":"Expand"),r.BMQ("aria-expanded",s.isExpanded),r.R7$(2),r.JRh(s.isExpanded?"expand_less":"expand_more"),r.R7$(3),r.Y8G("data",s.viewAsOptions),r.R50("ngModel",s.selectedViewAs),r.R7$(),r.Y8G("data",s.functionsOptions),r.R50("ngModel",s.selectedFunction),r.R7$(),r.Y8G("ngIf",!s.showGrid),r.R7$(),r.Y8G("ngIf",s.showGrid))},dependencies:[X.MD,X.bT,Ii,se,Ce,ne,Re,ie,Wt,Le,ke,Ve.io,Ve.Bz,Js.d,ho.V9,Vt.YN,Vt.BC,Vt.vS],styles:[".testgrid[_ngcontent-%COMP%]{width:1200px}[_nghost-%COMP%]     .testgrid{overflow-x:auto!important}[_nghost-%COMP%]     .k-grid{overflow-x:auto!important}[_nghost-%COMP%]     body, [_nghost-%COMP%]     html{overflow-x:hidden!important}  kendo-grid td{overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;max-width:20px}[_nghost-%COMP%]     .k-tabstrip-content{overflow-x:hidden!important}.selected-projects-section[_ngcontent-%COMP%]{margin-bottom:6px;font-size:13px}.selected-projects-section[_ngcontent-%COMP%]   .selected-label[_ngcontent-%COMP%]{font-weight:600;margin-right:6px}.selected-projects-section[_ngcontent-%COMP%]   .selected-list[_ngcontent-%COMP%]{color:#05322b;font-weight:500}.iep-grid-wrapper[_ngcontent-%COMP%]{margin-top:8px;background:#fff;border-radius:4px;box-shadow:0 2px 8px #0000000a;padding:8px;transition:width .3s,max-width .3s;width:100%;max-width:100%;height:100%;overflow:hidden;display:flex;flex-direction:column}.iep-grid-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;flex-shrink:0;padding-bottom:4px;border-bottom:1px solid #ddd;background:#fafafa}.iep-grid-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:18px}.iep-grid-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:700;color:#05322b}.iep-grid-header[_ngcontent-%COMP%]   .result-count[_ngcontent-%COMP%]{font-size:18px;margin-left:0}.iep-grid-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;border-radius:4px;transition:background .2s;font-size:16px}.iep-grid-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.iep-grid-header[_ngcontent-%COMP%]   kendo-svgicon[_ngcontent-%COMP%]{vertical-align:middle}.filter-expansion-panel[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:3px;margin-bottom:8px;background:#fafafa;transition:box-shadow .2s;box-shadow:0 1px 2px #00000008;flex-shrink:0}.filter-expansion-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px 8px}.filter-title[_ngcontent-%COMP%]{margin:0;font-size:.95rem;font-weight:500}.clear-filter-btn[_ngcontent-%COMP%]{background:none;border:none;color:#209474;font-size:.85rem;cursor:pointer;padding:2px 8px;border-radius:4px;transition:background .2s}.filter-expansion-content[_ngcontent-%COMP%]{padding:0 8px 6px}.filter-expansion-panel.expanded[_ngcontent-%COMP%]{box-shadow:0 2px 8px #00000014}.filter-header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.expansion-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:.85rem;cursor:pointer;padding:2px 8px;border-radius:4px;transition:background .2s;display:flex;align-items:center}.expansion-toggle-btn[_ngcontent-%COMP%]:hover{background:#e3f2fd}.ispo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;transition:all .3s cubic-bezier(.4,0,.2,1)}.ispo-container.ispo-expanded[_ngcontent-%COMP%]   .iep-grid-wrapper[_ngcontent-%COMP%]{width:calc(100vw - 80px);max-width:100vw;margin-left:0;margin-right:0;transition:width .3s cubic-bezier(.4,0,.2,1)}.iep-grid-wrapper[_ngcontent-%COMP%]{width:100%;transition:width .3s cubic-bezier(.4,0,.2,1)}@media (max-width: 900px){.ispo-container.ispo-expanded[_ngcontent-%COMP%]   .iep-grid-wrapper[_ngcontent-%COMP%]{width:100vw;margin:0}}iep-grid[_ngcontent-%COMP%]{flex:1 1 0%;min-width:0;min-height:0;width:100%;height:100%;overflow:auto}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:1000;width:100vw!important;max-width:100vw!important;height:100vh!important;background:#fff;border-radius:0;box-shadow:0 0 0 9999px #0003;padding:12px 0 0}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]   .iep-grid-header[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;z-index:10;padding-bottom:8px}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]   iep-grid[_ngcontent-%COMP%]{flex:1 1 auto;height:100%!important;min-height:0}.iep-grid-wrapper[_ngcontent-%COMP%]{transition:width .3s;width:100%}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]{width:100%!important}.icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px 8px;font-size:18px;vertical-align:middle}.ncr-bar-chart-wrapper[_ngcontent-%COMP%]{padding:0rem 1rem}.ncr-bar-chart-title[_ngcontent-%COMP%]{text-align:center;color:#1976d2;font-size:1.5rem;margin-bottom:1.5rem}[_nghost-%COMP%]     .k-chart .k-series .k-column{fill:#1976d2!important}.ncr-grid-wrapper[_ngcontent-%COMP%]{padding:2rem 1rem;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014;position:relative}.close-btn[_ngcontent-%COMP%]{position:absolute;right:1.5rem;top:1.5rem;background:#1976d2;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;font-size:1rem;z-index:2}.close-btn[_ngcontent-%COMP%]:hover{background:#125ea2}.dropdown-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:10px}.result-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.result-btn[_ngcontent-%COMP%]{border-radius:20px;background:#888;color:#fff;border:none;padding:8px 18px;margin-right:8px;font-weight:200;font-size:12px;transition:background .2s}.result-btn[_ngcontent-%COMP%]:last-child{margin-right:0}.result-btn[_ngcontent-%COMP%]:active, .result-btn[_ngcontent-%COMP%]:focus{background:#666}.result-btn.primary[_ngcontent-%COMP%]{background:var(--primary, #209474);color:#fff}.card-scroll-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:18px}.card-scroll-view[_ngcontent-%COMP%]{display:flex;overflow-x:auto;gap:18px;flex:1 1 auto;min-width:0;padding:8px 0}.card-tile[_ngcontent-%COMP%]{min-width:220px;max-width:240px;height:40px;padding:6px 5px;border:1px solid lightgrey;border-radius:8px;box-shadow:0 1px 4px #0000000f;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;font-size:15px}.card-tile[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #1976d21f}.card-title[_ngcontent-%COMP%]{font-size:15px;font-weight:600;margin-bottom:4px}.card-desc[_ngcontent-%COMP%]{font-size:12px;color:#666}.scroll-arrow[_ngcontent-%COMP%]{border:none;color:#209474;border-radius:10%;width:26px;height:50px;display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;margin:0 8px;transition:background .2s}.scroll-arrow[_ngcontent-%COMP%]:disabled{background:#f5f5f5;color:#aaa;cursor:not-allowed}.scroll-arrow[_ngcontent-%COMP%]:hover:not(:disabled){background:#bbdefb}.close-icon[_ngcontent-%COMP%]{font-size:12px!important}.material-symbols-outlined.notification-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#e65100;font-size:22px}.warning-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e65100}.pager-right[_ngcontent-%COMP%]{text-align:right;margin-top:10px;width:100%}.pager-content[_ngcontent-%COMP%]{text-align:right;width:100%;margin-top:10px}"],changeDetection:0})}}return o})();var eP=T(4165);const iP=()=>({visible:!0}),fv=o=>({text:o});function sP(o,e){if(1&o&&(r.j41(0,"li"),r.EFF(1),r.k0s()),2&o){const t=e.$implicit;r.R7$(),r.Lme("",t.Title," : ",t.Value,"")}}function nP(o,e){if(1&o&&(r.j41(0,"ul"),r.DNE(1,sP,2,2,"li",15),r.k0s()),2&o){const t=r.XpG(2);r.R7$(),r.Y8G("ngForOf",t.pieData)}}function oP(o,e){if(1&o&&(r.j41(0,"div",9)(1,"kendo-chart",10)(2,"kendo-chart-tooltip",11),r.DNE(3,nP,2,1,"ng-template",12),r.k0s(),r.nrm(4,"kendo-chart-legend",13),r.j41(5,"kendo-chart-series"),r.nrm(6,"kendo-chart-series-item",14),r.k0s()()()),2&o){const t=r.XpG();r.R7$(2),r.Y8G("visible",!0),r.R7$(4),r.Y8G("data",t.pieData)("labels",r.lJ4(3,iP))}}function rP(o,e){if(1&o&&r.nrm(0,"kendo-chart-series-item",21),2&o){const t=e.$implicit;r.Y8G("stack",!0)("name",t.name)("data",t.data)}}function aP(o,e){if(1&o){const t=r.RV6();r.j41(0,"div",9)(1,"div",16),r.EFF(2),r.k0s(),r.j41(3,"kendo-chart",17,0),r.bIt("seriesClick",function(s){r.eBV(t);const n=r.XpG();return r.Njj(n.onSeriesClick(s,"actionowner"))}),r.nrm(5,"kendo-chart-legend",13),r.j41(6,"kendo-chart-value-axis"),r.nrm(7,"kendo-chart-value-axis-item",18),r.k0s(),r.j41(8,"kendo-chart-category-axis"),r.nrm(9,"kendo-chart-category-axis-item",19),r.k0s(),r.j41(10,"kendo-chart-series"),r.DNE(11,rP,1,3,"kendo-chart-series-item",20),r.k0s()()()}if(2&o){const t=r.XpG();r.R7$(2),r.SpI(" ","All Business Unit"+(t.breadcrumb.length?" > "+t.breadcrumb.join(" > "):"")," "),r.R7$(5),r.Y8G("title",r.eq3(5,fv,t.chartTitle))("min",0),r.R7$(2),r.Y8G("categories",t.currentData.categories),r.R7$(2),r.Y8G("ngForOf",t.currentData.series)}}function lP(o,e){if(1&o&&r.nrm(0,"kendo-chart-series-item",24),2&o){const t=e.$implicit;r.Y8G("name",t.name)("data",t.data)}}function cP(o,e){if(1&o){const t=r.RV6();r.j41(0,"div",9)(1,"div",16),r.EFF(2),r.k0s(),r.j41(3,"kendo-chart",22,1),r.bIt("seriesClick",function(s){r.eBV(t);const n=r.XpG();return r.Njj(n.onSeriesClick(s,"AI"))}),r.nrm(5,"kendo-chart-legend",13),r.j41(6,"kendo-chart-value-axis"),r.nrm(7,"kendo-chart-value-axis-item",18),r.k0s(),r.j41(8,"kendo-chart-category-axis"),r.nrm(9,"kendo-chart-category-axis-item",19),r.k0s(),r.j41(10,"kendo-chart-series"),r.DNE(11,lP,1,2,"kendo-chart-series-item",23),r.k0s()()()}if(2&o){const t=r.XpG();r.R7$(2),r.SpI(" ","All Business Unit"+(t.breadcrumbai.length?" > "+t.breadcrumbai.join(" > "):"")," "),r.R7$(5),r.Y8G("title",r.eq3(5,fv,t.apiapprover.teams))("min",0),r.R7$(2),r.Y8G("categories",t.approverData.categories),r.R7$(2),r.Y8G("ngForOf",t.approverData.series)}}function hP(o,e){if(1&o&&(r.j41(0,"kendo-chart",25)(1,"kendo-chart-value-axis"),r.nrm(2,"kendo-chart-value-axis-item",18),r.k0s(),r.j41(3,"kendo-chart-category-axis"),r.nrm(4,"kendo-chart-category-axis-item",19),r.k0s(),r.j41(5,"kendo-chart-series"),r.nrm(6,"kendo-chart-series-item",26)(7,"kendo-chart-series-item",27),r.k0s()()),2&o){const t=r.XpG();r.R7$(2),r.Y8G("title",t.currentOTRDR.pendingWith)("min",0),r.R7$(2),r.Y8G("categories",t.currentOTRDR.pendingWith),r.R7$(2),r.Y8G("stack",!0)("data",null==t.currentOTRDR?null:t.currentOTRDR.due),r.R7$(),r.Y8G("data",null==t.currentOTRDR?null:t.currentOTRDR.backlog)}}function dP(o,e){if(1&o&&(r.j41(0,"kendo-chart",28)(1,"kendo-chart-series"),r.nrm(2,"kendo-chart-series-item",26)(3,"kendo-chart-series-item",27)(4,"kendo-chart-series-item",27),r.k0s()()),2&o){const t=r.XpG();r.R7$(2),r.Y8G("stack",!0)("data",null==t.actionItem?null:t.actionItem.due),r.R7$(),r.Y8G("data",null==t.actionItem?null:t.actionItem.backlog),r.R7$(),r.Y8G("data",null==t.actionItem?null:t.actionItem.complete)}}let pP=(()=>{class o{constructor(){this.dataService=(0,r.WQX)(Ri.G),this.pieData=[],this.breadcrumb=[],this.breadcrumbai=[],this.chartTitle="All Business Unit",this.currentData={categories:[],series:[{name:"",data:[]}]},this.approverData={categories:[],series:[{name:"",data:[]}]}}ngOnInit(){this.dataService.getOtrDrData().subscribe(t=>{t.length>0&&(t.forEach(i=>{i.DR_AI_Status?this.pieData=i.DR_AI_Status:i.AIApprover_Team_Chart?this.apiapprover=i.AIApprover_Team_Chart.activities:i.Action_Owner_Team_Chart?this.drilldownData=i.Action_Owner_Team_Chart.activities:i.CurrentOTRDRPendingWith?this.currentOTRDR=i.CurrentOTRDRPendingWith.activities:i.ActionItemByDR?this.actionItem=i.ActionItemByDR.activities:i.actionowner_secondlevel?this.secondLevelActionIOwner=i.actionowner_secondlevel.activities:i.actionowner_thirdlevel?this.thirdLevelActionOwner=i.actionowner_thirdlevel.activities:i.approver_secondlevel?this.secondLevelAIOwner=i.approver_secondlevel.activities:i.approver_thirdlevel&&(this.thirdLevelAIOwner=i.approver_thirdlevel.activities)}),this.setTopLevelData())})}setTopLevelData(){this.chartTitle="All Business Unit",this.currentData={categories:this.drilldownData.teams,series:[{name:"Due",data:this.drilldownData.due.map(t=>Number(t))},{name:"Backlog",data:this.drilldownData.backlog.map(t=>Number(t))},{name:"Complete",data:this.drilldownData.complete.map(t=>Number(t))}]},this.approverData={categories:this.apiapprover.teams,series:[{name:"Teams",data:this.apiapprover.teams},{name:"count",data:this.apiapprover.count.map(t=>Number(t))}]},console.log(this.approverData)}onSeriesClick(t,i){if("actionowner"===i){const s=t.category;this.breadcrumb.length<3&&this.breadcrumb.push(s);const n=this.secondLevelActionIOwner;if(1===this.breadcrumb.length)n&&(this.chartTitle=`Sub Business Unit - ${s}`,this.currentData={categories:n.teams,series:[{name:"Due",data:n.due.map(a=>Number(a))},{name:"Backlog",data:n.backlog.map(a=>Number(a))},{name:"Complete",data:n.complete.map(a=>Number(a))}]});else if(2===this.breadcrumb.length){const[a,l]=this.breadcrumb,c=this.thirdLevelActionOwner;c&&(this.chartTitle=`Detail - ${l}`,this.currentData={categories:c.teams,series:[{name:"Due",data:c.due.map(h=>Number(h))},{name:"Backlog",data:c.backlog.map(h=>Number(h))},{name:"Complete",data:c.complete.map(h=>Number(h))}]})}}else{const s=t.category;this.breadcrumbai.length<3&&this.breadcrumbai.push(s);const n=this.secondLevelAIOwner;if(1===this.breadcrumbai.length)n&&(this.chartTitle=`Sub Business Unit - ${s}`,this.approverData={categories:n.teams,series:[{name:"Teams",data:n.teams},{name:"Count",data:n.count.map(a=>Number(a))}]});else if(2===this.breadcrumbai.length){const[a,l]=this.breadcrumbai,c=this.thirdLevelAIOwner;c&&(this.chartTitle=`Detail - ${l}`,this.approverData={categories:c.teams,series:[{name:"Due",data:c.due.map(h=>Number(h))},{name:"Backlog",data:c.backlog.map(h=>Number(h))},{name:"Complete",data:c.complete.map(h=>Number(h))}]})}}}goBack(){this.breadcrumb.pop(),0===this.breadcrumb.length?this.setTopLevelData():1===this.breadcrumb.length?this.onSeriesClick({category:this.breadcrumb[0]},"actionowner"):2===this.breadcrumb.length&&this.onSeriesClick({category:this.breadcrumb[1]},"actionowner")}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=r.VBU({type:o,selectors:[["copilot-iep-nx-otrdr"]],standalone:!0,features:[r.aNF],decls:9,vars:5,consts:[["instance",""],["instanceai",""],[1,"charts-div"],["class","chart-item",4,"ngIf"],[1,"second-row"],[1,"chart-item","chart-item-33"],["title","Current OTRDR Pending With",4,"ngIf"],[1,"chart-item","chart-item-66"],["title","Design Review Type",4,"ngIf"],[1,"chart-item"],["title","DR AI STATUS"],[3,"visible"],["kendoChartSeriesTooltipTemplate",""],["position","bottom"],["type","pie","field","Value","categoryField","Title",3,"data","labels"],[4,"ngFor","ngForOf"],[1,"mb-underline"],["title","Action Owner Team",3,"seriesClick"],[3,"title","min"],[3,"categories"],["type","bar",3,"stack","name","data",4,"ngFor","ngForOf"],["type","bar",3,"stack","name","data"],["title","AI Approver Team",3,"seriesClick"],["type","bar",3,"name","data",4,"ngFor","ngForOf"],["type","bar",3,"name","data"],["title","Current OTRDR Pending With"],["type","column",3,"stack","data"],["type","column",3,"data"],["title","Design Review Type"]],template:function(i,s){1&i&&(r.j41(0,"div",2),r.DNE(1,oP,7,4,"div",3)(2,aP,12,7,"div",3)(3,cP,12,7,"div",3),r.k0s(),r.j41(4,"div",4)(5,"div",5),r.DNE(6,hP,8,6,"kendo-chart",6),r.k0s(),r.j41(7,"div",7),r.DNE(8,dP,5,4,"kendo-chart",8),r.k0s()()),2&i&&(r.R7$(),r.Y8G("ngIf",s.pieData),r.R7$(),r.Y8G("ngIf",s.drilldownData),r.R7$(),r.Y8G("ngIf",s.apiapprover),r.R7$(3),r.Y8G("ngIf",s.currentOTRDR),r.R7$(2),r.Y8G("ngIf",s.actionItem))},dependencies:[X.MD,X.Sq,X.bT,se,rs,Ce,ne,Re,ie,Wt,lo,Le,ke],styles:[".charts-div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.charts-div[_ngcontent-%COMP%] > .chart-item[_ngcontent-%COMP%]{width:33%}.second-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:100%}.mb-underline[_ngcontent-%COMP%]{margin-bottom:10px;text-decoration:underline}.chart-item-33[_ngcontent-%COMP%]{width:33%}.chart-item-66[_ngcontent-%COMP%]{width:66%}"]})}}return o})();const uP=["tooltipDir"],gP=()=>({visible:!0}),fP=o=>({text:o}),mP=()=>({visible:!0,format:"{0}"});function xP(o,e){if(1&o&&r.nrm(0,"kendo-chart-value-axis-item",7),2&o){const t=e.$implicit;r.Y8G("name",t.name||"")("title",t.title||r.eq3(6,fP,t.name||""))("min",t.min)("max",t.max)("majorUnit",t.majorUnit?t.majorUnit:100)("color",t.color?t.color:"#000000")}}function vP(o,e){if(1&o&&r.nrm(0,"kendo-chart-series-item",12),2&o){const t=e.$implicit;r.Y8G("type","column")("name",t.name)("data",t.data)("stack",!0)("color",t.color)("tooltip",r.lJ4(6,mP))}}function bP(o,e){if(1&o){const t=r.RV6();r.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3"),r.EFF(4,"N\xb0 ECR INDEX -- By Month"),r.k0s()(),r.j41(5,"kendo-chart",5),r.bIt("seriesClick",function(s){r.eBV(t);const n=r.XpG();return r.Njj(n.onBarClick(s))}),r.nrm(6,"kendo-chart-legend",6),r.j41(7,"kendo-chart-value-axis"),r.Z7z(8,xP,1,8,"kendo-chart-value-axis-item",7,r.Vm6),r.k0s(),r.j41(10,"kendo-chart-category-axis"),r.nrm(11,"kendo-chart-category-axis-item",8),r.k0s(),r.j41(12,"kendo-chart-series"),r.DNE(13,vP,1,7,"kendo-chart-series-item",9),r.nrm(14,"kendo-chart-series-item",10),r.k0s()(),r.j41(15,"kendo-pager",11),r.bIt("pageChange",function(s){r.eBV(t);const n=r.XpG();return r.Njj(n.onPageWithoutChange(s))}),r.k0s()()()}if(2&o){const t=r.XpG();r.R7$(8),r.Dyx(t.valueAxes),r.R7$(3),r.Y8G("categories",t.categories)("axisCrossingValue",t.crossingValues),r.R7$(2),r.Y8G("ngForOf",t.stackedSerieswithoutAsBuilt),r.R7$(),r.Y8G("data",t.agingP95ForCurrentYearWithout)("markers",r.lJ4(10,gP))("axis",t.valueAxes[1].name||""),r.R7$(),r.Y8G("total",t.years.length)("pageSize",1)("skip",t.currentYearWithOutIndex)("info",!1)}}function _P(o,e){if(1&o){const t=r.RV6();r.j41(0,"div",16)(1,"div",17)(2,"h3"),r.EFF(3,"Tabular View"),r.k0s(),r.j41(4,"span",18),r.EFF(5),r.k0s(),r.EFF(6," | "),r.j41(7,"span",19)(8,"label",20),r.nrm(9,"input",21),r.j41(10,"span"),r.EFF(11,"Critical"),r.k0s()(),r.j41(12,"label",22),r.nrm(13,"input",21),r.j41(14,"span"),r.EFF(15,"Non-Critical"),r.k0s()()()(),r.j41(16,"div",23)(17,"button",24),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.toggleCollapse())}),r.j41(18,"span",25),r.EFF(19),r.k0s()(),r.j41(20,"button",26),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.isBarChartData=!s.isBarChartData)}),r.j41(21,"span",25),r.EFF(22,"close"),r.k0s()()()()}if(2&o){const t=r.XpG(2);r.R7$(5),r.SpI("Result: ",t.gridView.length,""),r.R7$(12),r.FS9("title",t.isGridExpanded?"Collapse Grid":"Expand Grid"),r.R7$(2),r.JRh(t.isGridExpanded?"fullscreen_exit":"fullscreen")}}function yP(o,e){if(1&o&&(r.j41(0,"div",13),r.DNE(1,_P,23,3,"div",14),r.nrm(2,"iep-grid",15),r.k0s()),2&o){const t=r.XpG();r.R7$(),r.Y8G("ngIf",!t.isBarChartData),r.R7$(),r.Y8G("data",t.gridView)("columns",t.mapView)("pageable",!0)("enablescrolling",!0)("selectable",!0)("acknowledgeable",!0)("source","ecn")}}let wP=(()=>{class o{constructor(){this.ecnSummaryChange=new r.bkB,this.dataService=(0,r.WQX)(Ri.G),this.selectedProjects=this.dataService.selectedProjects,this.gridView=[],this.mapView=[],this.viewAsOptions=["ECN","ECR"],this.functionsOptions=["Individual","Project","Office"],this.defective="No",this.selectedViewAs="ECN",this.selectedFunction="Individual",this.showWarning=!0,this.isExpanded=!0,this.isGridExpanded=!1,this.mySelection=[],this.dialogOpened=!1,this.searchValue="",this.selectedMonth="",this.selectedCount=0,this.showGrid=!1,this.gridData=[],this.collapsed=!1,this.openECN="400",this.closedECN="200",this.openDropdown=!1,this.closedDropdown=!1,this.selectedOpen=["Without As Build","With As Built"],this.selectedClosed=[],this.pagedECNData=[],this.groupedData={categories:[],series:[]},this.agingP95ForCurrentYearWithout=[],this.isBarChartData=!1,this.pageSize=1,this.skip=0,this.crossingValues=[0,12],this.currentYearWithIndex=0,this.currentYearWithOutIndex=0,this.years=[],this.monthsPerYear=12,this.currentYearMonths=[],this.stackedSeries=[],this.agingP95ForCurrentYear=[],this.valueAxes=[{title:{text:"Without As Built Count"},min:0,max:500,majorUnit:100},{name:"Aging p95",min:0,max:3500,majorUnit:1e3,title:{text:"Aging p95 counts"},axisCrossingValue:10}],this.categories=[],this.sort=[]}ngOnInit(){this.dataService.getECNChartData().subscribe(t=>{this.data=t.withAsBuilt,this.withoutAsBuilt=t.withoutAsBuilt,this.years=Array.from(new Set(this.data.yearMonth.map(i=>i.split("-")[0]))).reverse(),this.prepareChartWithData(),this.prepareChartWithOutData()}),this.dataService.getCurrentProjects().subscribe(t=>{this.selectedProjects.set(t)})}onWithPageChange(t){this.currentYearWithIndex=t.skip,this.prepareChartWithData()}onPageWithoutChange(t){this.currentYearWithOutIndex=t.skip,this.prepareChartWithOutData()}prepareChartWithData(){const t=this.years[this.currentYearWithIndex],i=this.data.yearMonth;this.categories=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(l=>`${t}-${l}`);const n=i.map((l,c)=>l.startsWith(t)?c:-1).filter(l=>-1!==l);this.currentYearMonths=n.map(l=>i[l].split("-")[1]).reverse();const a=["Less20","Less40","Grt40"];this.stackedSeries=a.map(l=>({name:l,color:"Less20"===l?"#4A9E24":"Less40"===l?"#F2E349":"#F42E17",data:n.map(c=>Number(this.data[l][c])||0).reverse()})),this.agingP95ForCurrentYear=n.map(l=>null!==this.data.AgingP95[l]?Number(this.data.AgingP95[l]):null).reverse(),this.stackedSerieswithoutAsBuilt=a.map(l=>({name:l,color:"Less20"===l?"#4A9E24":"Less40"===l?"#F2E349":"#F42E17",data:n.map(c=>Number(this.withoutAsBuilt[l][c])||0).reverse()})),this.agingP95ForCurrentYearWithout=n.map(l=>null!==this.withoutAsBuilt.AgingP95[l]?Number(this.withoutAsBuilt.AgingP95[l]):null).reverse(),this.isBarChartData=!0}prepareChartWithOutData(){const t=this.years[this.currentYearWithOutIndex],i=this.withoutAsBuilt.yearMonth;this.categories=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(l=>`${t}-${l}`);const n=i.map((l,c)=>l.startsWith(t)?c:-1).filter(l=>-1!==l);this.currentYearMonths=n.map(l=>i[l].split("-")[1]).reverse(),this.stackedSerieswithoutAsBuilt=["Less20","Less40","Grt40"].map(l=>({name:l,color:"Less20"===l?"#4A9E24":"Less40"===l?"#F2E349":"#F42E17",data:n.map(c=>Number(this.withoutAsBuilt[l][c])||0).reverse()})),this.agingP95ForCurrentYearWithout=n.map(l=>null!==this.withoutAsBuilt.AgingP95[l]?Number(this.withoutAsBuilt.AgingP95[l]):null).reverse(),this.isBarChartData=!0}onBarClick(t){this.isBarChartData=!1;const i=t.category,s=["January","February","March","April","May","June","July","August","September","October","November","December"];let n=null;"string"==typeof i?(n=s.indexOf(i)+1,this.selectedMonth=i):"number"==typeof i&&(n=s.indexOf(this.selectedMonth)+1),this.dataService.getECNData().subscribe(l=>{this.gridView=[];const c=l.data.activities||[];c.length>0&&(this.gridView=c.map(h=>Object.fromEntries(Object.entries(h).map(([d,p])=>[d.replace(/\s+/g,""),p]))),this.data&&(this.mapView=Object.keys(c[0]).map(h=>({field:h.replace(/\s+/g,""),title:h.replace("_"," ").toUpperCase()}))))}),this.showGrid=!0}closeGrid(){this.showGrid=!1}clearFilter(){}close(t){this.dialogOpened=!1}open(t){this.dialogOpened=!0}action(t){console.log(`Dialog result: ${t}`),this.dialogOpened=!1}onFilter(t){const i=t.toLowerCase();i&&(this.gridView=this.gridView.filter(s=>Object.values(s).some(n=>n&&n.toString().toLowerCase().includes(i))))}onSortChange(t){this.sort=t,this.gridView=(0,co.My)(this.gridView,this.sort)}showTooltip(t){const i=t.target;"TD"!==i.nodeName&&"k-column-title"!==i.className||"kendo-checkbox"===i.nodeName?this.tooltipDir.hide():this.tooltipDir.toggle(i)}clearFilters(){this.searchValue="",this.onFilter("")}showGridOrTable(){this.isGridExpanded=!this.isGridExpanded,this.showGrid="Tabular View"!=this.selectedViewAs}toggleCollapse(){this.collapsed=!this.collapsed,window.dispatchEvent(new CustomEvent("filterProjectsCollapse",{detail:{collapsed:this.collapsed}}))}showopen(){this.openDropdown=!this.openDropdown,this.openDropdown&&(this.closedDropdown=!1)}showclosed(){this.closedDropdown=!this.closedDropdown,this.closedDropdown&&(this.openDropdown=!1)}onSummaryChange(t){this.ecnSummaryChange.emit(t)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=r.VBU({type:o,selectors:[["iep-nx-ecr"]],viewQuery:function(i,s){if(1&i&&r.GBs(uP,5),2&i){let n;r.mGM(n=r.lsd())&&(s.tooltipDir=n.first)}},outputs:{ecnSummaryChange:"ecnSummaryChange"},standalone:!0,features:[r.aNF],decls:2,vars:2,consts:[["class","chart-view",4,"ngIf"],["class","ecn-grid-wrapper",4,"ngIf"],[1,"chart-view"],[1,"without-as-built"],[1,"iep-chart-header"],[3,"seriesClick"],["position","top"],[3,"name","title","min","max","majorUnit","color"],[3,"categories","axisCrossingValue"],[3,"type","name","data","stack","color","tooltip",4,"ngFor","ngForOf"],["type","line","name","Aging P95",3,"data","markers","axis"],[1,"ncr-pager",3,"pageChange","total","pageSize","skip","info"],[3,"type","name","data","stack","color","tooltip"],[1,"ecn-grid-wrapper"],["class","iep-grid-header",4,"ngIf"],[1,"iep-grid-scrollable",3,"data","columns","pageable","enablescrolling","selectable","acknowledgeable","source"],[1,"iep-grid-header"],[1,"header-left"],[1,"result-count"],[1,"checkboxed"],[1,"critical-checkbox"],["type","checkbox"],[1,"noncritical-checkbox"],[1,"header-right"],[1,"icon-btn",3,"click","title"],[1,"material-symbols-outlined"],["title","Close",1,"icon-btn",3,"click"]],template:function(i,s){1&i&&r.DNE(0,bP,16,11,"div",0)(1,yP,3,8,"div",1),2&i&&(r.Y8G("ngIf",s.isBarChartData),r.R7$(),r.Y8G("ngIf",s.showGrid))},dependencies:[X.MD,X.Sq,X.bT,Ii,se,Ce,ne,Re,ie,Wt,Le,ke,Ve.io,Ve.Bz,Js.d,Vt.YN],styles:['@charset "UTF-8";.testgrid[_ngcontent-%COMP%]{width:1200px}[_nghost-%COMP%]     .testgrid{overflow-x:auto!important}[_nghost-%COMP%]     .k-grid{overflow-x:auto!important}[_nghost-%COMP%]     body, [_nghost-%COMP%]     html{overflow-x:hidden!important}  kendo-grid td{overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;max-width:20px}[_nghost-%COMP%]     .k-tabstrip-content{overflow-x:hidden!important}.selected-projects-section[_ngcontent-%COMP%]{margin-bottom:6px;font-size:13px}.selected-projects-section[_ngcontent-%COMP%]   .selected-label[_ngcontent-%COMP%]{font-weight:600;margin-right:6px}.selected-projects-section[_ngcontent-%COMP%]   .selected-list[_ngcontent-%COMP%]{color:#05322b;font-weight:500}.warning-message[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff3e0;border:1px solid #ff9800;color:#e65100;padding:4px 8px;border-radius:4px;margin-bottom:8px;position:relative}.warning-message[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{margin-right:8px}.warning-message[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{color:#000;flex:1}.warning-message[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#e65100;font-size:20px;cursor:pointer;margin-left:8px;line-height:1}.iep-grid-wrapper[_ngcontent-%COMP%]{margin-top:8px;background:#fff;border-radius:4px;box-shadow:0 2px 8px #0000000a;padding:8px;transition:width .3s,max-width .3s;width:100%;max-width:100%;height:100%;overflow:auto;display:flex;flex-direction:column}.iep-grid-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;flex-shrink:0;padding-bottom:4px;border-bottom:1px solid #ddd;background:#fafafa}.iep-grid-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:18px}.iep-grid-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:700;color:#05322b}.iep-grid-header[_ngcontent-%COMP%]   .result-count[_ngcontent-%COMP%]{font-size:18px;margin-left:0}.iep-grid-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;border-radius:4px;transition:background .2s;font-size:16px}.iep-grid-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.iep-grid-header[_ngcontent-%COMP%]   kendo-svgicon[_ngcontent-%COMP%]{vertical-align:middle}.iep-chart-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:8px;padding:4px;border:1px solid #ddd}.filter-expansion-panel[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:3px;margin-bottom:8px;background:#fafafa;transition:box-shadow .2s;box-shadow:0 1px 2px #00000008;flex-shrink:0}.filter-expansion-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px 8px}.filter-title[_ngcontent-%COMP%]{margin:0;font-size:.95rem;font-weight:500}.clear-filter-btn[_ngcontent-%COMP%]{background:none;border:none;color:#209474;font-size:.85rem;cursor:pointer;padding:2px 8px;border-radius:4px;transition:background .2s}.filter-expansion-content[_ngcontent-%COMP%]{padding:0 8px 6px}.filter-expansion-panel.expanded[_ngcontent-%COMP%]{box-shadow:0 2px 8px #00000014}.filter-header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.expansion-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:.85rem;cursor:pointer;padding:2px 8px;border-radius:4px;transition:background .2s;display:flex;align-items:center}.expansion-toggle-btn[_ngcontent-%COMP%]:hover{background:#e3f2fd}.ispo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;transition:all .3s cubic-bezier(.4,0,.2,1)}.ispo-container.ispo-expanded[_ngcontent-%COMP%]   .iep-grid-wrapper[_ngcontent-%COMP%]{width:calc(100vw - 80px);max-width:100vw;margin-left:0;margin-right:0;transition:width .3s cubic-bezier(.4,0,.2,1)}.iep-grid-wrapper[_ngcontent-%COMP%]{width:100%;transition:width .3s cubic-bezier(.4,0,.2,1)}@media (max-width: 900px){.ispo-container.ispo-expanded[_ngcontent-%COMP%]   .iep-grid-wrapper[_ngcontent-%COMP%]{width:100vw;margin:0}}iep-grid[_ngcontent-%COMP%]{flex:1 1 0%;min-width:0;min-height:0;width:100%;height:100%;overflow:auto}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:1000;width:100vw!important;max-width:100vw!important;height:100vh!important;background:#fff;border-radius:0;box-shadow:0 0 0 9999px #0003;padding:12px 0 0}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]   .iep-grid-header[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;z-index:10;padding-bottom:8px}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]   iep-grid[_ngcontent-%COMP%]{flex:1 1 auto;height:100%!important;min-height:0;width:100%!important;overflow:auto!important}.iep-grid-wrapper[_ngcontent-%COMP%]{transition:width .3s;width:100%}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]{width:100%!important}.icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px 8px;font-size:18px;vertical-align:middle}.filter-dropdown[_ngcontent-%COMP%]:after{content:"\\25bc";font-size:10px;display:inline-flex;flex-flow:row nowrap;align-items:center;justify-content:center;vertical-align:middle;position:relative;padding-right:3px}.filter-dropdown[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.ecn-bar-chart-title[_ngcontent-%COMP%]{text-align:center;color:#1976d2;font-size:1.5rem;margin-bottom:1.5rem}[_nghost-%COMP%]     .k-chart .k-series .k-column{fill:#1976d2!important}.ecn-grid-wrapper[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014;position:relative;overflow-x:auto;overflow-y:hidden}.close-btn[_ngcontent-%COMP%]{position:absolute;right:1.5rem;top:1.5rem;background:#1976d2;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;font-size:1rem;z-index:2}.close-btn[_ngcontent-%COMP%]:hover{background:#125ea2}.dropdown-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:10px}.result-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.result-btn[_ngcontent-%COMP%]{border-radius:20px;background:#888;color:#fff;border:none;padding:8px 18px;margin-right:8px;font-weight:200;font-size:12px;transition:background .2s}.result-btn[_ngcontent-%COMP%]:last-child{margin-right:0}.result-btn[_ngcontent-%COMP%]:active, .result-btn[_ngcontent-%COMP%]:focus{background:#666}.result-btn.primary[_ngcontent-%COMP%]{background:var(--primary, #209474);color:#fff}.card-scroll-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:18px}.card-scroll-view[_ngcontent-%COMP%]{display:flex;overflow-x:auto;gap:18px;flex:1 1 auto;min-width:0;padding:8px 0}.card-tile[_ngcontent-%COMP%]{min-width:220px;max-width:240px;height:40px;padding:6px 5px;border:1px solid lightgrey;border-radius:8px;box-shadow:0 1px 4px #0000000f;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;font-size:15px}.card-tile[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #1976d21f}.card-title[_ngcontent-%COMP%]{font-size:15px;font-weight:600;margin-bottom:4px}.card-desc[_ngcontent-%COMP%]{font-size:12px;color:#666}.scroll-arrow[_ngcontent-%COMP%]{border:none;color:#209474;border-radius:10%;width:26px;height:50px;display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;margin:0 8px;transition:background .2s}.scroll-arrow[_ngcontent-%COMP%]:disabled{background:#f5f5f5;color:#aaa;cursor:not-allowed}.scroll-arrow[_ngcontent-%COMP%]:hover:not(:disabled){background:#bbdefb}.close-icon[_ngcontent-%COMP%]{font-size:12px!important}.material-symbols-outlined.notification-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#e65100;font-size:22px}.warning-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e65100}.ecnbutton[_ngcontent-%COMP%]{width:160px!important;background-color:#49deb4;border-color:#209474}']})}}return o})();var CP=T(1704);const kP=["tooltipDir"],AP=()=>["Defective","Yes","No"],mv=()=>["Without As Build","With As Built"],xv=()=>({visible:!0}),vv=o=>({text:o}),bv=()=>({visible:!0,format:"{0}"});function SP(o,e){if(1&o){const t=r.RV6();r.j41(0,"kendo-dropdownlist",17),r.mxI("ngModelChange",function(s){r.eBV(t);const n=r.XpG();return r.DH7(n.defective,s)||(n.defective=s),r.Njj(s)}),r.bIt("selectionChange",function(s){r.eBV(t);const n=r.XpG();return r.Njj(n.onSummaryChange(s))}),r.k0s()}if(2&o){const t=r.XpG();r.Y8G("data",r.lJ4(2,AP)),r.R50("ngModel",t.defective)}}function TP(o,e){if(1&o){const t=r.RV6();r.j41(0,"button",18),r.bIt("click",function(){r.eBV(t);const s=r.XpG();return r.Njj(s.showopen())}),r.j41(1,"span",19),r.EFF(2,"Open"),r.k0s(),r.EFF(3," \xa0\xa0 \xa0\xa0 \xa0\xa0 "),r.j41(4,"span",20),r.EFF(5),r.k0s()()}if(2&o){const t=r.XpG();r.R7$(5),r.JRh(t.openECN)}}function MP(o,e){if(1&o){const t=r.RV6();r.j41(0,"kendo-multiselect",21),r.mxI("ngModelChange",function(s){r.eBV(t);const n=r.XpG();return r.DH7(n.selectedOpen,s)||(n.selectedOpen=s),r.Njj(s)}),r.bIt("selectionChange",function(){r.eBV(t);const s=r.XpG();return r.Njj(s.showopen())}),r.k0s()}if(2&o){const t=r.XpG();r.Y8G("checkboxes",!0),r.R50("ngModel",t.selectedOpen),r.Y8G("data",r.lJ4(4,mv))("disabled",0!==t.selectedClosed.length)}}function PP(o,e){if(1&o){const t=r.RV6();r.j41(0,"button",18),r.bIt("click",function(){r.eBV(t);const s=r.XpG();return r.Njj(s.showclosed())}),r.j41(1,"span",19),r.EFF(2,"Closed"),r.k0s(),r.EFF(3," \xa0\xa0 \xa0\xa0 \xa0\xa0 "),r.j41(4,"span",20),r.EFF(5),r.k0s()()}if(2&o){const t=r.XpG();r.R7$(5),r.JRh(t.closedECN)}}function EP(o,e){if(1&o){const t=r.RV6();r.j41(0,"kendo-multiselect",21),r.mxI("ngModelChange",function(s){r.eBV(t);const n=r.XpG();return r.DH7(n.selectedClosed,s)||(n.selectedClosed=s),r.Njj(s)}),r.bIt("selectionChange",function(){r.eBV(t);const s=r.XpG();return r.Njj(s.showclosed())}),r.k0s()}if(2&o){const t=r.XpG();r.Y8G("checkboxes",!0),r.R50("ngModel",t.selectedClosed),r.Y8G("data",r.lJ4(4,mv))("disabled",0!==t.selectedOpen.length)}}function DP(o,e){if(1&o&&r.nrm(0,"kendo-chart-value-axis-item",30),2&o){const t=e.$implicit;r.Y8G("name",t.name||"")("title",t.title||r.eq3(6,vv,t.name||""))("min",t.min)("max",t.max)("majorUnit",t.majorUnit?t.majorUnit:100)("color",t.color?t.color:"#000000")}}function OP(o,e){if(1&o&&r.nrm(0,"kendo-chart-series-item",38),2&o){const t=e.$implicit;r.Y8G("type","column")("name",t.name)("data",t.data)("stack",!0)("color",t.color)("tooltip",r.lJ4(6,bv))}}function IP(o,e){if(1&o&&r.nrm(0,"kendo-chart-value-axis-item",30),2&o){const t=e.$implicit;r.Y8G("name",t.name||"")("title",t.title||r.eq3(6,vv,t.name||""))("min",t.min)("max",t.max)("majorUnit",t.majorUnit?t.majorUnit:100)("color",t.color?t.color:"#000000")}}function RP(o,e){if(1&o&&r.nrm(0,"kendo-chart-series-item",39),2&o){const t=e.$implicit;r.Y8G("type","column")("color",t.color)("name",t.name)("data",t.data)("stack",!0)("tooltip",r.lJ4(6,bv))}}function LP(o,e){if(1&o){const t=r.RV6();r.j41(0,"div",25)(1,"div",26)(2,"div",27)(3,"h3"),r.EFF(4,"ECN Metrics Without As Built"),r.k0s()(),r.j41(5,"kendo-chart",28),r.bIt("seriesClick",function(s){r.eBV(t);const n=r.XpG(2);return r.Njj(n.onBarClick(s))}),r.nrm(6,"kendo-chart-legend",29),r.j41(7,"kendo-chart-value-axis"),r.Z7z(8,DP,1,8,"kendo-chart-value-axis-item",30,r.Vm6),r.k0s(),r.j41(10,"kendo-chart-category-axis"),r.nrm(11,"kendo-chart-category-axis-item",31),r.k0s(),r.j41(12,"kendo-chart-series"),r.DNE(13,OP,1,7,"kendo-chart-series-item",32),r.nrm(14,"kendo-chart-series-item",33),r.k0s()(),r.j41(15,"kendo-pager",34),r.bIt("pageChange",function(s){r.eBV(t);const n=r.XpG(2);return r.Njj(n.onPageWithoutChange(s))}),r.k0s()(),r.j41(16,"div",35)(17,"div",27)(18,"h3"),r.EFF(19,"ECN Metrics With As Built"),r.k0s()(),r.j41(20,"kendo-chart"),r.nrm(21,"kendo-chart-legend",29),r.j41(22,"kendo-chart-value-axis"),r.Z7z(23,IP,1,8,"kendo-chart-value-axis-item",30,r.Vm6),r.k0s(),r.j41(25,"kendo-chart-category-axis"),r.nrm(26,"kendo-chart-category-axis-item",31),r.k0s(),r.j41(27,"kendo-chart-series"),r.DNE(28,RP,1,7,"kendo-chart-series-item",36),r.nrm(29,"kendo-chart-series-item",33),r.k0s()(),r.j41(30,"kendo-pager",37),r.bIt("pageChange",function(s){r.eBV(t);const n=r.XpG(2);return r.Njj(n.onWithPageChange(s))}),r.k0s()()()}if(2&o){const t=r.XpG(2);r.R7$(8),r.Dyx(t.valueAxes),r.R7$(3),r.Y8G("categories",t.categories)("axisCrossingValue",t.crossingValues),r.R7$(2),r.Y8G("ngForOf",t.stackedSerieswithoutAsBuilt),r.R7$(),r.Y8G("data",t.agingP95ForCurrentYearWithout)("markers",r.lJ4(19,xv))("axis",t.valueAxes[1].name||""),r.R7$(),r.Y8G("total",t.years.length)("pageSize",1)("skip",t.currentYearWithOutIndex)("info",!1),r.R7$(8),r.Dyx(t.valueAxes),r.R7$(3),r.Y8G("categories",t.categories)("axisCrossingValue",t.crossingValues),r.R7$(2),r.Y8G("ngForOf",t.stackedSeries),r.R7$(),r.Y8G("data",t.agingP95ForCurrentYear)("markers",r.lJ4(20,xv))("axis",t.valueAxes[1].name||""),r.R7$(),r.Y8G("total",t.years.length)("pageSize",1)("skip",t.currentYearWithIndex)}}function VP(o,e){if(1&o){const t=r.RV6();r.j41(0,"div",43)(1,"div",44)(2,"h3"),r.EFF(3,"Tabular View"),r.k0s(),r.j41(4,"span",45),r.EFF(5),r.k0s(),r.EFF(6," | "),r.j41(7,"span",46)(8,"label",47),r.nrm(9,"input",48),r.j41(10,"span"),r.EFF(11,"Critical"),r.k0s()(),r.j41(12,"label",49),r.nrm(13,"input",48),r.j41(14,"span"),r.EFF(15,"Non-Critical"),r.k0s()()()(),r.j41(16,"div",50)(17,"button",51),r.bIt("click",function(){r.eBV(t);const s=r.XpG(3);return r.Njj(s.toggleCollapse())}),r.j41(18,"span",52),r.EFF(19),r.k0s()(),r.j41(20,"button",53),r.bIt("click",function(){r.eBV(t);const s=r.XpG(3);return r.Njj(s.isBarChartData=!s.isBarChartData)}),r.j41(21,"span",52),r.EFF(22,"close"),r.k0s()()()()}if(2&o){const t=r.XpG(3);r.R7$(5),r.SpI("Result: ",t.gridView.length,""),r.R7$(12),r.FS9("title",t.isGridExpanded?"Collapse Grid":"Expand Grid"),r.R7$(2),r.JRh(t.isGridExpanded?"fullscreen_exit":"fullscreen")}}function BP(o,e){if(1&o&&(r.j41(0,"div",40),r.DNE(1,VP,23,3,"div",41),r.nrm(2,"iep-grid",42),r.k0s()),2&o){const t=r.XpG(2);r.R7$(),r.Y8G("ngIf",!t.isBarChartData),r.R7$(),r.Y8G("data",t.gridView)("columns",t.mapView)("pageable",!0)("enablescrolling",!0)("selectable",!0)("acknowledgeable",!0)("source","ecn")}}function FP(o,e){if(1&o&&(r.j41(0,"div",22),r.DNE(1,LP,31,21,"div",23)(2,BP,3,8,"div",24),r.k0s()),2&o){const t=r.XpG();r.R7$(),r.Y8G("ngIf",t.isBarChartData),r.R7$(),r.Y8G("ngIf",t.showGrid)}}let NP=(()=>{class o{constructor(){this.ecnSummaryChange=new r.bkB,this.dataService=(0,r.WQX)(Ri.G),this.gridView=[],this.mapView=[],this.viewAsOptions=["ECN","ECR"],this.functionsOptions=["Individual","Project","Office"],this.defective="Defective",this.selectedViewAs="ECN",this.selectedFunction="Individual",this.showWarning=!0,this.isExpanded=!0,this.isGridExpanded=!1,this.mySelection=[],this.dialogOpened=!1,this.searchValue="",this.selectedMonth="",this.selectedCount=0,this.showGrid=!1,this.gridData=[],this.collapsed=!1,this.openECN="400",this.closedECN="200",this.openDropdown=!1,this.closedDropdown=!1,this.selectedOpen=["Without As Build","With As Built"],this.selectedClosed=[],this.pagedECNData=[],this.groupedData={categories:[],series:[]},this.agingP95ForCurrentYearWithout=[],this.isBarChartData=!1,this.pageSize=1,this.skip=0,this.crossingValues=[0,12],this.currentYearWithIndex=0,this.currentYearWithOutIndex=0,this.years=[],this.monthsPerYear=12,this.currentYearMonths=[],this.stackedSeries=[],this.agingP95ForCurrentYear=[],this.valueAxes=[{title:{text:"Without As Built Count"},min:0,max:500,majorUnit:100},{name:"Aging p95",min:0,max:3500,majorUnit:1e3,title:{text:"Aging p95 counts"},axisCrossingValue:10}],this.categories=[],this.sort=[],(0,r.QZP)(()=>{const t=this.dataService.getTreeData();if(t&&t.length>0){const i=t.split(",");console.log("Selected Projects:",i),this.selectedProjects=i}})}ngOnInit(){this.dataService.getECNChartData().subscribe(t=>{this.data=t.withAsBuilt,this.withoutAsBuilt=t.withoutAsBuilt,this.years=Array.from(new Set(this.data.yearMonth.map(i=>i.split("-")[0]))).reverse(),this.prepareChartWithData(),this.prepareChartWithOutData()}),this.dataService.getCurrentProjects().subscribe(t=>{this.selectedProjects.set(t)})}onWithPageChange(t){this.currentYearWithIndex=t.skip,this.prepareChartWithData()}onPageWithoutChange(t){this.currentYearWithOutIndex=t.skip,this.prepareChartWithOutData()}prepareChartWithData(){const t=this.years[this.currentYearWithIndex],i=this.data.yearMonth;this.categories=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(l=>`${t}-${l}`);const n=i.map((l,c)=>l.startsWith(t)?c:-1).filter(l=>-1!==l);this.currentYearMonths=n.map(l=>i[l].split("-")[1]).reverse();const a=["Less20","Less40","Grt40"];this.stackedSeries=a.map(l=>({name:l,color:"Less20"===l?"#4A9E24":"Less40"===l?"#F2E349":"#F42E17",data:n.map(c=>Number(this.data[l][c])||0).reverse()})),this.agingP95ForCurrentYear=n.map(l=>null!==this.data.AgingP95[l]?Number(this.data.AgingP95[l]):null).reverse(),this.stackedSerieswithoutAsBuilt=a.map(l=>({name:l,color:"Less20"===l?"#4A9E24":"Less40"===l?"#F2E349":"#F42E17",data:n.map(c=>Number(this.withoutAsBuilt[l][c])||0).reverse()})),this.agingP95ForCurrentYearWithout=n.map(l=>null!==this.withoutAsBuilt.AgingP95[l]?Number(this.withoutAsBuilt.AgingP95[l]):null).reverse(),this.isBarChartData=!0}prepareChartWithOutData(){const t=this.years[this.currentYearWithOutIndex],i=this.withoutAsBuilt.yearMonth;this.categories=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(l=>`${t}-${l}`);const n=i.map((l,c)=>l.startsWith(t)?c:-1).filter(l=>-1!==l);this.currentYearMonths=n.map(l=>i[l].split("-")[1]).reverse(),this.stackedSerieswithoutAsBuilt=["Less20","Less40","Grt40"].map(l=>({name:l,color:"Less20"===l?"#4A9E24":"Less40"===l?"#F2E349":"#F42E17",data:n.map(c=>Number(this.withoutAsBuilt[l][c])||0).reverse()})),this.agingP95ForCurrentYearWithout=n.map(l=>null!==this.withoutAsBuilt.AgingP95[l]?Number(this.withoutAsBuilt.AgingP95[l]):null).reverse(),this.isBarChartData=!0}onBarClick(t){this.isBarChartData=!1;const i=t.category,s=["January","February","March","April","May","June","July","August","September","October","November","December"];let n=null;"string"==typeof i?(n=s.indexOf(i)+1,this.selectedMonth=i):"number"==typeof i&&(n=s.indexOf(this.selectedMonth)+1),this.dataService.getECNData().subscribe(l=>{this.gridView=[];const c=l.data.activities||[];c.length>0&&(this.gridView=c.map(h=>Object.fromEntries(Object.entries(h).map(([d,p])=>[d.replace(/\s+/g,""),p]))),this.data&&(this.mapView=Object.keys(c[0]).map(h=>({field:h.replace(/\s+/g,""),title:h.replace("_"," ").toUpperCase()}))))}),this.showGrid=!0}closeGrid(){this.showGrid=!1}clearFilter(){}close(t){this.dialogOpened=!1}open(t){this.dialogOpened=!0}action(t){this.dialogOpened=!1}onFilter(t){const i=t.toLowerCase();i&&(this.gridView=this.gridView.filter(s=>Object.values(s).some(n=>n&&n.toString().toLowerCase().includes(i))))}onSortChange(t){this.sort=t,this.gridView=(0,co.My)(this.gridView,this.sort)}showTooltip(t){const i=t.target;"TD"!==i.nodeName&&"k-column-title"!==i.className||"kendo-checkbox"===i.nodeName?this.tooltipDir.hide():this.tooltipDir.toggle(i)}clearFilters(){this.searchValue="",this.onFilter("")}showGridOrTable(){this.isGridExpanded=!this.isGridExpanded,this.showGrid="Tabular View"!=this.selectedViewAs}toggleCollapse(){this.collapsed=!this.collapsed,window.dispatchEvent(new CustomEvent("filterProjectsCollapse",{detail:{collapsed:this.collapsed}}))}showopen(){this.openDropdown=!this.openDropdown,this.openDropdown&&(this.closedDropdown=!1)}showclosed(){this.closedDropdown=!this.closedDropdown,this.closedDropdown&&(this.openDropdown=!1)}onSummaryChange(t){this.ecnSummaryChange.emit(t)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=r.VBU({type:o,selectors:[["copilot-iep-nx-ecn"]],viewQuery:function(i,s){if(1&i&&r.GBs(kP,5),2&i){let n;r.mGM(n=r.lsd())&&(s.tooltipDir=n.first)}},outputs:{ecnSummaryChange:"ecnSummaryChange"},standalone:!0,features:[r.aNF],decls:23,vars:15,consts:[[1,"ecn-bar-chart-wrapper"],[1,"filter-expansion-panel"],[1,"filter-expansion-header"],[1,"filter-title"],[1,"filter-header-actions"],["type","button",1,"clear-filter-btn","primary",3,"click"],["type","button",1,"expansion-toggle-btn","primary",3,"click","title"],[1,"material-symbols-outlined","primary"],[1,"filter-expansion-content"],[1,"dropdown-row"],["name","selectedview",1,"filter-dropdowns",3,"ngModelChange","selectionChange","data","ngModel"],["name","selectedfns",1,"filter-dropdowns",3,"ngModelChange","selectionChange","data","ngModel"],["class","filter-dropdowns","name","defective",3,"data","ngModel","ngModelChange","selectionChange",4,"ngIf"],["kendoButton","","class","ecnbutton",3,"click",4,"ngIf"],["class","filter-dropdown","name","openclosed",3,"checkboxes","ngModel","data","disabled","ngModelChange","selectionChange",4,"ngIf"],["class","ecn",4,"ngIf"],[1,"ecr"],["name","defective",1,"filter-dropdowns",3,"ngModelChange","selectionChange","data","ngModel"],["kendoButton","",1,"ecnbutton",3,"click"],[1,"starttext"],[1,"endtext"],["name","openclosed",1,"filter-dropdown",3,"ngModelChange","selectionChange","checkboxes","ngModel","data","disabled"],[1,"ecn"],["class","chart-view",4,"ngIf"],["class","ecn-grid-wrapper",4,"ngIf"],[1,"chart-view"],[1,"without-as-built"],[1,"iep-chart-header"],[3,"seriesClick"],["position","top"],[3,"name","title","min","max","majorUnit","color"],[3,"categories","axisCrossingValue"],[3,"type","name","data","stack","color","tooltip",4,"ngFor","ngForOf"],["type","line","name","Aging P95",3,"data","markers","axis"],[1,"ncr-pager",3,"pageChange","total","pageSize","skip","info"],[1,"with-as-built"],[3,"type","color","name","data","stack","tooltip",4,"ngFor","ngForOf"],[1,"ncr-pager",3,"pageChange","total","pageSize","skip"],[3,"type","name","data","stack","color","tooltip"],[3,"type","color","name","data","stack","tooltip"],[1,"ecn-grid-wrapper"],["class","iep-grid-header",4,"ngIf"],[1,"iep-grid-scrollable",3,"data","columns","pageable","enablescrolling","selectable","acknowledgeable","source"],[1,"iep-grid-header"],[1,"header-left"],[1,"result-count"],[1,"checkboxed"],[1,"critical-checkbox"],["type","checkbox"],[1,"noncritical-checkbox"],[1,"header-right"],[1,"icon-btn",3,"click","title"],[1,"material-symbols-outlined"],["title","Close",1,"icon-btn",3,"click"]],template:function(i,s){1&i&&(r.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),r.EFF(4,"Summary"),r.k0s(),r.j41(5,"div",4)(6,"button",5),r.bIt("click",function(){return s.clearFilter()}),r.EFF(7," Clear Filter "),r.k0s(),r.j41(8,"button",6),r.bIt("click",function(){return s.isExpanded=!s.isExpanded}),r.j41(9,"span",7),r.EFF(10),r.k0s()()()(),r.j41(11,"div",8)(12,"div",9)(13,"kendo-dropdownlist",10),r.mxI("ngModelChange",function(a){return r.DH7(s.selectedViewAs,a)||(s.selectedViewAs=a),a}),r.bIt("selectionChange",function(){return s.showGridOrTable()}),r.k0s(),r.j41(14,"kendo-dropdownlist",11),r.mxI("ngModelChange",function(a){return r.DH7(s.selectedFunction,a)||(s.selectedFunction=a),a}),r.bIt("selectionChange",function(a){return s.onSummaryChange(a)}),r.k0s(),r.DNE(15,SP,1,3,"kendo-dropdownlist",12)(16,TP,6,1,"button",13)(17,MP,1,5,"kendo-multiselect",14)(18,PP,6,1,"button",13)(19,EP,1,5,"kendo-multiselect",14),r.k0s()(),r.DNE(20,FP,3,2,"div",15),r.k0s()(),r.j41(21,"div",16),r.nrm(22,"iep-nx-ecr"),r.k0s()),2&i&&(r.R7$(),r.AVh("expanded",s.isExpanded),r.R7$(7),r.Y8G("title",s.isExpanded?"Collapse":"Expand"),r.BMQ("aria-expanded",s.isExpanded),r.R7$(2),r.JRh(s.isExpanded?"expand_less":"expand_more"),r.R7$(3),r.Y8G("data",s.viewAsOptions),r.R50("ngModel",s.selectedViewAs),r.R7$(),r.Y8G("data",s.functionsOptions),r.R50("ngModel",s.selectedFunction),r.R7$(),r.Y8G("ngIf","ECR"===s.selectedViewAs),r.R7$(),r.Y8G("ngIf","ECN"===s.selectedViewAs),r.R7$(),r.Y8G("ngIf","ECN"===s.selectedViewAs),r.R7$(),r.Y8G("ngIf","ECN"===s.selectedViewAs),r.R7$(),r.Y8G("ngIf","ECN"===s.selectedViewAs),r.R7$(),r.Y8G("ngIf","ECN"===s.selectedViewAs))},dependencies:[X.MD,X.Sq,X.bT,Ii,se,Ce,ne,Re,ie,Wt,Le,ke,Ve.io,Ve.Bz,Js.d,ho.V9,ho.b3,CP.Qp,Vt.YN,Vt.BC,Vt.vS,wP],styles:['@charset "UTF-8";.testgrid[_ngcontent-%COMP%]{width:1200px}[_nghost-%COMP%]     .testgrid{overflow-x:auto!important}[_nghost-%COMP%]     .k-grid{overflow-x:auto!important}[_nghost-%COMP%]     body, [_nghost-%COMP%]     html{overflow-x:hidden!important}  kendo-grid td{overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;max-width:20px}[_nghost-%COMP%]     .k-tabstrip-content{overflow-x:hidden!important}.selected-projects-section[_ngcontent-%COMP%]{margin-bottom:6px;font-size:13px}.selected-projects-section[_ngcontent-%COMP%]   .selected-label[_ngcontent-%COMP%]{font-weight:600;margin-right:6px}.selected-projects-section[_ngcontent-%COMP%]   .selected-list[_ngcontent-%COMP%]{color:#05322b;font-weight:500}.warning-message[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff3e0;border:1px solid #ff9800;color:#e65100;padding:4px 8px;border-radius:4px;margin-bottom:8px;position:relative}.warning-message[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{margin-right:8px}.warning-message[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{color:#000;flex:1}.warning-message[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#e65100;font-size:20px;cursor:pointer;margin-left:8px;line-height:1}.iep-grid-wrapper[_ngcontent-%COMP%]{margin-top:8px;background:#fff;border-radius:4px;box-shadow:0 2px 8px #0000000a;padding:8px;transition:width .3s,max-width .3s;width:100%;max-width:100%;height:100%;overflow:auto;display:flex;flex-direction:column}.iep-grid-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;flex-shrink:0;padding-bottom:4px;border-bottom:1px solid #ddd;background:#fafafa}.iep-grid-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:18px}.iep-grid-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:700;color:#05322b}.iep-grid-header[_ngcontent-%COMP%]   .result-count[_ngcontent-%COMP%]{font-size:18px;margin-left:0}.iep-grid-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;border-radius:4px;transition:background .2s;font-size:16px}.iep-grid-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.iep-grid-header[_ngcontent-%COMP%]   kendo-svgicon[_ngcontent-%COMP%]{vertical-align:middle}.iep-chart-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:8px;padding:4px;border:1px solid #ddd}.filter-expansion-panel[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:3px;margin-bottom:8px;background:#fafafa;transition:box-shadow .2s;box-shadow:0 1px 2px #00000008;flex-shrink:0}.filter-expansion-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px 8px}.filter-title[_ngcontent-%COMP%]{margin:0;font-size:.95rem;font-weight:500}.clear-filter-btn[_ngcontent-%COMP%]{background:none;border:none;color:#209474;font-size:.85rem;cursor:pointer;padding:2px 8px;border-radius:4px;transition:background .2s}.filter-expansion-content[_ngcontent-%COMP%]{padding:0 8px 6px}.filter-expansion-panel.expanded[_ngcontent-%COMP%]{box-shadow:0 2px 8px #00000014}.filter-header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.expansion-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:.85rem;cursor:pointer;padding:2px 8px;border-radius:4px;transition:background .2s;display:flex;align-items:center}.expansion-toggle-btn[_ngcontent-%COMP%]:hover{background:#e3f2fd}.ispo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;transition:all .3s cubic-bezier(.4,0,.2,1)}.ispo-container.ispo-expanded[_ngcontent-%COMP%]   .iep-grid-wrapper[_ngcontent-%COMP%]{width:calc(100vw - 80px);max-width:100vw;margin-left:0;margin-right:0;transition:width .3s cubic-bezier(.4,0,.2,1)}.iep-grid-wrapper[_ngcontent-%COMP%]{width:100%;transition:width .3s cubic-bezier(.4,0,.2,1)}@media (max-width: 900px){.ispo-container.ispo-expanded[_ngcontent-%COMP%]   .iep-grid-wrapper[_ngcontent-%COMP%]{width:100vw;margin:0}}iep-grid[_ngcontent-%COMP%]{flex:1 1 0%;min-width:0;min-height:0;width:100%;height:100%;overflow:auto}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:1000;width:100vw!important;max-width:100vw!important;height:100vh!important;background:#fff;border-radius:0;box-shadow:0 0 0 9999px #0003;padding:12px 0 0}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]   .iep-grid-header[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;z-index:10;padding-bottom:8px}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]   iep-grid[_ngcontent-%COMP%]{flex:1 1 auto;height:100%!important;min-height:0;width:100%!important;overflow:auto!important}.iep-grid-wrapper[_ngcontent-%COMP%]{transition:width .3s;width:100%}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]{width:100%!important}.icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px 8px;font-size:18px;vertical-align:middle}.filter-dropdowns-defective[_ngcontent-%COMP%]{width:25%}.filter-dropdown[_ngcontent-%COMP%]:after{content:"\\25bc";font-size:10px;display:inline-flex;flex-flow:row nowrap;align-items:center;justify-content:center;vertical-align:middle;position:relative;padding-right:3px}.filter-dropdown[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.ecn-bar-chart-title[_ngcontent-%COMP%]{text-align:center;color:#1976d2;font-size:1.5rem;margin-bottom:1.5rem}[_nghost-%COMP%]     .k-chart .k-series .k-column{fill:#1976d2!important}.ecn-grid-wrapper[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014;position:relative;overflow-x:auto;overflow-y:hidden}.close-btn[_ngcontent-%COMP%]{position:absolute;right:1.5rem;top:1.5rem;background:#1976d2;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;font-size:1rem;z-index:2}.close-btn[_ngcontent-%COMP%]:hover{background:#125ea2}.dropdown-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:10px}.result-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.result-btn[_ngcontent-%COMP%]{border-radius:20px;background:#888;color:#fff;border:none;padding:8px 18px;margin-right:8px;font-weight:200;font-size:12px;transition:background .2s}.result-btn[_ngcontent-%COMP%]:last-child{margin-right:0}.result-btn[_ngcontent-%COMP%]:active, .result-btn[_ngcontent-%COMP%]:focus{background:#666}.result-btn.primary[_ngcontent-%COMP%]{background:var(--primary, #209474);color:#fff}.card-scroll-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:18px}.card-scroll-view[_ngcontent-%COMP%]{display:flex;overflow-x:auto;gap:18px;flex:1 1 auto;min-width:0;padding:8px 0}.card-tile[_ngcontent-%COMP%]{min-width:220px;max-width:240px;height:40px;padding:6px 5px;border:1px solid lightgrey;border-radius:8px;box-shadow:0 1px 4px #0000000f;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;font-size:15px}.card-tile[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #1976d21f}.card-title[_ngcontent-%COMP%]{font-size:15px;font-weight:600;margin-bottom:4px}.card-desc[_ngcontent-%COMP%]{font-size:12px;color:#666}.scroll-arrow[_ngcontent-%COMP%]{border:none;color:#209474;border-radius:10%;width:26px;height:50px;display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;margin:0 8px;transition:background .2s}.scroll-arrow[_ngcontent-%COMP%]:disabled{background:#f5f5f5;color:#aaa;cursor:not-allowed}.scroll-arrow[_ngcontent-%COMP%]:hover:not(:disabled){background:#bbdefb}.close-icon[_ngcontent-%COMP%]{font-size:12px!important}.material-symbols-outlined.notification-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#e65100;font-size:22px}.warning-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e65100}.ecnbutton[_ngcontent-%COMP%]{width:160px!important;background-color:#49deb4;border-color:#209474}']})}}return o})();var zP=T(5176);const jP=o=>({text:o}),UP=()=>[];function GP(o,e){if(1&o&&r.nrm(0,"kendo-chart-value-axis-item",2),2&o){const t=e.$implicit;r.Y8G("name",t.name||"")("title",t.title||r.eq3(6,jP,t.name||""))("min",t.min)("max",t.max)("majorUnit",t.majorUnit?t.majorUnit:100)("color",t.color?t.color:"#000000")}}function HP(o,e){if(1&o&&r.nrm(0,"kendo-chart-series-item",4),2&o){const t=e.$implicit;r.Y8G("name",t.name||"")("data",t.data||r.lJ4(6,UP))("type",t.type||"column")("stack",t.stack||!1)("color",t.color||"#000000")("axis",t.axis||"")}}let XP=(()=>{class o{constructor(){this.series=[{type:"column",data:[20,40,45,30,50],stack:!1,name:"on battery",color:"#cc6e38"},{type:"line",data:[30,38,40,32,42],name:"mpg",color:"#ec5e0a",axis:"mpg"},{type:"bubble",data:[7.8,6.2,5.9,7.4,5.6],name:"l/100 km",color:"#4e4141",axis:"l100km"}],this.valueAxes=[{title:{text:"miles"},min:0,max:100},{name:"mpg",title:{text:"miles per gallon"},color:"#ec5e0a"},{name:"l100km",title:{text:"liters per 100km"},color:"#4e4141"}],this.categories=["Mon","Tue","Wed","Thu","Fri"],this.crossingValues=[0,0,10,10]}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=r.VBU({type:o,selectors:[["shared-ui-pareto-chart"]],standalone:!0,features:[r.aNF],decls:11,vars:2,consts:[["text","Hybrid car mileage report"],["position","top"],[3,"name","title","min","max","majorUnit","color"],[3,"categories","axisCrossingValue"],[3,"name","data","type","stack","color","axis"]],template:function(i,s){1&i&&(r.j41(0,"kendo-chart"),r.nrm(1,"kendo-chart-title",0)(2,"kendo-chart-legend",1),r.j41(3,"kendo-chart-value-axis"),r.Z7z(4,GP,1,8,"kendo-chart-value-axis-item",2,r.Vm6),r.k0s(),r.j41(6,"kendo-chart-category-axis"),r.nrm(7,"kendo-chart-category-axis-item",3),r.k0s(),r.j41(8,"kendo-chart-series"),r.Z7z(9,HP,1,7,"kendo-chart-series-item",4,r.Vm6),r.k0s()()),2&i&&(r.R7$(4),r.Dyx(s.valueAxes),r.R7$(3),r.Y8G("categories",s.categories)("axisCrossingValue",s.crossingValues),r.R7$(2),r.Dyx(s.series))},dependencies:[X.MD,Ii,se,Ce,ne,Re,ie,Wt,ia,Le,ke]})}}return o})();function YP(o,e){if(1&o&&r.nrm(0,"iep-grid",5),2&o){const t=r.XpG();r.Y8G("data",t.gridView)("columns",t.mapView)("pageable",!0)("enablescrolling",!1)("selectable",!0)}}function WP(o,e){if(1&o&&r.nrm(0,"iep-grid",5),2&o){const t=r.XpG();r.Y8G("data",t.gridView)("columns",t.mapView)("pageable",!0)("enablescrolling",!1)("selectable",!0)}}let $P=(()=>{class o{constructor(){this.dataService=(0,r.WQX)(Ri.G),this.data=[],this.gridView=[],this.mapView=[]}ngOnInit(){this.dataService.getECRRiskData().subscribe(t=>{this.data=t.data.activities||[],this.gridView=[];const i=t.data.activities||[];i.length>0&&(this.gridView=i.map(s=>Object.fromEntries(Object.entries(s).map(([n,a])=>[n.replace(/\s+/g,""),a]))),this.data&&(this.mapView=Object.keys(i[0]).map(s=>({field:s.replace(/\s+/g,""),title:s.replace("_"," ").toUpperCase()}))))})}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=r.VBU({type:o,selectors:[["ecr-risk"]],standalone:!0,features:[r.aNF],decls:6,vars:1,consts:[[1,"dashboard-tabs"],[1,"iep-operation-panel"],["title","Soft Alert",3,"selected"],["kendoTabContent",""],["title","Hard Alert"],[3,"data","columns","pageable","enablescrolling","selectable"]],template:function(i,s){1&i&&(r.j41(0,"div",0)(1,"kendo-tabstrip",1)(2,"kendo-tabstrip-tab",2),r.DNE(3,YP,1,5,"ng-template",3),r.k0s(),r.j41(4,"kendo-tabstrip-tab",4),r.DNE(5,WP,1,5,"ng-template",3),r.k0s()()()),2&i&&(r.R7$(2),r.Y8G("selected",!0))},dependencies:[X.MD,li.QW,li.z$,li.sl,li.Ai,Js.d]})}}return o})();const QP=["tooltipDir"],ZP=()=>({text:"Month"}),KP=()=>({text:"CCM count"});function JP(o,e){if(1&o){const t=r.RV6();r.j41(0,"div",14)(1,"h2",15),r.EFF(2),r.k0s(),r.j41(3,"kendo-chart",16),r.bIt("seriesClick",function(s){r.eBV(t);const n=r.XpG();return r.Njj(n.onBarClick(s))}),r.nrm(4,"kendo-chart-legend",17),r.j41(5,"kendo-chart-category-axis"),r.nrm(6,"kendo-chart-category-axis-item",18),r.k0s(),r.j41(7,"kendo-chart-value-axis"),r.nrm(8,"kendo-chart-value-axis-item",19),r.k0s(),r.j41(9,"kendo-chart-series"),r.nrm(10,"kendo-chart-series-item",20),r.k0s()(),r.j41(11,"div",21)(12,"kendo-pager",22),r.bIt("pageChange",function(s){r.eBV(t);const n=r.XpG();return r.Njj(n.pageChange(s))}),r.k0s()()()}if(2&o){const t=r.XpG();r.R7$(2),r.SpI("CCM Count by Month - ",t.currentYear,""),r.R7$(),r.Y8G("transitions",!1)("zoomable",!0),r.R7$(3),r.Y8G("categories",t.months)("title",r.lJ4(14,ZP)),r.R7$(2),r.Y8G("title",r.lJ4(15,KP)),r.R7$(2),r.Y8G("data",t.currentYearDataCounts)("color","#1976d2")("gap",5.5)("spacing",.08),r.R7$(2),r.Y8G("total",t.pagedNcrData.length)("pageSize",t.pageSize)("skip",t.skip)("info",!1)}}function qP(o,e){if(1&o){const t=r.RV6();r.j41(0,"div",26)(1,"div",27)(2,"h3"),r.EFF(3),r.k0s()(),r.j41(4,"div",28)(5,"button",29),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.toggleCollapse())}),r.j41(6,"span",30),r.EFF(7),r.k0s()(),r.j41(8,"button",31),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.open("dialog"))}),r.j41(9,"span",30),r.EFF(10,"settings"),r.k0s()(),r.j41(11,"button",32),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.closeGrid())}),r.j41(12,"span",30),r.EFF(13,"close"),r.k0s()()()()}if(2&o){const t=r.XpG(2);r.R7$(3),r.Lme("Tabular View of ",t.selectedMonth," ",t.currentYear," "),r.R7$(2),r.FS9("title",t.isGridExpanded?"Collapse Grid":"Expand Grid"),r.R7$(2),r.JRh(t.isGridExpanded?"fullscreen_exit":"fullscreen")}}function tE(o,e){if(1&o){const t=r.RV6();r.j41(0,"div",26)(1,"div",27)(2,"h3"),r.EFF(3,"Activities"),r.k0s(),r.j41(4,"span",33),r.EFF(5),r.k0s()(),r.j41(6,"div",28)(7,"button",29),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.toggleCollapse())}),r.j41(8,"span",30),r.EFF(9),r.k0s()(),r.j41(10,"button",31),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.open("dialog"))}),r.j41(11,"span",30),r.EFF(12,"settings"),r.k0s()()()()}if(2&o){const t=r.XpG(2);r.R7$(5),r.SpI("Result: ",t.gridView.length,""),r.R7$(2),r.FS9("title",t.isGridExpanded?"Collapse Grid":"Expand Grid"),r.R7$(2),r.JRh(t.isGridExpanded?"fullscreen_exit":"fullscreen")}}function eE(o,e){if(1&o&&(r.j41(0,"div",23),r.DNE(1,qP,14,4,"div",24)(2,tE,13,3,"div",24),r.nrm(3,"iep-grid",25),r.k0s()),2&o){const t=r.XpG();r.R7$(),r.Y8G("ngIf",t.isBarChartData),r.R7$(),r.Y8G("ngIf",!t.isBarChartData),r.R7$(),r.Y8G("data",t.gridView)("columns",t.mapView)("pageable",!0)("enablescrolling",!1)}}let iE=(()=>{class o{constructor(){this.dataService=(0,r.WQX)(Ri.G),this.gridView=[],this.mapView=[],this.viewAsOptions=["Tabular View","Chart View"],this.functionsOptions=["Individual","Project","Office"],this.selectedViewAs="Chart View",this.selectedFunction="Individual",this.showWarning=!0,this.isExpanded=!1,this.isGridExpanded=!1,this.mySelection=[],this.dialogOpened=!1,this.searchValue="",this.selectedMonth="",this.selectedCount=0,this.showGrid=!1,this.gridData=[],this.collapsed=!1,this.isBarChartData=!1,this.pageSize=1,this.skip=0,this.ncrData=[],this.loading=!0,this.pagedNcrData=[],this.data=[],this.sort=[],(0,r.QZP)(()=>{const t=this.dataService.getTreeData();if(t&&t.length>0){const i=t.split(",");this.selectedProjects=i,this.gridView=this.data.filter(s=>{const n=s.id||s.ProjectID||s.projectId||s.ProjectId;return i.includes(n?.toString())})}else this.gridView=this.data})}ngOnInit(){this.dataService.getNCRData().subscribe(t=>{this.data=t.tabularData||[],this.ncrData=t.chartData.monthlyNCR||[],this.pagedNcrData=this.groupNcrDataByYear(this.ncrData),this.loading=!1,this.gridView=this.data.map(i=>Object.fromEntries(Object.entries(i).map(([s,n])=>[s.replace(/\s+/g,""),n]))),this.data&&(this.mapView=Object.keys(this.data[0]).map(i=>({field:i.replace(/\s+/g,""),title:i.replace("_"," ").toUpperCase()})))})}groupNcrDataByYear(t){const i={};return t.forEach(s=>{i[s.year]||(i[s.year]=[]),i[s.year].push({month:s.month,count:s.count})}),Object.keys(i).sort((s,n)=>+n-+s).map(s=>({year:+s,data:i[+s]}))}get currentYearData(){return this.pagedNcrData[this.skip]?.data||[]}get currentYear(){return this.pagedNcrData[this.skip]?.year||""}get months(){return this.currentYearData.map(t=>t.month)}get currentYearDataCounts(){return this.currentYearData.map(t=>t.count)}pageChange(t){this.skip=t.skip}onBarClick(t){this.isBarChartData=!0;const i=t.category,s=["January","February","March","April","May","June","July","August","September","October","November","December"];let n=null;"string"==typeof i?(n=s.indexOf(i)+1,this.selectedMonth=i):"number"==typeof i&&(this.selectedMonth=this.months[i],n=s.indexOf(this.selectedMonth)+1),this.selectedCount=this.currentYearDataCounts[i],this.dataService.getNCRDataBymonth({month:n,year:this.currentYear}).subscribe(l=>{this.gridView=[],this.data=l,this.data.length>0&&(this.gridView=this.data.map(c=>Object.fromEntries(Object.entries(c).map(([h,d])=>[h.replace(/\s+/g,""),d]))),this.data&&(this.mapView=Object.keys(this.data[0]).map(c=>({field:c.replace(/\s+/g,""),title:c.replace("_"," ").toUpperCase()}))))}),this.showGrid=!0}closeGrid(){this.showGrid=!1}clearFilter(){}close(t){this.dialogOpened=!1}open(t){this.dialogOpened=!0}action(t){this.dialogOpened=!1}onFilter(t){const i=t.toLowerCase();this.gridView=this.data.map(s=>Object.fromEntries(Object.entries(s).map(([n,a])=>[n.replace(/\s+/g,""),a]))),i&&(this.gridView=this.gridView.filter(s=>Object.values(s).some(n=>n&&n.toString().toLowerCase().includes(i))))}onSortChange(t){this.sort=t,this.gridView=(0,co.My)(this.gridView,this.sort)}showTooltip(t){const i=t.target;"TD"!==i.nodeName&&"k-column-title"!==i.className||"kendo-checkbox"===i.nodeName?this.tooltipDir.hide():this.tooltipDir.toggle(i)}clearFilters(){this.searchValue="",this.onFilter("")}showGridOrTable(){this.isGridExpanded=!this.isGridExpanded,this.showGrid="Tabular View"!=this.selectedViewAs}toggleCollapse(){this.collapsed=!this.collapsed}openKaizenPage(){window.open("https://kaizen.example.com","_blank")}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=r.VBU({type:o,selectors:[["iep-nx-ccm"]],viewQuery:function(i,s){if(1&i&&r.GBs(QP,5),2&i){let n;r.mGM(n=r.lsd())&&(s.tooltipDir=n.first)}},standalone:!0,features:[r.aNF],decls:17,vars:11,consts:[[1,"ncr-bar-chart-wrapper"],[1,"filter-expansion-panel"],[1,"filter-expansion-header"],[1,"filter-title"],[1,"filter-header-actions"],["type","button",1,"clear-filter-btn","primary",3,"click"],["type","button",1,"expansion-toggle-btn","primary",3,"click","title"],[1,"material-symbols-outlined","primary"],[1,"filter-expansion-content"],[1,"dropdown-row"],["name","selectedview",1,"filter-dropdown",3,"ngModelChange","selectionChange","data","ngModel"],["name","selectedfns",1,"filter-dropdown",3,"ngModelChange","data","ngModel"],["class","chart-view",4,"ngIf"],["class","ncr-grid-wrapper",4,"ngIf"],[1,"chart-view"],[1,"ncr-bar-chart-title"],[3,"seriesClick","transitions","zoomable"],["position","top"],[3,"categories","title"],[3,"title"],["type","column","name","CCM Count",3,"data","color","gap","spacing"],[1,"pager-right"],[1,"ncr-pager",3,"pageChange","total","pageSize","skip","info"],[1,"ncr-grid-wrapper"],["class","iep-grid-header",4,"ngIf"],[3,"data","columns","pageable","enablescrolling"],[1,"iep-grid-header"],[1,"header-left"],[1,"header-right"],[1,"icon-btn",3,"click","title"],[1,"material-symbols-outlined"],["title","Settings",1,"icon-btn",3,"click"],[1,"icon-btn",3,"click"],[1,"result-count"]],template:function(i,s){1&i&&(r.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),r.EFF(4,"Filter Activities"),r.k0s(),r.j41(5,"div",4)(6,"button",5),r.bIt("click",function(){return s.clearFilter()}),r.EFF(7," Clear Filter "),r.k0s(),r.j41(8,"button",6),r.bIt("click",function(){return s.isExpanded=!s.isExpanded}),r.j41(9,"span",7),r.EFF(10),r.k0s()()()(),r.j41(11,"div",8)(12,"div",9)(13,"kendo-dropdownlist",10),r.mxI("ngModelChange",function(a){return r.DH7(s.selectedViewAs,a)||(s.selectedViewAs=a),a}),r.bIt("selectionChange",function(){return s.showGridOrTable()}),r.k0s(),r.j41(14,"kendo-dropdownlist",11),r.mxI("ngModelChange",function(a){return r.DH7(s.selectedFunction,a)||(s.selectedFunction=a),a}),r.k0s()()()(),r.DNE(15,JP,13,16,"div",12)(16,eE,4,6,"div",13),r.k0s()),2&i&&(r.R7$(),r.AVh("expanded",s.isExpanded),r.R7$(7),r.Y8G("title",s.isExpanded?"Collapse":"Expand"),r.BMQ("aria-expanded",s.isExpanded),r.R7$(2),r.JRh(s.isExpanded?"expand_less":"expand_more"),r.R7$(3),r.Y8G("data",s.viewAsOptions),r.R50("ngModel",s.selectedViewAs),r.R7$(),r.Y8G("data",s.functionsOptions),r.R50("ngModel",s.selectedFunction),r.R7$(),r.Y8G("ngIf",!s.showGrid),r.R7$(),r.Y8G("ngIf",s.showGrid))},dependencies:[X.MD,X.bT,Ii,se,Ce,ne,Re,ie,Wt,Le,ke,Ve.io,Ve.Bz,Js.d,ho.V9,Vt.YN,Vt.BC,Vt.vS],styles:[".testgrid[_ngcontent-%COMP%]{width:1200px}[_nghost-%COMP%]     .testgrid{overflow-x:auto!important}[_nghost-%COMP%]     .k-grid{overflow-x:auto!important}[_nghost-%COMP%]     body, [_nghost-%COMP%]     html{overflow-x:hidden!important}  kendo-grid td{overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;max-width:20px}[_nghost-%COMP%]     .k-tabstrip-content{overflow-x:hidden!important}.selected-projects-section[_ngcontent-%COMP%]{margin-bottom:6px;font-size:13px}.selected-projects-section[_ngcontent-%COMP%]   .selected-label[_ngcontent-%COMP%]{font-weight:600;margin-right:6px}.selected-projects-section[_ngcontent-%COMP%]   .selected-list[_ngcontent-%COMP%]{color:#05322b;font-weight:500}.warning-message[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff3e0;border:1px solid #ff9800;color:#e65100;padding:4px 8px;border-radius:4px;margin-bottom:8px;position:relative}.warning-message[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{margin-right:8px}.warning-message[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{color:#000;flex:1}.warning-message[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#e65100;font-size:20px;cursor:pointer;margin-left:8px;line-height:1}.iep-grid-wrapper[_ngcontent-%COMP%]{margin-top:8px;background:#fff;border-radius:4px;box-shadow:0 2px 8px #0000000a;padding:8px;transition:width .3s,max-width .3s;width:100%;max-width:100%;height:100%;overflow:hidden;display:flex;flex-direction:column}.iep-grid-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;flex-shrink:0;padding-bottom:4px;border-bottom:1px solid #ddd;background:#fafafa}.iep-grid-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:18px}.iep-grid-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:700;color:#05322b}.iep-grid-header[_ngcontent-%COMP%]   .result-count[_ngcontent-%COMP%]{font-size:18px;margin-left:0}.iep-grid-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;border-radius:4px;transition:background .2s;font-size:16px}.iep-grid-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.iep-grid-header[_ngcontent-%COMP%]   kendo-svgicon[_ngcontent-%COMP%]{vertical-align:middle}.filter-expansion-panel[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:3px;margin-bottom:8px;background:#fafafa;transition:box-shadow .2s;box-shadow:0 1px 2px #00000008;flex-shrink:0}.filter-expansion-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px 8px}.filter-title[_ngcontent-%COMP%]{margin:0;font-size:.95rem;font-weight:500}.clear-filter-btn[_ngcontent-%COMP%]{background:none;border:none;color:#209474;font-size:.85rem;cursor:pointer;padding:2px 8px;border-radius:4px;transition:background .2s}.filter-expansion-content[_ngcontent-%COMP%]{padding:0 8px 6px}.filter-expansion-panel.expanded[_ngcontent-%COMP%]{box-shadow:0 2px 8px #00000014}.filter-header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.expansion-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:.85rem;cursor:pointer;padding:2px 8px;border-radius:4px;transition:background .2s;display:flex;align-items:center}.expansion-toggle-btn[_ngcontent-%COMP%]:hover{background:#e3f2fd}.ispo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;transition:all .3s cubic-bezier(.4,0,.2,1)}.ispo-container.ispo-expanded[_ngcontent-%COMP%]   .iep-grid-wrapper[_ngcontent-%COMP%]{width:calc(100vw - 80px);max-width:100vw;margin-left:0;margin-right:0;transition:width .3s cubic-bezier(.4,0,.2,1)}.iep-grid-wrapper[_ngcontent-%COMP%]{width:100%;transition:width .3s cubic-bezier(.4,0,.2,1)}@media (max-width: 900px){.ispo-container.ispo-expanded[_ngcontent-%COMP%]   .iep-grid-wrapper[_ngcontent-%COMP%]{width:100vw;margin:0}}iep-grid[_ngcontent-%COMP%]{flex:1 1 0%;min-width:0;min-height:0;width:100%;height:100%;overflow:auto}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:1000;width:100vw!important;max-width:100vw!important;height:100vh!important;background:#fff;border-radius:0;box-shadow:0 0 0 9999px #0003;padding:12px 0 0}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]   .iep-grid-header[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;z-index:10;padding-bottom:8px}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]   iep-grid[_ngcontent-%COMP%]{flex:1 1 auto;height:100%!important;min-height:0}.iep-grid-wrapper[_ngcontent-%COMP%]{transition:width .3s;width:100%}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]{width:100%!important}.icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px 8px;font-size:18px;vertical-align:middle}.ncr-bar-chart-wrapper[_ngcontent-%COMP%]{padding:0rem 1rem}.ncr-bar-chart-title[_ngcontent-%COMP%]{text-align:center;color:#1976d2;font-size:1.5rem;margin-bottom:1.5rem}[_nghost-%COMP%]     .k-chart .k-series .k-column{fill:#1976d2!important}.ncr-grid-wrapper[_ngcontent-%COMP%]{padding:2rem 1rem;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014;position:relative}.close-btn[_ngcontent-%COMP%]{position:absolute;right:1.5rem;top:1.5rem;background:#1976d2;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;font-size:1rem;z-index:2}.close-btn[_ngcontent-%COMP%]:hover{background:#125ea2}.dropdown-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:10px}.result-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.result-btn[_ngcontent-%COMP%]{border-radius:20px;background:#888;color:#fff;border:none;padding:8px 18px;margin-right:8px;font-weight:200;font-size:12px;transition:background .2s}.result-btn[_ngcontent-%COMP%]:last-child{margin-right:0}.result-btn[_ngcontent-%COMP%]:active, .result-btn[_ngcontent-%COMP%]:focus{background:#666}.result-btn.primary[_ngcontent-%COMP%]{background:var(--primary, #209474);color:#fff}.card-scroll-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:18px}.card-scroll-view[_ngcontent-%COMP%]{display:flex;overflow-x:auto;gap:18px;flex:1 1 auto;min-width:0;padding:8px 0}.card-tile[_ngcontent-%COMP%]{min-width:220px;max-width:240px;height:40px;padding:6px 5px;border:1px solid lightgrey;border-radius:8px;box-shadow:0 1px 4px #0000000f;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;font-size:15px}.card-tile[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #1976d21f}.card-title[_ngcontent-%COMP%]{font-size:15px;font-weight:600;margin-bottom:4px}.card-desc[_ngcontent-%COMP%]{font-size:12px;color:#666}.scroll-arrow[_ngcontent-%COMP%]{border:none;color:#209474;border-radius:10%;width:26px;height:50px;display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;margin:0 8px;transition:background .2s}.scroll-arrow[_ngcontent-%COMP%]:disabled{background:#f5f5f5;color:#aaa;cursor:not-allowed}.scroll-arrow[_ngcontent-%COMP%]:hover:not(:disabled){background:#bbdefb}.close-icon[_ngcontent-%COMP%]{font-size:12px!important}.material-symbols-outlined.notification-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#e65100;font-size:22px}.warning-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e65100}.pager-right[_ngcontent-%COMP%]{text-align:right;margin-top:10px;width:100%}.pager-content[_ngcontent-%COMP%]{text-align:right;width:100%;margin-top:10px}"]})}}return o})();const sE=["tooltipDir"],nE=()=>({text:"Month"}),oE=()=>({text:"NCM count"});function rE(o,e){if(1&o){const t=r.RV6();r.j41(0,"div",14)(1,"h2",15),r.EFF(2),r.k0s(),r.j41(3,"kendo-chart",16),r.bIt("seriesClick",function(s){r.eBV(t);const n=r.XpG();return r.Njj(n.onBarClick(s))}),r.nrm(4,"kendo-chart-legend",17),r.j41(5,"kendo-chart-category-axis"),r.nrm(6,"kendo-chart-category-axis-item",18),r.k0s(),r.j41(7,"kendo-chart-value-axis"),r.nrm(8,"kendo-chart-value-axis-item",19),r.k0s(),r.j41(9,"kendo-chart-series"),r.nrm(10,"kendo-chart-series-item",20),r.k0s()(),r.j41(11,"div",21)(12,"kendo-pager",22),r.bIt("pageChange",function(s){r.eBV(t);const n=r.XpG();return r.Njj(n.pageChange(s))}),r.k0s()()()}if(2&o){const t=r.XpG();r.R7$(2),r.SpI("NCM Count by Month - ",t.currentYear,""),r.R7$(),r.Y8G("transitions",!1)("zoomable",!0),r.R7$(3),r.Y8G("categories",t.months)("title",r.lJ4(14,nE)),r.R7$(2),r.Y8G("title",r.lJ4(15,oE)),r.R7$(2),r.Y8G("data",t.currentYearDataCounts)("color","#1976d2")("gap",5.5)("spacing",.08),r.R7$(2),r.Y8G("total",t.pagedNcrData.length)("pageSize",t.pageSize)("skip",t.skip)("info",!1)}}function aE(o,e){if(1&o){const t=r.RV6();r.j41(0,"div",26)(1,"div",27)(2,"h3"),r.EFF(3),r.k0s()(),r.j41(4,"div",28)(5,"button",29),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.toggleCollapse())}),r.j41(6,"span",30),r.EFF(7),r.k0s()(),r.j41(8,"button",31),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.open("dialog"))}),r.j41(9,"span",30),r.EFF(10,"settings"),r.k0s()(),r.j41(11,"button",32),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.closeGrid())}),r.j41(12,"span",30),r.EFF(13,"close"),r.k0s()()()()}if(2&o){const t=r.XpG(2);r.R7$(3),r.Lme("Tabular View of ",t.selectedMonth," ",t.currentYear," "),r.R7$(2),r.FS9("title",t.isGridExpanded?"Collapse Grid":"Expand Grid"),r.R7$(2),r.JRh(t.isGridExpanded?"fullscreen_exit":"fullscreen")}}function lE(o,e){if(1&o){const t=r.RV6();r.j41(0,"div",26)(1,"div",27)(2,"h3"),r.EFF(3,"Activities"),r.k0s(),r.j41(4,"span",33),r.EFF(5),r.k0s()(),r.j41(6,"div",28)(7,"button",29),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.toggleCollapse())}),r.j41(8,"span",30),r.EFF(9),r.k0s()(),r.j41(10,"button",31),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.open("dialog"))}),r.j41(11,"span",30),r.EFF(12,"settings"),r.k0s()()()()}if(2&o){const t=r.XpG(2);r.R7$(5),r.SpI("Result: ",t.gridView.length,""),r.R7$(2),r.FS9("title",t.isGridExpanded?"Collapse Grid":"Expand Grid"),r.R7$(2),r.JRh(t.isGridExpanded?"fullscreen_exit":"fullscreen")}}function cE(o,e){if(1&o&&(r.j41(0,"div",23),r.DNE(1,aE,14,4,"div",24)(2,lE,13,3,"div",24),r.nrm(3,"iep-grid",25),r.k0s()),2&o){const t=r.XpG();r.R7$(),r.Y8G("ngIf",t.isBarChartData),r.R7$(),r.Y8G("ngIf",!t.isBarChartData),r.R7$(),r.Y8G("data",t.gridView)("columns",t.mapView)("pageable",!0)("enablescrolling",!1)}}let hE=(()=>{class o{constructor(){this.dataService=(0,r.WQX)(Ri.G),this.gridView=[],this.mapView=[],this.viewAsOptions=["Tabular View","Chart View"],this.functionsOptions=["Individual","Project","Office"],this.selectedViewAs="Chart View",this.selectedFunction="Individual",this.showWarning=!0,this.isExpanded=!1,this.isGridExpanded=!1,this.mySelection=[],this.dialogOpened=!1,this.searchValue="",this.selectedMonth="",this.selectedCount=0,this.showGrid=!1,this.gridData=[],this.collapsed=!1,this.isBarChartData=!1,this.pageSize=1,this.skip=0,this.ncrData=[],this.loading=!0,this.pagedNcrData=[],this.data=[],this.sort=[],(0,r.QZP)(()=>{const t=this.dataService.getTreeData();if(t&&t.length>0){const i=t.split(",");this.selectedProjects=i,this.gridView=this.data.filter(s=>{const n=s.id||s.ProjectID||s.projectId||s.ProjectId;return i.includes(n?.toString())})}else this.gridView=this.data})}ngOnInit(){this.dataService.getNCRData().subscribe(t=>{this.data=t.tabularData||[],this.ncrData=t.chartData.monthlyNCR||[],this.pagedNcrData=this.groupNcrDataByYear(this.ncrData),this.loading=!1,this.gridView=this.data.map(i=>Object.fromEntries(Object.entries(i).map(([s,n])=>[s.replace(/\s+/g,""),n]))),this.data&&(this.mapView=Object.keys(this.data[0]).map(i=>({field:i.replace(/\s+/g,""),title:i.replace("_"," ").toUpperCase()})))})}groupNcrDataByYear(t){const i={};return t.forEach(s=>{i[s.year]||(i[s.year]=[]),i[s.year].push({month:s.month,count:s.count})}),Object.keys(i).sort((s,n)=>+n-+s).map(s=>({year:+s,data:i[+s]}))}get currentYearData(){return this.pagedNcrData[this.skip]?.data||[]}get currentYear(){return this.pagedNcrData[this.skip]?.year||""}get months(){return this.currentYearData.map(t=>t.month)}get currentYearDataCounts(){return this.currentYearData.map(t=>t.count)}pageChange(t){this.skip=t.skip}onBarClick(t){this.isBarChartData=!0;const i=t.category,s=["January","February","March","April","May","June","July","August","September","October","November","December"];let n=null;"string"==typeof i?(n=s.indexOf(i)+1,this.selectedMonth=i):"number"==typeof i&&(this.selectedMonth=this.months[i],n=s.indexOf(this.selectedMonth)+1),this.selectedCount=this.currentYearDataCounts[i],this.dataService.getNCRDataBymonth({month:n,year:this.currentYear}).subscribe(l=>{this.gridView=[],console.log("data is ==>",l),this.data=l,this.data.length>0&&(this.gridView=this.data.map(c=>Object.fromEntries(Object.entries(c).map(([h,d])=>[h.replace(/\s+/g,""),d]))),this.data&&(this.mapView=Object.keys(this.data[0]).map(c=>({field:c.replace(/\s+/g,""),title:c.replace("_"," ").toUpperCase()}))))}),this.showGrid=!0}closeGrid(){this.showGrid=!1}clearFilter(){}close(t){this.dialogOpened=!1}open(t){this.dialogOpened=!0}action(t){console.log(`Dialog result: ${t}`),this.dialogOpened=!1}onFilter(t){const i=t.toLowerCase();this.gridView=this.data.map(s=>Object.fromEntries(Object.entries(s).map(([n,a])=>[n.replace(/\s+/g,""),a]))),i&&(this.gridView=this.gridView.filter(s=>Object.values(s).some(n=>n&&n.toString().toLowerCase().includes(i))))}onSortChange(t){this.sort=t,this.gridView=(0,co.My)(this.gridView,this.sort)}showTooltip(t){const i=t.target;"TD"!==i.nodeName&&"k-column-title"!==i.className||"kendo-checkbox"===i.nodeName?this.tooltipDir.hide():this.tooltipDir.toggle(i)}clearFilters(){this.searchValue="",this.onFilter("")}showGridOrTable(){this.isGridExpanded=!this.isGridExpanded,this.showGrid="Tabular View"!=this.selectedViewAs}toggleCollapse(){this.collapsed=!this.collapsed}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=r.VBU({type:o,selectors:[["iep-nx-ncm"]],viewQuery:function(i,s){if(1&i&&r.GBs(sE,5),2&i){let n;r.mGM(n=r.lsd())&&(s.tooltipDir=n.first)}},standalone:!0,features:[r.aNF],decls:17,vars:11,consts:[[1,"ncr-bar-chart-wrapper"],[1,"filter-expansion-panel"],[1,"filter-expansion-header"],[1,"filter-title"],[1,"filter-header-actions"],["type","button",1,"clear-filter-btn","primary",3,"click"],["type","button",1,"expansion-toggle-btn","primary",3,"click","title"],[1,"material-symbols-outlined","primary"],[1,"filter-expansion-content"],[1,"dropdown-row"],["name","selectedview",1,"filter-dropdown",3,"ngModelChange","selectionChange","data","ngModel"],["name","selectedfns",1,"filter-dropdown",3,"ngModelChange","data","ngModel"],["class","chart-view",4,"ngIf"],["class","ncr-grid-wrapper",4,"ngIf"],[1,"chart-view"],[1,"ncr-bar-chart-title"],[3,"seriesClick","transitions","zoomable"],["position","top"],[3,"categories","title"],[3,"title"],["type","column","name","NCM Count",3,"data","color","gap","spacing"],[1,"pager-right"],[1,"ncr-pager",3,"pageChange","total","pageSize","skip","info"],[1,"ncr-grid-wrapper"],["class","iep-grid-header",4,"ngIf"],[3,"data","columns","pageable","enablescrolling"],[1,"iep-grid-header"],[1,"header-left"],[1,"header-right"],[1,"icon-btn",3,"click","title"],[1,"material-symbols-outlined"],["title","Settings",1,"icon-btn",3,"click"],[1,"icon-btn",3,"click"],[1,"result-count"]],template:function(i,s){1&i&&(r.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),r.EFF(4,"Filter Activities"),r.k0s(),r.j41(5,"div",4)(6,"button",5),r.bIt("click",function(){return s.clearFilter()}),r.EFF(7," Clear Filter "),r.k0s(),r.j41(8,"button",6),r.bIt("click",function(){return s.isExpanded=!s.isExpanded}),r.j41(9,"span",7),r.EFF(10),r.k0s()()()(),r.j41(11,"div",8)(12,"div",9)(13,"kendo-dropdownlist",10),r.mxI("ngModelChange",function(a){return r.DH7(s.selectedViewAs,a)||(s.selectedViewAs=a),a}),r.bIt("selectionChange",function(){return s.showGridOrTable()}),r.k0s(),r.j41(14,"kendo-dropdownlist",11),r.mxI("ngModelChange",function(a){return r.DH7(s.selectedFunction,a)||(s.selectedFunction=a),a}),r.k0s()()()(),r.DNE(15,rE,13,16,"div",12)(16,cE,4,6,"div",13),r.k0s()),2&i&&(r.R7$(),r.AVh("expanded",s.isExpanded),r.R7$(7),r.Y8G("title",s.isExpanded?"Collapse":"Expand"),r.BMQ("aria-expanded",s.isExpanded),r.R7$(2),r.JRh(s.isExpanded?"expand_less":"expand_more"),r.R7$(3),r.Y8G("data",s.viewAsOptions),r.R50("ngModel",s.selectedViewAs),r.R7$(),r.Y8G("data",s.functionsOptions),r.R50("ngModel",s.selectedFunction),r.R7$(),r.Y8G("ngIf",!s.showGrid),r.R7$(),r.Y8G("ngIf",s.showGrid))},dependencies:[X.MD,X.bT,Ii,se,Ce,ne,Re,ie,Wt,Le,ke,Ve.io,Ve.Bz,Js.d,ho.V9,Vt.YN,Vt.BC,Vt.vS],styles:[".testgrid[_ngcontent-%COMP%]{width:1200px}[_nghost-%COMP%]     .testgrid{overflow-x:auto!important}[_nghost-%COMP%]     .k-grid{overflow-x:auto!important}[_nghost-%COMP%]     body, [_nghost-%COMP%]     html{overflow-x:hidden!important}  kendo-grid td{overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;max-width:20px}[_nghost-%COMP%]     .k-tabstrip-content{overflow-x:hidden!important}.selected-projects-section[_ngcontent-%COMP%]{margin-bottom:6px;font-size:13px}.selected-projects-section[_ngcontent-%COMP%]   .selected-label[_ngcontent-%COMP%]{font-weight:600;margin-right:6px}.selected-projects-section[_ngcontent-%COMP%]   .selected-list[_ngcontent-%COMP%]{color:#05322b;font-weight:500}.warning-message[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff3e0;border:1px solid #ff9800;color:#e65100;padding:4px 8px;border-radius:4px;margin-bottom:8px;position:relative}.warning-message[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{margin-right:8px}.warning-message[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{color:#000;flex:1}.warning-message[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#e65100;font-size:20px;cursor:pointer;margin-left:8px;line-height:1}.iep-grid-wrapper[_ngcontent-%COMP%]{margin-top:8px;background:#fff;border-radius:4px;box-shadow:0 2px 8px #0000000a;padding:8px;transition:width .3s,max-width .3s;width:100%;max-width:100%;height:100%;overflow:hidden;display:flex;flex-direction:column}.iep-grid-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;flex-shrink:0;padding-bottom:4px;border-bottom:1px solid #ddd;background:#fafafa}.iep-grid-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:18px}.iep-grid-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:700;color:#05322b}.iep-grid-header[_ngcontent-%COMP%]   .result-count[_ngcontent-%COMP%]{font-size:18px;margin-left:0}.iep-grid-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;border-radius:4px;transition:background .2s;font-size:16px}.iep-grid-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.iep-grid-header[_ngcontent-%COMP%]   kendo-svgicon[_ngcontent-%COMP%]{vertical-align:middle}.filter-expansion-panel[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:3px;margin-bottom:8px;background:#fafafa;transition:box-shadow .2s;box-shadow:0 1px 2px #00000008;flex-shrink:0}.filter-expansion-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px 8px}.filter-title[_ngcontent-%COMP%]{margin:0;font-size:.95rem;font-weight:500}.clear-filter-btn[_ngcontent-%COMP%]{background:none;border:none;color:#209474;font-size:.85rem;cursor:pointer;padding:2px 8px;border-radius:4px;transition:background .2s}.filter-expansion-content[_ngcontent-%COMP%]{padding:0 8px 6px}.filter-expansion-panel.expanded[_ngcontent-%COMP%]{box-shadow:0 2px 8px #00000014}.filter-header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.expansion-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:.85rem;cursor:pointer;padding:2px 8px;border-radius:4px;transition:background .2s;display:flex;align-items:center}.expansion-toggle-btn[_ngcontent-%COMP%]:hover{background:#e3f2fd}.ispo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;transition:all .3s cubic-bezier(.4,0,.2,1)}.ispo-container.ispo-expanded[_ngcontent-%COMP%]   .iep-grid-wrapper[_ngcontent-%COMP%]{width:calc(100vw - 80px);max-width:100vw;margin-left:0;margin-right:0;transition:width .3s cubic-bezier(.4,0,.2,1)}.iep-grid-wrapper[_ngcontent-%COMP%]{width:100%;transition:width .3s cubic-bezier(.4,0,.2,1)}@media (max-width: 900px){.ispo-container.ispo-expanded[_ngcontent-%COMP%]   .iep-grid-wrapper[_ngcontent-%COMP%]{width:100vw;margin:0}}iep-grid[_ngcontent-%COMP%]{flex:1 1 0%;min-width:0;min-height:0;width:100%;height:100%;overflow:auto}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:1000;width:100vw!important;max-width:100vw!important;height:100vh!important;background:#fff;border-radius:0;box-shadow:0 0 0 9999px #0003;padding:12px 0 0}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]   .iep-grid-header[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;z-index:10;padding-bottom:8px}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]   iep-grid[_ngcontent-%COMP%]{flex:1 1 auto;height:100%!important;min-height:0}.iep-grid-wrapper[_ngcontent-%COMP%]{transition:width .3s;width:100%}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]{width:100%!important}.icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px 8px;font-size:18px;vertical-align:middle}.ncr-bar-chart-wrapper[_ngcontent-%COMP%]{padding:0rem 1rem}.ncr-bar-chart-title[_ngcontent-%COMP%]{text-align:center;color:#1976d2;font-size:1.5rem;margin-bottom:1.5rem}[_nghost-%COMP%]     .k-chart .k-series .k-column{fill:#1976d2!important}.ncr-grid-wrapper[_ngcontent-%COMP%]{padding:2rem 1rem;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014;position:relative}.close-btn[_ngcontent-%COMP%]{position:absolute;right:1.5rem;top:1.5rem;background:#1976d2;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;font-size:1rem;z-index:2}.close-btn[_ngcontent-%COMP%]:hover{background:#125ea2}.dropdown-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:10px}.result-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.result-btn[_ngcontent-%COMP%]{border-radius:20px;background:#888;color:#fff;border:none;padding:8px 18px;margin-right:8px;font-weight:200;font-size:12px;transition:background .2s}.result-btn[_ngcontent-%COMP%]:last-child{margin-right:0}.result-btn[_ngcontent-%COMP%]:active, .result-btn[_ngcontent-%COMP%]:focus{background:#666}.result-btn.primary[_ngcontent-%COMP%]{background:var(--primary, #209474);color:#fff}.card-scroll-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:18px}.card-scroll-view[_ngcontent-%COMP%]{display:flex;overflow-x:auto;gap:18px;flex:1 1 auto;min-width:0;padding:8px 0}.card-tile[_ngcontent-%COMP%]{min-width:220px;max-width:240px;height:40px;padding:6px 5px;border:1px solid lightgrey;border-radius:8px;box-shadow:0 1px 4px #0000000f;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;font-size:15px}.card-tile[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #1976d21f}.card-title[_ngcontent-%COMP%]{font-size:15px;font-weight:600;margin-bottom:4px}.card-desc[_ngcontent-%COMP%]{font-size:12px;color:#666}.scroll-arrow[_ngcontent-%COMP%]{border:none;color:#209474;border-radius:10%;width:26px;height:50px;display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;margin:0 8px;transition:background .2s}.scroll-arrow[_ngcontent-%COMP%]:disabled{background:#f5f5f5;color:#aaa;cursor:not-allowed}.scroll-arrow[_ngcontent-%COMP%]:hover:not(:disabled){background:#bbdefb}.close-icon[_ngcontent-%COMP%]{font-size:12px!important}.material-symbols-outlined.notification-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#e65100;font-size:22px}.warning-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e65100}.pager-right[_ngcontent-%COMP%]{text-align:right;margin-top:10px;width:100%}.pager-content[_ngcontent-%COMP%]{text-align:right;width:100%;margin-top:10px}"]})}}return o})();const dE=()=>({text:"Frequency"}),pE=()=>({text:"Cumulative %"}),uE=()=>({text:"Severity"}),gE=()=>({color:"#1976d2",width:2}),fE=o=>({visible:!0,type:"circle",size:8,background:"#1976d2",border:o}),mE=()=>({style:"normal",width:0,color:"transparent"}),xE=()=>({visible:!0,type:"circle",size:8}),vE=()=>({style:"smooth",width:0});let bE=(()=>{class o{constructor(){this.paretoData=[{category:"Issue A",value:40,dot:10},{category:"Issue B",value:25,dot:12},{category:"Issue C",value:15,dot:7},{category:"Issue D",value:10,dot:5},{category:"Issue E",value:10,dot:6}],this.crossingValues=[0,8]}get paretoCategories(){return this.paretoData.map(t=>t.category)}get paretoValues(){return this.paretoData.map(t=>t.value)}get paretoDots(){return this.paretoData.map(t=>t.dot)}get paretoCumulative(){const t=this.paretoValues,i=t.reduce((n,a)=>n+a,0);let s=0;return t.map(n=>(s+=n,+(s/i*100).toFixed(2)))}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=r.VBU({type:o,selectors:[["iep-nx-fmea"]],standalone:!0,features:[r.aNF],decls:15,vars:29,consts:[[3,"transitions"],["position","top"],[3,"categories","axisCrossingValue"],["name","default",3,"title"],["name","secondAxis",3,"title","majorUnit"],["format","{0}%"],["name","dotAxis",3,"title","min","max"],["format","{0}"],["type","column","name","Frequency",3,"data"],["type","line","name","Cumulative %",3,"data","axis","color","markers","line"],["type","line","name","Severity",3,"data","axis","markers","line"],["format","{0}",3,"shared"]],template:function(i,s){1&i&&(r.j41(0,"kendo-chart",0),r.nrm(1,"kendo-chart-legend",1),r.j41(2,"kendo-chart-category-axis"),r.nrm(3,"kendo-chart-category-axis-item",2),r.k0s(),r.j41(4,"kendo-chart-value-axis"),r.nrm(5,"kendo-chart-value-axis-item",3),r.j41(6,"kendo-chart-value-axis-item",4),r.nrm(7,"kendo-chart-value-axis-item-labels",5),r.k0s(),r.j41(8,"kendo-chart-value-axis-item",6),r.nrm(9,"kendo-chart-value-axis-item-labels",7),r.k0s()(),r.j41(10,"kendo-chart-series"),r.nrm(11,"kendo-chart-series-item",8)(12,"kendo-chart-series-item",9)(13,"kendo-chart-series-item",10),r.k0s(),r.nrm(14,"kendo-chart-tooltip",11),r.k0s()),2&i&&(r.Y8G("transitions",!1),r.R7$(3),r.Y8G("categories",s.paretoCategories)("axisCrossingValue",s.crossingValues),r.R7$(2),r.Y8G("title",r.lJ4(20,dE)),r.R7$(),r.Y8G("title",r.lJ4(21,pE))("majorUnit",20),r.R7$(2),r.Y8G("title",r.lJ4(22,uE))("min",0)("max",20),r.R7$(3),r.Y8G("data",s.paretoValues),r.R7$(),r.Y8G("data",s.paretoCumulative)("axis","secondAxis")("color","tranparent")("markers",r.eq3(24,fE,r.lJ4(23,gE)))("line",r.lJ4(26,mE)),r.R7$(),r.Y8G("data",s.paretoDots)("axis","dotAxis")("markers",r.lJ4(27,xE))("line",r.lJ4(28,vE)),r.R7$(),r.Y8G("shared",!0))},dependencies:[X.MD,Ii,se,Ce,ne,Re,ie,Wt,lo,Le,ke,Oh]})}}return o})();const _E=()=>["Test Cost","SRCost","redesignCost","FMCost"],yE=()=>[1e4,12003,20034,34300];function wE(o,e){1&o&&(r.j41(0,"div",4)(1,"div",5),r.EFF(2,"Tooltip Title "),r.k0s(),r.j41(3,"div",6),r.EFF(4,"Tooltip Content"),r.k0s()())}let CE=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=r.VBU({type:o,selectors:[["iep-nx-coq"]],standalone:!0,features:[r.aNF],decls:8,vars:7,consts:[["text","Item Level Chart"],[3,"categories"],["type","bar",3,"gap","spacing","data","color"],["kendoChartSeriesTooltipTemplate",""],[1,"tooltip-content"],[1,"tooltip-title"],[1,"tooltip-value"]],template:function(i,s){1&i&&(r.j41(0,"kendo-chart"),r.nrm(1,"kendo-chart-title",0),r.j41(2,"kendo-chart-category-axis"),r.nrm(3,"kendo-chart-category-axis-item",1),r.k0s(),r.j41(4,"kendo-chart-series")(5,"kendo-chart-series-item",2)(6,"kendo-chart-tooltip"),r.DNE(7,wE,5,0,"ng-template",3),r.k0s()()()()),2&i&&(r.R7$(3),r.Y8G("categories",r.lJ4(5,_E)),r.R7$(2),r.Y8G("gap",2)("spacing",.25)("data",r.lJ4(6,yE))("color","#1976d2"))},dependencies:[X.MD,Ii,se,rs,Ce,ne,ie,Wt,ia,lo]})}}return o})();var _v=T(982),yv=T(8911);function kE(o,e){1&o&&r.nrm(0,"iep-filter-contract",31)}function AE(o,e){if(1&o){const t=r.RV6();r.j41(0,"span",32)(1,"span",33),r.bIt("click",function(){r.eBV(t);const s=r.XpG();return r.Njj(s.openPareto())}),r.EFF(2,"insert_chart"),r.k0s()()}}function SE(o,e){if(1&o){const t=r.RV6();r.j41(0,"span",32)(1,"span",34),r.bIt("click",function(){r.eBV(t);const s=r.XpG();return r.Njj(s.openRisk())}),r.EFF(2,"warning"),r.k0s()()}}function TE(o,e){if(1&o&&(r.j41(0,"div",37)(1,"span",38),r.EFF(2,"Project(s) Selected:"),r.k0s(),r.j41(3,"span",39),r.EFF(4),r.k0s()()),2&o){const t=r.XpG(2);r.R7$(4),r.JRh(t.selectedProjects)}}function ME(o,e){if(1&o){const t=r.RV6();r.j41(0,"div",40)(1,"span",41),r.EFF(2,"notification_important"),r.k0s(),r.j41(3,"span",42),r.EFF(4,"You have received 3 primary resources re assigned requests "),r.j41(5,"a",43),r.EFF(6,"View Requests"),r.k0s()(),r.j41(7,"span",44),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.showWarning=!1)}),r.EFF(8,"close"),r.k0s()()}}function PE(o,e){if(1&o&&r.DNE(0,TE,5,1,"div",35)(1,ME,9,0,"div",36),2&o){const t=r.XpG();r.Y8G("ngIf",t.selectedProjects),r.R7$(),r.Y8G("ngIf",t.showWarning)}}function EE(o,e){1&o&&r.eu8(0)}function DE(o,e){if(1&o&&(r.DNE(0,EE,1,0,"ng-container",45),r.nrm(1,"copilot-iep-nx-ncr")),2&o){r.XpG();const t=r.sdS(22);r.Y8G("ngTemplateOutlet",t)}}function OE(o,e){1&o&&r.eu8(0)}function IE(o,e){if(1&o&&(r.DNE(0,OE,1,0,"ng-container",45),r.nrm(1,"iep-nx-ncm")),2&o){r.XpG();const t=r.sdS(22);r.Y8G("ngTemplateOutlet",t)}}function RE(o,e){1&o&&r.eu8(0)}function LE(o,e){if(1&o){const t=r.RV6();r.DNE(0,RE,1,0,"ng-container",45),r.j41(1,"copilot-iep-nx-ecn",46),r.bIt("ecnSummaryChange",function(s){r.eBV(t);const n=r.XpG();return r.Njj(n.summaryChange(s))}),r.k0s()}if(2&o){r.XpG();const t=r.sdS(22);r.Y8G("ngTemplateOutlet",t)}}function VE(o,e){1&o&&r.eu8(0)}function BE(o,e){if(1&o&&(r.DNE(0,VE,1,0,"ng-container",45),r.nrm(1,"iep-nx-coq")),2&o){r.XpG();const t=r.sdS(22);r.Y8G("ngTemplateOutlet",t)}}function FE(o,e){1&o&&r.eu8(0)}function NE(o,e){if(1&o&&(r.DNE(0,FE,1,0,"ng-container",45),r.nrm(1,"iep-nx-ccm")),2&o){r.XpG();const t=r.sdS(22);r.Y8G("ngTemplateOutlet",t)}}function zE(o,e){1&o&&r.eu8(0)}function jE(o,e){if(1&o&&(r.DNE(0,zE,1,0,"ng-container",45),r.nrm(1,"copilot-iep-nx-otrdr")),2&o){r.XpG();const t=r.sdS(22);r.Y8G("ngTemplateOutlet",t)}}function UE(o,e){1&o&&r.eu8(0)}function GE(o,e){if(1&o&&(r.DNE(0,UE,1,0,"ng-container",45),r.nrm(1,"iep-nx-fmea")),2&o){r.XpG();const t=r.sdS(22);r.Y8G("ngTemplateOutlet",t)}}function HE(o,e){1&o&&r.eu8(0)}function XE(o,e){if(1&o&&(r.DNE(0,HE,1,0,"ng-container",45),r.EFF(1," RCA NCA CAPA Content")),2&o){r.XpG();const t=r.sdS(22);r.Y8G("ngTemplateOutlet",t)}}function YE(o,e){1&o&&r.eu8(0)}function WE(o,e){if(1&o&&(r.DNE(0,YE,1,0,"ng-container",45),r.EFF(1," Product Quality")),2&o){r.XpG();const t=r.sdS(22);r.Y8G("ngTemplateOutlet",t)}}function $E(o,e){1&o&&r.eu8(0)}function QE(o,e){if(1&o&&(r.DNE(0,$E,1,0,"ng-container",45),r.EFF(1," Product Safety")),2&o){r.XpG();const t=r.sdS(22);r.Y8G("ngTemplateOutlet",t)}}function ZE(o,e){if(1&o){const t=r.RV6();r.j41(0,"button",56),r.bIt("click",function(){r.eBV(t);const s=r.XpG(2);return r.Njj(s.onFilter(s.searchValue))}),r.j41(1,"span",55),r.EFF(2,"search"),r.k0s()()}}function KE(o,e){if(1&o){const t=r.RV6();r.j41(0,"kendo-dialog",47)(1,"kendo-dialog-titlebar",48)(2,"div",49)(3,"div",50)(4,"h3"),r.EFF(5,"Do Vs Buy Deliverable Data Sheet"),r.k0s(),r.j41(6,"kendo-textbox",51),r.mxI("ngModelChange",function(s){r.eBV(t);const n=r.XpG();return r.DH7(n.searchValue,s)||(n.searchValue=s),r.Njj(s)}),r.bIt("ngModelChange",function(s){r.eBV(t);const n=r.XpG();return r.Njj(n.onFilter(s))}),r.DNE(7,ZE,3,0,"ng-template",52),r.k0s()(),r.j41(8,"div",53)(9,"span",54),r.bIt("click",function(){r.eBV(t);const s=r.XpG();return r.Njj(s.openInfo("dovsbuyinfo"))}),r.EFF(10,"info"),r.k0s(),r.j41(11,"span",55),r.EFF(12," assignment_ind "),r.k0s(),r.j41(13,"span",55),r.EFF(14,"settings"),r.k0s(),r.j41(15,"span",55),r.EFF(16," export_notes "),r.k0s(),r.j41(17,"span",54),r.bIt("click",function(){r.eBV(t);const s=r.XpG();return r.Njj(s.closeDoVsBuyDialog())}),r.EFF(18,"close"),r.k0s()()()(),r.nrm(19,"iep-nx-dovsbuy"),r.k0s()}if(2&o){const t=r.XpG();r.Y8G("width",1e3),r.R7$(6),r.xc7("width",180,"px"),r.Y8G("ngClass","search-textbox"),r.R50("ngModel",t.searchValue)}}function JE(o,e){if(1&o){const t=r.RV6();r.j41(0,"kendo-dialog",57),r.bIt("close",function(){r.eBV(t);const s=r.XpG();return r.Njj(s.chartOpen=!1)}),r.j41(1,"kendo-dialog-titlebar")(2,"span"),r.EFF(3,"Pareto Chart"),r.k0s()(),r.nrm(4,"shared-ui-pareto-chart"),r.k0s()}2&o&&r.Y8G("width",800)}function qE(o,e){if(1&o){const t=r.RV6();r.j41(0,"kendo-dialog",57),r.bIt("close",function(){r.eBV(t);const s=r.XpG();return r.Njj(s.riskOpen=!1)}),r.j41(1,"kendo-dialog-titlebar")(2,"span",58)(3,"span",54),r.bIt("click",function(){r.eBV(t);const s=r.XpG();return r.Njj(s.openInfo("riskInfo"))}),r.EFF(4,"info"),r.k0s(),r.j41(5,"span",59),r.EFF(6,"ECR RISK"),r.k0s()()(),r.nrm(7,"ecr-risk"),r.k0s()}2&o&&r.Y8G("width",800)}function tD(o,e){1&o&&(r.j41(0,"div"),r.EFF(1," This window corresponds to the information regarding Do vs Buy. "),r.j41(2,"p"),r.EFF(3," The Do vs Buy tab provides insights into the decision-making process of whether to develop a solution in-house or purchase it from an external vendor. "),r.k0s()())}function eD(o,e){1&o&&(r.j41(0,"div"),r.EFF(1," This window curresponds to the information regarding ECR RISK. "),r.j41(2,"p"),r.EFF(3," The ECR RISK tab provides insights into the risk associated with Engineering Change Requests (ECRs). It helps in identifying potential risks and their impact on the project. "),r.k0s(),r.j41(4,"p"),r.EFF(5," The Pareto Chart displays the distribution of ECRs based on their risk levels, allowing users to focus on the most significant risks first. "),r.k0s(),r.j41(6,"p"),r.EFF(7," Use the search functionality to filter ECRs based on specific criteria, and utilize the grid view for detailed analysis. "),r.k0s()())}function iD(o,e){if(1&o){const t=r.RV6();r.j41(0,"kendo-dialog",57),r.bIt("close",function(){r.eBV(t);const s=r.XpG();return r.Njj(s.helpOpen=!1)}),r.j41(1,"kendo-dialog-titlebar")(2,"span",58)(3,"span",59),r.EFF(4,"Information"),r.k0s()()(),r.DNE(5,tD,4,0,"div",60)(6,eD,8,0,"div",60),r.k0s()}if(2&o){const t=r.XpG();r.Y8G("width",800),r.R7$(5),r.Y8G("ngIf","dovsbuy"===t.content),r.R7$(),r.Y8G("ngIf","risk"===t.content)}}const sD=[{path:"",component:(()=>{class o{constructor(){this.lastUpdated="2025-06-03 10:00 AM",this.completion=72,this.dashboard_expand=!1,this.showIcon=!1,this.isOffice=!1,this.riskOpen=!1,this.helpOpen=!1,this.doVsBuyDialogOpen=!1,this.chartOpen=!1,this.searchValue="",this.dataService=(0,r.WQX)(Ri.G),this.content="",this.showWarning=!0,(0,r.QZP)(()=>{const t=this.dataService.getTreeData();if(t&&t.length>0){const i=t.split(",");this.selectedProjects=i}})}ngOnInit(){window.addEventListener("filterProjectsCollapse",t=>{this.dashboard_expand=t.detail.collapsed})}onFilter(t){t.toLowerCase()}openKaizenPage(){window.open("https://kaizen.example.com","_blank")}onSelect(t){this.showIcon="ECN/ECR"===t.title}openDoVsBuyDialog(){this.doVsBuyDialogOpen=!0}closeDoVsBuyDialog(){this.doVsBuyDialogOpen=!1}summaryChange(t){console.log("Summary changed:",t),"Office"==t&&(this.isOffice=!0)}openPareto(){this.chartOpen=!0}openRisk(){this.riskOpen=!0}openInfo(t){this.helpOpen=!0,"riskInfo"===t?this.content="risk":"dovsbuyinfo"===t&&(this.content="dovsbuy")}ngAfterViewInit(){this.overlayClickListener=t=>{const i=t.target;this.riskOpen&&!this.helpOpen&&i.classList.contains("k-overlay")?this.riskOpen=!1:this.doVsBuyDialogOpen&&!this.helpOpen&&i.classList.contains("k-overlay")&&(this.doVsBuyDialogOpen=!1)},document.addEventListener("click",this.overlayClickListener)}ngOnDestroy(){document.removeEventListener("click",this.overlayClickListener)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=r.VBU({type:o,selectors:[["quality-dashboard"]],standalone:!0,features:[r.aNF],decls:48,vars:13,consts:[["projectAndWarning",""],[1,"dashboard-flex"],["class","dashboard-filter",4,"ngIf"],[1,"dashboard-content"],[1,"dashboard-header"],[1,"dashboard-title"],[1,"dashboard-header-right"],["class","icons",4,"ngIf"],["src","assets/images/kaizen.png","alt","Kaizen",1,"kaizen-icon","dashboard-kaizen-icon",3,"click"],[1,"dashboard-updated"],[1,"dashboard-progress"],["viewBox","0 0 36 36",1,"circular-chart"],["d","M18 2.0845\n                     a 15.9155 15.9155 0 0 1 0 31.831\n                     a 15.9155 15.9155 0 0 1 0 -31.831",1,"circle-bg"],["d","M18 2.0845\n                     a 15.9155 15.9155 0 0 1 0 31.831\n                     a 15.9155 15.9155 0 0 1 0 -31.831",1,"circle"],["x","18","y","20.35","text-anchor","middle",1,"percentage"],[1,"dashboard-action",3,"click"],[1,"dashboard-tabs"],[1,"iep-operation-panel",3,"tabSelect"],["title","NCR",3,"selected"],["kendoTabContent",""],["title","NCM"],["title","ECN/ECR"],["title","COQ"],["title","CCM"],["title","OTRDR"],["title","FMEA"],["title","RCA-NCA-CAPA"],["title","Product Quality"],["title","Product Safety"],[3,"width",4,"ngIf"],["class","pareto-dialog",3,"width","close",4,"ngIf"],[1,"dashboard-filter"],[1,"icons"],["id","chartIcon",1,"material-symbols-outlined",3,"click"],["id","risk",1,"material-symbols-outlined",3,"click"],["class","selected-projects-section",4,"ngIf"],["class","warning-message",4,"ngIf"],[1,"selected-projects-section"],[1,"selected-label"],[1,"selected-list"],[1,"warning-message"],[1,"material-symbols-outlined","notification-icon"],[1,"warning-text"],["href","",1,"warning-link"],[1,"material-symbols-outlined","close-icon",3,"click"],[4,"ngTemplateOutlet"],[3,"ecnSummaryChange"],[3,"width"],[1,"iep-dialog-titlebar"],[1,"iep-grid-header"],[1,"header-left"],["placeholder","Search in all columns...",3,"ngModelChange","ngClass","ngModel"],["kendoTextBoxSuffixTemplate",""],[1,"header-right"],[1,"material-symbols-outlined",3,"click"],[1,"material-symbols-outlined"],["type","button",1,"search-btn",3,"click"],[1,"pareto-dialog",3,"close","width"],[1,"risk-title"],[1,"risktitle"],[4,"ngIf"]],template:function(i,s){if(1&i){const n=r.RV6();r.j41(0,"div",1),r.DNE(1,kE,1,0,"iep-filter-contract",2),r.j41(2,"div",3)(3,"div",4)(4,"span",5),r.EFF(5,"Quality"),r.k0s(),r.j41(6,"div",6),r.DNE(7,AE,3,0,"span",7)(8,SE,3,0,"span",7),r.j41(9,"img",8),r.bIt("click",function(){return r.eBV(n),r.Njj(s.openKaizenPage())}),r.k0s(),r.j41(10,"span",9),r.EFF(11),r.k0s(),r.j41(12,"div",10),r.qSk(),r.j41(13,"svg",11),r.nrm(14,"path",12)(15,"path",13),r.j41(16,"text",14),r.EFF(17),r.k0s()()(),r.joV(),r.j41(18,"button",15),r.bIt("click",function(){return r.eBV(n),r.Njj(s.openDoVsBuyDialog())}),r.EFF(19," Do vs Buy "),r.k0s()()(),r.j41(20,"div",16),r.DNE(21,PE,2,2,"ng-template",null,0,r.C5r),r.j41(23,"kendo-tabstrip",17),r.bIt("tabSelect",function(l){return r.eBV(n),r.Njj(s.onSelect(l))}),r.j41(24,"kendo-tabstrip-tab",18),r.DNE(25,DE,2,1,"ng-template",19),r.k0s(),r.j41(26,"kendo-tabstrip-tab",20),r.DNE(27,IE,2,1,"ng-template",19),r.k0s(),r.j41(28,"kendo-tabstrip-tab",21),r.DNE(29,LE,2,1,"ng-template",19),r.k0s(),r.j41(30,"kendo-tabstrip-tab",22),r.DNE(31,BE,2,1,"ng-template",19),r.k0s(),r.j41(32,"kendo-tabstrip-tab",23),r.DNE(33,NE,2,1,"ng-template",19),r.k0s(),r.j41(34,"kendo-tabstrip-tab",24),r.DNE(35,jE,2,1,"ng-template",19),r.k0s(),r.j41(36,"kendo-tabstrip-tab",25),r.DNE(37,GE,2,1,"ng-template",19),r.k0s(),r.j41(38,"kendo-tabstrip-tab",26),r.DNE(39,XE,2,1,"ng-template",19),r.k0s(),r.j41(40,"kendo-tabstrip-tab",27),r.DNE(41,WE,2,1,"ng-template",19),r.k0s(),r.j41(42,"kendo-tabstrip-tab",28),r.DNE(43,QE,2,1,"ng-template",19),r.k0s()(),r.DNE(44,KE,20,5,"kendo-dialog",29),r.k0s()()(),r.DNE(45,JE,5,1,"kendo-dialog",30)(46,qE,8,1,"kendo-dialog",30)(47,iD,7,3,"kendo-dialog",30)}2&i&&(r.AVh("dashboard-expand",s.dashboard_expand),r.R7$(),r.Y8G("ngIf",!s.dashboard_expand),r.R7$(6),r.Y8G("ngIf",s.showIcon&&s.isOffice),r.R7$(),r.Y8G("ngIf",s.showIcon),r.R7$(3),r.SpI("Last Updated: ",s.lastUpdated,""),r.R7$(4),r.BMQ("stroke-dasharray",s.completion+", 100"),r.R7$(2),r.SpI(" ",s.completion,"% "),r.R7$(7),r.Y8G("selected",!0),r.R7$(20),r.Y8G("ngIf",s.doVsBuyDialogOpen),r.R7$(),r.Y8G("ngIf",s.chartOpen),r.R7$(),r.Y8G("ngIf",s.riskOpen),r.R7$(),r.Y8G("ngIf",s.helpOpen))},dependencies:[XP,eP.v,$P,li.QW,li.z$,li.sl,li.Ai,zP._,X.MD,X.YU,X.bT,X.T3,NP,_v.mq,_v.Hx,tP,pP,Vt.YN,Vt.BC,Vt.vS,yv.OV,yv.HX,iE,hE,bE,CE],styles:[".quality-dashboard[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:2rem}.quality-dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;margin-bottom:1.5rem;color:#1976d2}.dashboard-flex[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:0;width:100%;min-width:0;overflow-x:hidden}.dashboard-filter[_ngcontent-%COMP%]{transition:width .3s cubic-bezier(.4,0,.2,1);width:320px;min-width:40px;max-width:320px;background:#fff;box-shadow:2px 0 8px #0000000a;height:auto;position:relative;left:unset;top:unset}.dashboard-filter.collapsed[_ngcontent-%COMP%]{width:40px!important;min-width:40px!important;max-width:40px!important;padding:0;border:none}.dashboard-content[_ngcontent-%COMP%]{flex:1 1 0%;min-width:0;overflow-x:auto;padding-left:0;background:#f8f9fa;height:auto;z-index:1;transition:width .3s cubic-bezier(.4,0,.2,1)}.dashboard-content[_ngcontent-%COMP%]   .k-tabstrip-content[_ngcontent-%COMP%]{overflow-x:hidden!important}.dashboard-content[_ngcontent-%COMP%]   .iep-operation-panel[_ngcontent-%COMP%] > .k-tabstrip-content[_ngcontent-%COMP%]{overflow-x:hidden!important}.dashboard-filter.collapsed[_ngcontent-%COMP%] + .dashboard-content[_ngcontent-%COMP%]{width:calc(100vw - 40px)!important;max-width:calc(100vw - 40px)!important}.dashboard-tabs[_ngcontent-%COMP%]{min-width:0;overflow-x:hidden!important}h2[_ngcontent-%COMP%]{color:#209474;margin-bottom:1rem}.dashboard-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:1rem}.dashboard-header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;flex-wrap:wrap}.dashboard-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;white-space:nowrap;margin-right:2rem}.dashboard-updated[_ngcontent-%COMP%]{color:#888;font-size:1rem;margin-right:2rem}.dashboard-progress[_ngcontent-%COMP%]{width:48px;height:48px;margin-right:2rem}.circular-chart[_ngcontent-%COMP%]{display:block;margin:0 auto;max-width:100%;max-height:100%}.circle-bg[_ngcontent-%COMP%]{fill:none;stroke:#eee;stroke-width:2.8}.circle[_ngcontent-%COMP%]{fill:none;stroke:#209474;stroke-width:2.8;stroke-linecap:round;transition:stroke-dasharray .3s;text-align:center}.percentage[_ngcontent-%COMP%]{font-size:.6em;fill:#209474}.dashboard-action[_ngcontent-%COMP%]{background:#209474;color:#fff;border:none;border-radius:4px;padding:.5rem 1.2rem;font-size:1rem;cursor:pointer;transition:background .2s;margin-left:1rem;margin-top:0;margin-bottom:0;flex-shrink:0}.dashboard-action[_ngcontent-%COMP%]:hover{background:#17695a}.dashboard-kaizen-icon[_ngcontent-%COMP%]{width:60px;height:32px;cursor:pointer;margin-left:12px;vertical-align:middle}.close-icon[_ngcontent-%COMP%]{font-size:12px!important}.material-symbols-outlined.notification-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#e65100;font-size:22px}.selected-projects-section[_ngcontent-%COMP%]{margin-bottom:6px;font-size:13px}.selected-projects-section[_ngcontent-%COMP%]   .selected-label[_ngcontent-%COMP%]{font-weight:600;margin-right:6px}.selected-projects-section[_ngcontent-%COMP%]   .selected-list[_ngcontent-%COMP%]{color:#05322b;font-weight:500}.warning-message[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff3e0;border:1px solid #ff9800;color:#e65100;padding:4px 8px;border-radius:4px;margin-bottom:8px;position:relative}.warning-message[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{margin-right:8px}.warning-message[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{color:#000;flex:1}.warning-message[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#e65100;font-size:20px;cursor:pointer;margin-left:8px;line-height:1}.warning-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e65100}#risk[_ngcontent-%COMP%]{color:#d4550b}#chartIcon[_ngcontent-%COMP%]{color:#17695a}.risktitle[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#d4550b;margin-left:8px;vertical-align:super}@media (max-width: 900px){.dashboard-flex[_ngcontent-%COMP%]{flex-direction:column;width:100vw}.dashboard-filter[_ngcontent-%COMP%], .dashboard-filter.collapsed[_ngcontent-%COMP%]{width:100vw!important;max-width:100vw!important;min-width:0!important;box-shadow:none}.dashboard-content[_ngcontent-%COMP%], .dashboard-filter.collapsed[_ngcontent-%COMP%] + .dashboard-content[_ngcontent-%COMP%]{width:100vw!important;max-width:100vw!important;min-width:0!important;padding-left:0;height:auto}.dashboard-header[_ngcontent-%COMP%], .dashboard-header-right[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.dashboard-title[_ngcontent-%COMP%]{margin-right:0}.dashboard-action[_ngcontent-%COMP%]{margin-left:0;margin-top:.5rem}}@media (max-width: 600px){.dashboard-header[_ngcontent-%COMP%], .dashboard-header-right[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.25rem}.dashboard-title[_ngcontent-%COMP%]{font-size:1.1rem}.dashboard-action[_ngcontent-%COMP%]{width:100%;margin:.5rem 0 0}}"]})}}return o})()}]}}]);