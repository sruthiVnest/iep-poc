"use strict";(self.webpackChunkhost=self.webpackChunkhost||[]).push([[432],{3432:(GE,Lh,T)=>{T.r(Lh),T.d(Lh,{remoteRoutes:()=>zE});var ra={};T.r(ra),T.d(ra,{easeOutElastic:()=>Sb,linear:()=>Ab,swing:()=>kb});var Me={};T.r(Me),T.d(Me,{l5:()=>Bb,jl:()=>_e.A,YJ:()=>et.A,wA:()=>M.w,ui:()=>rs.A,EY:()=>Od.A,t7:()=>sn.t7,AU:()=>sn.AU,bT:()=>sn.bT,ls:()=>sn.ls,rO:()=>sn.rO});var ro=T(2828),ct=T(177),a=T(4438),Et=T(4256),ti=T(9120),vt=T(5580);const ei="arc",Oh="ArrowUp",Bh="ArrowDown",Vh="ArrowLeft",Fh="ArrowRight",qi="aria-activedescendant",pt="#000",Y="bottom",V="center",Ut="circle",aa="cross",Ee="date",Nh="12px sans-serif",J=10,Xs="end",Uh=/\{\d+:?/,ao="height",ca="inside",Gh="inherit",U="left",ft=Number.MAX_VALUE,wt=-Number.MAX_VALUE,ha="none",Ys="object",lo="outside",$="right",Hh="roundedRect",co="start",da="string",G="top",$t="value",W="#fff",ho="width",P="x",D="y",ua="pointer",pa="horizontal";function Pt(o){return Array.isArray(o)}function gt(o,t){const e=Pt(t)?t:[t];for(let i=0;i<e.length;i++){const s=e[i];-1===o.className.indexOf(s)&&(o.className+=" "+s)}}const Iv=/\s+/g;function uo(o,t){o&&o.className&&(o.className=o.className.replace(t,"").replace(Iv," "))}var po=T(178);function Qt(o){let t=.5;o.options.stroke&&po.A(o.options.stroke.width)&&o.options.stroke.width%2==0&&(t=0);for(let e=0;e<o.segments.length;e++)o.segments[e].anchor().round(0).translate(t,t);return o}function Yh(o,t){return-o.x*t.y+o.y*t.x<0}function X(o){return"number"==typeof o&&!isNaN(o)}function jt(o){return typeof o===da}function Wh(o){return X(o)||jt(o)&&isFinite(o)}function $h(o,t){return(o+1)%t}function Qh(o,t){let e=o-1;return e<0?t-1:e}function go(o,t){return 1===t||o%t==0?0:o<0?t+o%t:o>=t?o%t:o}function lt(o){return"function"==typeof o}const Zh="object",Rv="undefined";function Kh(o,t){for(let e in t){if("__proto__"===e||"constructor"===e)continue;let n,i=t[e],s=typeof i;if(n=s===Zh&&null!==i?i.constructor:null,n&&n!==Array)if(i instanceof Date)o[e]=new Date(i.getTime());else if(lt(i.clone))o[e]=i.clone();else{let r=o[e];o[e]=typeof r===Zh&&r||{},Kh(o[e],i)}else s!==Rv&&(o[e]=i)}return o}function x(o){const t=arguments.length;for(let e=1;e<t;e++)Kh(o,arguments[e]);return o}function ie(o){return"object"==typeof o}function Ji(o){return X(o)?o+"px":o}const Lv=/width|height|top|left|bottom|right/i;function Ov(o){return Lv.test(o)}function dt(o,t){const e=jt(t)?[t]:t;if(Pt(e)){const i={},s=window.getComputedStyle(o);for(let n=0;n<e.length;n++){let r=e[n];i[r]=Ov(r)?parseFloat(s[r]):s[r]}return i}if(ie(t))for(let i in t)o.style[i]=Ji(t[i])}function Z(o,t=0){const e={top:0,right:0,bottom:0,left:0};return"number"==typeof o?e[G]=e[$]=e[Y]=e[U]=o:(e[G]=o[G]||t,e[$]=o[$]||t,e[Y]=o[Y]||t,e[U]=o[U]||t),e}let qh={compile:function(o){return o}};const fo=class Bv{static register(t){qh=t}static compile(t,e){return qh.compile(t,e)}};function kt(o={}){let t;return o.template?o.template=t=fo.compile(o.template):lt(o.content)&&(t=o.content),t}function Jh(o={}){let t;return o.ariaTemplate?o.ariaTemplate=t=fo.compile(o.ariaTemplate):lt(o.ariaContent)&&(t=o.ariaContent),t}const Vv=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g,Ws={};function Pe(o){if(Ws[o])return Ws[o];const t=[];return o.replace(Vv,function(e,i,s,n){t.push(po.A(i)?i:s||n)}),Ws[o]=function(e){let i=e;for(let s=0;s<t.length&&i;s++)i=i[t[s]];return i},Ws[o]}function Zt(o,t){const e=o.length,i=[];for(let s=0;s<e;s++)t(o[s])&&i.push(o[s]);return i}function $s(o,t){if(o.className){const e=t.split(" ");for(let i=0;i<e.length;i++)if(o.className.indexOf&&-1!==o.className.indexOf(e[i]))return!0}}Ws.undefined=function(o){return o};class Fv{constructor(){this._map=new Map}get(t){return this._map.get(t)}set(t,e){this._map.set(t,e)}}function N(o,t){if(t)return-1!==t.indexOf(o)}var Nv=T(507);function se(o,t,e){return Nv.A(o+(t-o)*e,3)}const td="trigger",ga=class zv{constructor(t,e){this.observer=t,this.handlerMap=x({},this.handlerMap,e)}trigger(t,e){const{observer:i,handlerMap:s}=this;let n;return s[t]?n=this.callObserver(s[t],e):i[td]&&(n=this.callObserver(td,t,e)),n}callObserver(t,...e){return this.observer[t].apply(this.observer,e)}requiresHandlers(t){if(this.observer.requiresHandlers)return this.observer.requiresHandlers(t);for(let e=0;e<t.length;e++)if(this.handlerMap[t[e]])return!0}};function ed(o,t){const e=o.length,i=[];for(let s=0;s<e;s++){let n=t(o[s]);po.A(n)&&i.push(n)}return i}var id=T(3105);const jv=id.A.browser||{};function fa(o){let t=0;return o.wheelDelta?(t=-o.wheelDelta/120,jv.webkit&&(t/=2*Math.max(window.devicePixelRatio,.625))):o.detail&&(t=o.detail/3),t=t>0?Math.ceil(t):Math.floor(t),t}var I=T(5678),Gv=T(4452),Hv=T(6821);const{BC:ki,vY:Qs,sw:_,rc:ii,a_:ts,YS:De,AS:sd,XB:ue,EN:Xv,HV:mt,rb:R,T5:Yv,eM:Ct,LI:A,S2:Zs,a4:O}=Hv;class Ks{static fetchFonts(t,e,i={depth:0}){!t||i.depth>5||!document.fonts||Object.keys(t).forEach(function(n){const r=t[n];"dataSource"===n||"$"===n[0]||!r||("font"===n?e.push(r):"object"==typeof r&&(i.depth++,Ks.fetchFonts(r,e,i),i.depth--))})}static loadFonts(t,e){let i=[];if(t.length>0&&document.fonts){try{i=t.map(function(s){return document.fonts.load(s)})}catch(s){(0,Gv.A)(s)}Promise.all(i).then(e,e)}else e()}static preloadFonts(t,e){const i=[];Ks.fetchFonts(t,i),Ks.loadFonts(i,e)}}const Wv=Ks;function C(o,t){const e=o.prototype;e.options=e.options?x({},e.options,t):t}const ma="k-i-",nd="k-svg-i-";class xa{constructor(t,e){this.element=t,this.options=x({},this.options,e),this.wrapper()}wrapper(){this.addClasses()}addClasses(){}html(){return this.element.outerHTML}}C(xa,{name:"",size:"none",themeColor:"none",flip:"default",iconClass:"",stylingOptions:["size","themeColor","fill"]});class od extends xa{constructor(t,e){super(t,e)}wrapper(){let t=this.element.className.split(" ").find(i=>i.startsWith(ma)),e=this.options.icon?`${this.options.icon.startsWith(ma)?"":ma}${this.options.icon}`:"";this._className=e,gt(this.element,"k-icon"),gt(this.element,"k-font-icon"),uo(this.element,t),gt(this.element,e),gt(this.element,this.options.iconClass||""),super.wrapper()}}C(od,{name:"HTMLFontIcon",icon:null});class rd extends xa{constructor(t,e){t.innerHTML="",super(t,e)}wrapper(){let t=this.options.icon,e=this.options.iconClass,i=this.element.className.split(" ").find(n=>n.startsWith(nd));if(!t&&e){let r=e.match(/k-i-(\w+(?:-\w+)*)/);r&&(t=r[1],e=e.replace(r[0],""))}jt(t)&&(t=t.replace("k-i-","").replace(/-./g,n=>n[1].toUpperCase()),t=this.options.svgIcons[t]||this.options.svgIcons[`${t}Icon`]);let s=t&&t.name?`${nd}${t.name}`:"";if(this._className=s,gt(this.element,"k-svg-icon"),uo(this.element,i),gt(this.element,s),gt(this.element,e||""),this.element.setAttribute("aria-hidden","true"),t&&function Uv(o){return"[object Object]"===Object.prototype.toString.call(o)}(t)){let n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox",t.viewBox||""),n.setAttribute("focusable","false"),n.innerHTML=t.content||"",this.element.appendChild(n)}super.wrapper()}}C(rd,{name:"HTMLSvgIcon",icon:null,svgIcons:{}});const ad={svg:rd,font:od};function es(o,t){let e=o,i=t;return(!e||ie(e)&&!(e instanceof HTMLElement)||jt(e))&&(i=e,e=document.createElement("span")),jt(i)&&(i={icon:i}),i.type||(i.type="svg"),ad[i.type]?new ad[i.type](e,i).html():null}function va(o){let t=ft,e=wt;for(let i=0,s=o.length;i<s;i++){const n=o[i];null!==n&&isFinite(n)&&(t=Math.min(t,n),e=Math.max(e,n))}return{min:t===ft?void 0:t,max:e===wt?void 0:e}}function ld(o,t){for(let e=0;e<o.length;e++){const i=o[e];if(t(i,e,o))return i}}const mo=T(1042).A,qv=/matrix\((.*)\)/;function cd(o){const t=getComputedStyle(o).transform;return"none"===t?mo.unit():function Jv(o){const t=o.match(qv);if(null===t||2!==t.length)return mo.unit();const e=t[1].split(",").map(i=>parseFloat(i));return new mo(...e)}(t)}var be=T(8521);const xo=function eb(o){return new be.A(o).isDark()?W:pt},hd={};class ib{constructor(t){this._index={},this._values=t?t.slice(0):[];for(let e=0;e<this._values.length;e++)this._index[this._values[e]]=e}values(){return this._values.filter(t=>t!==hd)}has(t){return void 0!==this._index[t]}add(t){this.has(t)||(this._index[t]=this._values.length,this._values.push(t))}delete(t){const e=this._index[t];void 0!==e&&(this._values[e]=hd,delete this._index[t])}clear(){this._index={},this._values=[]}get size(){return this._values.length}}class sb{constructor(t){this._set=new Set(t)}values(){return Array.from(this._set)}has(t){return this._set.has(t)}add(t){this._set.add(t)}delete(t){this._set.delete(t)}clear(){this._set.clear()}get size(){return this._set.size}}function dd(o){return(()=>{let o=!1;return"function"==typeof Set&&(o=new Set([1]).has(1)),o})()?new sb(o):new ib(o)}function ud(o){throw o}function ba(o,t){return Object.prototype.hasOwnProperty.call(o,t)}class si{constructor(){this.height=0,this.width=0,this.data=[]}clone(){const t=new si;return t.height=this.height,t.width=this.width,t.data=this.data.map(e=>e.slice()),t}get(t,e){const i=this.data[t];return i?i[e]:null}set(t,e,i){let s=this.data[t];null==s&&(s=this.data[t]=[]),s[e]=i,t>=this.height&&(this.height=t+1),e>=this.width&&(this.width=e+1)}each(t,e){for(let i=0;i<this.height;++i)for(let s=0;s<this.width;++s){let n=this.get(i,s);if((e||null!=n)&&(n=t(n,i,s),void 0!==n))return n}}map(t,e){const i=new si;return this.each(function(s,n,r){i.set(n,r,t(s,n,r))},e),i}transpose(){const t=new si;return this.each(function(e,i,s){t.set(s,i,e)}),t}unit(t){this.width=this.height=t;const e=this.data=new Array(t);for(let i=t;--i>=0;){const s=e[i]=new Array(t);for(let n=t;--n>=0;)s[n]=i===n?1:0}return this}multiply(t){const e=this,i=new si;for(let s=0;s<e.height;++s)for(let n=0;n<t.width;++n){let r=0;for(let l=0;l<e.width;++l){const c=e.get(s,l),h=t.get(l,n);"number"==typeof c&&"number"==typeof h&&(r+=c*h)}i.set(s,n,r)}return i}inverse(){const t=this.width,e=this.augment((new si).unit(t)),i=e.data;for(let s=0;s<t;++s){const n=ob(s,t,function(r){return i[r][s]});if(!i[n][s])return null;if(s!==n){let r=i[s];i[s]=i[n],i[n]=r}for(let r=s+1;r<t;++r){for(let l=s+1;l<2*t;++l)i[r][l]-=i[s][l]*i[r][s]/i[s][s];i[r][s]=0}}for(let s=0;s<t;++s)for(let n=i[s][s],r=0;r<2*t;++r)i[s][r]/=n;for(let s=t;--s>=0;)for(let n=s;--n>=0;)if(i[n][s])for(let r=2*t;--r>=t;)i[n][r]-=i[s][r]*i[n][s];return e.slice(0,t,t,t)}augment(t){const e=this.clone(),i=e.width;return t.each(function(s,n,r){e.set(n,r+i,s)}),e}slice(t,e,i,s){const n=new si;for(let r=0;r<i;++r)for(let l=0;l<s;++l)n.set(r,l,this.get(t+r,e+l));return n}}function ob(o,t,e){let i=e(o),s=o;for(let n=o+1;n<t;n++){const r=e(o);r>i&&(i=r,s=o)}return s}const pd=si,ss={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"};function rb(o){return ss[o]||o}const ye=o=>o.replace(/([^ ]+)/g,rb);function qs(){let t,e,o="";for(t=0;t<32;t++)e=16*Math.random()|0,(8===t||12===t||16===t||20===t)&&(o+="-"),o+=(12===t?4:16===t?3&e|8:e).toString(16);return o}const ya=new WeakMap,Js=Symbol("id");function Gt(o,t,e,i,s){!function lb(o,t,e,i,s){(Pt(t)?t:(t||"").split(" ")).forEach(function(r){!function cb(o,t,e,i,s){let r,n=i;e&&lt(e)&&!i?n=e:e&&function ab(o){return"string"==typeof o}(e)&&lt(n)&&(r=e);const l=function(h){const d=h.target?h.target.closest(r):null;(!r||r&&h.target&&d)&&(Object.defineProperty(h,"currentTarget",{value:r?d:h.currentTarget}),Object.defineProperty(h,"delegateTarget",{value:o}),n(h))};n[Js]||(n[Js]=qs());let c=ya.get(o);c||(c=new Map,ya.set(o,c)),c.set(t+n[Js],l),o.addEventListener(t,l,!!s)}(o,r,e,i,s)})}(o,t,e,i,s)}function Kt(o,t,e,i,s){!function hb(o,t,e,i){(Pt(t)?t:(t||"").split(" ")).forEach(function(n){!function db(o,t,e,i){const s=ya.get(o);if(s&&e&&e[Js]){const n=t+e[Js],r=s.get(n);s.delete(n),r&&o.removeEventListener(t,r,!!i)}}(o,n,e,i)})}(o,t,e,i)}function tn(){const o=function ub(o){let t=!1;const e={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.?(\d+(\.\d+)?)?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i},i={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i};for(let s in e)if(o.match(e[s])){if("windows"===s&&"plugins"in navigator)return!1;t={},t.device=s,t.name=pb(s,i),t[t.name]=!0;break}return t}(navigator.userAgent),t={};return t.mobileOS=o,t}function pb(o,t,e){for(let i in t)if(t[i].test(o))return i;return void 0!==e?e:o}function gd(){}function ni(){return(new Date).getTime()}const md="function";let gb=function(){this._defaultPrevented=!0},fb=function(){return!0===this._defaultPrevented};class ne extends I.A{constructor(){super(),this._events={}}destroy(){this.unbind()}bind(t,e,i){let n,l,c,h,u,s=this,r="string"==typeof t?[t]:t||[],d=typeof e===md;if(void 0===e){for(n in t)s.bind(n,t[n]);return s}for(n=0,l=r.length;n<l;n++){let p=r[n];h=d?e:e[p],h&&(i&&(c=h,h=function(){s.unbind(p,h),c.apply(s,arguments)},h.original=c),u=s._events[p]=s._events[p]||[],u.push(h))}return s}one(t,e){return this.bind(t,e,!0)}first(t,e){let s,r,l,h,i=this,n="string"==typeof t?[t]:t,c=typeof e===md;for(s=0,r=n.length;s<r;s++){let d=n[s];l=c?e:e[d],l&&(h=i._events[d]=i._events[d]||[],h.unshift(l))}return i}trigger(t,e){let n,r,i=this,s=i._events[t];if(s){let l=e||{};for(l.sender=i,l._defaultPrevented=!1,l.preventDefault=gb,l.isDefaultPrevented=fb,s=s.slice(),n=0,r=s.length;n<r;n++)s[n].call(i,l);return!0===l._defaultPrevented}return!1}unbind(t,e){let n,i=this,s=i._events[t];if(void 0===t)i._events={};else if(s)if(e)for(n=s.length-1;n>=0;n--)(s[n]===e||s[n].original===e)&&s.splice(n,1);else i._events[t]=[];return i}_setEvents(t){const e=(this.events||[]).length;for(let i=0;i<e;i++){let s=this.events[i];this.options[s]&&t[s]&&(this.unbind(s,this.options[s]),this._events&&this._events[s]&&delete this._events[s])}this.bind(this.events,t)}}const vo=Object.assign,mb=o=>{o.preventDefault()};let xd=800,vd=0,_a="move",bo="tap",kd="doubleTap",Ad="release",Sd="gesturechange",Td="gestureend",Md="gesturetap",bb={api:0,touch:0,mouse:9,pointer:9};function Ed(o){let t=[],e=o.originalEvent||o;return t.push(o.api?{id:2,event:o,target:o.target,currentTarget:o.target,location:o,type:"api"}:{location:e,event:o,target:o.target,currentTarget:o.currentTarget,id:e.pointerId,type:"pointer"}),t}class Pd extends I.A{constructor(t,e){super();let i=this;i.support=tn(),i.invalidZeroEvents=this.support.mobileOS&&this.support.mobileOS.android,i.axis=t,i._updateLocationData(e),i.startLocation=i.location,i.velocity=i.delta=0,i.timeStamp=ni()}move(t){let e=this,i=t["page"+e.axis],s=ni(),n=s-e.timeStamp||1;!i&&this.invalidZeroEvents||(e.delta=i-e.location,e._updateLocationData(t),e.initialDelta=i-e.startLocation,e.velocity=e.delta/n,e.timeStamp=s)}_updateLocationData(t){let e=this,i=e.axis;e.location=t["page"+i],e.client=t["client"+i],e.screen=t["screen"+i]}}class _b extends I.A{constructor(t,e,i){super(),vo(this,{x:new Pd("X",i.location),y:new Pd("Y",i.location),type:i.type,threshold:t.threshold||bb[i.type],userEvents:t,target:e,currentTarget:i.currentTarget,initialTouch:i.target,id:i.id,pressEvent:i,_clicks:t._clicks,supportDoubleTap:t.supportDoubleTap,_moved:!1,_finished:!1})}press(){this._holdTimeout=setTimeout(()=>this._hold(),this.userEvents.minHold),this._trigger("press",this.pressEvent)}_tap(t){let e=this;e.userEvents._clicks++,1===e.userEvents._clicks&&(e._clickTimeout=setTimeout(function(){e._trigger(1===e.userEvents._clicks?bo:kd,t),e.userEvents._clicks=0},300))}_hold(){this._trigger("hold",this.pressEvent)}move(t){let e=this;if(!(e._finished||"api"!==t.type&&e.userEvents._shouldNotMove)){if(e.x.move(t.location),e.y.move(t.location),!e._moved){if(e._withinIgnoreThreshold())return;if(Ai.current&&Ai.current!==e.userEvents)return e.dispose();e._start(t)}e._finished||e._trigger(_a,t)}}end(t){this.endTime=ni(),!this._finished&&(this._finished=!0,this._trigger(Ad,t),this._moved?this._trigger("end",t):this.supportDoubleTap?this._tap(t):this._trigger(bo,t),clearTimeout(this._holdTimeout),this.dispose())}dispose(){let e=this.userEvents.touches||[];this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout);const i=e.indexOf(this);e.splice(i,1)}skip(){this.dispose()}cancel(){this.dispose()}isMoved(){return this._moved}_start(t){clearTimeout(this._holdTimeout),this.startTime=ni(),this._moved=!0,this._trigger("start",t)}_trigger(t,e){const i=e.event;this.userEvents.notify(t,{touch:this,x:this.x,y:this.y,target:this.target,event:i})&&i.preventDefault()}_withinIgnoreThreshold(){let t=this.x.initialDelta,e=this.y.initialDelta;return Math.sqrt(t*t+e*e)<=this.threshold}}function Dd(o){let t=ss.up.split(" "),e=0,i=t.length;for(;e<i;e++)o(t[e])}class Ai extends ne{constructor(t,e){super();let s,i=this;const n=tn();if(this.support=n,this.options=e=e||{},s=i.filter=e.filter,i.threshold=e.threshold||vd,i.minHold=e.minHold||xd,i.touches=[],i._maxTouches=e.multiTouch?2:1,i.allowSelection=e.allowSelection,i.captureUpIfMoved=e.captureUpIfMoved,i._clicks=0,i.supportDoubleTap=e.supportDoubleTap,vo(i,{element:t,surface:e.surface||t,stopPropagation:e.stopPropagation,pressed:!1}),this._surfaceMoveHandler=this._move.bind(this),Gt(i.surface,ye("move"),this._surfaceMoveHandler),this._surfaceEndHandler=this._end.bind(this),Gt(i.surface,ye("up cancel"),this._surfaceEndHandler),this._elementStartHandler=this._start.bind(this),Gt(t,ye("down"),s,this._elementStartHandler),t.style["touch-action"]=e.touchAction||"none",e.preventDragEvent&&(this._elementDragStartHandler=mb,Gt(t,ye("dragstart"),this._elementDragStartHandler)),this._elementSelectHandler=this._select.bind(this),Gt(t,ye("mousedown"),s,this._elementSelectHandler),i.captureUpIfMoved){let r=i.surface;i._preventIfMovingProxy=i.preventIfMoving.bind(i),Dd(function(l){r.addEventListener(l,i._preventIfMovingProxy,!0)})}i.bind(["press","hold",bo,kd,"start",_a,"end",Ad,"cancel","gesturestart",Sd,Td,Md,"select"],e)}preventIfMoving(t){this._isMoved()&&t.preventDefault()}destroy(){let t=this;const e=this.options,i=this.element;if(!t._destroyed){if(t._destroyed=!0,t.captureUpIfMoved){let s=t.surface;Dd(function(n){s.removeEventListener(n,t._preventIfMovingProxy,!0)})}Kt(t.surface,ye("move"),this._surfaceMoveHandler),Kt(t.surface,ye("up cancel"),this._surfaceEndHandler),Kt(i,ye("down"),this._elementStartHandler),e.preventDragEvent&&Kt(i,ye("dragstart"),this._elementDragStartHandler),Kt(i,ye("mousedown"),this._elementSelectHandler),t._disposeAll(),t.unbind(),delete t.surface,delete t.element,delete t.currentTarget}}capture(){Ai.current=this}cancel(){this._disposeAll(),this.trigger("cancel")}notify(t,e){let s=this.touches,n=t;if(this._isMultiTouch()){switch(n){case _a:n=Sd;break;case"end":n=Td;break;case bo:n=Md}vo(e,{touches:s},function yb(o,t){let e=o.x.location,i=o.y.location,s=t.x.location,n=t.y.location,r=e-s,l=i-n;return{center:{x:(e+s)/2,y:(i+n)/2},distance:Math.sqrt(r*r+l*l)}}(s[0],s[1]))}return this.trigger(n,vo(e,{type:n}))}press(t,e,i){this._apiCall("_start",t,e,i)}move(t,e){this._apiCall("_move",t,e)}end(t,e){this._apiCall("_end",t,e)}_isMultiTouch(){return this.touches.length>1}_maxTouchesReached(){return this.touches.length>=this._maxTouches}_disposeAll(){let t=this.touches;for(;t.length>0;)t.pop().dispose()}_isMoved(){return Zt(this.touches,function(t){return t.isMoved()}).length}_select(t){(!this.allowSelection||this.trigger("select",{event:t}))&&t.preventDefault()}_start(t){if(t.which&&t.which>1||this._maxTouchesReached())return;let e;Ai.current=null,this.currentTarget=t.currentTarget,this.stopPropagation&&t.stopPropagation();const i=Ed(t);for(let s=0;s<i.length&&!this._maxTouchesReached();s++){const n=i[s];if(e=this.filter?n.currentTarget:this.element,e&&0===e.length)continue;const r=new _b(this,e,n);this.touches.push(r),r.press(),this._isMultiTouch()&&this.notify("gesturestart",{})}}_move(t){this._eachTouch("move",t)}_end(t){this._eachTouch("end",t)}_eachTouch(t,e){let l,c,h,d,s={},n=Ed(e),r=this.touches;for(l=0;l<r.length;l++)c=r[l],s[c.id]=c;for(l=0;l<n.length;l++)h=n[l],d=s[h.id],d&&("move"===t&&"pointer"===h.type&&!this.surface.hasPointerCapture(h.id)&&this.surface.setPointerCapture(h.id),d[t](h))}_apiCall(t,e,i,s){this[t]({api:!0,pageX:e,pageY:i,clientX:e,clientY:i,target:s||this.element,stopPropagation:gd,preventDefault:gd})}static defaultThreshold(t){vd=t}static minHold(t){xd=t}}function ns(o,t){let e=A(t-o,9);if(0===e){if(0===t)return.1;e=Math.abs(t)}const i=Math.pow(10,Math.floor(Math.log(e)/Math.log(10))),s=A(e/i,J);let n=1;return n=s<1.904762?.2:s<4.761904?.5:s<9.523809?1:2,A(i*n,J)}class yo extends I.A{constructor(t,e){super(),this.x=t||0,this.y=e||0}clone(){return new yo(this.x,this.y)}equals(t){return t&&this.x===t.x&&this.y===t.y}rotate(t,e){const i=Ct(e),s=Math.cos(i),n=Math.sin(i),{x:r,y:l}=t,{x:c,y:h}=this;return this.x=A(r+(c-r)*s+(h-l)*n,3),this.y=A(l+(h-l)*s-(c-r)*n,3),this}multiply(t){return this.x*=t,this.y*=t,this}distanceTo(t){const e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)}static onCircle(t,e,i){const s=Ct(e);return new yo(t.x-i*Math.cos(s),t.y-i*Math.sin(s))}}const B=yo;var At=T(7577);class _o extends I.A{constructor(t,e,i,s){super(),this.x1=t||0,this.y1=e||0,this.x2=i||0,this.y2=s||0}equals(t){return this.x1===t.x1&&this.x2===t.x2&&this.y1===t.y1&&this.y2===t.y2}width(){return this.x2-this.x1}height(){return this.y2-this.y1}translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this}move(t,e){const i=this.height(),s=this.width();return _(t)&&(this.x1=t,this.x2=this.x1+s),_(e)&&(this.y1=e,this.y2=this.y1+i),this}wrap(t){return this.x1=Math.min(this.x1,t.x1),this.y1=Math.min(this.y1,t.y1),this.x2=Math.max(this.x2,t.x2),this.y2=Math.max(this.y2,t.y2),this}wrapPoint(t){const e=Pt(t),i=e?t[0]:t.x,s=e?t[1]:t.y;return this.wrap(new _o(i,s,i,s)),this}snapTo(t,e){return(e===P||!e)&&(this.x1=t.x1,this.x2=t.x2),(e===D||!e)&&(this.y1=t.y1,this.y2=t.y2),this}alignTo(t,e){const i=this.height(),s=this.width(),n=e===G||e===Y?D:P,r=n===D?i:s;if(e===V){const l=t.center(),c=this.center();this.x1+=l.x-c.x,this.y1+=l.y-c.y}else this[n+1]=e===G||e===U?t[n+1]-r:t[n+2];return this.x2=this.x1+s,this.y2=this.y1+i,this}shrink(t,e){return this.x2-=t,this.y2-=e,this}expand(t,e){return this.shrink(-t,-e),this}pad(t){const e=Z(t);return this.x1-=e.left,this.x2+=e.right,this.y1-=e.top,this.y2+=e.bottom,this}unpad(t){const e=Z(t);return e.left=-e.left,e.top=-e.top,e.right=-e.right,e.bottom=-e.bottom,this.pad(e)}clone(){return new _o(this.x1,this.y1,this.x2,this.y2)}center(){return new B(this.x1+this.width()/2,this.y1+this.height()/2)}containsPoint(t){return t.x>=this.x1&&t.x<=this.x2&&t.y>=this.y1&&t.y<=this.y2}points(){return[new B(this.x1,this.y1),new B(this.x2,this.y1),new B(this.x2,this.y2),new B(this.x1,this.y2)]}getHash(){return[this.x1,this.y1,this.x2,this.y2].join(",")}overlaps(t){return!(t.y2<this.y1||this.y2<t.y1||t.x2<this.x1||this.x2<t.x1)}rotate(t){let e=this.width(),i=this.height();const{x:s,y:n}=this.center(),r=wo(0,0,s,n,t),l=wo(e,0,s,n,t),c=wo(e,i,s,n,t),h=wo(0,i,s,n,t);return e=Math.max(r.x,l.x,c.x,h.x)-Math.min(r.x,l.x,c.x,h.x),i=Math.max(r.y,l.y,c.y,h.y)-Math.min(r.y,l.y,c.y,h.y),this.x2=this.x1+e,this.y2=this.y1+i,this}toRect(){return new At.A([this.x1,this.y1],[this.width(),this.height()])}hasSize(){return 0!==this.width()&&0!==this.height()}align(t,e,i){const s=e+1,n=e+2,r=e===P?ho:ao,l=this[r]();N(i,[U,G])?(this[s]=t[s],this[n]=this[s]+l):N(i,[$,Y])?(this[n]=t[n],this[s]=this[n]-l):i===V&&(this[s]=t[s]+(t[r]()-l)/2,this[n]=this[s]+l)}}function wo(o,t,e,i,s){const n=Ct(s);return new B(e+(o-e)*Math.cos(n)+(t-i)*Math.sin(n),i-(o-e)*Math.sin(n)+(t-i)*Math.cos(n))}const k=_o;class Ca extends I.A{constructor(t,e,i,s,n){super(),this.center=t,this.innerRadius=e,this.radius=i,this.startAngle=s,this.angle=n}clone(){return new Ca(this.center,this.innerRadius,this.radius,this.startAngle,this.angle)}middle(){return this.startAngle+this.angle/2}setRadius(t,e){return e?this.innerRadius=t:this.radius=t,this}point(t,e){const i=Ct(t),s=Math.cos(i),n=Math.sin(i),r=e?this.innerRadius:this.radius,l=A(this.center.x-s*r,3),c=A(this.center.y-n*r,3);return new B(l,c)}adjacentBox(t,e,i){const s=this.clone().expand(t),n=s.middle(),r=s.point(n),l=e/2,c=i/2,h=Math.sin(Ct(n)),d=Math.cos(Ct(n));let u=r.x-l,p=r.y-c;return Math.abs(h)<.9&&(u+=l*-d/Math.abs(d)),Math.abs(d)<.9&&(p+=c*-h/Math.abs(h)),new k(u,p,u+e,p+i)}containsPoint(t){const e=this.center,i=this.innerRadius,s=this.radius,n=this.startAngle,r=this.startAngle+this.angle,l=t.x-e.x,c=t.y-e.y,h=new B(l,c),d=this.point(n),u=new B(d.x-e.x,d.y-e.y),p=this.point(r),g=new B(p.x-e.x,p.y-e.y),f=A(l*l+c*c,3);return(u.equals(h)||Yh(u,h))&&!Yh(g,h)&&f>=i*i&&f<=s*s}getBBox(){const t=new k(ft,ft,wt,wt),e=A(this.startAngle%360),i=A((e+this.angle)%360),s=this.innerRadius,n=[0,90,180,270,e,i].sort(wb),r=n.indexOf(e),l=n.indexOf(i);let c;c=e===i?n:r<l?n.slice(r,l+1):[].concat(n.slice(0,l+1),n.slice(r,n.length));for(let h=0;h<c.length;h++){let d=this.point(c[h]);t.wrapPoint(d),t.wrapPoint(d,s)}return s||t.wrapPoint(this.center),t}expand(t){return this.radius+=t,this}}function wb(o,t){return o-t}const en=Ca;var j=T(4305),os=T(9928),M=T(3039);class ka extends I.A{createRing(t,e){const i=t.startAngle+180;let s=t.angle+i;(0===t.angle||t.angle>0&&i===s)&&(s+=.001);const n=new j.A(t.center.x,t.center.y),r=Math.max(t.radius,0),l=Math.max(t.innerRadius,0),c=new os.A(n,{startAngle:i,endAngle:s,radiusX:r,radiusY:r}),h=M.w.fromArc(c,e).close();if(l){c.radiusX=c.radiusY=l;const d=c.pointAt(s);h.lineTo(d.x,d.y),h.arc(s,i,l,l,!0)}else h.lineTo(n.x,n.y);return h}}ka.current=new ka;const Co=ka;var _e=T(8309),oe=T(2907),bt=T(291),et=T(2542);function kb(o){return.5-Math.cos(o*Math.PI)/2}function Ab(o){return o}function Sb(o,t,e,i){let s=1.70158,n=0,r=i;return 0===o?e:1===o?e+i:(n||(n=.5),r<Math.abs(i)?(r=i,s=n/4):s=n/(2*Math.PI)*Math.asin(i/r),r*Math.pow(2,-10*o)*Math.sin((Number(o)-s)*(1.1*Math.PI)/n)+i+e)}var Rd=T(7739),Tb=T(1404),Mb=T(576);let Aa;class Sa extends I.A{static get current(){return Aa||(Aa=new Sa),Aa}constructor(){super(),this._items=[]}register(t,e){this._items.push({name:t,type:e})}create(t,e){const i=this._items;let s;if(e&&e.type){const n=e.type.toLowerCase();for(let r=0;r<i.length;r++)if(i[r].name.toLowerCase()===n){s=i[r];break}}if(s)return new s.type(t,e)}}const we=Sa,re=class Eb extends I.A{static create(t,e,i){return we.current.create(t,e,i)}get options(){return this._options||{duration:500,easing:"swing"}}set options(t){this._options=t}constructor(t,e){super(),this.options=Object.assign({},this.options,e),this.element=t}setup(){}step(){}play(){const t=this.options,{duration:e,delay:i=0}=t,s=ra[t.easing],n=(0,Rd.A)()+i,r=n+e;0===e?(this.step(1),this.abort()):setTimeout(()=>{const l=()=>{if(this._stopped)return;const c=(0,Rd.A)(),h=(0,Tb.A)(c-n,0,e),u=s(h/e,h,0,1,e);this.step(u),c<r?(0,Mb.A)(l):this.abort()};l()},i)}abort(){this._stopped=!0}destroy(){this.abort()}};class Ld extends I.A{constructor(t){super(),this.children=[],this.options=x({},this.options,this.initUserOptions(t))}initUserOptions(t){return t}reflow(t){const e=this.children;let i;for(let s=0;s<e.length;s++){let n=e[s];n.reflow(t),i=i?i.wrap(n.box):n.box.clone()}this.box=i||t}destroy(){const t=this.children;this.animation&&this.animation.destroy();for(let e=0;e<t.length;e++)t[e].destroy()}getRoot(){const t=this.parent;return t?t.getRoot():null}getSender(){const t=this.getService();if(t)return t.sender}getService(){let t=this;for(;t;){if(t.chartService)return t.chartService;t=t.parent}}translateChildren(t,e){const i=this.children,s=i.length;for(let n=0;n<s;n++)i[n].box.translate(t,e)}append(){for(let t=0;t<arguments.length;t++){let e=arguments[t];this.children.push(e),e.parent=this}}renderVisual(){!1!==this.options.visible&&(this.createVisual(),this.addVisual(),this.renderChildren(),this.createAnimation(),this.renderComplete())}addVisual(){this.visual&&(this.visual.chartElement=this,this.parent&&this.parent.appendVisual(this.visual))}renderChildren(){const t=this.children,e=t.length;for(let i=0;i<e;i++)t[i].renderVisual()}createVisual(){this.visual=new et.A({zIndex:this.options.zIndex,visible:O(this.options.visible,!0)})}createAnimation(){this.visual&&this.options.animation&&(this.animation=re.create(this.visual,this.options.animation))}appendVisual(t){t.chartElement||(t.chartElement=this),t.options.noclip?this.clipRoot().visual.append(t):_(t.options.zIndex)?this.stackRoot().stackVisual(t):this.isStackRoot?this.stackVisual(t):this.visual?this.visual.append(t):this.parent.appendVisual(t)}clipRoot(){return this.parent?this.parent.clipRoot():this}stackRoot(){return this.parent?this.parent.stackRoot():this}stackVisual(t){const e=t.options.zIndex||0,i=this.visual.children,s=i.length;let n;for(n=0;n<s&&!(O(i[n].options.zIndex,0)>e);n++);this.visual.insert(n,t)}traverse(t){const e=this.children,i=e.length;for(let s=0;s<i;s++){let n=e[s];t(n),n.traverse&&n.traverse(t)}}closest(t){let e=this,i=!1;for(;e&&!i;)i=t(e),i||(e=e.parent);if(i)return e}renderComplete(){}hasHighlight(){const t=(this.options||{}).highlight;return!(!this.createHighlight||t&&!1===t.visible||!1===this.visible)}toggleHighlight(t,e){const i=(this.options||{}).highlight||{},s=i.visual;let n=this._highlight;if(!n){const r={fill:{color:W,opacity:e||.2},stroke:{color:W,width:1,opacity:e||.2}};if(s){if(n=this._highlight=s(Object.assign(this.highlightVisualArgs(),{createVisual:()=>this.createHighlight(r),sender:this.getSender(),series:this.series,dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total})),!n)return}else n=this._highlight=this.createHighlight(r);_(n.options.zIndex)||(n.options.zIndex=O(i.zIndex,this.options.zIndex)),this.appendVisual(n)}n.visible(t)}toggleFocusHighlight(t){const e=(this.options||{}).focusHighlight||{};let i=this._focusHighlight;if(t||i){if(!i){const s=this.getRoot().options.background,n=xo(s),r={fill:{opacity:e.opacity,color:e.color},stroke:Object.assign({},{color:n},e.border),zIndex:e.zIndex};i=this._focusHighlight=this.createFocusHighlight(r),this.appendVisual(i)}i.visible(t)}}createGradientOverlay(t,e,i){const s=new M.w(Object.assign({stroke:{color:"none"},fill:this.createGradient(i),closed:t.options.closed},e));return s.segments.elements(t.segments.elements()),s}createGradient(t){if(this.parent)return this.parent.createGradient(t)}supportsPointInactiveOpacity(){return!0}}Ld.prototype.options={};const K=Ld;var Pb=T(3461),Db=T(7233),Ib=T(3199),Rb=T(3970);class Ob extends((0,Db.A)((0,Ib.A)((0,Rb.A)(Pb.A)))){get nodeType(){return"Arc"}constructor(t=new os.A,e={}){super(e),this.geometry(t),(0,po.A)(this.options.stroke)||this.stroke("#000")}_bbox(t){return this._geometry.bbox(t)}rawBBox(){return this.geometry().bbox()}toPath(){const t=new M.w,e=this.geometry().curvePoints();if(e.length>0){t.moveTo(e[0].x,e[0].y);for(let i=1;i<e.length;i+=3)t.curveTo(e[i],e[i+1],e[i+2])}return t}_containsPoint(t){return this.geometry().containsPoint(t)}_isOnPath(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)}}const Bb=Ob;var Od=T(786),sn=T(6702),rs=T(7917);const{bT:Vb,rO:Fb,t7:Nb,AU:zb,ls:Ub}=Me,jb={dots:Vb,verticalStripes:Fb,crosshatch:Nb,diagonalStripes:zb,grid:Ub};function oi(o,t,e){const i=function Gb(o,t){return lt(o)?o(t):o}(o,e),s=i&&jb[i.type];return s?s(Object.assign({},t,i)):t}class Bd extends K{constructor(t){super(t),this.options.margin=Z(this.options.margin),this.options.padding=Z(this.options.padding)}reflow(t){const e=this.options,{width:i,height:s,shrinkToFit:n}=e,r=i&&s,l=e.margin,c=e.padding,h=e.border.width;let d;const u=()=>{this.align(t,P,e.align),this.align(t,D,e.vAlign),this.paddingBox=d.clone().unpad(l).unpad(h)};let p=t.clone();r&&(p.x2=p.x1+i,p.y2=p.y1+s),n&&p.unpad(l).unpad(h).unpad(c),super.reflow(p),d=r?this.box=new k(0,0,i,s):this.box,n&&r?(u(),p=this.contentBox=this.paddingBox.clone().unpad(c)):(p=this.contentBox=d.clone(),d.pad(c).pad(h).pad(l),u()),this.translateChildren(d.x1-p.x1+l.left+h+c.left,d.y1-p.y1+l.top+h+c.top);const g=this.children;for(let f=0;f<g.length;f++){let m=g[f];m.reflow(m.box)}}align(t,e,i){this.box.align(t,e,i)}hasBox(){const t=this.options;return t.border.width||t.background}createVisual(){super.createVisual(),this.options.visible&&this.hasBox()&&this.visual.append(M.w.fromRect(this.paddingBox.toRect(),this.visualStyle()))}visualStyle(){const t=this.options,e=t.border||{};return{stroke:{width:e.width,color:e.color,opacity:O(e.opacity,t.opacity),dashType:e.dashType},fill:oi(t.pattern,{color:t.background,opacity:t.opacity},void 0),cursor:t.cursor}}}C(Bd,{align:U,vAlign:G,margin:{},padding:{},border:{color:pt,width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0});const ri=Bd;function Ta(o,t){t&&(o.options.className=t.className,o.options.role=t.role,o.options.ariaLabel=t.ariaLabel,o.options.ariaRoleDescription=t.ariaRoleDescription,o.options.ariaChecked=t.ariaChecked)}class Vd extends ri{constructor(t,e){super(t),this.pointData=e}getElement(){const{options:t,paddingBox:e}=this,{type:i,rotation:s}=t,n=e.center(),r=e.width()/2,l=e.height()/2;if(!t.visible||!this.hasBox())return null;const c=this.visualStyle();let h;if(i===Ut)h=new _e.A(new oe.A([A(e.x1+r,3),A(e.y1+l,3)],Math.min(r,l)),c);else if("triangle"===i)h=M.w.fromPoints([[e.x1+r,e.y1],[e.x1,e.y2],[e.x2,e.y2]],c).close();else if(i===aa)h=new M.P(c),h.moveTo(e.x1,e.y1).lineTo(e.x2,e.y2),h.moveTo(e.x1,e.y2).lineTo(e.x2,e.y1);else{const d=e.toRect();if(i===Hh){const u=O(t.borderRadius,d.width()/5);d.setCornerRadius(u)}h=M.w.fromRect(d,c)}return s&&h.transform(bt.A().rotate(-s,[n.x,n.y])),h.options.zIndex=t.zIndex,h}createElement(){const t=this.options.visual,e=this.pointData||{};let i;return i=t?t({value:e.value,dataItem:e.dataItem,sender:this.getSender(),series:e.series,category:e.category,rect:this.paddingBox.toRect(),options:this.visualOptions(),createVisual:()=>this.getElement()}):this.getElement(),i}visualOptions(){const t=this.options;return{background:t.background,border:t.border,margin:t.margin,padding:t.padding,type:t.type,size:t.width,visible:t.visible}}createVisual(){this.visual=this.createElement(),Ta(this.visual,this.options.accessibilityOptions)}}C(Vd,{type:Ut,align:V,vAlign:V});const Ot=Vd;var Hb=T(5344),Xb=T(3010);const nn="radial",Wb={glass:{type:"linear",rotation:0,stops:[{offset:0,color:W,opacity:0},{offset:.25,color:W,opacity:.3},{offset:1,color:W,opacity:0}]},sharpBevel:{type:nn,stops:[{offset:0,color:W,opacity:.55},{offset:.65,color:W,opacity:0},{offset:.95,color:W,opacity:.25}]},roundedBevel:{type:nn,stops:[{offset:.33,color:W,opacity:.06},{offset:.83,color:W,opacity:.2},{offset:.95,color:W,opacity:0}]},roundedGlass:{type:nn,supportVML:!1,stops:[{offset:0,color:W,opacity:0},{offset:.5,color:W,opacity:.3},{offset:.99,color:W,opacity:0}]},sharpGlass:{type:nn,supportVML:!1,stops:[{offset:0,color:W,opacity:.2},{offset:.15,color:W,opacity:.15},{offset:.17,color:W,opacity:.35},{offset:.85,color:W,opacity:.05},{offset:.87,color:W,opacity:.15},{offset:.99,color:W,opacity:0}]},bubbleShadow:{type:nn,center:[.5,.5],radius:.5}};function $b(o,t){if(o.x1===t.x1&&o.y1===t.y1&&o.x2===t.x2&&o.y2===t.y2)return t;const e=Math.min(o.x1,t.x1),i=Math.max(o.x1,t.x1),s=Math.min(o.x2,t.x2),n=Math.max(o.x2,t.x2),r=Math.min(o.y1,t.y1),l=Math.max(o.y1,t.y1),c=Math.min(o.y2,t.y2),h=Math.max(o.y2,t.y2),d=[];return d[0]=new k(i,r,s,l),d[1]=new k(e,l,i,c),d[2]=new k(s,l,n,c),d[3]=new k(i,c,s,h),o.x1===e&&o.y1===r||t.x1===e&&t.y1===r?(d[4]=new k(e,r,i,l),d[5]=new k(s,c,n,h)):(d[4]=new k(s,r,n,l),d[5]=new k(e,c,i,h)),Zt(d,function(u){return u.height()>0&&u.width()>0})[0]}class Fd extends K{constructor(t){super(t);const e=this.options;e.width=parseInt(e.width,10),e.height=parseInt(e.height,10),this.gradients={}}reflow(){const{options:t,children:e}=this;let i=new k(0,0,t.width,t.height);this.box=i.unpad(t.margin);for(let s=0;s<e.length;s++)e[s].reflow(i),i=$b(i,e[s].box)||new k}createVisual(){this.visual=new et.A,this.createBackground()}createBackground(){const t=this.options,e=t.border||{},i=this.box.clone().pad(t.margin).unpad(e.width),s=M.w.fromRect(i.toRect(),{stroke:{color:e.width?e.color:"",width:e.width,dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},zIndex:-10});this.visual.append(s)}getRoot(){return this}createGradient(t){const e=this.gradients,i=Yv(t),s=Wb[t.gradient];let n;if(e[i])n=e[i];else{const r=Object.assign({},s,t);"linear"===s.type?n=new Hb.A(r):(t.innerRadius&&(r.stops=function Qb(o){const t=o.stops,e=o.innerRadius/o.radius*100,i=t.length,s=[];for(let n=0;n<i;n++){let r=Object.assign({},t[n]);r.offset=(r.offset*(100-e)+e)/100,s.push(r)}return s}(r)),n=new Xb.A(r),n.supportVML=!1!==s.supportVML),e[i]=n}return n}cleanGradients(){const t=this.gradients;for(let e in t)t[e]._observers=[]}size(){const t=this.options;return new k(0,0,t.width,t.height)}}C(Fd,{width:600,height:400,background:W,border:{color:pt,width:0},margin:Z(5),zIndex:-2});const Zb=Fd;class Nd extends K{constructor(t){super(t),this._initDirection()}_initDirection(){const t=this.options;t.vertical?(this.groupAxis=P,this.elementAxis=D,this.groupSizeField=ho,this.elementSizeField=ao,this.groupSpacing=t.spacing,this.elementSpacing=t.vSpacing):(this.groupAxis=D,this.elementAxis=P,this.groupSizeField=ao,this.elementSizeField=ho,this.groupSpacing=t.vSpacing,this.elementSpacing=t.spacing)}reflow(t){this.box=t.clone(),this.reflowChildren()}reflowChildren(){const{box:t,elementAxis:e,groupAxis:i,elementSizeField:s,groupSizeField:n}=this,{groups:r,groupsSize:l,maxGroupElementsSize:c}=this.groupOptions(),h=r.length,d=t[i+1]+this.alignStart(l,t[n]());if(h){let u=d;for(let p=0;p<h;p++){let g=r[p],f=g.groupElements,m=t[e+1],v=f.length;for(let y=0;y<v;y++){let w=f[y],E=this.elementSize(w),L=u+this.alignStart(E[n],g.groupSize),F=new k;F[i+1]=L,F[i+2]=L+E[n],F[e+1]=m,F[e+2]=m+E[s],w.reflow(F),m+=E[s]+this.elementSpacing}u+=g.groupSize+this.groupSpacing}t[i+1]=d,t[i+2]=d+l,t[e+2]=t[e+1]+c}}alignStart(t,e){let i=0;const s=this.options.align;return s===$||s===Y?i=e-t:s===V&&(i=(e-t)/2),i}groupOptions(){const{box:t,children:e,elementSizeField:i,groupSizeField:s,elementSpacing:n,groupSpacing:r}=this,l=A(t[i]()),c=e.length,h=[];let d=0,u=0,p=0,g=0,f=[];for(let m=0;m<c;m++){let v=e[m];v.box||v.reflow(t);let y=this.elementSize(v);this.options.wrap&&A(u+n+y[i])>l&&(h.push({groupElements:f,groupSize:d,groupElementsSize:u}),g=Math.max(g,u),p+=r+d,d=0,u=0,f=[]),d=Math.max(d,y[s]),u>0&&(u+=n),u+=y[i],f.push(v)}return h.push({groupElements:f,groupSize:d,groupElementsSize:u}),g=Math.max(g,u),p+=d,{groups:h,groupsSize:p,maxGroupElementsSize:g}}elementSize(t){return{width:t.box.width(),height:t.box.height()}}createVisual(){}}C(Nd,{vertical:!0,wrap:!0,vSpacing:0,spacing:0});const Ma=Nd;var zd=T(2821);const Kb=Od.A;class Ud extends K{constructor(t,e){super(e),this.content=t,this.reflow(new k)}reflow(t){const e=this.options,i=e.size=zd.A(this.content,{font:e.font});this.baseline=i.baseline,this.box=new k(t.x1,t.y1,t.x1+i.width,t.y1+i.height)}createVisual(){const{font:t,color:e,opacity:i,cursor:s,stroke:n,paintOrder:r}=this.options;this.visual=new Kb(this.content,this.box.toRect().topLeft(),{font:t,fill:{color:e,opacity:i},cursor:s,stroke:n,paintOrder:r})}}C(Ud,{font:Nh,color:pt});const qb=Ud;function as(o){const t=o.origin,e=o.bottomRight();return new k(t.x,t.y,e.x,e.y)}const Jb=/\n/m,Ht=class ty extends ri{constructor(t,e,i){super(e),this.content=t,this.data=i,this._initContainer(),!1!==this.options._autoReflow&&this.reflow(new k)}_initContainer(){const t=this.options,e=String(this.content).split(Jb),i=new Ma({vertical:!0,align:t.align,wrap:!1}),s=x({},t,{opacity:1,animation:null});this.container=i,this.append(i);for(let n=0;n<e.length;n++){let r=new qb(e[n].trim(),s);i.append(r)}}reflow(t){const e=this.options,i=e.visual;if(this.container.options.align=e.align,i&&!this._boxReflow){let s=t;s.hasSize()||(this._boxReflow=!0,this.reflow(s),this._boxReflow=!1,s=this.box);const n=this.visual=i(this.visualContext(s));n&&(s=as(n.clippedBBox()||new At.A),n.options.zIndex=e.zIndex),this.box=this.contentBox=this.paddingBox=s}else if(super.reflow(t),e.rotation){const s=Z(e.margin);let n=this.box.unpad(s);this.targetBox=t,this.normalBox=n.clone(),n=this.rotate(),n.translate(s.left-s.right,s.top-s.bottom),this.rotatedBox=n.clone(),n.pad(s)}}createVisual(){const t=this.options;if(this.visual=new et.A({transform:this.rotationTransform(),zIndex:t.zIndex,noclip:t.noclip}),this.hasBox()){const e=M.w.fromRect(this.paddingBox.toRect(),this.visualStyle());this.visual.append(e)}}renderVisual(){if(this.options.visible)if(this.options.visual){const t=this.visual;t&&!_(t.options.noclip)&&(t.options.noclip=this.options.noclip),this.addVisual(),this.createAnimation()}else super.renderVisual()}visualContext(t){const e={text:this.content,rect:t.toRect(),sender:this.getSender(),options:this.options,createVisual:()=>(this._boxReflow=!0,this.reflow(t),this._boxReflow=!1,this.getDefaultVisual())};return this.data&&Object.assign(e,this.data),e}getDefaultVisual(){this.createVisual(),this.renderChildren();const t=this.visual;return delete this.visual,t}rotate(){const t=this.options;return this.box.rotate(t.rotation),this.align(this.targetBox,P,t.align),this.align(this.targetBox,D,t.vAlign),this.box}rotationTransform(){const t=this.options.rotation;if(!t)return null;const{x:e,y:i}=this.normalBox.center(),s=this.rotatedBox.center();return bt.A().translate(s.x-e,s.y-i).rotate(t,[e,i])}};class ko extends K{constructor(t){super(t),this._textBox=new Ht(this.options.text,Object.assign({},this.options,{vAlign:this.options.position})),this.append(this._textBox)}reflow(t){super.reflow(t),this.box.snapTo(t,P)}static buildTitle(t,e){let s,i=t;return"string"==typeof t&&(i={text:t}),i=Object.assign({visible:!0},e,i),i&&i.visible&&i.text&&(s=new ko(i)),s}static orderTitles(t){const e=[].concat(t),i=e.filter(n=>n&&n.options.position!==Y),s=e.filter(n=>n&&n.options.position===Y);return jd(i),jd(s),s.reverse(),i.concat(s)}}function jd(o){for(let t=1;t<o.length;t++){const e=o[t]._textBox,i=o[t-1]._textBox;i.options.margin=Object.assign(Z(i.options.margin),{bottom:0}),e.options.margin=Object.assign(Z(e.options.margin),{top:0})}}C(ko,{color:pt,position:G,align:V,margin:Z(5),padding:Z(5)});const on=ko;class Gd extends Ht{constructor(t,e,i,s,n){super(e,n),this.text=e,this.value=t,this.index=i,this.dataItem=s,this.reflow(new k)}visualContext(t){const e=super.visualContext(t);return e.value=this.value,e.dataItem=this.dataItem,e.format=this.options.format,e.culture=this.options.culture,e}click(t,e){t.trigger("axisLabelClick",{element:ue(e),value:this.value,text:this.text,index:this.index,dataItem:this.dataItem,axis:this.parent.options})}rotate(){if(this.options.alignRotation!==V){const t=this.normalBox.toRect(),e=this.rotationTransform();this.box=as(t.bbox(e.matrix()))}else super.rotate();return this.box}rotationTransform(){const t=this.options,e=t.rotation;if(!e)return null;if(t.alignRotation===V)return super.rotationTransform();const i=bt.A().rotate(e).matrix(),s=this.normalBox.toRect(),n=this.targetBox.toRect(),r=t.rotationOrigin||G,l=r===G||r===Y?P:D,c=r===G||r===Y?D:P,h=r===G||r===U?n.origin:n.bottomRight(),d=s.topLeft().transformCopy(i),u=s.topRight().transformCopy(i),p=s.bottomRight().transformCopy(i),g=s.bottomLeft().transformCopy(i),f=At.A.fromPoints(d,u,p,g),m={[c]:n.origin[c]-f.origin[c]},v=Math.abs(d[c]+m[c]-h[c]),y=Math.abs(u[c]+m[c]-h[c]);let w,E;A(v,J)===A(y,J)?(w=d,E=u):y<v?(w=u,E=p):(w=d,E=g);const L=w[l]+(E[l]-w[l])/2;return m[l]=n.center()[l]-L,bt.A().translate(m.x,m.y).rotate(e)}}C(Gd,{_autoReflow:!1});const Si=Gd;class Xd extends ri{constructor(t,e,i){super(e),this.fields=t,this.chartService=i,this.render()}hide(){this.options.visible=!1}show(){this.options.visible=!0}render(){const t=this.options;if(t.visible){const{label:e,icon:i}=t,s=new k,n=()=>this;let c,h,r=i.size,l=this.fields.text;if(_(e)&&e.visible){const u=kt(e);u?l=u(this.fields):e.format&&(l=this.chartService.format.auto(e.format,l)),e.color||(e.color=e.position===ca?"#fff":i.background),this.label=new Ht(l,x({},e)),this.label.aliasFor=n,e.position===ca&&!_(r)&&(i.type===Ut?r=Math.max(this.label.box.width(),this.label.box.height()):(c=this.label.box.width(),h=this.label.box.height()),s.wrap(this.label.box))}i.width=c||r||7,i.height=h||r||7;const d=new Ot(x({},i));d.aliasFor=n,this.marker=d,this.append(d),this.label&&this.append(this.label),d.reflow(new k),this.wrapperBox=s.wrap(d.box)}}reflow(t){const{options:e,label:i,marker:s,wrapperBox:n}=this,r=t.center(),l=e.line.length,c=e.position;if(e.visible){let h,d,u;N(c,[U,$])?c===U?(u=n.alignTo(t,c).translate(-l,t.center().y-n.center().y),e.line.visible&&(h=[t.x1,r.y],this.linePoints=[h,[u.x2,r.y]],d=u.clone().wrapPoint(h))):(u=n.alignTo(t,c).translate(l,t.center().y-n.center().y),e.line.visible&&(h=[t.x2,r.y],this.linePoints=[h,[u.x1,r.y]],d=u.clone().wrapPoint(h))):c===Y?(u=n.alignTo(t,c).translate(t.center().x-n.center().x,l),e.line.visible&&(h=[r.x,t.y2],this.linePoints=[h,[r.x,u.y1]],d=u.clone().wrapPoint(h))):(u=n.alignTo(t,c).translate(t.center().x-n.center().x,-l),e.line.visible&&(h=[r.x,t.y1],this.linePoints=[h,[r.x,u.y2]],d=u.clone().wrapPoint(h))),s&&s.reflow(u),i&&(i.reflow(u),s&&(e.label.position===lo&&i.box.alignTo(s.box,c),i.reflow(i.box))),this.contentBox=u,this.targetBox=t,this.box=d||u}}createVisual(){super.createVisual(),this.visual.options.noclip=this.options.noclip,this.options.visible&&this.createLine()}renderVisual(){const t=this.options,e=t.visual;t.visible&&e?(this.visual=e(Object.assign(this.fields,{sender:this.getSender(),rect:this.targetBox.toRect(),options:{background:t.background,border:t.background,icon:t.icon,label:t.label,line:t.line,position:t.position,visible:t.visible},createVisual:()=>{this.createVisual(),this.renderChildren();const i=this.visual;return delete this.visual,i}})),this.addVisual()):super.renderVisual()}createLine(){const t=this.options.line;if(this.linePoints){const e=M.w.fromPoints(this.linePoints,{stroke:{color:t.color,width:t.width,dashType:t.dashType}});Qt(e),this.visual.append(e)}}click(t,e){const i=this.eventArgs(e);t.trigger("noteClick",i)||e.preventDefault()}over(t,e){const i=this.eventArgs(e);t.trigger("noteHover",i)||e.preventDefault()}out(t,e){const i=this.eventArgs(e);t.trigger("noteLeave",i)}eventArgs(t){const e=this.options;return Object.assign(this.fields,{element:ue(t),text:_(e.label)?e.label.text:"",visual:this.visual})}}C(Xd,{icon:{visible:!0,type:Ut},label:{position:ca,visible:!0,align:V,vAlign:V},line:{visible:!0},visible:!0,position:G,zIndex:2});const Yd=Xd;let Wd={format:(o,t)=>t,toString:o=>o,parseDate:o=>new Date(o),firstDay:()=>0};const $d=class iy{static register(t){Wd=t}static get implementation(){return Wd}},sy=/\{(\d+)(:[^\}]+)?\}/g,oy=class ny{constructor(t){this._intlService=t}get intl(){return this._intlService||$d.implementation}set intl(t){this._intlService=t}auto(t,...e){const i=this.intl;return jt(t)&&t.match(Uh)?i.format(t,...e):i.toString(e[0],t)}localeAuto(t,e,i){const s=this.intl;let n;return n=jt(t)&&t.match(Uh)?t.replace(sy,function(r,l,c){let h=e[parseInt(l,10)];return s.toString(h,c?c.substring(1):"",i)}):s.toString(e[0],t,i),n}},Ea=class ry{constructor(t,e={}){this._intlService=e.intlService,this.sender=e.sender||t,this.format=new oy(e.intlService),this.chart=t,this.rtl=!!e.rtl}get intl(){return this._intlService||$d.implementation}set intl(t){this._intlService=t,this.format.intl=t}notify(t,e){this.chart&&this.chart.trigger(t,e)}isPannable(t){const e=((this.chart||{}).options||{}).pannable;return e&&e.lock!==t}};let Pa;const Qd=class ay{static register(t){Pa=t}static create(t,e){let i;return i=Pa?Pa.create(t,e):new Ai(t,Object.assign({},{multiTouch:!0},e)),i}};function Zd(o,t){const{tickX:e,tickY:i,position:s}=o,n=new M.w({stroke:{width:t.width,color:t.color}});return o.vertical?n.moveTo(e,s).lineTo(e+t.size,s):n.moveTo(s,i).lineTo(s,i+t.size),Qt(n),n}function Kd(o,t){const{lineStart:e,lineEnd:i,position:s}=o,n=new M.w({stroke:{width:t.width,color:t.color,dashType:t.dashType}});return o.vertical?n.moveTo(e,s).lineTo(i,s):n.moveTo(s,e).lineTo(s,i),Qt(n),n}class qd extends K{constructor(t,e=new Ea){super(t),this.chartService=e,this.options.visible||(this.options=x({},this.options,{labels:{visible:!1},line:{visible:!1},margin:0,majorTickSize:0,minorTickSize:0})),this.options.minorTicks=x({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.minorTickType!==ha},this.options.minorTicks,{size:this.options.minorTickSize,align:this.options.minorTickType}),this.options.majorTicks=x({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.majorTickType!==ha},this.options.majorTicks,{size:this.options.majorTickSize,align:this.options.majorTickType}),this.initFields(),this.options._deferLabels||this.createLabels(),this.createTitle(),this.createNotes()}initFields(){}labelsRange(){return{min:this.options.labels.skip,max:this.labelsCount()}}normalizeLabelRotation(t){const e=t.rotation;ie(e)&&(t.alignRotation=e.align,t.rotation=e.angle)}createLabels(){const t=this.options,i=x({},t.labels,{align:t.vertical?$:V,zIndex:t.zIndex}),s=Math.max(1,i.step);if(this.clearLabels(),i.visible){this.normalizeLabelRotation(i),"auto"===i.rotation&&(i.rotation=0,t.autoRotateLabels=!0);const n=this.labelsRange();for(let r=n.min;r<n.max;r+=s){let c=this.createAxisLabel(r,i,{index:r,count:n.max});c&&(this.append(c),this.labels.push(c))}}}clearLabels(){this.children=Zt(this.children,t=>!(t instanceof Si)),this.labels=[]}clearTitle(){this.title&&(this.children=Zt(this.children,t=>t!==this.title),this.title=void 0)}clear(){this.clearLabels(),this.clearTitle()}lineBox(){const{options:t,box:e}=this,s=t.labels.mirror,n=s?e.x1:e.x2,r=s?e.y2:e.y1,l=t.line.width||0;return t.vertical?new k(n,e.y1,n,e.y2-l):new k(e.x1,r,e.x2-l,r)}createTitle(){const t=this.options,e=x({rotation:t.vertical?-90:0,text:"",zIndex:1,visualSize:!0},t.title);if(e.visible&&e.text){const i=new Ht(e.text,e);this.append(i),this.title=i}}createNotes(){const t=this.options,e=t.notes,i=e.data||[];this.notes=[];for(let s=0;s<i.length;s++){const n=x({},e,i[s]);n.value=this.parseNoteValue(n.value);const r=new Yd({value:n.value,text:n.label.text,dataItem:n},n,this.chartService);r.options.visible&&(_(r.options.position)?t.vertical&&!N(r.options.position,[U,$])?r.options.position=t.reverse?U:$:!t.vertical&&!N(r.options.position,[G,Y])&&(r.options.position=t.reverse?Y:G):r.options.position=t.vertical?t.reverse?U:$:t.reverse?Y:G,this.append(r),this.notes.push(r))}}parseNoteValue(t){return t}renderVisual(){super.renderVisual(),this.createPlotBands()}createVisual(){super.createVisual(),this.createBackground(),this.createLine()}gridLinesVisual(){let t=this._gridLines;return t||(t=this._gridLines=new et.A({zIndex:-2}),this.appendVisual(this._gridLines)),t}createTicks(t){const e=this.options,i=this.lineBox(),s=e.labels.mirror,n=e.majorTicks.visible?e.majorUnit:0,r={vertical:e.vertical};function l(c,h,d){const u=c.length,p=Math.max(1,h.step);if(h.visible)for(let g=h.skip;g<u;g+=p)_(d)&&g%d==0||(r.tickX=s?i.x2:i.x2-h.size,r.tickY=s?i.y1-h.size:i.y1,r.position=c[g],t.append(Zd(r,h)))}l(this.getMajorTickPositions(),e.majorTicks),l(this.getMinorTickPositions(),e.minorTicks,n/e.minorUnit)}createLine(){const t=this.options,e=t.line,i=this.lineBox();if(e.width>0&&e.visible){const s=new M.w({stroke:{width:e.width,color:e.color,dashType:e.dashType}});s.moveTo(i.x1,i.y1).lineTo(i.x2,i.y2),t._alignLines&&Qt(s);const n=this._lineGroup=new et.A;n.append(s),this.visual.append(n),this.createTicks(n)}}getActualTickSize(){const t=this.options;let e=0;return t.majorTicks.visible&&t.minorTicks.visible?e=Math.max(t.majorTicks.size,t.minorTicks.size):t.majorTicks.visible?e=t.majorTicks.size:t.minorTicks.visible&&(e=t.minorTicks.size),e}createBackground(){const{options:t,box:e}=this,i=t.background;i&&(this._backgroundPath=M.w.fromRect(e.toRect(),{fill:{color:i},stroke:null}),this.visual.append(this._backgroundPath))}createPlotBands(){const t=this.options,e=t.plotBands||[],i=t.vertical,s=this.plotArea;if(0===e.length)return;const n=this._plotbandGroup=new et.A({zIndex:-1}),r=Zt(this.pane.axes,l=>l.options.vertical!==this.options.vertical)[0];for(let l=0;l<e.length;l++){let h,d,p,c=e[l],u=c.label;if(i?(h=(r||s.axisX).lineBox(),d=this.getSlot(c.from,c.to,!0)):(h=this.getSlot(c.from,c.to,!0),d=(r||s.axisY).lineBox()),u&&(u.vAlign=u.position||U,p=this.createPlotBandLabel(u,c,new k(h.x1,d.y1,h.x2,d.y2))),0!==h.width()&&0!==d.height()){const g=new At.A([h.x1,d.y1],[h.width(),d.height()]),f=M.w.fromRect(g,{fill:{color:c.color,opacity:c.opacity},stroke:null});n.append(f),p&&n.append(p)}}this.appendVisual(n)}createPlotBandLabel(t,e,i){if(!1===t.visible)return null;let n,s=t.text;if(_(t)&&t.visible){const r=kt(t);r?s=r({text:s,item:e}):t.format&&(s=this.chartService.format.auto(t.format,s)),t.color||(t.color=this.options.labels.color)}return n=new Ht(s,t),n.reflow(i),n.renderVisual(),n.visual}createGridLines(t){const e=this.options,{minorGridLines:i,majorGridLines:s,minorUnit:n,vertical:r}=e,l=t.options.line.visible,c=s.visible?e.majorUnit:0,h=t.lineBox(),d=h[r?"y1":"x1"],u={lineStart:h[r?"x1":"y1"],lineEnd:h[r?"x2":"y2"],vertical:r},p=[],g=this.gridLinesVisual();function f(m,v,y){const w=m.length,E=Math.max(1,v.step);if(v.visible)for(let L=v.skip;L<w;L+=E){let F=A(m[L]);N(F,p)||L%y!=0&&(!l||d!==F)&&(u.position=F,g.append(Kd(u,v)),p.push(F))}}return f(this.getMajorTickPositions(),s),f(this.getMinorTickPositions(),i,c/n),g.children}reflow(t){const{options:e,labels:i,title:s}=this,n=e.vertical,r=i.length,l=n?ho:ao,c=s?s.box[l]():0,h=this.getActualTickSize()+e.margin+c,u=((this.getRoot()||{}).box||t)[l]();let p=0;for(let g=0;g<r;g++){let f=i[g].box[l]();f+h<=u&&(p=Math.max(p,f))}this.box=n?new k(t.x1,t.y1,t.x1+p+h,t.y2):new k(t.x1,t.y1,t.x2,t.y1+p+h),this.arrangeTitle(),this.arrangeLabels(),this.arrangeNotes()}getLabelsTickPositions(){return this.getMajorTickPositions()}labelTickIndex(t){return t.index}arrangeLabels(){const{options:t,labels:e}=this,i=this.labelsBetweenTicks(),s=t.vertical,n=t.labels.mirror,r=this.getLabelsTickPositions();for(let l=0;l<e.length;l++){const c=e[l],h=this.labelTickIndex(c),d=s?c.box.height():c.box.width(),u=r[h],p=r[h+1];let g,f;s?(g=i?u+(p-u)/2-d/2:u-d/2,f=g):i?(g=u,f=p):(g=u-d/2,f=g+d),this.positionLabel(c,n,g,f)}}positionLabel(t,e,i,s=i){const n=this.options,r=n.vertical,l=this.lineBox(),c=this.getActualTickSize()+n.margin;let h;if(r){let d=l.x2;e?(d+=c,t.options.rotationOrigin=U):(d-=c+t.box.width(),t.options.rotationOrigin=$),h=t.box.move(d,i)}else{let d=l.y1;e?(d-=c+t.box.height(),t.options.rotationOrigin=Y):(d+=c,t.options.rotationOrigin=G),h=new k(i,d,s,d+t.box.height())}t.reflow(h)}autoRotateLabelAngle(t,e){return t.width()<e?0:t.height()>e?-90:-45}autoRotateLabels(){if(!this.options.autoRotateLabels||this.options.vertical)return!1;const t=this.getMajorTickPositions(),e=this.labels,i=Math.min(e.length,t.length-1);let s=0;for(let n=0;n<i;n++){const r=Math.abs(t[n+1]-t[n]),c=this.autoRotateLabelAngle(e[n].box,r);if(0!==c&&(s=c),-90===s)break}if(0!==s){for(let n=0;n<e.length;n++)e[n].options.rotation=s,e[n].reflow(new k);return!0}}arrangeTitle(){const{options:t,title:e}=this,i=t.labels.mirror;e&&(t.vertical?(e.options.align=i?$:U,e.options.vAlign=e.options.position):(e.options.align=e.options.position,e.options.vAlign=i?G:Y),e.reflow(this.box))}arrangeNotes(){for(let t=0;t<this.notes.length;t++){const e=this.notes[t],i=e.options.value;let s;_(i)?(this.shouldRenderNote(i)?e.show():e.hide(),s=this.noteSlot(i)):e.hide(),e.reflow(s||this.lineBox())}}noteSlot(t){return this.getSlot(t)}alignTo(t){const e=t.lineBox(),i=this.options.vertical,s=i?D:P;this.box.snapTo(e,s),i?this.box.shrink(0,this.lineBox().height()-e.height()):this.box.shrink(this.lineBox().width()-e.width(),0),this.box[s+1]-=this.lineBox()[s+1]-e[s+1],this.box[s+2]-=this.lineBox()[s+2]-e[s+2]}axisLabelText(t,e,i){let s;const n=kt(e),r=()=>e.format?this.chartService.format.localeAuto(e.format,[t],e.culture):t;return s=n?n(Object.assign({},i,{get text(){return r()},value:t,format:e.format,culture:e.culture})):r(),s}slot(t,e,i){const s=this.getSlot(t,e,i);if(s)return s.toRect()}contentBox(){const t=this.box.clone(),e=this.labels;if(e.length){const i=this.options.vertical?D:P;if(this.chartService.isPannable(i)){const s=this.maxLabelOffset();t[i+1]-=s.start,t[i+2]+=s.end}else{e[0].options.visible&&t.wrap(e[0].box);const s=e[e.length-1];s.options.visible&&t.wrap(s.box)}}return t}maxLabelOffset(){const{vertical:t,reverse:e}=this.options,i=this.labelsBetweenTicks(),s=this.getLabelsTickPositions(),n=t?D:P,r=this.labels,l=e?1:0,c=e?0:1;let h=0,d=0;for(let u=0;u<r.length;u++){const p=r[u],g=this.labelTickIndex(p);let f,m;i?(f=s[g+l],m=s[g+c]):f=m=s[g],h=Math.max(h,f-p.box[n+1]),d=Math.max(d,p.box[n+2]-m)}return{start:h,end:d}}limitRange(t,e,i,s,n){const r=this.options;if(t<i&&n<0&&(!_(r.min)||r.min<=i)||s<e&&n>0&&(!_(r.max)||s<=r.max))return null;if(e<i&&n>0||s<t&&n<0)return{min:t,max:e};const l=e-t;let c=t,h=e;return t<i&&n<0?(c=R(t,i,s),h=R(t+l,i+l,s)):e>s&&n>0&&(h=R(e,i,s),c=R(e-l,i,s-l)),{min:c,max:h}}valueRange(){return{min:this.seriesMin,max:this.seriesMax}}lineDir(){const{vertical:t,reverse:e}=this.options;return(t?-1:1)*(e?-1:1)}lineInfo(){const{vertical:t}=this.options,e=this.lineBox(),i=t?e.height():e.width(),s=t?D:P,n=this.lineDir(),l=s+(1===n?1:2).toString();return{axis:s,axisOrigin:l,axisDir:n,lineBox:e,lineSize:i,lineStart:e[l]}}pointOffset(t){const{axis:e,axisDir:i,axisOrigin:s,lineBox:n,lineSize:r}=this.lineInfo();return(i>0?t[e]-n[s]:n[s]-t[e])/r}scaleToDelta(t,e){const s=R(t,-.999,.999);let n;return n=s>0?e*Math.min(1,s):e-e/(1+s),n}labelsBetweenTicks(){return!this.options.justified}prepareUserOptions(){}}C(qd,{labels:{visible:!0,rotation:0,mirror:!1,step:1,skip:0},line:{width:1,color:pt,visible:!0},title:{visible:!0,position:V},majorTicks:{align:lo,size:4,skip:0,step:1},minorTicks:{align:lo,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:lo,minorTickType:ha,majorGridLines:{skip:0,step:1},minorGridLines:{visible:!1,width:1,color:pt,skip:0,step:1},margin:5,visible:!0,reverse:!1,justified:!0,notes:{label:{text:""}},_alignLines:!0,_deferLabels:!1});const rn=qd,Ao="milliseconds",Da="seconds",Ia="minutes",an="hours",Ce="days",ln="weeks",Ti="months",Ie="years",Ra=1e3,ls=60*Ra,So=60*ls,Re=24*So,La=7*Re,Oa=31*Re,Ba=365*Re,ke={years:Ba,months:Oa,weeks:La,days:Re,hours:So,minutes:ls,seconds:Ra,milliseconds:1};function Va(o,t){return o.getTime()-t-(o.getTimezoneOffset()-t.getTimezoneOffset())*ls}function Mt(o,t){return new Date(o.getTime()+t)}function it(o){let t;return o instanceof Date?t=o:o&&(t=new Date(o)),t}function To(o,t){return 0===t&&23===o.getHours()&&(o.setHours(o.getHours()+2),!0)}function It(o,t,e,i){let s=o;if(o){let n=it(o);const r=n.getHours();e===Ie?(s=new Date(n.getFullYear()+t,0,1),To(s,0)):e===Ti?(s=new Date(n.getFullYear(),n.getMonth()+t,1),To(s,r)):e===ln?(s=It(function cy(o,t=0){let e=0,i=o.getDay();if(!isNaN(i))for(;i!==t;)0===i?i=6:i--,e++;return Mt(o,-e*Re)}(n,i),7*t,Ce),To(s,r)):e===Ce?(s=new Date(n.getFullYear(),n.getMonth(),n.getDate()+t),To(s,r)):e===an?s=function hy(o,t){const e=new Date(o);e.setMinutes(0,0,0);const i=(o.getTimezoneOffset()-e.getTimezoneOffset())*ls;return Mt(e,i+t*So)}(n,t):e===Ia?(s=Mt(n,t*ls),s.getSeconds()>0&&s.setSeconds(0)):e===Da?s=Mt(n,t*Ra):e===Ao&&(s=Mt(n,t)),e!==Ao&&s.getMilliseconds()>0&&s.setMilliseconds(0)}return s}function Fa(o,t,e){return It(it(o),0,t,e)}function Jd(o,t,e){const i=it(o);return i&&Fa(i,t,e).getTime()===i.getTime()?i:It(i,1,t,e)}function Mo(o,t){return o&&t?o.getTime()-t.getTime():-1}function Ae(o,t){return o.getTime()-t}function st(o){if(Pt(o)){let t=[];for(let e=0;e<o.length;e++)t.push(st(o[e]));return t}if(o)return it(o).getTime()}function Eo(o,t){return o&&t?st(o)===st(t):o===t}function tu(o,t,e){return Va(o,t)/ke[e]}function Mi(o,t,e,i){const s=it(o),n=it(t);let r;return r=e===Ti?s.getMonth()-n.getMonth()+12*(s.getFullYear()-n.getFullYear())+tu(s,new Date(s.getFullYear(),s.getMonth()),Ce)/new Date(s.getFullYear(),s.getMonth()+1,0).getDate():e===Ie?s.getFullYear()-n.getFullYear()+Mi(s,new Date(s.getFullYear(),0),Ti,1)/12:e===Ce||e===ln?tu(s,n,e):Ae(s,t)/ke[e],r/i}function Na(o,t,e){let i;return i=e===Ie?t.getFullYear()-o.getFullYear():e===Ti?12*Na(o,t,Ie)+t.getMonth()-o.getMonth():e===Ce?Math.floor(Ae(t,o)/Re):Math.floor(Ae(t,o)/ke[e]),i}function Dt(o,t){let e;return e=jt(t)&&o.parseDate(t)||it(t),e}function eu(o,t){if(Pt(t)){const e=[];for(let i=0;i<t.length;i++)e.push(Dt(o,t[i]));return e}return Dt(o,t)}function iu(o,t){return X(o.weekStartDay)?o.weekStartDay:t&&t.firstDay?t.firstDay():0}class Po extends rn{initFields(){this._ticks={}}categoriesHash(){return""}clone(){const t=new Po(Object.assign({},this.options,{categories:this.options.srcCategories}),this.chartService);return t.createLabels(),t}initUserOptions(t){const e=t.categories||[],i=_(t.min),s=_(t.max);if(t.srcCategories=t.categories=e,(i||s)&&e.length){const n=i?Math.floor(t.min):0;let r;r=s?t.justified?Math.floor(t.max)+1:Math.ceil(t.max):e.length,t.categories=t.categories.slice(n,r)}return t}rangeIndices(){const t=this.options,e=t.categories.length||1,i=X(t.min)?t.min%1:0;let s;return s=X(t.max)&&t.max%1!=0&&t.max<this.totalRange().max?e-(1-t.max%1):e-(t.justified?1:0),{min:i,max:s}}range(){const t=this.options;return{min:X(t.min)?t.min:0,max:X(t.max)?t.max:this.totalRange().max}}roundedRange(){return this.range()}totalRange(){const t=this.options;return{min:0,max:Math.max(this._seriesMax||0,t.srcCategories.length)-(t.justified?1:0)}}scaleOptions(){const{min:t,max:e}=this.rangeIndices(),i=this.lineBox();return{scale:(this.options.vertical?i.height():i.width())/(e-t||1)*(this.options.reverse?-1:1),box:i,min:t,max:e}}arrangeLabels(){super.arrangeLabels(),this.hideOutOfRangeLabels()}hideOutOfRangeLabels(){const{box:t,labels:e}=this;if(e.length>0){const i=this.options.vertical?D:P,s=t[i+1],n=t[i+2],r=e[0],l=mt(e);(r.box[i+1]>n||r.box[i+2]<s)&&(r.options.visible=!1),(l.box[i+1]>n||l.box[i+2]<s)&&(l.options.visible=!1)}}getMajorTickPositions(){return this.getTicks().majorTicks}getMinorTickPositions(){return this.getTicks().minorTicks}getLabelsTickPositions(){return this.getTicks().labelTicks}tickIndices(t){const{min:e,max:i}=this.rangeIndices(),s=Math.ceil(i);let n=Math.floor(e);const r=[];for(;n<=s;)r.push(n),n+=t;return r}getTickPositions(t){const{vertical:e,reverse:i}=this.options,{scale:s,box:n,min:r}=this.scaleOptions(),l=n[(e?D:P)+(i?2:1)],c=this.tickIndices(t),h=[];for(let d=0;d<c.length;d++)h.push(l+A(s*(c[d]-r),3));return h}getTicks(){const t=this.options,e=this._ticks,i=this.rangeIndices(),s=this.lineBox(),n=s.getHash()+i.min+","+i.max+t.reverse+t.justified;if(e._hash!==n){const r=t.minorTicks.visible||t.minorGridLines.visible;e._hash=n,e.labelTicks=this.getTickPositions(1),e.majorTicks=this.filterOutOfRangePositions(e.labelTicks,s),e.minorTicks=r?this.filterOutOfRangePositions(this.getTickPositions(.5),s):[]}return e}filterOutOfRangePositions(t,e){if(!t.length)return t;const i=this.options.vertical?D:P,s=c=>e[i+1]<=c&&c<=e[i+2],n=t.length-1;let r=0;for(;!s(t[r])&&r<=n;)r++;let l=n;for(;!s(t[l])&&l>=0;)l--;return t.slice(r,l+1)}lineInfo(){const{vertical:t,reverse:e}=this.options,i=this.lineBox(),s=t?i.height():i.width(),n=t?D:P,r=e?-1:1,c=n+(1===r?1:2).toString();return{axis:n,axisOrigin:c,axisDir:r,lineBox:i,lineSize:s,lineStart:i[c]}}lineDir(){const{reverse:t}=this.options;return t?-1:1}getSlot(t,e,i){const s=this.options,{reverse:n,justified:r}=s,{scale:l,box:c,min:h}=this.scaleOptions(),{axis:d,lineStart:u}=this.lineInfo(),p=c.clone(),g=!_(e),f=O(t,0);let m=O(e,f);m=Math.max(m-1,f),m=Math.max(f,m);let v=u+(f-h)*l,y=u+(m+1-h)*l;return g&&r&&(y=v),i&&(v=R(v,c[d+1],c[d+2]),y=R(y,c[d+1],c[d+2])),p[d+1]=n?y:v,p[d+2]=n?v:y,p}limitSlot(t){const i=this.options.vertical?D:P,s=this.lineBox(),n=t.clone();return n[i+1]=R(t[i+1],s[i+1],s[i+2]),n[i+2]=R(t[i+2],s[i+1],s[i+2]),n}slot(t,e,i){const s=Math.floor(this.options.min||0);let n=t,r=e;return"string"==typeof n?n=this.categoryIndex(n):X(n)&&(n-=s),"string"==typeof r?r=this.categoryIndex(r):X(r)&&(r-=s),super.slot(n,r,i)}pointCategoryIndex(t){const{reverse:e,justified:i,vertical:s}=this.options,n=s?D:P,{scale:r,box:l,min:c,max:h}=this.scaleOptions(),u=l[n+1],g=t[n];if(g<u||g>l[n+2])return null;let f=(e?h:c)+(g-u)/r;const m=f%1;return i?f=Math.round(f):0===m&&f>0&&f--,Math.floor(f)}getCategory(t){const e=this.pointCategoryIndex(t);return null===e?null:this.options.categories[e]}categoryIndex(t){return this.totalIndex(t)-Math.floor(this.options.min||0)}categoryAt(t,e){const i=this.options;return(e?i.srcCategories:i.categories)[t]}categoriesCount(){return(this.options.categories||[]).length}translateRange(t){const e=this.options,i=this.lineBox(),s=e.vertical?i.height():i.width(),n=e.categories.length,l=A(t/(s/n),J);return{min:l,max:n+l}}scaleRange(t,e){const i=Math.abs(this.pointOffset(e)),s=this.limitedRangeIndices(),r=this.scaleToDelta(t,s.max-s.min),h=s.min+i*r;let d=s.max-(1-i)*r;return d-h<.1&&(d=h+.1),{min:h,max:d}}zoomRange(t,e){const{min:i,max:s}=this.totalRange(),n=this.scaleRange(t,e);return{min:R(n.min,i,s),max:R(n.max,i,s)}}labelsCount(){const t=this.labelsRange();return t.max-t.min}labelsRange(){const t=this.options,{justified:e,labels:i}=t;let{min:s,max:n}=this.limitedRangeIndices(!0);const r=Math.floor(s);let l;return e?(s=Math.ceil(s),n=Math.floor(n)):(s=Math.floor(s),n=Math.ceil(n)),l=s>i.skip?i.skip+i.step*Math.ceil((s-i.skip)/i.step):i.skip,{min:l-r,max:(t.categories.length?n+(e?1:0):0)-r}}createAxisLabel(t,e,i){const s=this.options,n=s.dataItems?s.dataItems[t]:null,r=O(s.categories[t],"");i.dataItem=n;const l=this.axisLabelText(r,e,i);return new Si(r,l,t,n,e)}shouldRenderNote(t){const e=this.limitedRangeIndices();return Math.floor(e.min)<=t&&t<=Math.ceil(e.max)}noteSlot(t){const i=t-Math.floor(this.options.min||0);return this.getSlot(i)}arrangeNotes(){super.arrangeNotes(),this.hideOutOfRangeNotes()}hideOutOfRangeNotes(){const{notes:t,box:e}=this;if(t&&t.length){const i=this.options.vertical?D:P,s=e[i+1],n=e[i+2];for(let r=0;r<t.length;r++){const l=t[r];l.box&&(n<l.box[i+1]||l.box[i+2]<s)&&l.hide()}}}pan(t){const e=this.limitedRangeIndices(!0),{scale:i}=this.scaleOptions(),s=A(t/i,J),n=this.totalRange();return this.limitRange(e.min+s,e.max+s,0,n.max,s)}pointsRange(t,e){const{reverse:i,vertical:s}=this.options,n=s?D:P,r=this.limitedRangeIndices(!0),{scale:l,box:c}=this.scaleOptions(),h=c[n+(i?2:1)],p=r.min+(t[n]-h)/l,g=r.min+(e[n]-h)/l,f=Math.min(p,g),m=Math.max(p,g);if(m-f>=.01)return{min:f,max:m}}valueRange(){return this.range()}totalIndex(t){const e=this.options;return this._categoriesMap?this._categoriesMap.get(t):function uy(o,t){if(o instanceof Date){const e=t.length;for(let i=0;i<e;i++)if(Eo(t[i],o))return i;return-1}return t.indexOf(o)}(t,e.srcCategories)}currentRangeIndices(){const t=this.options;let i,e=0;return X(t.min)&&(e=Math.floor(t.min)),i=X(t.max)?t.justified?Math.floor(t.max):Math.ceil(t.max)-1:this.totalCount()-1,{min:e,max:i}}limitedRangeIndices(t){const e=this.options;let s,i=X(e.min)?e.min:0;if(s=X(e.max)?e.max:X(e.min)?i+e.categories.length:this.totalRange().max||1,t){const n=this.totalRange();i=R(i,0,n.max),s=R(s,0,n.max)}return{min:i,max:s}}totalRangeIndices(){return{min:0,max:this.totalRange().max||1}}indexCategories(){if(!this._categoriesMap){const t=this._categoriesMap=new Fv,e=this.options.srcCategories;for(let i=0;i<e.length;i++)t.set(e[i],i)}}totalCount(){return Math.max(this.options.srcCategories.length,this._seriesMax||0)}}C(Po,{type:"category",vertical:!1,majorGridLines:{visible:!1,width:1,color:pt},labels:{zIndex:1},justified:!1,_deferLabels:!0});const Le=Po,ou={milliseconds:"HH:mm:ss.fff",seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},Oe=[Ao,Da,Ia,an,Ce,ln,Ti,Ie],Do="fit";function Io(o,t){t&&(o._range=void 0);let e=o._range;return e||(e=o._range=va(o),e.min=it(e.min),e.max=it(e.max)),e}class gy{constructor(t){this.options=t}displayIndices(){return{min:0,max:1}}displayRange(){return{}}total(){return{}}valueRange(){return{}}valueIndex(){return-1}values(){return[]}totalIndex(){return-1}valuesCount(){return 0}totalCount(){return 0}dateAt(){return null}}class za{constructor(t,e,i){this.options=i,i.baseUnitStep=i.baseUnitStep||1;const{roundToBaseUnit:s,justified:n}=i;this.start=It(t,0,i.baseUnit,i.weekStartDay);const r=this.roundToTotalStep(e),l=!n&&Eo(e,r)&&!i.justifyEnd;this.end=this.roundToTotalStep(e,!n,l?1:0);const c=i.min||t;this.valueStart=this.roundToTotalStep(c),this.displayStart=s?this.valueStart:c;const h=i.max;if(h){const d=!n&&Eo(h,this.roundToTotalStep(h))?-1:0;this.valueEnd=this.roundToTotalStep(h,!1,d),this.displayEnd=s?this.roundToTotalStep(h,!n):i.max}else this.valueEnd=r,this.displayEnd=s||l?this.end:e;this.valueEnd<this.valueStart&&(this.valueEnd=this.valueStart),this.displayEnd<=this.displayStart&&(this.displayEnd=this.roundToTotalStep(this.displayStart,!1,1))}displayRange(){return{min:this.displayStart,max:this.displayEnd}}displayIndices(){if(!this._indices){const t=this.options,{baseUnit:e,baseUnitStep:i}=t,s=Mi(this.displayStart,this.valueStart,e,i),n=Mi(this.displayEnd,this.valueStart,e,i);this._indices={min:s,max:n}}return this._indices}total(){return{min:this.start,max:this.end}}totalCount(){return this.totalIndex(this.end)+(this.options.justified?1:0)}valueRange(){return{min:this.valueStart,max:this.valueEnd}}valueIndex(t){const e=this.options;return Math.floor(Mi(t,this.valueStart,e.baseUnit,e.baseUnitStep))}totalIndex(t){const e=this.options;return Math.floor(Mi(t,this.start,e.baseUnit,e.baseUnitStep))}dateIndex(t){const e=this.options;return Mi(t,this.valueStart,e.baseUnit,e.baseUnitStep)}valuesCount(){return this.valueIndex(this.valueEnd)+1}values(){let t=this._values;if(!t){const e=this.options,i=this.valueRange();this._values=t=[];for(let s=i.min;s<=i.max;)t.push(s),s=It(s,e.baseUnitStep,e.baseUnit,e.weekStartDay)}return t}dateAt(t,e){const i=this.options;return It(e?this.start:this.valueStart,i.baseUnitStep*t,i.baseUnit,i.weekStartDay)}roundToTotalStep(t,e,i){const{baseUnit:s,baseUnitStep:n,weekStartDay:r}=this.options,l=this.start,c=Mi(t,l,s,n);let h=e?Math.ceil(c):Math.floor(c);return i&&(h+=i),It(l,h*n,s,r)}}function au(o,t,e){const i=Io(o.categories),s=(o.max||i.max)-(o.min||i.min),{autoBaseUnitSteps:n,maxDateGroups:r}=o,l=o.baseUnit===Do;let p,g,f,c=t?Oe.indexOf(t):0,h=l?Oe[c++]:o.baseUnit,d=s/ke[h],u=d;for(;!g||d>=r;){p=p||n[h].slice(0);do{f=p.shift()}while(f&&t===h&&f<e);if(f)g=f,d=u/g;else{if(h===mt(Oe)){g=Math.ceil(u/r);break}if(!l){d>r&&(g=Math.ceil(u/r));break}h=Oe[c++]||mt(Oe),u=s/ke[h],p=null}}o.baseUnitStep=g,o.baseUnit=h}class Ro extends Le{clone(){const t=new Ro(Object.assign({},this.options),this.chartService);return t.createLabels(),t}categoriesHash(){const t=this.dataRange.total().min;return this.options.baseUnit+this.options.baseUnitStep+t}initUserOptions(t){return t}initFields(){super.initFields();const t=this.chartService,e=t.intl;let i=this.options,s=i.categories||[];if(s._parsed||(s=eu(e,s),s._parsed=!0),i=x({roundToBaseUnit:!0},i,{categories:s,min:Dt(e,i.min),max:Dt(e,i.max),weekStartDay:iu(i,e)}),t.panning&&t.isPannable(i.vertical?D:P)&&(i.roundToBaseUnit=!1),i.userSetBaseUnit=i.userSetBaseUnit||i.baseUnit,i.userSetBaseUnitStep=i.userSetBaseUnitStep||i.baseUnitStep,this.options=i,i.srcCategories=s,s.length>0){const n=Io(s,!0),r=i.maxDivisions,l=function my(o){const t=(o.baseUnit||"").toLowerCase();return t!==Do&&!N(t,Oe)&&function fy(o){const t=o.categories,e=_(t)?t.length:0;let s,n,i=ft;for(let r=0;r<e;r++){const l=t[r];if(l&&s){let c=Math.abs(Va(l,s));0!==c&&(i=Math.min(i,c),n=i>=Ba?Ie:i>=Oa-3*Re?Ti:i>=La?ln:i>=Re?Ce:i>=So?an:i>=ls?Ia:Da)}s=l}o.baseUnit=n||Ce}(o),(t===Do||"auto"===o.baseUnitStep)&&au(o),o}(i),c=i._forecast;if(c&&(c.before>0&&(n.min=It(n.min,-c.before,l.baseUnit,l.weekStartDay)),c.after>0&&(n.max=It(n.max,c.after,l.baseUnit,l.weekStartDay))),this.dataRange=new za(n.min,n.max,l),r){const h=this.dataRange.displayRange(),d=Object.assign({},i,{justified:!0,roundToBaseUnit:!1,baseUnit:"fit",min:h.min,max:h.max,maxDateGroups:r}),u=this.dataRange.options;au(d,u.baseUnit,u.baseUnitStep),this.divisionRange=new za(n.min,n.max,d)}else this.divisionRange=this.dataRange}else i.baseUnit=i.baseUnit||Ce,this.dataRange=this.divisionRange=new gy(i);this.rangeLabels=[]}tickIndices(t){const{dataRange:e,divisionRange:i}=this,s=i.valuesCount();if(!this.options.maxDivisions||!s)return super.tickIndices(t);const n=[];let r=i.values(),l=0;this.options.justified||(r=r.concat(i.dateAt(s)),l=.5);for(let c=0;c<r.length;c++)if(n.push(e.dateIndex(r[c])+l),1!==t&&c>=1){const h=n.length-1;n.splice(c,0,n[h-1]+(n[h]-n[h-1])*t)}return n}shouldRenderNote(t){const e=this.range(),i=this.options.categories||[];return Mo(t,e.min)>=0&&Mo(t,e.max)<=0&&i.length}parseNoteValue(t){return Dt(this.chartService.intl,t)}noteSlot(t){return this.getSlot(t)}translateRange(t){const e=this.options,{baseUnit:i,weekStartDay:s,vertical:n}=e,r=this.lineBox(),l=n?r.height():r.width();let c=this.range();const d=A(t/(l/(c.max-c.min)),J);if(c.min&&c.max){const u=Mt(e.min||c.min,d),p=Mt(e.max||c.max,d);c={min:It(u,0,i,s),max:It(p,0,i,s)}}return c}labelsRange(){return{min:this.options.labels.skip,max:this.divisionRange.valuesCount()}}pan(t){if(this.isEmpty())return null;const e=this.options,i=this.lineBox(),s=e.vertical?i.height():i.width(),{min:n,max:r}=this.dataRange.displayRange(),l=this.dataRange.total(),h=A(t/(s/(r-n)),J)*(e.reverse?-1:1),d=Mt(n,h),u=Mt(r,h),p=this.limitRange(st(d),st(u),st(l.min),st(l.max),h);return p?(p.min=it(p.min),p.max=it(p.max),p.baseUnit=e.baseUnit,p.baseUnitStep=e.baseUnitStep||1,p.userSetBaseUnit=e.userSetBaseUnit,p.userSetBaseUnitStep=e.userSetBaseUnitStep,p):void 0}pointsRange(t,e){if(this.isEmpty())return null;const i=super.pointsRange(t,e),s=this.dataRange.displayRange(),n=this.dataRange.displayIndices(),r=Ae(s.max,s.min)/(n.max-n.min),l=this.options;return{min:Mt(s.min,i.min*r),max:Mt(s.min,i.max*r),baseUnit:l.userSetBaseUnit||l.baseUnit,baseUnitStep:l.userSetBaseUnitStep||l.baseUnitStep}}scaleRange(t,e){if(this.isEmpty())return{};const i=this.options,s=i.userSetBaseUnit===Do,n=this.dataRange.total(),{min:r,max:l}=this.dataRange.displayRange(),c=Math.abs(this.pointOffset(e)),d=this.scaleToDelta(t,l-r),u=Math.round(c*d),p=Math.round((1-c)*d);let{baseUnit:g}=this.dataRange.options,f=new Date(r.getTime()+u),m=new Date(l.getTime()-p);if(s){const{autoBaseUnitSteps:v,maxDateGroups:y}=i,w=mt(v[g])*y*ke[g],E=Ae(l,r),L=Ae(m,f);let H,Q,F=Oe.indexOf(g);if(L<ke[g]&&g!==Ao)g=Oe[F-1],H=mt(v[g]),Q=(E-(y-1)*H*ke[g])/2,f=Mt(r,Q),m=Mt(l,-Q);else if(L>w&&g!==Ie){let tt=0;do{F++,g=Oe[F],tt=0,Q=2*ke[g];do{H=v[g][tt],tt++}while(tt<v[g].length&&Q*H<E)}while(g!==Ie&&Q*H<E);Q=(Q*H-E)/2,Q>0&&(f=Mt(r,-Q),m=Mt(l,Q),f=Mt(f,R(m,n.min,n.max)-m),m=Mt(m,R(f,n.min,n.max)-f))}}return f&&m&&Ae(m,f)>0?{min:f,max:m,baseUnit:i.userSetBaseUnit||i.baseUnit,baseUnitStep:i.userSetBaseUnitStep||i.baseUnitStep}:void 0}zoomRange(t,e){const i=this.dataRange.total(),s=this.scaleRange(t,e);return s&&(s.min<i.min&&(s.min=i.min),s.max>i.max&&(s.max=i.max)),s}range(){return this.dataRange.displayRange()}createLabels(){super.createLabels(),this.createRangeLabels()}clearLabels(){super.clearLabels(),this.rangeLabels=[]}arrangeLabels(){this.arrangeRangeLabels(),super.arrangeLabels()}arrangeRangeLabels(){const{options:t,rangeLabels:e}=this;if(0===e.length)return;const i=this.lineBox(),s=t.vertical,n=t.rangeLabels.mirror||t.labels.mirror,r=e[0];if(r){const c=s?i.y1-r.box.height()/2:i.x1;this.positionLabel(r,n,c)}const l=e[1];if(l){const c=s?i.y2-l.box.height()/2:i.x2;this.positionLabel(l,n,c)}}autoRotateLabels(){super.autoRotateLabels(),this.autoRotateRangeLabels()}hideOutOfRangeLabels(){super.hideOutOfRangeLabels(),this.hideOverlappingLabels()}hideOverlappingLabels(){const{rangeLabels:t,labels:e}=this;if(0===t.length)return;function i(r,l){return!(l.options.visible&&!l.box.overlaps(r.box)||(l.options.visible=!1,0))}const s=t[0];if(s&&s.options.visible)for(let r=0;r<e.length&&i(s,e[r]);r++);const n=t[1];if(n&&n.options.visible)for(let r=e.length-1;r>0&&i(n,e[r]);--r);}contentBox(){const t=super.contentBox(),e=this.rangeLabels;for(let i=0;i<e.length;i++){const s=e[i];s.options.visible&&t.wrap(s.box)}return t}createAxisLabel(t,e,i={}){const s=this.options,n=s.dataItems&&!s.maxDivisions?s.dataItems[t]:null,r=this.divisionRange.dateAt(t);e.format=e.format||e.dateFormats[this.divisionRange.options.baseUnit],i.dataItem=n;const c=this.axisLabelText(r,e,i);if(c)return new Si(r,c,t,n,e)}createRangeLabels(){const{displayStart:t,displayEnd:e}=this.divisionRange,i=this.options,s=Object.assign({},i.labels,i.rangeLabels,{align:V,zIndex:i.zIndex});if(!0!==s.visible)return;this.normalizeLabelRotation(s),s.alignRotation=V,"auto"===s.rotation&&(s.rotation=0,i.autoRotateRangeLabels=!0),s.format=s.format||s.dateFormats[this.divisionRange.options.baseUnit];const r=(h,d,u)=>{if(u){const p=new Si(d,u,h,null,s);this.append(p),this.rangeLabels.push(p)}};r(0,t,this.axisLabelText(t,s,{index:0,count:2})),r(1,e,this.axisLabelText(e,s,{index:1,count:2}))}autoRotateRangeLabels(){const t=this.rangeLabels;if(!this.options.autoRotateRangeLabels||this.options.vertical||2!==t.length)return;const e=(s,n,r)=>{const l=2*Math.abs(n[r+1]-n[r]),c=this.autoRotateLabelAngle(s.box,l);0!==c&&(s.options.rotation=c,s.reflow(new k))},i=this.getMajorTickPositions();e(t[0],i,0),e(t[1],i,i.length-2)}categoryIndex(t){return this.dataRange.valueIndex(t)}slot(t,e,i){const s=this.dataRange;let n=t,r=e;n instanceof Date&&(n=s.dateIndex(n)),r instanceof Date&&(r=s.dateIndex(r));const l=this.getSlot(n,r,i);if(l)return l.toRect()}getSlot(t,e,i){let s=t,n=e;return typeof s===Ys&&(s=this.categoryIndex(s)),typeof n===Ys&&(n=this.categoryIndex(n)),super.getSlot(s,n,i)}valueRange(){const e=Io(this.options.srcCategories);return{min:it(e.min),max:it(e.max)}}categoryAt(t,e){return this.dataRange.dateAt(t,e)}categoriesCount(){return this.dataRange.valuesCount()}rangeIndices(){return this.dataRange.displayIndices()}labelsBetweenTicks(){return!this.divisionRange.options.justified}prepareUserOptions(){this.isEmpty()||(this.options.categories=this.dataRange.values())}getCategory(t){const e=this.pointCategoryIndex(t);return null===e?null:this.dataRange.dateAt(e)}totalIndex(t){return this.dataRange.totalIndex(t)}currentRangeIndices(){const t=this.dataRange.valueRange();return{min:this.dataRange.totalIndex(t.min),max:this.dataRange.totalIndex(t.max)}}totalRange(){return this.dataRange.total()}totalRangeIndices(){const t=this.dataRange.total();return{min:this.dataRange.totalIndex(t.min),max:this.dataRange.totalIndex(t.max)}}totalCount(){return this.dataRange.totalCount()}isEmpty(){return!this.options.srcCategories.length}roundedRange(){if(!1!==this.options.roundToBaseUnit||this.isEmpty())return this.range();const t=this.options,e=Io(t.srcCategories);return new za(e.min,e.max,Object.assign({},t,{justified:!1,roundToBaseUnit:!0,justifyEnd:!1})).displayRange()}}C(Ro,{type:Ee,labels:{dateFormats:ou},rangeLabels:{visible:!1},autoBaseUnitSteps:{milliseconds:[1,10,100],seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10});const cn=Ro;function lu(o,t){return A(Math.floor(o/t)*t,J)}function Lo(o,t){return A(Math.ceil(o/t)*t,J)}function Oo(o){return Math.max(Math.min(o,3e5),-3e5)}const Ua=Math.pow(10,-9);class Bo extends rn{constructor(t,e,i,s){super(Object.assign({},i,{seriesMin:t,seriesMax:e}),s)}initUserOptions(t){const e=function by(o,t,e){const i=e.narrowRange;let s=function xy(o,t,e){if(!o&&!t)return 0;let i;if(o>=0&&t>=0){const s=o===t?0:o;if(!1===e||!e&&(t-s)/t>.2)return 0;i=Math.max(0,s-(t-s)/2)}else i=o;return i}(o,t,i),n=function vy(o,t,e){if(!o&&!t)return 1;let i;if(o<=0&&t<=0){const s=o===t?0:t;let n=Math.abs((s-o)/s);if(!1===e||!e&&n>.2)return 0;i=Math.min(0,s-(o-s)/2)}else i=t;return i}(o,t,i);const r=ns(s,n),l={majorUnit:r};return!1!==e.roundToMajorUnit&&(s<0&&cu(s,r,1/3)&&(s-=r),n>0&&cu(n,r,1/3)&&(n+=r)),l.min=lu(s,r),l.max=Lo(n,r),l}(t.seriesMin,t.seriesMax,t);return this.totalOptions=function yy(o,t){return{min:_(t.min)?Math.min(o.min,t.min):o.min,max:_(t.max)?Math.max(o.max,t.max):o.max,majorUnit:o.majorUnit}}(e,t),function wy(o,t){let i,s,e=t;if(t){(function _y(o,t){for(let e=0;e<t.length;e++){const i=t[e];null===o[i]&&(o[i]=void 0)}})(t,["min","max"]),i=_(t.min),s=_(t.max);const r=i||s;r&&t.min===t.max&&(t.min>0?t.min=0:t.max=1),t.majorUnit?(o.min=lu(o.min,t.majorUnit),o.max=Lo(o.max,t.majorUnit)):r&&(e=x(o,t),o.majorUnit=ns(e.min,e.max))}o.minorUnit=(e.majorUnit||o.majorUnit)/5;const n=x(o,e);return n.min>=n.max&&(i&&!s?n.max=n.min+n.majorUnit:!i&&s&&(n.min=n.max-n.majorUnit)),n}(e,t)}initFields(){this.totalMin=this.totalOptions.min,this.totalMax=this.totalOptions.max,this.totalMajorUnit=this.totalOptions.majorUnit,this.seriesMin=this.options.seriesMin,this.seriesMax=this.options.seriesMax}clone(){return new Bo(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)}startValue(){return 0}range(){const t=this.options;return{min:t.min,max:t.max}}getDivisions(t){if(0===t)return 1;const e=this.options;return Math.floor(A((e.max-e.min)/t,3))+1}getTickPositions(t,e){const i=this.options,{axisDir:s,axisOrigin:n,lineBox:r,lineSize:l}=this.lineInfo(),d=t*(l/(i.max-i.min)),u=this.getDivisions(t),p=[];let g=r[n],f=0;e&&(f=e/t);for(let m=0;m<u;m++)m%f!=0&&p.push(A(g,3)),g+=d*s;return p}getMajorTickPositions(){return this.getTickPositions(this.options.majorUnit)}getMinorTickPositions(){return this.getTickPositions(this.options.minorUnit)}getSlot(t,e,i=!1){const s=this.options,{axis:n,axisDir:r,lineBox:l,lineSize:c,lineStart:h}=this.lineInfo(),d=r*(c/(s.max-s.min));let u=O(t,e||0),p=O(e,t||0);i&&(u=R(u,s.min,s.max),p=R(p,s.min,s.max));const g=Math.min(u,p)-s.min,f=Math.max(u,p)-s.min,m=new k(l.x1,l.y1,l.x1,l.y1);return m[n+1]=Oo(h+d*(r>0?g:f)),m[n+2]=Oo(h+d*(r>0?f:g)),m}getValue(t){const e=this.options,i=Number(e.max),s=Number(e.min),n=this.pointOffset(t);return n<0||n>1?null:A(s+n*(i-s),J)}translateRange(t){const e=this.options,{vertical:i,reverse:s,max:n,min:r}=e,{lineSize:l}=this.lineInfo();let d=A(t/(l/(n-r)),J);return(i||s)&&!(i&&s)&&(d=-d),{min:r+d,max:n+d,offset:d}}labelsCount(){return this.getDivisions(this.options.majorUnit)}createAxisLabel(t,e,i){const s=this.options,n=A(s.min+t*s.majorUnit,J),r=this.axisLabelText(n,e,i);return new Si(n,r,t,null,e)}shouldRenderNote(t){const e=this.range();return e.min<=t&&t<=e.max}pan(t){const e=this.translateRange(t);return this.limitRange(e.min,e.max,this.totalMin,this.totalMax,e.offset)}pointsRange(t,e){const i=this.getValue(t),s=this.getValue(e),n=Math.min(i,s),r=Math.max(i,s);if(this.isValidRange(n,r))return{min:n,max:r}}scaleRange(t,e){const i=Math.abs(this.pointOffset(e)),n=this.scaleToDelta(t,this.options.max-this.options.min),l=(1-i)*n,c=A(this.options.min+i*n,J);let h=A(this.options.max-l,J);return h-c<Ua&&(h=c+Ua),{min:c,max:h}}zoomRange(t,e){const{totalMin:i,totalMax:s}=this,n=this.scaleRange(t,e);return{min:R(n.min,i,s),max:R(n.max,i,s),narrowRange:!1}}isValidRange(t,e){return e-t>Ua}}function cu(o,t,e){const i=A(Math.abs(o%t),J);return 0===i||i>t*(1-e)}C(Bo,{type:"numeric",min:0,max:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:pt},labels:{format:"#.####################"},zIndex:1});const ae=Bo;class Vo extends rn{constructor(t,e,i,s){const n=it(t),r=it(e),l=s.intl;let c=i||{};c=x(c||{},{min:Dt(l,c.min),max:Dt(l,c.max),axisCrossingValue:eu(l,c.axisCrossingValues||c.axisCrossingValue),weekStartDay:iu(c,l)}),c=function ky(o,t,e){const i=e.min||o,s=e.max||t,n=e.baseUnit||(s&&i?function Cy(o){let t=an;return o>=Ba?t=Ie:o>=Oa?t=Ti:o>=La?t=ln:o>=Re&&(t=Ce),t}(Va(s,i)):an),r=ke[n],l=e.weekStartDay||0,c=Fa(st(i)-1,n,l)||it(s),h=Jd(st(s)+1,n,l),u=(e.majorUnit?e.majorUnit:void 0)||Lo(ns(c.getTime(),h.getTime()),r)/r,p=Na(c,h,n),f=Lo(p,u)-p,m=Math.floor(f/2),v=f-m;return e.baseUnit||delete e.baseUnit,e.baseUnit=e.baseUnit||n,e.min=e.min||It(c,-m,n,l),e.max=e.max||It(h,v,n,l),e.minorUnit=e.minorUnit||u/5,e.majorUnit=u,e}(n,r,c),super(c,s),this.intlService=l,this.seriesMin=n,this.seriesMax=r;const h=c.weekStartDay||0;this.totalMin=st(Fa(st(n)-1,c.baseUnit,h)),this.totalMax=st(Jd(st(r)+1,c.baseUnit,h))}clone(){return new Vo(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)}range(){const t=this.options;return{min:t.min,max:t.max}}getDivisions(t){const e=this.options;return Math.floor(Na(e.min,e.max,e.baseUnit)/t+1)}getTickPositions(t){const e=this.options,{axisDir:i,lineSize:s,lineStart:n}=this.lineInfo(),r=this.getDivisions(t),c=s/Ae(e.max,e.min),h=e.weekStartDay||0,d=[n];for(let u=1;u<r;u++){const g=n+Ae(It(e.min,u*t,e.baseUnit,h),e.min)*c*i;d.push(A(g,3))}return d}getMajorTickPositions(){return this.getTickPositions(this.options.majorUnit)}getMinorTickPositions(){return this.getTickPositions(this.options.minorUnit)}getSlot(t,e,i){return ae.prototype.getSlot.call(this,Dt(this.intlService,t),Dt(this.intlService,e),i)}getValue(t){const e=ae.prototype.getValue.call(this,t);return null!==e?it(e):null}labelsCount(){return this.getDivisions(this.options.majorUnit)}createAxisLabel(t,e,i){const s=this.options,n=t*s.majorUnit;let l=s.min;n>0&&(l=It(l,n,s.baseUnit,s.weekStartDay||0)),e.format=e.format||e.dateFormats[s.baseUnit];const h=this.axisLabelText(l,e,i);return new Si(l,h,t,null,e)}translateRange(t){const e=this.options,i=this.lineBox(),{vertical:s,reverse:n}=e,r=s?i.height():i.width(),l=this.range(),c=r/Ae(l.max,l.min);let h=A(t/c,J);return(s||n)&&(!s||!n)&&(h=-h),{min:Mt(e.min,h),max:Mt(e.max,h),offset:h}}shouldRenderNote(t){const e=this.range();return Mo(t,e.min)>=0&&Mo(t,e.max)<=0}pan(t){const e=this.translateRange(t,!0),i=this.limitRange(st(e.min),st(e.max),this.totalMin,this.totalMax,e.offset);if(i)return{min:it(i.min),max:it(i.max)}}pointsRange(t,e){const i=this.getValue(t),s=this.getValue(e),n=Math.min(i,s),r=Math.max(i,s);return{min:it(n),max:it(r)}}scaleRange(t,e){const i=Math.abs(this.pointOffset(e)),n=this.scaleToDelta(t,this.options.max-this.options.min),r=i*n,l=(1-i)*n,c=it(st(this.options.min)+r);let h=it(st(this.options.max)-l);return h-c<1e3&&(h=it(st(c)+1e3)),{min:c,max:h}}zoomRange(t,e){const i=this.scaleRange(t,e);return{min:it(R(st(i.min),this.totalMin,this.totalMax)),max:it(R(st(i.max),this.totalMin,this.totalMax))}}}C(Vo,{type:Ee,majorGridLines:{visible:!0,width:1,color:pt},labels:{dateFormats:ou}});const du=Vo;class Fo extends rn{constructor(t,e,i,s){const n=x({majorUnit:10,min:t,max:e},i),r=n.majorUnit,l=function Ty(o,t){const e=A(pe(o,t),J)%1;let i;return i=o<=0?t:0!==e&&(e<.3||e>.9)?Math.pow(t,pe(o,t)+.2):Math.pow(t,Math.ceil(pe(o,t))),i}(e,r),c=function Sy(o,t,e){const i=e.majorUnit;let s=o;return o<=0?s=t<=1?Math.pow(i,-2):1:e.narrowRange||(s=Math.pow(i,Math.floor(pe(o,i)))),s}(t,e,n),h=function Ay(o,t,e,i){let{min:s,max:n}=e;return _(e.axisCrossingValue)&&e.axisCrossingValue<=0&&ja(),_(i.max)?i.max<=0&&ja():n=t,_(i.min)?i.min<=0&&ja():s=o,{min:s,max:n}}(c,l,n,i);n.max=h.max,n.min=h.min,n.minorUnit=i.minorUnit||A(r-1,J),super(n,s),this.totalMin=_(i.min)?Math.min(c,i.min):c,this.totalMax=_(i.max)?Math.max(l,i.max):l,this.logMin=A(pe(h.min,r),J),this.logMax=A(pe(h.max,r),J),this.seriesMin=t,this.seriesMax=e,this.createLabels()}clone(){return new Fo(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)}startValue(){return this.options.min}getSlot(t,e,i){const{options:s,logMin:n,logMax:r}=this,{majorUnit:l,min:c,max:h}=s,{axis:d,axisDir:u,lineBox:p,lineSize:g,lineStart:f}=this.lineInfo(),m=u*(g/(r-n));let v=O(t,e||1),y=O(e,t||1);if(v<=0||y<=0)return null;i&&(v=R(v,c,h),y=R(y,c,h)),v=pe(v,l),y=pe(y,l);const w=Math.min(v,y)-n,E=Math.max(v,y)-n,L=new k(p.x1,p.y1,p.x1,p.y1);return L[d+1]=Oo(f+m*(u>0?w:E)),L[d+2]=Oo(f+m*(u>0?E:w)),L}getValue(t){const{options:e,logMin:i,logMax:s}=this,{majorUnit:n}=e,{axis:r,axisDir:l,lineStart:c,lineSize:h}=this.lineInfo(),u=l*(t[r]-c);return u<0||u>h?null:A(Math.pow(n,i+u*((s-i)/h)),J)}range(){const t=this.options;return{min:t.min,max:t.max}}translateRange(t){const{options:e,logMin:i,logMax:s}=this,{reverse:n,vertical:r,majorUnit:l}=e,c=this.lineBox(),d=(r?c.height():c.width())/(s-i);let u=A(t/d,J);return(r||n)&&!(r&&n)&&(u=-u),{min:Math.pow(l,i+u),max:Math.pow(l,s+u),offset:u}}labelsCount(){const t=Math.floor(this.logMax);return Math.floor(t-this.logMin)+1}getMajorTickPositions(){const t=[];return this.traverseMajorTicksPositions(e=>{t.push(e)},{step:1,skip:0}),t}createTicks(t){const e=this.options,{majorTicks:i,minorTicks:s,vertical:n}=e,r=e.labels.mirror,l=this.lineBox(),h={vertical:n};function d(u,p){h.tickX=r?l.x2:l.x2-p.size,h.tickY=r?l.y1-p.size:l.y1,h.position=u,t.append(Zd(h,p))}return i.visible&&this.traverseMajorTicksPositions(d,i),s.visible&&this.traverseMinorTicksPositions(d,s),[]}createGridLines(t){const e=this.options,{minorGridLines:i,majorGridLines:s,vertical:n}=e,r=t.lineBox(),l={lineStart:r[n?"x1":"y1"],lineEnd:r[n?"x2":"y2"],vertical:n},c=[],h=this.gridLinesVisual();function d(u,p){N(u,c)||(l.position=u,h.append(Kd(l,p)),c.push(u))}return s.visible&&this.traverseMajorTicksPositions(d,s),i.visible&&this.traverseMinorTicksPositions(d,i),h.children}traverseMajorTicksPositions(t,e){const{lineStart:i,step:s}=this.lineInfo(),{logMin:n,logMax:r}=this;for(let l=Math.ceil(n)+e.skip;l<=r;l+=e.step)t(A(i+s*(l-n),J),e)}traverseMinorTicksPositions(t,e){const{min:i,max:s,minorUnit:n,majorUnit:r}=this.options,{lineStart:l,step:c}=this.lineInfo(),{logMin:h,logMax:d}=this;for(let p=Math.floor(h);p<d;p++){const g=this._minorIntervalOptions(p);for(let f=e.skip;f<n;f+=e.step){const m=g.value+f*g.minorStep;if(m>s)break;m>=i&&t(A(l+c*(pe(m,r)-h),J),e)}}}createAxisLabel(t,e,i){const s=Math.ceil(this.logMin+t),n=Math.pow(this.options.majorUnit,s),r=this.axisLabelText(n,e,i);return new Si(n,r,t,null,e)}shouldRenderNote(t){const e=this.range();return e.min<=t&&t<=e.max}pan(t){const e=this.translateRange(t);return this.limitRange(e.min,e.max,this.totalMin,this.totalMax,e.offset)}pointsRange(t,e){const i=this.getValue(t),s=this.getValue(e);return{min:Math.min(i,s),max:Math.max(i,s)}}scaleRange(t,e){const{majorUnit:i}=this.options,s=pe(this.options.min,i),n=pe(this.options.max,i),r=Math.abs(this.pointOffset(e)),c=this.scaleToDelta(t,n-s),h=Math.pow(i,s+r*c);let d=Math.pow(i,n-(1-r)*c);return d-h<1e-6&&(d=h+1e-6),{min:h,max:d}}zoomRange(t,e){const i=this.scaleRange(t,e),{totalMin:s,totalMax:n}=this;return{min:R(i.min,s,n),max:R(i.max,s,n)}}_minorIntervalOptions(t){const{minorUnit:e,majorUnit:i}=this.options,s=Math.pow(i,t);return{value:s,minorStep:(Math.pow(i,t+1)-s)/e}}lineInfo(){const t=super.lineInfo();return t.step=t.axisDir*(t.lineSize/(this.logMax-this.logMin)),t}}function ja(){throw new Error("Non positive values cannot be used for a logarithmic axis")}function pe(o,t){return Math.log(o)/Math.log(t)}C(Fo,{type:"log",majorUnit:10,minorUnit:1,axisCrossingValue:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:pt},zIndex:1,_deferLabels:!0});const No=Fo,gu={createGridLines:function(o){const t=this.options,e=Math.abs(this.box.center().y-o.lineBox().y1);let n,r,i=[],s=!1;return t.majorGridLines.visible&&(n=this.majorGridLineAngles(o),s=!0,i=this.renderMajorGridLines(n,e,t.majorGridLines)),t.minorGridLines.visible&&(r=this.minorGridLineAngles(o,s),ki(i,this.renderMinorGridLines(r,e,t.minorGridLines,o,s))),i},renderMajorGridLines:function(o,t,e){return this.renderGridLines(o,t,e)},renderMinorGridLines:function(o,t,e,i,s){const n=this.radiusCallback&&this.radiusCallback(t,i,s);return this.renderGridLines(o,t,e,n)},renderGridLines:function(o,t,e,i){const s={stroke:{width:e.width,color:e.color,dashType:e.dashType}},n=this.box.center(),r=new oe.A([n.x,n.y],t),l=this.gridLinesVisual();for(let c=0;c<o.length;c++){const h=new M.w(s);i&&(r.radius=i(o[c])),h.moveTo(r.center).lineTo(r.pointAt(o[c]+180)),l.append(h)}return l.children},gridLineAngles:function(o,t,e,i,s){const n=this.intervals(t,e,i,s),r=o.options,l=r.visible&&!1!==(r.line||{}).visible;return ed(n,c=>{const h=this.intervalAngle(c);if(!l||90!==h)return h})}};class Ga extends Le{range(){return{min:0,max:this.options.categories.length}}reflow(t){this.box=t,this.reflowLabels()}lineBox(){return this.box}reflowLabels(){const{labels:t,options:{labels:e}}=this,i=e.skip||0,s=e.step||1,n=new k;for(let r=0;r<t.length;r++){t[r].reflow(n);const l=t[r].box;t[r].reflow(this.getSlot(i+r*s).adjacentBox(0,l.width(),l.height()))}}intervals(t,e,i,s=!1){const n=this.options,l=n.categories.length/t||1,c=360/l,d=i||1,u=[];let p=0;for(let g=e||0;g<l;g+=d)p=n.reverse?360-g*c:g*c,p=A(p,3)%360,s&&N(p,s)||u.push(p);return u}majorIntervals(){return this.intervals(1)}minorIntervals(){return this.intervals(.5)}intervalAngle(t){return(360+t+this.options.startAngle)%360}majorAngles(){return ed(this.majorIntervals(),t=>this.intervalAngle(t))}createLine(){return[]}majorGridLineAngles(t){const e=this.options.majorGridLines;return this.gridLineAngles(t,1,e.skip,e.step)}minorGridLineAngles(t,e){const{minorGridLines:i,majorGridLines:s}=this.options,n=e?this.intervals(1,s.skip,s.step):null;return this.gridLineAngles(t,.5,i.skip,i.step,n)}radiusCallback(t,e,i){if(e.options.type!==ei){const s=Ct(360/(2*this.options.categories.length)),n=Math.cos(s)*t,r=this.majorAngles();return function(c){return!i&&N(c,r)?t:n}}}createPlotBands(){const t=this.options.plotBands||[],e=this._plotbandGroup=new et.A({zIndex:-1});for(let i=0;i<t.length;i++){const s=t[i],n=this.plotBandSlot(s),r=this.getSlot(s.from),l=s.from-Math.floor(s.from);n.startAngle+=l*r.angle;const c=Math.ceil(s.to)-s.to;n.angle-=(c+l)*r.angle;const h=Co.current.createRing(n,{fill:{color:s.color,opacity:s.opacity},stroke:{opacity:s.opacity}});e.append(h)}this.appendVisual(e)}plotBandSlot(t){return this.getSlot(t.from,t.to-1)}getSlot(t,e){const i=this.options,s=i.justified,n=this.box,r=this.majorAngles(),l=r.length,c=360/l;let h=t;i.reverse&&!s&&(h=(h+1)%l),h=R(Math.floor(h),0,l-1);let d=r[h];s&&(d-=c/2,d<0&&(d+=360));const g=c*(R(Math.ceil(e||h),h,l-1)-h+1);return new en(n.center(),0,n.height()/2,d,g)}slot(t,e){const i=this.getSlot(t,e),s=i.startAngle+180;return new os.A([i.center.x,i.center.y],{startAngle:s,endAngle:s+i.angle,radiusX:i.radius,radiusY:i.radius})}pointCategoryIndex(t){const e=this.options.categories.length;let i=null;for(let s=0;s<e;s++)if(this.getSlot(s).containsPoint(t)){i=s;break}return i}}C(Ga,{startAngle:90,labels:{margin:Z(10)},majorGridLines:{visible:!0},justified:!0}),x(Ga.prototype,gu);const Ha=Ga;class Xa extends rn{constructor(t,e){super(t,e);const i=this.options;i.minorUnit=i.minorUnit||i.majorUnit/2}getDivisions(t){return ae.prototype.getDivisions.call(this,t)-1}reflow(t){this.box=t,this.reflowLabels()}reflowLabels(){const{options:t,labels:e,options:{labels:i}}=this,s=i.skip||0,n=i.step||1,r=new k,l=this.intervals(t.majorUnit,s,n);for(let c=0;c<e.length;c++){e[c].reflow(r);const h=e[c].box;e[c].reflow(this.getSlot(l[c]).adjacentBox(0,h.width(),h.height()))}}lineBox(){return this.box}intervals(t,e,i,s=!1){const n=this.options.min,r=this.getDivisions(t),l=[],h=i||1;for(let d=e||0;d<r;d+=h){const u=(360+n+d*t)%360;s&&N(u,s)||l.push(u)}return l}majorIntervals(){return this.intervals(this.options.majorUnit)}minorIntervals(){return this.intervals(this.options.minorUnit)}intervalAngle(t){return(540-t-this.options.startAngle)%360}createLine(){return[]}majorGridLineAngles(t){const e=this.options.majorGridLines;return this.gridLineAngles(t,this.options.majorUnit,e.skip,e.step)}minorGridLineAngles(t,e){const i=this.options,{minorGridLines:s,majorGridLines:n}=i,r=e?this.intervals(i.majorUnit,n.skip,n.step):null;return this.gridLineAngles(t,i.minorUnit,s.skip,s.step,r)}plotBandSlot(t){return this.getSlot(t.from,t.to)}getSlot(t,e){const{options:i,box:s}=this,n=i.startAngle;let r=R(t,i.min,i.max),l=R(e||r,r,i.max);if(i.reverse&&(r*=-1,l*=-1),r=(540-r-n)%360,l=(540-l-n)%360,l<r){const c=r;r=l,l=c}return new en(s.center(),0,s.height()/2,r,l-r)}slot(t,e=t){const i=this.options,s=360-i.startAngle,n=this.getSlot(t,e),r=Math.min(t,e),l=Math.max(t,e);let c,h;return i.reverse?(c=r,h=l):(c=360-l,h=360-r),c=(c+s)%360,h=(h+s)%360,new os.A([n.center.x,n.center.y],{startAngle:c,endAngle:h,radiusX:n.radius,radiusY:n.radius})}getValue(t){const e=this.options,i=this.box.center();let r=Math.round(ii(Math.atan2(t.y-i.y,t.x-i.x))),l=e.startAngle;return e.reverse||(r*=-1,l*=-1),(r+l+360)%360}valueRange(){return{min:0,max:2*Math.PI}}}C(Xa,{type:"polar",startAngle:0,reverse:!1,majorUnit:60,min:0,max:360,labels:{margin:Z(10)},majorGridLines:{color:pt,visible:!0,width:1},minorGridLines:{color:"#aaa"}}),x(Xa.prototype,gu,{createPlotBands:Ha.prototype.createPlotBands,majorAngles:Ha.prototype.majorAngles,range:ae.prototype.range,labelsCount:ae.prototype.labelsCount,createAxisLabel:ae.prototype.createAxisLabel});const My=Xa;function zo(o,t){return 180-Math.abs(Math.abs(o-t)-180)}const fu={options:{majorGridLines:{visible:!0}},createPlotBands:function(){const{majorGridLines:{type:o},plotBands:t=[]}=this.options,e=this.plotArea.polarAxis,i=e.majorAngles(),s=e.box.center(),n=this._plotbandGroup=new et.A({zIndex:-1});for(let r=0;r<t.length;r++){const l=t[r],c={fill:{color:l.color,opacity:l.opacity},stroke:{opacity:l.opacity}},h=this.getSlot(l.from,l.to,!0),d=new en(s,s.y-h.y2,s.y-h.y1,0,360);let u;u=o===ei?Co.current.createRing(d,c):M.w.fromPoints(this.plotBandPoints(d,i),c).close(),n.append(u)}this.appendVisual(n)},plotBandPoints:function(o,t){const e=[],i=[],s=[o.center.x,o.center.y],n=new oe.A(s,o.innerRadius),r=new oe.A(s,o.radius);for(let l=0;l<t.length;l++)e.push(n.pointAt(t[l]+180)),i.push(r.pointAt(t[l]+180));return e.reverse(),e.push(e[0]),i.push(i[0]),i.concat(e)},createGridLines:function(o){const t=this.options,e=this.radarMajorGridLinePositions(),i=o.majorAngles(),s=o.box.center();let n=[];if(t.majorGridLines.visible&&(n=this.renderGridLines(s,e,i,t.majorGridLines)),t.minorGridLines.visible){const r=this.radarMinorGridLinePositions();ki(n,this.renderGridLines(s,r,i,t.minorGridLines))}return n},renderGridLines:function(o,t,e,i){const s={stroke:{width:i.width,color:i.color,dashType:i.dashType}},{skip:n=0,step:r=0}=i,l=this.gridLinesVisual();for(let c=n;c<t.length;c+=r){const h=o.y-t[c];if(h>0){const d=new oe.A([o.x,o.y],h);if(i.type===ei)l.append(new _e.A(d,s));else{const u=new M.w(s);for(let p=0;p<e.length;p++)u.lineTo(d.pointAt(e[p]+180));u.close(),l.append(u)}}}return l.children},getValue:function(o){const t=this.lineBox(),e=this.plotArea.polarAxis,i=e.majorAngles(),s=e.box.center(),n=o.distanceTo(s);let r=n;if(this.options.majorGridLines.type!==ei&&i.length>1){const h=(ii(Math.atan2(o.y-s.y,o.x-s.x))+540)%360;i.sort(function(f,m){return zo(f,h)-zo(m,h)});const d=zo(i[0],i[1])/2,u=zo(h,i[0]),p=90-d;r=n*(Math.sin(Ct(180-u-p))/Math.sin(Ct(p)))}return this.axisType().prototype.getValue.call(this,new B(t.x1,t.y2-r))}};class mu extends ae{radarMajorGridLinePositions(){return this.getTickPositions(this.options.majorUnit)}radarMinorGridLinePositions(){const t=this.options;let e=0;return t.majorGridLines.visible&&(e=t.majorUnit),this.getTickPositions(t.minorUnit,e)}axisType(){return ae}}x(mu.prototype,fu);const Py=mu;class xu extends No{radarMajorGridLinePositions(){const t=[];return this.traverseMajorTicksPositions(function(e){t.push(e)},this.options.majorGridLines),t}radarMinorGridLinePositions(){const t=[];return this.traverseMinorTicksPositions(function(e){t.push(e)},this.options.minorGridLines),t}axisType(){return No}}x(xu.prototype,fu);const Dy=xu;var Be=T(1281);function bu(o){return o<=0?-1:1}const Uo=class Ry extends I.A{constructor(t){super(),this.closed=t}process(t){const e=t.slice(0),i=[];let s=this.closed,n=e.length;if(n>2&&(this.removeDuplicates(0,e),n=e.length),n<2||2===n&&e[0].equals(e[1]))return i;let h,d,r=e[0],l=e[1],c=e[2];for(i.push(new Be.A(r));r.equals(e[n-1]);)s=!0,e.pop(),n--;if(2===n){const p=this.tangent(r,l,P,D);return mt(i).controlOut(this.firstControlPoint(p,r,l,P,D)),i.push(new Be.A(l,this.secondControlPoint(p,r,l,P,D))),i}if(s){r=e[n-1],l=e[0],c=e[1];const p=this.controlPoints(r,l,c);h=p[1],d=p[0]}else{const p=this.tangent(r,l,P,D);h=this.firstControlPoint(p,r,l,P,D)}let u=h;for(let p=0;p<=n-3;p++)if(this.removeDuplicates(p,e),n=e.length,p+3<=n){r=e[p],l=e[p+1],c=e[p+2];const g=this.controlPoints(r,l,c);mt(i).controlOut(u),u=g[1],i.push(new Be.A(l,g[0]))}if(s){r=e[n-2],l=e[n-1],c=e[0];const p=this.controlPoints(r,l,c);mt(i).controlOut(u),i.push(new Be.A(l,p[0])),mt(i).controlOut(p[1]),i.push(new Be.A(c,d))}else{const p=this.tangent(l,c,P,D);mt(i).controlOut(u),i.push(new Be.A(c,this.secondControlPoint(p,l,c,P,D)))}return i}removeDuplicates(t,e){for(;e[t+1]&&(e[t].equals(e[t+1])||e[t+1].equals(e[t+2]));)e.splice(t+1,1)}invertAxis(t,e,i){let s=!1;if(t.x===e.x)s=!0;else if(e.x===i.x)(e.y<i.y&&t.y<=e.y||i.y<e.y&&e.y<=t.y)&&(s=!0);else{const n=this.lineFunction(t,e),r=this.calculateFunction(n,i.x);t.y<=e.y&&i.y<=r||e.y<=t.y&&i.y>=r||(s=!0)}return s}isLine(t,e,i){const s=this.lineFunction(t,e),n=this.calculateFunction(s,i.x);return t.x===e.x&&e.x===i.x||A(n,1)===A(i.y,1)}lineFunction(t,e){const i=(e.y-t.y)/(e.x-t.x);return[t.y-i*t.x,i]}controlPoints(t,e,i){let c,s=P,n=D,r=!1,l=!1;if(this.isLine(t,e,i))c=this.tangent(t,e,P,D);else{const u={x:this.isMonotonicByField(t,e,i,P),y:this.isMonotonicByField(t,e,i,D)};if(u.x&&u.y)c=this.tangent(t,i,P,D),r=!0;else if(this.invertAxis(t,e,i)&&(s=D,n=P),u[s])c=0;else{let p;p=i[n]<t[n]&&t[n]<=e[n]||t[n]<i[n]&&e[n]<=t[n]?bu((i[n]-t[n])*(e[s]-t[s])):-bu((i[s]-t[s])*(e[n]-t[n])),c=.01*p,l=!0}}const h=this.secondControlPoint(c,t,e,s,n);if(l){const u=s;s=n,n=u}const d=this.firstControlPoint(c,e,i,s,n);return r&&(this.restrictControlPoint(t,e,h,c),this.restrictControlPoint(e,i,d,c)),[h,d]}restrictControlPoint(t,e,i,s){t.y<e.y?e.y<i.y?(i.x=t.x+(e.y-t.y)/s,i.y=e.y):i.y<t.y&&(i.x=e.x-(e.y-t.y)/s,i.y=t.y):i.y<e.y?(i.x=t.x-(t.y-e.y)/s,i.y=e.y):t.y<i.y&&(i.x=e.x+(t.y-e.y)/s,i.y=t.y)}tangent(t,e,i,s){const n=e[i]-t[i];let l;return l=0===n?0:(e[s]-t[s])/n,l}isMonotonicByField(t,e,i,s){return i[s]>e[s]&&e[s]>t[s]||i[s]<e[s]&&e[s]<t[s]}firstControlPoint(t,e,i,s,n){const r=e[s],c=.333*(i[s]-r);return this.point(r+c,e[n]+c*t,s,n)}secondControlPoint(t,e,i,s,n){const l=i[s],c=.333*(l-e[s]);return this.point(l-c,i[n]-c*t,s,n)}point(t,e,i,s){const n=new j.A;return n[i]=t,n[s]=e,n}calculateFunction(t,e){const i=t.length;let s=0;for(let n=0;n<i;n++)s+=Math.pow(e,n)*t[n];return s}},Oy=class Ly extends I.A{constructor(t){super(),this._axis=t,this.options=t.options}value(t){const e=this._axis;return e.getCategory?e.getCategory(t):e.getValue(t)}slot(t,e,i=!0){return this._axis.slot(t,e,i)}range(){return this._axis.range()}valueRange(){return this._axis.valueRange()}};function yu(o,t){for(let e=0;e<t.length;e++)if(t[e].options.name===o)return t[e].prepareUserOptions(),new Oy(t[e])}const Ya=class By{constructor(t){this.visual=t.visual,this.chartsVisual=t.chartContainer.visual,this._pane=t}findAxisByName(t){return yu(t,this._pane.axes)}},Fy=class Vy extends I.A{constructor(t){super(),this._plotArea=t,this.visual=t.visual,this.backgroundVisual=t._bgVisual}};function Wa(o){const t=o.length;let e=0;for(let i=0;i<t;i++)X(o[i])&&e++;return e}const $a={min:function(o){const t=o.length;let e=ft;for(let i=0;i<t;i++){const s=o[i];X(s)&&(e=Math.min(e,s))}return e===ft?o[0]:e},max:function(o){const t=o.length;let e=wt;for(let i=0;i<t;i++){const s=o[i];X(s)&&(e=Math.max(e,s))}return e===wt?o[0]:e},sum:function(o){const t=o.length;let e=0;for(let i=0;i<t;i++){const s=o[i];X(s)&&(e+=s)}return e},sumOrNull:function(o){let t=null;return Wa(o)&&(t=$a.sum(o)),t},count:function(o){const t=o.length;let e=0;for(let i=0;i<t;i++){const s=o[i];null!==s&&_(s)&&e++}return e},avg:function(o){const t=Wa(o);let e=o[0];return t>0&&(e=$a.sum(o)/t),e},first:function(o){const t=o.length;for(let e=0;e<t;e++){const i=o[e];if(null!==i&&_(i))return i}return o[0]}},Ny=$a;function zy(o,t){return null===t?t:Pe(o)(t)}class Qa extends I.A{constructor(){super(),this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}}register(t,e=[$t],i={}){for(let s=0;s<t.length;s++){const n=t[s];this._valueFields[n]=e,this._otherFields[n]=i,this._nullValue[n]=this._makeValue(e,null),this._undefinedValue[n]=this._makeValue(e,void 0)}}canonicalFields(t){return this.valueFields(t).concat(this.otherFields(t))}valueFields(t){return this._valueFields[t.type]||[$t]}otherFields(t){return this._otherFields[t.type]||[$t]}bindPoint(t,e,i){const s=t.data,n=_(i)?i:s[e],r={valueFields:{value:n}},l=this.valueFields(t),c=this._otherFields[t.type];let h,d;if(null===n)d=this._nullValue[t.type];else if(_(n)){if(Array.isArray(n)){const u=n.slice(l.length);d=this._bindFromArray(n,l),h=this._bindFromArray(u,c)}else if("object"==typeof n){const u=this.sourceFields(t,l),p=this.sourceFields(t,c);d=this._bindFromObject(n,l,u),h=this._bindFromObject(n,c,p)}}else d=this._undefinedValue[t.type];return _(d)&&(1===l.length?r.valueFields.value=d[l[0]]:r.valueFields=d),r.fields=h||{},r}_makeValue(t,e){const i={},s=t.length;for(let n=0;n<s;n++)i[t[n]]=e;return i}_bindFromArray(t,e){const i={};if(e){const s=Math.min(e.length,t.length);for(let n=0;n<s;n++)i[e[n]]=t[n]}return i}_bindFromObject(t,e,i=e){const s={};if(e){const n=e.length;for(let r=0;r<n;r++){const c=i[r];null!==c&&(s[e[r]]=zy(c,t))}}return s}sourceFields(t,e){const i=[];if(e){const s=e.length;for(let n=0;n<s;n++){const r=e[n],l=r===$t?"field":r+"Field";i.push(null!==t[l]?t[l]||r:null)}}return i}}Qa.current=new Qa;const ot=Qa,Gy=/percent(?:\w*)\((\d+)\)/,Hy=new RegExp("^stddev(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),_u=class Xy extends I.A{constructor(t,e,i){super(),this.initGlobalRanges(t,e,i)}initGlobalRanges(t,e,i){const s=e.data,n=Hy.exec(t);if(n){this.valueGetter=this.createValueGetter(e,i);const r=this.getAverage(s),l=this.getStandardDeviation(s,r,!1),c=n[1]?parseFloat(n[1]):1,h={low:r.value-l*c,high:r.value+l*c};this.globalRange=function(){return h}}else if(t.indexOf&&t.indexOf("stderr")>=0){this.valueGetter=this.createValueGetter(e,i);const r=this.getStandardError(s,this.getAverage(s));this.globalRange=function(l){return{low:l-r,high:l+r}}}}createValueGetter(t,e){const i=t.data,s=ot.current,n=s.valueFields(t),r=_(i[0])?i[0]:{};let l;return Pt(r)?l=Pe("["+(e?n.indexOf(e):0)+"]"):X(r)?l=Pe():typeof r===Ys&&(l=Pe(s.sourceFields(t,n)[n.indexOf(e)])),l}getErrorRange(t,e){let i,s,n;if(!_(e))return null;if(this.globalRange)return this.globalRange(t);if(Pt(e))i=t-e[0],s=t+e[1];else if(X(n=parseFloat(e)))i=t-n,s=t+n;else{if(!(n=Gy.exec(e)))throw new Error("Invalid ErrorBar value: "+e);{const r=t*(parseFloat(n[1])/100);i=t-Math.abs(r),s=t+Math.abs(r)}}return{low:i,high:s}}getStandardError(t,e){return this.getStandardDeviation(t,e,!0)/Math.sqrt(e.count)}getStandardDeviation(t,e,i){const s=t.length,n=i?e.count-1:e.count;let r=0;for(let l=0;l<s;l++){const c=this.valueGetter(t[l]);X(c)&&(r+=Math.pow(c-e.value,2))}return Math.sqrt(r/n)}getAverage(t){const e=t.length;let i=0,s=0;for(let n=0;n<e;n++){const r=this.valueGetter(t[n]);X(r)&&(i+=r,s++)}return{value:i/s,count:s}}},le=600,ai="fadeIn",hn=(id.A.browser||{}).msie?.001:0,wu="errorLow",Cu="errorHigh",Ve="zero",cs="interpolate",Ho="above",Za="below",hs="smooth",dn="step",Fe="area",ce="bar",un="boxPlot",ds="bubble",li="bullet",us="candlestick",Se="column",Xo="donut",pn="funnel",gn="pyramid",Ka="heatmap",ps="horizontalWaterfall",Ne="line",gs="ohlc",ci="pie",qa="polarArea",Yo="polarLine",Ja="polarScatter",fn="radarArea",Wo="radarColumn",fs="radarLine",ms="rangeArea",xs="rangeBar",mn="rangeColumn",tl="scatter",el="scatterLine",Ei="verticalArea",vs="verticalBoxPlot",xn="verticalBullet",Pi="verticalLine",Di="verticalRangeArea",vn="waterfall",Au=[ce,Se,gs,us,un,vs,li,mn,xs,vn,ps],il="exponentialTrendline",sl="linearTrendline",nl="logarithmicTrendline",ol="movingAverageTrendline",rl="polynomialTrendline",al="powerTrendline",bs=[il,sl,nl,ol,rl,al],Su="legendItemClick",Tu="seriesClick",Mu="seriesHover",Eu="seriesOver",Pu="seriesLeave",Du="plotAreaHover",ll="plotAreaLeave",bn="drag",yn="dragEnd",cl="dragStart",_n="zoomStart",ys="zoom",_s="zoomEnd",hl="selectStart",wn="select",dl="selectEnd",Iu="showTooltip",Ru="hideTooltip",hi="graphics-symbol",di="k-chart-point",ui="Point",$o="log",fe="category",Qo="insideEnd",Ii="outsideEnd",Zo="wheel",ze="drilldown",he="pattern";class Ou extends K{constructor(t,e,i,s,n,r){super(r),this.low=t,this.high=e,this.isVertical=i,this.chart=s,this.series=n}reflow(t){const e=this.options.endCaps,i=this.isVertical,n=this.getAxis().getSlot(this.low,this.high),r=t.center(),l=this.getCapsWidth(t,i),c=i?r.x:r.y,h=c-l,d=c+l;let u;i?(u=[new B(r.x,n.y1),new B(r.x,n.y2)],e&&u.push(new B(h,n.y1),new B(d,n.y1),new B(h,n.y2),new B(d,n.y2)),this.box=new k(h,n.y1,d,n.y2)):(u=[new B(n.x1,r.y),new B(n.x2,r.y)],e&&u.push(new B(n.x1,h),new B(n.x1,d),new B(n.x2,h),new B(n.x2,d)),this.box=new k(n.x1,h,n.x2,d)),this.linePoints=u}getCapsWidth(t,e){const i=e?t.width():t.height();return Math.min(Math.floor(i/2),4)||4}createVisual(){const t=this.options,e=t.visual;e?this.visual=e({low:this.low,high:this.high,rect:this.box.toRect(),sender:this.getSender(),options:{endCaps:t.endCaps,color:t.color,line:t.line},createVisual:()=>{this.createDefaultVisual();const i=this.visual;return delete this.visual,i}}):this.createDefaultVisual()}createDefaultVisual(){const{options:t,linePoints:e}=this,i={stroke:{color:t.color,width:t.line.width,dashType:t.line.dashType}};super.createVisual();for(let s=0;s<e.length;s+=2){const n=new M.w(i).moveTo(e[s].x,e[s].y).lineTo(e[s+1].x,e[s+1].y);Qt(n),this.visual.append(n)}}}C(Ou,{animation:{type:ai,delay:le},endCaps:!0,line:{width:2},zIndex:1});const Bu=Ou,h0=class c0 extends Bu{getAxis(){return this.chart.seriesValueAxis(this.series)}};function Vu(o){for(let t=0;t<o.length;t++)if(_(o[t].zIndex))return!0}function Ko(o,t){null!==t&&o.push(t)}function Fu(o){return Wa(o)===o.length}function d0(o,t,e){const i=t.visible;if(_(i))return i;const s=o.pointVisibility;return s?s[e]:void 0}function Nu(o){const t=o.data,e=[];let i=0,s=0;for(let n=0;n<t.length;n++){const r=ot.current.bindPoint(o,n);let l=r.valueFields.value;jt(l)&&(l=parseFloat(l)),X(l)?(r.visible=!1!==d0(o,r.fields,n),r.value=Math.abs(l),e.push(r),r.visible&&(i+=r.value),0!==l&&s++):e.push(null)}return{total:i,points:e,count:s}}function gl(o){const t=o.length;let e=0;for(let i=0;i<t;i++)e=Math.max(e,o[i].data.length);return e}function Ue(o,t){return o&&t?o.toLowerCase()===t.toLowerCase():o===t}function je(o,t,e={},i=!1){const s=e.defaults=e.defaults||{},n=e.depth=e.depth||0;let r=!1;if(e.excluded=e.excluded||[],n>5)return null;for(let l in o)if(!N(l,e.excluded)&&ba(o,l)){const c=o[l];lt(c)?(r=!0,i||(o[l]=O(c(t),s[l]))):ie(c)&&(i||(e.defaults=s[l]),e.depth++,r=je(c,t,e,i)||r,e.depth--)}return r}function ut(o,t){const e=[],i=[].concat(t);for(let s=0;s<o.length;s++){const n=o[s];N(n.type,i)&&e.push(n)}return e}const zu=new WeakMap;function Uu(o,t,e){if(null===t||"object"!=typeof t)return Dt(e,o);let i=zu.get(t);return i||(i=Dt(e,o),zu.set(t,i)),i}function fl(o){const t=o.overlay;return t&&t.gradient&&"none"!==t.gradient}function Xt(o){return _(o)&&null!==o}function ju(o,t){const e=o.type,i=t instanceof Date;return!e&&i||Ue(e,Ee)}function ws(o){return 1===o.length?o[0]:o}const p0=/area/i;function ml(o,t){const i=ot.current.bindPoint(o,null,t).valueFields;for(let s in i)if(Wh(i[s]))return!0}function Gu({start:o,dir:t,min:e,max:i,getter:s,hasItem:n,series:r}){let l,c,h=o;do{h+=t,n(h)&&(c=s(h),l=ml(r,c.item))}while(e<=h&&h<=i&&!l);if(l)return c}function Hu(o,t,e,i,s){const{min:n,max:r}=t,l=n>0&&n<e,c=r+1<e;if(l||c){const h=function g0(o){return o.missingValues?o.missingValues:p0.test(o.type)||o.stack?Ve:cs}(o);let d,u;if(h!==cs)l&&(d=i(n-1)),c&&(u=i(r+1));else{let p,g;l&&(p=i(n-1),g=ml(o,p.item),d=g?p:Gu({start:n,dir:-1,min:0,max:e-1,getter:i,hasItem:s,series:o})),c&&(p=i(r+1),g=ml(o,p.item),u=g?p:Gu({start:r,dir:1,min:0,max:e-1,getter:i,hasItem:s,series:o}))}d&&(o._outOfRangeMinPoint=d),u&&(o._outOfRangeMaxPoint=u)}}class Xu extends K{constructor(t,e){super(e),this.plotArea=t,this.chartService=t.chartService,this.categoryAxis=t.seriesCategoryAxis(e.series[0]),this.valueAxisRanges={},this.points=[],this.categoryPoints=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[],this.render()}render(){this.traverseDataPoints(this.addValue.bind(this))}pointOptions(t,e){let i=this.seriesOptions[e];if(!i){const s=this.pointType().prototype.defaults;this.seriesOptions[e]=i=x({},s,{vertical:!this.options.invertAxes},t)}return i}plotValue(t){if(!t)return 0;if(this.options.isStacked100&&X(t.value)){const i=this.categoryPoints[t.categoryIx],s=[];let n=0;for(let r=0;r<i.length;r++){const l=i[r];if(l){const c=t.series.stack,h=l.series.stack;if(c&&h&&c.group!==h.group)continue;X(l.value)&&(n+=Math.abs(l.value),s.push(Math.abs(l.value)))}}if(n>0)return t.value/n}return t.value}plotRange(t,e=0){const i=this.categoryPoints[t.categoryIx];if(this.options.isStacked){let l=this.plotValue(t);const c=l>=0;let h=e,d=!1;const u=_(t.series.stack)?t.series.stack:this.options.defaultStack,p=g=>!0===g||typeof g===Ys&&!g.group;if(u)for(let g=0;g<i.length;g++){const f=i[g];if(t===f)break;const m=_(f.series.stack)?f.series.stack:this.options.defaultStack;if(!m||typeof u===da&&u!==m||p(u)&&!p(m)||u.group&&u.group!==m.group)continue;const v=this.plotValue(f);(v>=0&&c||v<0&&!c)&&(0===e||0!==v)&&(h+=v,l+=v,d=!0,this.options.isStacked100&&(l=Math.min(l,1)))}return d&&(h-=e),[h,l]}const n=this.seriesValueAxis(t.series),r=this.categoryAxisCrossingValue(n);return[r,Wh(t.value)?t.value:r]}stackLimits(t,e){let i=ft,s=wt;for(let n=0;n<this.categoryPoints.length;n++){const r=this.categoryPoints[n];if(r)for(let l=0;l<r.length;l++){const c=r[l];if(c&&(c.series.stack===e||c.series.axis===t)){const h=this.plotRange(c,0)[1];_(h)&&isFinite(h)&&(s=Math.max(s,h),i=Math.min(i,h))}}}return{min:i,max:s}}updateStackRange(){const{isStacked:t,series:e}=this.options,i={};if(t)for(let s=0;s<e.length;s++){const n=e[s],r=n.axis,l=r+n.stack;let c=i[l];if(!c){c=this.stackLimits(r,n.stack);const h=this.errorTotals;h&&(h.negative.length&&(c.min=Math.min(c.min,va(h.negative).min)),h.positive.length&&(c.max=Math.max(c.max,va(h.positive).max))),c.min!==ft||c.max!==wt?i[l]=c:c=null}c&&(this.valueAxisRanges[r]=c)}}addErrorBar(t,e,i){const{value:s,series:n,seriesIx:r}=t,l=t.options.errorBars,c=e.fields[wu],h=e.fields[Cu];let d;X(c)&&X(h)?d={low:c,high:h}:l&&_(l.value)&&(this.seriesErrorRanges=this.seriesErrorRanges||[],this.seriesErrorRanges[r]=this.seriesErrorRanges[r]||new _u(l.value,n,$t),d=this.seriesErrorRanges[r].getErrorRange(s,l.value)),d&&(t.low=d.low,t.high=d.high,this.addPointErrorBar(t,i))}addPointErrorBar(t,e){const i=!this.options.invertAxes,s=t.options.errorBars;let{series:n,low:r,high:l}=t;if(this.options.isStacked){const h=this.stackedErrorRange(t,e);r=h.low,l=h.high}else{const h={categoryIx:e,series:n};this.updateRange({value:r},h),this.updateRange({value:l},h)}const c=new h0(r,l,i,this,n,s);t.errorBars=[c],t.append(c)}stackedErrorRange(t,e){const i=this.plotRange(t,0)[1]-t.value,s=t.low+i,n=t.high+i;return this.errorTotals=this.errorTotals||{positive:[],negative:[]},s<0&&(this.errorTotals.negative[e]=Math.min(this.errorTotals.negative[e]||0,s)),n>0&&(this.errorTotals.positive[e]=Math.max(this.errorTotals.positive[e]||0,n)),{low:s,high:n}}addValue(t,e){const{categoryIx:i,series:s,seriesIx:n}=e;let r=this.categoryPoints[i];r||(this.categoryPoints[i]=r=[]);let l=this.seriesPoints[n];l||(this.seriesPoints[n]=l=[]);const c=this.createPoint(t,e);c&&(Object.assign(c,e),c.owner=this,c.noteText=t.fields.noteText,_(c.dataItem)||(c.dataItem=s.data[i]),this.addErrorBar(c,t,i)),this.points.push(c),l.push(c),r.push(c),this.updateRange(t.valueFields,e)}evalPointOptions(t,e,i){const s=i.categoryIx,n=i.category,r=i.series,l=i.seriesIx,c={defaults:r._defaults,excluded:["data","aggregate","_events","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint","drilldownSeriesFactory","ariaTemplate","ariaContent"]};let h=this._evalSeries[l];_(h)||(this._evalSeries[l]=h=je(t,{},c,!0));let d=t;return h&&(d=x({},d),je(d,{value:e,category:n,index:s,series:r,dataItem:r.data[s]},c)),d}updateRange(t,e){const i=e.series.axis,s=t.value;let n=this.valueAxisRanges[i];isFinite(s)&&null!==s&&(n=this.valueAxisRanges[i]=n||{min:ft,max:wt},n.min=Math.min(n.min,s),n.max=Math.max(n.max,s))}seriesValueAxis(t){const e=this.plotArea,i=t.axis,s=i?e.namedValueAxes[i]:e.valueAxis;if(!s)throw new Error("Unable to locate value axis with name "+i);return s}reflow(t){const e=this.categorySlots=[],i=this.points,s=this.categoryAxis;let n=0;this.traverseDataPoints((r,l)=>{const{categoryIx:c,series:h}=l,d=this.seriesValueAxis(h),u=i[n++];let p=e[c];if(p||(e[c]=p=this.categorySlot(s,c,d)),u){const g=this.plotRange(u,d.startValue()),f=this.valueSlot(d,g);if(f){const m=this.pointSlot(p,f);u.aboveAxis=this.aboveAxis(u,d),u.stackValue=g[1],this.options.isStacked100&&(u.percentage=this.plotValue(u)),this.reflowPoint(u,m)}else u.visible=!1}}),this.reflowCategories(e),!this.options.clip&&this.options.limitPoints&&this.points.length&&this.limitPoints(),this.box=t}valueSlot(t,e){return t.getSlot(e[0],e[1],!this.options.clip)}limitPoints(){const t=this.categoryPoints,e=t[0].concat(mt(t));for(let i=0;i<e.length;i++)e[i]&&this.limitPoint(e[i])}limitPoint(t){const e=this.categoryAxis.limitSlot(t.box);e.equals(t.box)||t.reflow(e)}aboveAxis(t,e){const i=this.categoryAxisCrossingValue(e),s=t.value;return e.options.reverse?s<i:s>=i}categoryAxisCrossingValue(t){const e=this.categoryAxis,i=t.options;return[].concat(i.axisCrossingValues||i.axisCrossingValue)[e.axisIndex||0]||0}reflowPoint(t,e){t.reflow(e)}reflowCategories(){}pointSlot(t,e){const s=this.options.invertAxes,n=s?e:t,r=s?t:e;return new k(n.x1,r.y1,n.x2,r.y2)}categorySlot(t,e){return t.getSlot(e)}traverseDataPoints(t){const e=this.options.series,i=gl(e),s=e.length;for(let n=0;n<s;n++)this._outOfRangeCallback(e[n],"_outOfRangeMinPoint",n,t);for(let n=0;n<i;n++)for(let r=0;r<s;r++){const l=e[r],c=this.categoryAxis.categoryAt(n);t(this.plotArea.bindPoint(l,n),{category:c,categoryIx:n,categoriesCount:i,series:l,seriesIx:r})}for(let n=0;n<s;n++)this._outOfRangeCallback(e[n],"_outOfRangeMaxPoint",n,t)}_outOfRangeCallback(t,e,i,s){const n=t[e];if(n){const r=n.categoryIx;s(this.plotArea.bindPoint(t,r,n.item),{category:n.category,categoryIx:r,series:t,seriesIx:i,dataItem:n.item})}}formatPointValue(t,e){return null===t.value?"":this.chartService.format.auto(e,t.value)}pointValue(t){return t.valueFields.value}}C(Xu,{series:[],invertAxes:!1,isStacked:!1,clip:!0,limitPoints:!0});const Ri=Xu,me={click:function(o,t){return o.trigger(Tu,this.eventArgs(t))},hover:function(o,t){return o.trigger(Mu,this.eventArgs(t))},over:function(o,t){return o.trigger(Eu,this.eventArgs(t))},out:function(o,t){return o.trigger(Pu,this.eventArgs(t))},eventArgs:function(o){return{value:this.value,percentage:this.percentage,stackValue:this.stackValue,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:ue(o),originalEvent:o,point:this}}},Cs={createNote:function(){const o=this.options.notes,t=this.noteText||o.label.text;!1!==o.visible&&_(t)&&null!==t&&(this.note=new Yd({value:this.value,text:t,dataItem:this.dataItem,category:this.category,series:this.series},this.options.notes,this.owner.chartService),this.append(this.note))}};class qo extends K{constructor(t,e){super(),this.value=t,this.options=e,this.aboveAxis=O(this.options.aboveAxis,!0),this.tooltipTracking=!0,this._id=qs()}render(){const{markers:t}=this.options;this._rendered||(this._rendered=!0,t.visible&&t.size&&(this.marker=this.createMarker(),this.append(this.marker)),this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))}createLabel(){const e=this.options.labels;e.visible&&(this.label=this.createLabelElement(e),this.append(this.label))}createLabelElement(t){return new Ht(this.getLabelText(t),x({align:V,vAlign:V,margin:{left:5,right:5},zIndex:O(t.zIndex,this.series.zIndex)},t),this.pointData())}getLabelText(t){let e=kt(t);return e?e(this.pointData()):t.format?this.formatValue(t.format):this.value}getAriaLabelText(){const t=this.options.labels,e=Jh(t);return e?e(this.pointData()):this.getLabelText(t)}markerBorder(){const t=this.options.markers,e=t.background,i=x({color:this.color},t.border);return _(i.color)||(i.color=new be.A(e).brightness(.8).toHex()),i}createVisual(){}createMarker(){const t=this.options.markers;return new Ot({type:t.type,width:t.size,height:t.size,rotation:t.rotation,background:t.background,border:this.markerBorder(),opacity:t.opacity,pattern:this.options.pattern,zIndex:O(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual,accessibilityOptions:x({ariaLabel:this.getAriaLabelText(this.options.labels)},this.options.accessibility)},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category})}markerBox(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box}reflow(t){const{options:e,aboveAxis:i}=this,s=e.vertical;this.render(),this.box=t;const n=t.clone();if(s?i?n.y1-=n.height():n.y2+=n.height():i?n.x1+=n.width():n.x2-=n.width(),this._childBox=n,this.marker&&this.marker.reflow(n),this.reflowLabel(n),this.errorBars)for(let r=0;r<this.errorBars.length;r++)this.errorBars[r].reflow(n);if(this.note){let r=this.markerBox();if(!e.markers.visible||!e.markers.size){const l=r.center();r=new k(l.x,l.y,l.x,l.y)}this.note.reflow(r)}}reflowLabel(t){const{options:e,label:i}=this;let s=e.labels.position;i&&(s=s===Ho?G:s,s=s===Za?Y:s,i.reflow(t),i.box.alignTo(this.markerBox(),s),i.reflow(i.box))}createHighlight(){const t=this.options.highlight.markers,e=this.markerBorder().color,i=this.options.markers,s=i.size+(i.border.width||0)+(t.border.width||0),n=new Ot({type:i.type,width:s,height:s,rotation:i.rotation,background:t.color||e,border:{color:t.border.color,width:t.border.width,opacity:O(t.border.opacity,1)},opacity:O(t.opacity,1)});return n.reflow(this._childBox),n.getElement()}highlightVisual(){return(this.marker||{}).visual}highlightVisualArgs(){const t=this.marker;let e,i;if(t)i=t.paddingBox.toRect(),e=t.visual;else{const s=this.options.markers.size,n=s/2,r=this.box.center();i=new At.A([r.x-n,r.y-n],[s,s])}return{options:this.options,rect:i,visual:e}}createFocusHighlight(){const t=this.options.markers,e=this.options.focusHighlight,i=t.size+(t.border.width||0),s=new Ot({type:t.type,width:i,height:i,rotation:t.rotation,background:e.color,border:e.border,opacity:e.opacity,padding:e.border.width/2,zIndex:e.zIndex});return s.reflow(this._childBox),s.getElement()}tooltipAnchor(){const t=this.markerBox(),e=this.owner.pane.clipBox();if(!e||e.overlaps(t)){const n=U;let r,l;return this.aboveAxis?(r=t.y1,l=Y):(r=t.y2,l=G),{point:new B(t.x2+5,r),align:{horizontal:n,vertical:l}}}}formatValue(t){return this.owner.formatPointValue(this,t)}overlapsBox(t){return this.markerBox().overlaps(t)}unclipElements(){this.label&&(this.label.options.noclip=!0),this.note&&(this.note.options.noclip=!0)}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series}}focusVisual(){this.marker&&(this.marker.visual&&this.marker.visual.options.set("id",this._id),this.toggleFocusHighlight(!0))}clearFocusFromVisual(){this.marker&&(this.marker.visual&&this.marker.visual.options.set("id",""),this.toggleFocusHighlight(!1))}getIndex(){return _(this.categoryIx)?this.categoryIx:this.pointIx}}qo.prototype.defaults={vertical:!0,markers:{visible:!0,background:W,size:8,type:Ut,border:{width:2},opacity:1},labels:{visible:!1,position:Ho,margin:Z(3),padding:Z(4),animation:{type:ai,delay:le}},notes:{label:{}},highlight:{markers:{border:{color:"#fff",width:2}},zIndex:100},errorBars:{line:{width:1}},accessibility:{tabIndex:0,role:hi,className:di,ariaRoleDescription:ui}},x(qo.prototype,me),x(qo.prototype,Cs);const Li=qo;class Yu extends K{constructor(t,e,i){super(),this.linePoints=t,this.series=e,this.seriesIx=i}points(){return this.toGeometryPoints(this.linePoints)}toGeometryPoints(t){const e=[];for(let i=0,s=t.length;i<s;i++)t[i]&&!1!==t[i].visible&&e.push(t[i]._childBox.toRect().center());return e}createVisual(){const t=this.series.visual;t?(this.visual=t({points:this.toGeometryPoints(this.linePoints),series:this.series,sender:this.getSender(),createVisual:()=>(this.segmentVisual(),this.visual)}),this.visual&&!_(this.visual.options.zIndex)&&(this.visual.options.zIndex=this.series.zIndex)):this.segmentVisual()}segmentVisual(){const{options:t,series:e}=this;let{color:i,_defaults:s}=e;lt(i)&&s&&(i=s.color);const n=M.w.fromPoints(this.points(),{stroke:{color:i,width:e.width,opacity:e.opacity,dashType:e.dashType},zIndex:e.zIndex});t.closed&&n.close(),this.visual=n}aliasFor(t,e){return this.parent.getNearestPoint(e.x,e.y,this.seriesIx)}}C(Yu,{closed:!1});const ks=Yu;function xl(o,t,e,i,s){const n=o.box,r=new j.A;return r[t]=n[t+e],r[i]=n[i+s],r}const vl={calculateStepPoints:function(o){const t=this.parent.plotArea.seriesCategoryAxis(this.series),{justified:e,vertical:i,reverse:s}=t.options,n=i?P:D,r=i?D:P,l=s?2:1,c=l;let h=xl(o[0],n,l,r,c);const d=[h];for(let u=1;u<o.length;u++){const p=xl(o[u],n,l,r,c);if(h[n]!==p[n]){const g=new j.A;g[n]=h[n],g[r]=p[r],d.push(g,p)}h=p}return e?h!==mt(d)&&d.push(h):d.push(xl(mt(o),n,l,r,s?1:2)),d}};class Wu extends ks{points(){return this.calculateStepPoints(this.linePoints)}}x(Wu.prototype,vl);const m0=Wu,bl=class x0 extends ks{segmentVisual(){const t=this.series,e=t._defaults;let i=t.color;lt(i)&&e&&(i=e.color);const n=new Uo(this.options.closed).process(this.points()),r=new M.w({stroke:{color:i,width:t.width,opacity:t.opacity,dashType:t.dashType},zIndex:t.zIndex});r.segments.push.apply(r.segments,n),this.visual=r}},yl={renderSegments:function(){const{options:o,seriesPoints:t}=this,e=o.series,i=t.length;let s;this._segments=[];for(let n=0;n<i;n++){const r=e[n],l=this.sortPoints(t[n]),c=l.length;let h=[];for(let d=0;d<c;d++){const u=l[d];u?h.push(u):this.seriesMissingValues(r)!==cs&&(h.length>1&&(s=this.createSegment(h,r,n,s),this._addSegment(s)),h=[])}h.length>1&&(s=this.createSegment(h,r,n,s),this._addSegment(s))}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(o){this._segments.push(o),o.parent=this},sortPoints:function(o){return o},seriesMissingValues:function(o){const t=o.missingValues;return!t&&this.options.isStacked?Ve:t||cs},getNearestPoint:function(o,t,e){const i=new B(o,t),s=this.seriesPoints[e];let r,n=ft;for(let l=0;l<s.length;l++){const c=s[l];if(c&&_(c.value)&&null!==c.value&&!1!==c.visible){const d=c.box.center().distanceTo(i);d<n&&(r=c,n=d)}}return r}};class _l extends re{setup(){this._setEnd(this.options.box.x1)}step(t){const e=this.options.box;this._setEnd(se(e.x1,e.x2,t))}_setEnd(t){const e=this.element,i=e.segments,s=i[1].anchor(),n=i[2].anchor();e.suspend(),s.setX(t),e.resume(),n.setX(t)}}C(_l,{duration:le}),we.current.register("clip",_l);const v0=_l,Jo={createAnimation:function(){const o=this.getRoot();if(o&&!1!==(o.options||{}).transitions){const t=o.size(),e=M.w.fromRect(t.toRect());this.visual.clip(e),this.animation=new v0(e,{box:t}),Vu(this.options.series)&&this._setChildrenAnimation(e)}},_setChildrenAnimation:function(o){const t=this.animationPoints();for(let e=0;e<t.length;e++){const i=t[e];i&&i.visual&&_(i.visual.options.zIndex)&&i.visual.clip(o)}}};class $u extends Ri{render(){super.render(),this.updateStackRange(),this.renderSegments()}pointType(){return Li}createPoint(t,e){const{series:i,seriesIx:s}=e,n=this.seriesMissingValues(i);let r=t.valueFields.value;if(!_(r)||null===r){if(n!==Ve)return null;r=0}let l=this.pointOptions(i,s);l=this.evalPointOptions(l,r,e);let c=t.fields.color||i.color;lt(i.color)&&(c=l.color);const h=new Li(r,l);return h.color=c,this.append(h),h}plotRange(t){let e=this.plotValue(t);if(this.options.isStacked){const s=this.categoryPoints[t.categoryIx];for(let n=0;n<s.length;n++){const r=s[n];if(t===r)break;e+=this.plotValue(r),this.options.isStacked100&&(e=Math.min(e,1))}}return[e,e]}createSegment(t,e,i){const s=e.style;let n;return n=s===dn?m0:s===hs?bl:ks,new n(t,e,i)}animationPoints(){const t=this.points,e=[];for(let i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e.concat(this._segments)}supportsPointInactiveOpacity(){return!1}}x($u.prototype,yl,Jo);const wl=$u,As=class b0 extends ks{constructor(t,e,i,s,n){super(t,e,i),this.prevSegment=s,this.stackPoints=n}createVisual(){const t=this.series,e=t._defaults,i=t.line||{};let s=t.color;lt(s)&&e&&(s=e.color),this.visual=new et.A({zIndex:t.zIndex}),this.createFill({fill:oi(t.pattern,{color:s,opacity:t.opacity}),stroke:null}),i.width>0&&!1!==i.visible&&this.createStroke({stroke:x({color:s,opacity:t.opacity,lineCap:"butt"},i)})}strokeSegments(){let t=this._strokeSegments;return t||(t=this._strokeSegments=this.createStrokeSegments()),t}createStrokeSegments(){return this.segmentsFromPoints(this.points())}stackSegments(){return this.prevSegment?this.prevSegment.createStackSegments(this.stackPoints):this.createStackSegments(this.stackPoints)}createStackSegments(t){return this.segmentsFromPoints(this.toGeometryPoints(t)).reverse()}segmentsFromPoints(t){return t.map(e=>new Be.A(e))}createStroke(t){const e=new M.w(t);e.segments.push.apply(e.segments,this.strokeSegments()),this.visual.append(e)}hasStackSegment(){return this.prevSegment||this.stackPoints&&this.stackPoints.length}createFill(t){const e=this.strokeSegments(),i=e.slice(0),s=this.hasStackSegment();if(s){const r=this.stackSegments();ki(i,r)}const n=new M.w(t);n.segments.push.apply(n.segments,i),!s&&e.length>1&&this.fillToAxes(n),this.visual.append(n)}fillToAxes(t){const e=this.parent,i=e.options.invertAxes,s=e.seriesValueAxis(this.series),n=e.categoryAxisCrossingValue(s),r=s.getSlot(n,n,!0),l=this.strokeSegments(),c=l[0].anchor(),h=mt(l).anchor();let d=i?r.x1:r.y1;i?t.lineTo(d,h.y).lineTo(d,c.y):t.lineTo(h.x,d).lineTo(c.x,d)}};class Qu extends As{createStrokeSegments(){return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints))}createStackSegments(t){return this.segmentsFromPoints(this.calculateStepPoints(t)).reverse()}}x(Qu.prototype,vl);const y0=Qu,Cl=class _0 extends As{createStrokeSegments(){const t=new Uo(this.options.closed),e=this.points();return t.process(e)}createStackSegments(){const t=this.strokeSegments(),e=[];for(let i=t.length-1;i>=0;i--){const s=t[i];e.push(new Be.A(s.anchor(),s.controlOut(),s.controlIn()))}return e}},C0=class w0 extends wl{createSegment(t,e,i,s){const r=(e.line||{}).style;let l,c,h;return this.options.isStacked&&i>0&&s&&("gap"!==this.seriesMissingValues(e)?(c=s.linePoints,l=s):c=this._gapStackPoints(t,i,r)),h=r===dn?y0:r===hs?Cl:As,new h(t,e,i,l,c)}reflow(t){super.reflow(t);const e=this._stackPoints;if(e)for(let i=0;i<e.length;i++){const s=e[i],n=this.categoryAxis.getSlot(s.categoryIx);s.reflow(n)}}_gapStackPoints(t,e,i){const s=this.seriesPoints;let n=t[0].categoryIx,r=t.length;n<0&&(n=0,r--);const l=n+r,c=this.seriesOptions[0]._outOfRangeMinPoint?1:0,h=[];this._stackPoints=this._stackPoints||[];for(let d=n;d<l;d++){const u=d+c;let g,p=e;do{p--,g=s[p][u]}while(p>0&&!g);if(g)i!==dn&&d>n&&!s[p][u-1]&&h.push(this._previousSegmentPoint(d,u,u-1,p)),h.push(g),i!==dn&&d+1<l&&!s[p][u+1]&&h.push(this._previousSegmentPoint(d,u,u+1,p));else{const f=this._createGapStackPoint(d);this._stackPoints.push(f),h.push(f)}}return h}_previousSegmentPoint(t,e,i,s){const n=this.seriesPoints;let l,r=s;for(;r>0&&!l;)r--,l=n[r][i];return l?l=n[r][e]:(l=this._createGapStackPoint(t),this._stackPoints.push(l)),l}_createGapStackPoint(t){const e=this.pointOptions({},0),i=new Li(0,e);return i.categoryIx=t,i.series={},i}seriesMissingValues(t){return t.missingValues||Ve}supportsPointInactiveOpacity(){return!1}},tr=class k0 extends I.A{constructor(){super(),this.axisRanges={}}update(t){const e=this.axisRanges;for(let i in t){const s=t[i];let n=e[i];e[i]=n=n||{min:ft,max:wt},n.min=Math.min(n.min,s.min),n.max=Math.max(n.max,s.max)}}reset(t){this.axisRanges[t]=void 0}query(t){return this.axisRanges[t]}};class Zu extends K{constructor(t,e,i){super(e),this.textBox=new Ht(t,this.options,i),this.append(this.textBox)}createVisual(){this.textBox.options.noclip=this.options.noclip}reflow(t){const e=this.options,{vertical:i,aboveAxis:s}=e,n=this.children[0],r=n.options,l=n.box,c=n.options.padding;let h=t;if(r.align=i?V:U,r.vAlign=i?G:V,e.position===Qo)i?(r.vAlign=G,!s&&l.height()<t.height()&&(r.vAlign=Y)):r.align=s?$:U;else if(e.position===V)r.vAlign=V,r.align=V;else if("insideBase"===e.position)i?r.vAlign=s?Y:G:r.align=s?U:$;else if(e.position===Ii)if(i)if(s){const d=(l.width()-t.width()-c.left-c.right)/2;h=new k(t.x1-d,t.y1-l.height(),t.x2+d,t.y1)}else h=new k(t.x1,t.y2,t.x2,t.y2+l.height());else r.align=V,h=s?new k(t.x2,t.y1,t.x2+l.width(),t.y2):new k(t.x1-l.width(),t.y1,t.x1,t.y2);e.rotation||(i?c.left=c.right=(h.width()-n.contentBox.width())/2:c.top=c.bottom=(h.height()-n.contentBox.height())/2),n.reflow(h)}alignToClipBox(t){const i=this.options.vertical?D:P,s=i+"1",n=i+"2",l=this.parent.box;if(l[s]<t[s]||t[n]<l[n]){const c=this.children[0].paddingBox.clone();c[s]=Math.max(l[s],t[s]),c[n]=Math.min(l[n],t[n]),this.reflow(c)}}}C(Zu,{position:Ii,margin:Z(3),padding:Z(4),color:pt,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:ai,delay:le},zIndex:2});const Ku=Zu,Ss={addAccessibilityAttributesToVisual:function(){this._id=this._id||qs();const o=x({ariaLabel:this.getAriaLabelText()},this.options.accessibility);Ta(this.visual,o)},getAriaLabelText(){const o=this.options.labels,t=Jh(o);return t?t(this.pointData()):this.getLabelText(o)},focusVisual(){this.visual.options.set("id",this._id),this.toggleFocusHighlight(!0)},clearFocusFromVisual(){this.visual.options.set("id",""),this.toggleFocusHighlight(!1)}};class Cn extends K{constructor(t,e){super(),this.options=e,this.color=e.color||W,this.aboveAxis=O(this.options.aboveAxis,!0),this.value=t}render(){this._rendered||(this._rendered=!0,this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))}createLabel(){const e=this.options.labels;e.visible&&(this.label=this.createLabelElement(e),this.append(this.label))}createLabelElement(t){return new Ku(this.getLabelText(t),x({vertical:this.options.vertical},t),this.pointData())}getLabelText(t){let e=kt(t);return e?e(this.pointData()):this.formatValue(t.format)}formatValue(t){return this.owner.formatPointValue(this,t)}reflow(t){this.render();const e=this.label;if(this.box=t,e&&(e.options.aboveAxis=this.aboveAxis,e.reflow(t)),this.note&&this.note.reflow(t),this.errorBars)for(let i=0;i<this.errorBars.length;i++)this.errorBars[i].reflow(t)}createVisual(){const{box:t,options:e}=this,i=e.visual;if(!1!==this.visible)if(super.createVisual(),this.addAccessibilityAttributesToVisual(),i){const s=this.rectVisual=i({category:this.category,dataItem:this.dataItem,value:this.value,sender:this.getSender(),series:this.series,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,rect:t.toRect(),createVisual:()=>{const n=new et.A;return this.createRect(n),n},options:e});s&&this.visual.append(s)}else t.width()>0&&t.height()>0&&this.createRect(this.visual)}createRect(t){const e=this.options,i=e.border,s=_(i.opacity)?i.opacity:e.opacity,n=this.box.toRect();n.size.width=Math.round(n.size.width);const r=this.rectVisual=M.w.fromRect(n,{fill:oi(e.pattern,{color:this.color,opacity:e.opacity}),stroke:{color:this.getBorderColor(),width:i.width,opacity:s,dashType:i.dashType}}),l=this.box.width(),c=this.box.height();if((e.vertical?l:c)>6&&(Qt(r),(l<1||c<1)&&(r.options.stroke.lineJoin="round")),t.append(r),fl(e)){const d=this.createGradientOverlay(r,{baseColor:this.color},x({end:e.vertical?void 0:[0,1]},e.overlay));t.append(d)}}createHighlight(t){return Qt(M.w.fromRect(this.box.toRect(),t))}highlightVisual(){return this.rectVisual}highlightVisualArgs(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}}createFocusHighlight(t){return Qt(M.w.fromRect(this.box.pad(this.options.focusHighlight.border.width/2).toRect(),t))}getBorderColor(){const t=this.color,e=this.options.border,i=e._brightness||.8;let s=e.color;return _(s)||(s=new be.A(t).brightness(i).toHex()),s}tooltipAnchor(){const{options:t,box:e,aboveAxis:i}=this,s=this.owner.pane.clipBox()||e;let l,c,n=U,r=G;if(t.vertical)l=Math.min(e.x2,s.x2)+5,i?c=Math.max(e.y1,s.y1):(c=Math.min(e.y2,s.y2),r=Y);else{const h=Math.max(e.x1,s.x1),d=Math.min(e.x2,s.x2);t.isStacked?(r=Y,i?(n=$,l=d):l=h,c=Math.max(e.y1,s.y1)-5):(i?l=d+5:(l=h-5,n=$),c=Math.max(e.y1,s.y1))}return{point:new B(l,c),align:{horizontal:n,vertical:r}}}overlapsBox(t){return this.box.overlaps(t)}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,series:this.series}}getIndex(){return this.categoryIx}}x(Cn.prototype,me),x(Cn.prototype,Cs),x(Cn.prototype,Ss),Cn.prototype.defaults={border:{width:1},vertical:!0,overlay:{gradient:"glass"},labels:{visible:!1,format:"{0}"},opacity:1,notes:{label:{}},accessibility:{role:hi,className:di,ariaRoleDescription:ui}};const kn=Cn;function qu(o,t){o.forEach(t)}function Ju(o,t){const e=o.length;for(let i=e-1;i>=0;i--)t(o[i],i-e-1)}class tp extends K{constructor(t){super(t),this.forEach=t.rtl?Ju:qu}reflow(t){const{vertical:e,gap:i,spacing:s}=this.options,n=this.children,r=n.length,l=e?D:P,c=r+i+s*(r-1),h=(e?t.height():t.width())/c;let d=t[l+1]+h*(i/2);this.forEach(n,(u,p)=>{const g=(u.box||t).clone();g[l+1]=d,g[l+2]=d+h,u.reflow(g),p<r-1&&(d+=h*s),d+=h})}}C(tp,{vertical:!1,gap:0,spacing:0});const er=tp;class ep extends K{reflow(t){const e=this.options.vertical?P:D,i=this.children,s=i.length;let n=this.box=new k;for(let r=0;r<s;r++){const l=i[r];if(!1!==l.visible){const c=l.box.clone();c.snapTo(t,e),0===r&&(n=this.box=c.clone()),l.reflow(c),n.wrap(c)}}}}C(ep,{vertical:!0});const S0=ep;class ip extends Ri{render(){super.render(),this.updateStackRange()}pointType(){return kn}clusterType(){return er}stackType(){return S0}stackLimits(t,e){return super.stackLimits(t,e)}createPoint(t,e){const{categoryIx:i,series:s,seriesIx:n}=e,{options:r,children:l}=this,c=_(s.stack)?s.stack:r.defaultStack,h=this.pointValue(t);let d=this.pointOptions(s,n);const u=d.labels;c&&u.position===Ii&&(u.position=Qo),d.isStacked=c;let p=t.fields.color||s.color;h<0&&d.negativeColor&&(p=d.negativeColor),d=this.evalPointOptions(d,h,e),lt(s.color)&&(p=d.color);const f=new(this.pointType())(h,d);f.color=p;let m=l[i];return m||(m=new(this.clusterType())({vertical:r.invertAxes,gap:r.gap,spacing:r.spacing,rtl:!r.invertAxes&&(this.chartService||{}).rtl}),this.append(m)),r.isStacked?this.getStackWrap(c,m).append(f):m.append(f),f}getStackWrap(t,e){const i=typeof t===Ys?t.group||!0:t,s=e.children;let n;if(typeof i===da||!0===i)for(let r=0;r<s.length;r++)if(s[r]._stackGroup===i){n=s[r];break}return n||(n=new(this.stackType())({vertical:!this.options.invertAxes}),n._stackGroup=i,e.append(n)),n}categorySlot(t,e,i){const s=this.options,n=t.getSlot(e),r=i.startValue();if(s.isStacked){const l=i.getSlot(r,r,!0),c=s.invertAxes?P:D;n[c+1]=n[c+2]=l[c+1]}return n}reflowCategories(t){const e=this.children,i=e.length;for(let s=0;s<i;s++)e[s].reflow(t[s])}createAnimation(){this._setAnimationOptions(),super.createAnimation(),Vu(this.options.series)&&this._setChildrenAnimation()}_setChildrenAnimation(){const t=this.points;for(let e=0;e<t.length;e++){const i=t[e],s=i.visual;s&&_(s.options.zIndex)&&(i.options.animation=this.options.animation,i.createAnimation())}}_setAnimationOptions(){const t=this.options,e=t.animation||{};let i;if(t.isStacked){const s=this.seriesValueAxis(t.series[0]);i=s.getSlot(s.startValue())}else i=this.categoryAxis.getSlot(0);e.origin=new j.A(i.x1,i.y1),e.vertical=!t.invertAxes}}C(ip,{animation:{type:ce}});const An=ip;class Ts extends K{constructor(t,e){super(e),this.value=t}getLabelText(t){return this.formatValue(t.format)}reflow(t){const{options:e,value:i,owner:s}=this,n=s.seriesValueAxis(e),r=n.getSlot(i.open,i.close),l=n.getSlot(i.low,i.high);r.x1=l.x1=t.x1,r.x2=l.x2=t.x2,this.realBody=r;const c=l.center().x,h=[];h.push([[c,l.y1],[c,r.y1]]),h.push([[c,r.y2],[c,l.y2]]),this.lines=h,this.box=l.clone().wrap(r),this._rendered||(this._rendered=!0,this.createNote()),this.reflowNote()}reflowNote(){this.note&&this.note.reflow(this.box)}createVisual(){super.createVisual(),this.addAccessibilityAttributesToVisual(),this._mainVisual=this.mainVisual(this.options),this.visual.append(this._mainVisual),this.createOverlay()}mainVisual(t){const e=new et.A;return this.createBody(e,t),this.createLines(e,t),e}createBody(t,e){const i=M.w.fromRect(this.realBody.toRect(),{fill:oi(e.pattern,{color:this.color,opacity:e.opacity}),stroke:null});e.border.width>0&&i.options.set("stroke",{color:this.getBorderColor(),width:e.border.width,dashType:e.border.dashType,opacity:O(e.border.opacity,e.opacity)}),Qt(i),t.append(i),fl(e)&&t.append(this.createGradientOverlay(i,{baseColor:this.color},x({end:e.vertical?void 0:[0,1]},e.overlay)))}createLines(t,e){this.drawLines(t,e,this.lines,e.line)}drawLines(t,e,i,s){if(!i)return;const n={stroke:{color:s.color||this.color,opacity:O(s.opacity,e.opacity),width:s.width,dashType:s.dashType,lineCap:"butt"}};for(let r=0;r<i.length;r++){const l=M.w.fromPoints(i[r],n);Qt(l),t.append(l)}}getBorderColor(){const t=this.options.border;let e=t.color;return _(e)||(e=new be.A(this.color).brightness(t._brightness).toHex()),e}createOverlay(){const t=M.w.fromRect(this.box.toRect(),{fill:{color:W,opacity:0},stroke:null});this.visual.append(t)}createHighlight(){const t=this.options.highlight,e=this.color;this.color=t.color||this.color;const i=this.mainVisual(x({},this.options,{line:{color:this.getBorderColor()}},t));return this.color=e,i}highlightVisual(){return this._mainVisual}highlightVisualArgs(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}}tooltipAnchor(){const t=this.box,e=this.owner.pane.clipBox()||t;return{point:new B(t.x2+5,Math.max(t.y1,e.y1)+5),align:{horizontal:U,vertical:G}}}formatValue(t){return this.owner.formatPointValue(this,t)}overlapsBox(t){return this.box.overlaps(t)}pointData(){return{dataItem:this.dataItem,value:this.value,meanPoints:this.meanPoints,medianPoints:this.medianPoints,whiskerPoints:this.whiskerPoints,stackValue:this.stackValue,series:this.series}}getIndex(){return this.categoryIx}}Ts.prototype.createFocusHighlight=kn.prototype.createFocusHighlight,C(Ts,{vertical:!0,border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{4:d}</th></tr><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},labels:{format:""},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},accessibility:{role:hi,className:di,ariaRoleDescription:ui}}),x(Ts.prototype,me),x(Ts.prototype,Cs),x(Ts.prototype,Ss);const kl=Ts;class sp extends Ri{reflowCategories(t){const e=this.children,i=e.length;for(let s=0;s<i;s++)e[s].reflow(t[s])}addValue(t,e){const{categoryIx:i,category:s,series:n,seriesIx:r}=e,{children:l,options:c}=this,h=t.valueFields,u=Fu(this.splitValue(h)),p=n.data[i];let f,g=this.categoryPoints[i];g||(this.categoryPoints[i]=g=[]),u&&(f=this.createPoint(t,e));let m=l[i];m||(m=new er({vertical:c.invertAxes,gap:c.gap,spacing:c.spacing,rtl:!c.invertAxes&&(this.chartService||{}).rtl}),this.append(m)),f&&(this.updateRange(h,e),m.append(f),f.categoryIx=i,f.category=s,f.series=n,f.seriesIx=r,f.owner=this,f.dataItem=p,f.noteText=t.fields.noteText),this.points.push(f),g.push(f)}pointType(){return kl}createPoint(t,e){const{series:i}=e,s=this.pointType(),n=t.valueFields;let r=x({},i),l=t.fields.color||i.color;r=this.evalPointOptions(r,n,e),(i.type===us||i.type===gs)&&n.open>n.close&&(l=t.fields.downColor||i.downColor||i.color),lt(i.color)&&(l=r.color),r.vertical=!this.options.invertAxes;const c=new s(n,r);return c.color=l,c}splitValue(t){return[t.low,t.open,t.close,t.high]}updateRange(t,e){const i=e.series.axis,s=this.splitValue(t);let n=this.valueAxisRanges[i]||{min:ft,max:wt};this.valueAxisRanges[i]={min:Math.min.apply(Math,s.concat([n.min])),max:Math.max.apply(Math,s.concat([n.max]))}}formatPointValue(t,e){const i=t.value;return this.chartService.format.auto(e,i.open,i.high,i.low,i.close,t.category)}animationPoints(){return this.points}}x(sp.prototype,Jo);const Al=sp;class Sl extends kl{constructor(t,e){super(t,e),this.createNote()}reflow(t){const{options:e,value:i,owner:s}=this,n=s.seriesValueAxis(e);let r,l;this.boxSlot=l=n.getSlot(i.q1,i.q3),this.realBody=l,this.reflowBoxSlot(t),this.whiskerSlot=r=n.getSlot(i.lower,i.upper),this.reflowWhiskerSlot(t);const c=n.getSlot(i.median);if(i.mean){const h=n.getSlot(i.mean);this.meanPoints=this.calcMeanPoints(t,h)}this.whiskerPoints=this.calcWhiskerPoints(l,r),this.medianPoints=this.calcMedianPoints(t,c),this.box=r.clone().wrap(l),this.reflowNote()}reflowBoxSlot(t){this.boxSlot.x1=t.x1,this.boxSlot.x2=t.x2}reflowWhiskerSlot(t){this.whiskerSlot.x1=t.x1,this.whiskerSlot.x2=t.x2}calcMeanPoints(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]}calcWhiskerPoints(t,e){const i=e.center().x;return[[[i-5,e.y1],[i+5,e.y1],[i,e.y1],[i,t.y1]],[[i-5,e.y2],[i+5,e.y2],[i,e.y2],[i,t.y2]]]}calcMedianPoints(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]}renderOutliers(t){const e=this.value,i=e.outliers||[],s=3*Math.abs(e.q3-e.q1),n=[];let r=t.markers||{};for(let l=0;l<i.length;l++){const c=i[l];r=c<e.q3+s&&c>e.q1-s?t.outliers:t.extremes;let h=x({},r.border);_(h.color)||(h.color=_(this.color)?this.color:new be.A(r.background).brightness(.8).toHex());const d=new Ot({type:r.type,width:r.size,height:r.size,rotation:r.rotation,background:r.background,border:h,opacity:r.opacity});d.value=c,n.push(d)}return this.reflowOutliers(n),n}reflowOutliers(t){const e=this.owner.seriesValueAxis(this.options),i=this.box.center();for(let s=0;s<t.length;s++){const r=e.getSlot(t[s].value);this.options.vertical?r.move(i.x):r.move(void 0,i.y),this.box=this.box.wrap(r),t[s].reflow(r)}}mainVisual(t){const e=super.mainVisual(t),i=this.renderOutliers(t);for(let s=0;s<i.length;s++){const n=i[s].getElement();n&&e.append(n)}return e}createLines(t,e){this.drawLines(t,e,this.whiskerPoints,e.whiskers),this.drawLines(t,e,this.medianPoints,e.median),this.drawLines(t,e,this.meanPoints,e.mean)}getBorderColor(){return(this.options.border||{}).color?this.options.border.color:this.color?this.color:super.getBorderColor()}}C(Sl,{border:{_brightness:.8},line:{width:2},median:{color:"#f6f6f6"},mean:{width:2,dashType:"dash",color:"#f6f6f6"},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{6:d}</th></tr><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:8,type:aa,background:W,border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:8,type:Ut,background:W,border:{width:2,opacity:1},opacity:0}}),x(Sl.prototype,me);const np=Sl,M0=class T0 extends np{reflowBoxSlot(t){this.boxSlot.y1=t.y1,this.boxSlot.y2=t.y2}reflowWhiskerSlot(t){this.whiskerSlot.y1=t.y1,this.whiskerSlot.y2=t.y2}calcMeanPoints(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]}calcWhiskerPoints(t,e){const i=e.center().y;return[[[e.x1,i-5],[e.x1,i+5],[e.x1,i],[t.x1,i]],[[e.x2,i-5],[e.x2,i+5],[e.x2,i],[t.x2,i]]]}calcMedianPoints(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]}},P0=class E0 extends Al{addValue(t,e){const{categoryIx:i,category:s,series:n,seriesIx:r}=e,{children:l,options:c}=this,h=t.valueFields,u=Fu(this.splitValue(h)),p=n.data[i];let f,g=this.categoryPoints[i];g||(this.categoryPoints[i]=g=[]),u&&(f=this.createPoint(t,e));let m=l[i];m||(m=new er({vertical:c.invertAxes,gap:c.gap,spacing:c.spacing,rtl:!c.invertAxes&&(this.chartService||{}).rtl}),this.append(m)),f&&(this.updateRange(h,e),m.append(f),f.categoryIx=i,f.category=s,f.series=n,f.seriesIx=r,f.owner=this,f.dataItem=p),this.points.push(f),g.push(f)}pointType(){return this.options.invertAxes?M0:np}splitValue(t){return[t.lower,t.q1,t.median,t.q3,t.upper]}updateRange(t,e){const i=e.series.axis;let s=this.splitValue(t).concat(this.filterOutliers(t.outliers));_(t.mean)&&(s=s.concat(t.mean));let n=this.valueAxisRanges[i]||{min:ft,max:wt};this.valueAxisRanges[i]={min:Math.min.apply(Math,s.concat([n.min])),max:Math.max.apply(Math,s.concat([n.max]))}}formatPointValue(t,e){const i=t.value;return this.chartService.format.auto(e,i.lower,i.q1,i.median,i.q3,i.upper,i.mean,t.category)}filterOutliers(t){const e=(t||[]).length,i=[];for(let s=0;s<e;s++){const n=t[s];_(n)&&null!==n&&i.push(n)}return i}supportsPointInactiveOpacity(){return!1}},I0=class D0 extends Bu{getAxis(){const t=this.chart.seriesAxes(this.series);return this.isVertical?t.y:t.x}};class Tl extends K{constructor(t,e){super(e),this.plotArea=t,this.chartService=t.chartService,this._initFields(),this.render()}_initFields(){this.xAxisRanges={},this.yAxisRanges={},this.points=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[]}render(){this.traverseDataPoints(this.addValue.bind(this))}addErrorBar(t,e,i){const s=t.value[e],n=e+"Value",r=e+"ErrorLow",l=e+"ErrorHigh",{seriesIx:c,series:h}=i,d=t.options.errorBars,u=i[r],p=i[l];if(X(s)){let g;X(u)&&X(p)&&(g={low:u,high:p}),d&&_(d[n])&&(this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]},this.seriesErrorRanges[e][c]=this.seriesErrorRanges[e][c]||new _u(d[n],h,e),g=this.seriesErrorRanges[e][c].getErrorRange(s,d[n])),g&&this.addPointErrorBar(g,t,e)}}addPointErrorBar(t,e,i){const{low:s,high:n}=t,{series:r,options:{errorBars:l}}=e,c=i===D,h={};e[i+"Low"]=s,e[i+"High"]=n,e.errorBars=e.errorBars||[];const d=new I0(s,n,c,this,r,l);e.errorBars.push(d),e.append(d),h[i]=s,this.updateRange(h,r),h[i]=n,this.updateRange(h,r)}addValue(t,e){const{x:i,y:s}=t,n=e.seriesIx,l=this.seriesMissingValues(this.options.series[n]),c=this.seriesPoints[n];let d,h=t;Xt(i)&&Xt(s)||(h=this.createMissingValue(h,l)),h&&(d=this.createPoint(h,e),d&&(Object.assign(d,e),this.addErrorBar(d,P,e),this.addErrorBar(d,D,e)),this.updateRange(h,e.series)),this.points.push(d),c.push(d)}seriesMissingValues(t){return t.missingValues}createMissingValue(){}updateRange(t,e){const i=this.chartService.intl,{xAxis:s,yAxis:n}=e;let{x:r,y:l}=t,c=this.xAxisRanges[s],h=this.yAxisRanges[n];Xt(r)&&(c=this.xAxisRanges[s]=c||{min:ft,max:wt},jt(r)&&(r=Dt(i,r)),c.min=Math.min(c.min,r),c.max=Math.max(c.max,r)),Xt(l)&&(h=this.yAxisRanges[n]=h||{min:ft,max:wt},jt(l)&&(l=Dt(i,l)),h.min=Math.min(h.min,l),h.max=Math.max(h.max,l))}evalPointOptions(t,e,i){const{series:s,seriesIx:n}=i,r={defaults:s._defaults,excluded:["data","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint","drilldownSeriesFactory","ariaTemplate","ariaContent"]};let l=this._evalSeries[n];_(l)||(this._evalSeries[n]=l=je(t,{},r,!0));let c=t;return l&&(c=x({},t),je(c,{value:e,series:s,dataItem:i.dataItem},r)),c}pointType(){return Li}pointOptions(t,e){let i=this.seriesOptions[e];if(!i){const s=this.pointType().prototype.defaults;this.seriesOptions[e]=i=x({},s,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return i}createPoint(t,e){const i=e.series;let s=this.pointOptions(i,e.seriesIx),n=e.color||i.color;s=this.evalPointOptions(s,t,e),lt(i.color)&&(n=s.color);const r=new Li(t,s);return r.color=n,this.append(r),r}seriesAxes(t){const{xAxis:e,yAxis:i}=t,s=this.plotArea,n=e?s.namedXAxes[e]:s.axisX,r=i?s.namedYAxes[i]:s.axisY;if(!n)throw new Error("Unable to locate X axis with name "+e);if(!r)throw new Error("Unable to locate Y axis with name "+i);return{x:n,y:r}}reflow(t){const e=this.points,i=!this.options.clip;let s=0;this.traverseDataPoints((n,r)=>{const l=e[s++],c=this.seriesAxes(r.series),h=c.x.getSlot(n.x,n.x,i),d=c.y.getSlot(n.y,n.y,i);if(l)if(h&&d){const u=this.pointSlot(h,d);l.reflow(u)}else l.visible=!1}),this.box=t}pointSlot(t,e){return new k(t.x1,e.y1,t.x2,e.y2)}traverseDataPoints(t){const{options:{series:e},seriesPoints:i}=this;for(let s=0;s<e.length;s++){const n=e[s];i[s]||(i[s]=[]);for(let l=0;l<n.data.length;l++){const{valueFields:c,fields:h}=this.plotArea.bindPoint(n,l);t(c,x({pointIx:l,series:n,seriesIx:s,dataItem:n.data[l],owner:this},h))}}}formatPointValue(t,e){const i=t.value;return this.chartService.format.auto(e,i.x,i.y)}animationPoints(){const t=this.points,e=[];for(let i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e}}C(Tl,{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0}),x(Tl.prototype,Jo);const ir=Tl;class sr extends Li{constructor(t,e){super(t,e),this.category=t.category}createHighlight(){const t=this.options.highlight,e=t.border,i=this.options.markers,s=this.box.center(),n=(i.size+i.border.width+e.width)/2,r=new et.A,l=new _e.A(new oe.A([s.x,s.y+n/5+e.width/2],n+e.width/2),{stroke:{color:"none"},fill:this.createGradient({gradient:"bubbleShadow",color:i.background,stops:[{offset:0,color:i.background,opacity:.3},{offset:1,color:i.background,opacity:0}]})}),c=new _e.A(new oe.A([s.x,s.y],n),{stroke:{color:e.color||new be.A(i.background).brightness(.8).toHex(),width:e.width,opacity:e.opacity},fill:oi(this.options.pattern,{color:i.background,opacity:t.opacity})});return r.append(l,c),r}createFocusHighlight(t){const e=this.options.focusHighlight,i=this.options.markers,s=this.box.center();return new _e.A(new oe.A([s.x,s.y],(i.size+i.border.width)/2+e.border.width/2),t)}}sr.prototype.defaults=x({},sr.prototype.defaults,{labels:{position:V},highlight:{opacity:1,border:{color:"#fff",width:2,opacity:1}}}),sr.prototype.defaults.highlight.zIndex=void 0;const op=sr;class rp extends ir{_initFields(){this._maxSize=wt,super._initFields()}addValue(t,e){null!==t.size&&(t.size>0||t.size<0&&e.series.negativeValues.visible)?(this._maxSize=Math.max(this._maxSize,Math.abs(t.size)),super.addValue(t,e)):(this.points.push(null),this.seriesPoints[e.seriesIx].push(null))}reflow(t){this.updateBubblesSize(t),super.reflow(t)}pointType(){return op}createPoint(t,e){const i=e.series,n=e.pointIx*(le/i.data.length),r={delay:n,duration:le-n,type:ds};let l=e.color||i.color;t.size<0&&i.negativeValues.visible&&(l=O(i.negativeValues.color,l));let c=x({labels:{animation:{delay:n,duration:le-n}}},this.pointOptions(i,e.seriesIx),{markers:{type:Ut,border:i.border,opacity:i.opacity,animation:r}});c=this.evalPointOptions(c,t,e),lt(i.color)&&(l=c.color),c.markers.background=l;const h=new op(t,c);return h.color=l,this.append(h),h}updateBubblesSize(t){const{options:{series:e}}=this,i=Math.min(t.width(),t.height());for(let s=0;s<e.length;s++){const n=e[s],r=this.seriesPoints[s],h=(n.minSize||Math.max(.02*i,10))/2,d=(n.maxSize||.2*i)/2,u=Math.PI*h*h,f=(Math.PI*d*d-u)/this._maxSize;for(let m=0;m<r.length;m++){const v=r[m];if(v){const y=Math.abs(v.value.size)*f,w=Math.sqrt((u+y)/Math.PI),L=O(v.options.zIndex,0)+(1-w/d);x(v.options,{zIndex:L,markers:{size:2*w,zIndex:L},labels:{zIndex:L+1}})}}}}formatPointValue(t,e){const i=t.value;return this.chartService.format.auto(e,i.x,i.y,i.size,t.category)}createAnimation(){}createVisual(){}}C(rp,{tooltip:{format:"{3}"},labels:{format:"{3}"}});const R0=rp;class ap extends Ot{}x(ap.prototype,me);const L0=ap;class Oi extends K{constructor(t,e){super(e),this.aboveAxis=this.options.aboveAxis,this.color=e.color||W,this.value=t}render(){const t=this.options;this._rendered||(this._rendered=!0,_(this.value.target)&&(this.target=new L0({type:t.target.shape,background:t.target.color||this.color,opacity:t.opacity,zIndex:t.zIndex,border:t.target.border,vAlign:G,align:$}),this.target.value=this.value,this.target.dataItem=this.dataItem,this.target.series=this.series,this.append(this.target)),this.createLabel(),this.createNote())}createLabel(){const e=this.options.labels;e.visible&&(this.label=this.createLabelElement(e),this.append(this.label))}createLabelElement(t){return new Ku(this.getLabelText(t),t,this.pointData())}getLabelText(t){let e=kt(t);return e?e(this.pointData()):this.formatValue(t.format)}reflow(t){this.render();const{options:e,target:i,owner:s}=this,n=e.invertAxes,r=s.seriesValueAxis(this.options),l=s.categorySlot(s.categoryAxis,e.categoryIx,r),c=r.getSlot(this.value.target),h=n?c:l,d=n?l:c;if(i){const p=new k(h.x1,d.y1,h.x2,d.y2);i.options.height=n?p.height():e.target.line.width,i.options.width=n?e.target.line.width:p.width(),i.reflow(p)}const u=this.label;u&&(u.options.aboveAxis=this.aboveAxis,u.reflow(t)),this.note&&this.note.reflow(t),this.box=t}createVisual(){super.createVisual(),this.addAccessibilityAttributesToVisual();const t=this.options,e=M.w.fromRect(this.box.toRect(),{fill:oi(t.pattern,{color:this.color,opacity:t.opacity}),stroke:null});t.border.width>0&&e.options.set("stroke",{color:t.border.color||this.color,width:t.border.width,dashType:t.border.dashType,opacity:O(t.border.opacity,t.opacity)}),this.bodyVisual=e,Qt(e),this.visual.append(e)}createAnimation(){this.bodyVisual&&(this.animation=re.create(this.bodyVisual,this.options.animation))}createHighlight(t){return M.w.fromRect(this.box.toRect(),t)}highlightVisual(){return this.bodyVisual}highlightVisualArgs(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}}formatValue(t){return this.owner.formatPointValue(this,t)}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series}}overlapsBox(t){return this.box.overlaps(t)}getIndex(){return this.categoryIx}}Oi.prototype.tooltipAnchor=kn.prototype.tooltipAnchor,Oi.prototype.createFocusHighlight=kn.prototype.createFocusHighlight,C(Oi,{border:{width:1},vertical:!1,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},labels:{visible:!1},tooltip:{format:"Current: {0}<br />Target: {1}"},notes:{label:{}},accessibility:{role:hi,className:di,ariaRoleDescription:ui}}),x(Oi.prototype,me),x(Oi.prototype,Cs),x(Oi.prototype,Ss);const O0=Oi;class Ml extends Ri{constructor(t,e){(function B0(o){const t=o.series;for(let e=0;e<t.length;e++){const i=t[e],s=i.data;s&&!Pt(s[0])&&!ie(s[0])&&(i.data=[s])}})(e),super(t,e)}reflowCategories(t){const e=this.children,i=e.length;for(let s=0;s<i;s++)e[s].reflow(t[s])}plotRange(t){const i=this.seriesValueAxis(t.series),s=this.categoryAxisCrossingValue(i);return[s,t.value.current||s]}createPoint(t,e){const{categoryIx:i,series:s}=e,{options:n,children:r}=this,l=t.valueFields;let c=x({vertical:!n.invertAxes,overlay:s.overlay,categoryIx:i,invertAxes:n.invertAxes},s),h=t.fields.color||s.color;c=this.evalPointOptions(c,l,e),lt(s.color)&&(h=c.color);const d=new O0(l,c);d.color=h;let u=r[i];return u||(u=new er({vertical:n.invertAxes,gap:n.gap,spacing:n.spacing,rtl:!n.invertAxes&&(this.chartService||{}).rtl}),this.append(u)),u.append(d),d}updateRange(t,e){const{current:i,target:s}=t,n=e.series.axis;let r=this.valueAxisRanges[n];_(i)&&!isNaN(i)&&_(s&&!isNaN(s))&&(r=this.valueAxisRanges[n]=r||{min:ft,max:wt},r.min=Math.min(r.min,i,s),r.max=Math.max(r.max,i,s))}formatPointValue(t,e){return this.chartService.format.auto(e,t.value.current,t.value.target)}pointValue(t){return t.valueFields.current}aboveAxis(t){return t.value.current>0}createAnimation(){const t=this.points;this._setAnimationOptions();for(let e=0;e<t.length;e++){const i=t[e];i.options.animation=this.options.animation,i.createAnimation()}}}Ml.prototype._setAnimationOptions=An.prototype._setAnimationOptions,C(Ml,{animation:{type:ce}});const V0=Ml;class lp extends I.A{constructor(t,e){super(),this.chartService=t,this.options=x({},this.options,e)}getStyle(t,e){let{background:i,border:{color:s}}=t;if(e){const r=e.color||e.options.color;i=O(i,r),s=O(s,r)}const n=void 0!==t.padding?Z(t.padding):{};return"object"==typeof t.padding&&(n.top=void 0!==t.padding.top?n.top:void 0,n.right=void 0!==t.padding.right?n.right:void 0,n.bottom=void 0!==t.padding.bottom?n.bottom:void 0,n.left=void 0!==t.padding.left?n.left:void 0),{backgroundColor:i,borderColor:s,font:t.font,color:t.color,opacity:t.opacity,borderWidth:Ji(t.border.width),paddingTop:Ji(n.top),paddingBottom:Ji(n.bottom),paddingLeft:Ji(n.left),paddingRight:Ji(n.right)}}show(t,e,i){if(!this.chartService)return;t.format=e.format;const s=this.getStyle(e,i);t.style=s;const n=new be.A(s.backgroundColor);!_(e.color)&&!n.isDark()&&(t.className="k-chart-tooltip-inverse"),this.chartService.notify(Iu,t),this.visible=!0}hide(){this.chartService&&this.chartService.notify(Ru),this.visible=!1}destroy(){delete this.chartService}}C(lp,{border:{width:1},opacity:1});const El=lp;class cp extends El{constructor(t,e,i){super(t,i),this.crosshair=e,this.formatService=t.format,this.initAxisName()}initAxisName(){const t=this.crosshair.axis;let i;i=t.plotArea.categoryAxis?t.getCategory?"categoryAxis":"valueAxis":t.options.vertical?"yAxis":"xAxis",this.axisName=i}showAt(t){const{crosshair:{axis:e},options:i}=this;let s=e[i.stickyMode?"getCategory":"getValue"](t),n=s;i.format?n=this.formatService.auto(i.format,s):e.options.type===Ee&&(n=this.formatService.auto(e.options.labels.dateFormats[e.options.baseUnit],s)),this.show({point:t,anchor:this.getAnchor(),crosshair:this.crosshair,value:n,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex},this.options)}hide(){this.chartService.notify(Ru,{crosshair:this.crosshair,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex})}getAnchor(){const{crosshair:t,options:{position:e,padding:i}}=this,s=!t.axis.options.vertical,n=t.line.bbox();let r,l,c;return s?(r=V,e===Y?(l=G,c=n.bottomLeft().translate(0,i)):(l=Y,c=n.topLeft().translate(0,-i))):(l=V,e===U?(r=$,c=n.topLeft().translate(-i,0)):(r=U,c=n.topRight().translate(i,0))),{point:c,align:{horizontal:r,vertical:l}}}}C(cp,{padding:10});const F0=cp;class hp extends K{constructor(t,e,i){super(i),this.axis=e,this.stickyMode=e instanceof Le;const s=this.options.tooltip;s.visible&&(this.tooltip=new F0(t,this,x({},s,{stickyMode:this.stickyMode})))}showAt(t){this.point=t,this.moveLine(),this.line.visible(!0),this.tooltip&&this.tooltip.showAt(t)}hide(){this.line.visible(!1),this.tooltip&&this.tooltip.hide()}moveLine(){const{axis:t,point:e}=this,i=t.options.vertical,s=this.getBox(),n=i?D:P,r=new j.A(s.x1,s.y1);let l;if(l=i?new j.A(s.x2,s.y1):new j.A(s.x1,s.y2),e)if(this.stickyMode){const c=t.getSlot(t.pointCategoryIndex(e));r[n]=l[n]=c.center()[n]}else r[n]=l[n]=e[n];this.box=s,this.line.moveTo(r).lineTo(l)}getBox(){const t=this.axis,e=t.pane.axes,i=e.length,s=t.options.vertical,n=t.lineBox().clone(),r=s?P:D;let l;for(let c=0;c<i;c++){const h=e[c];h.options.vertical!==s&&(l?l.wrap(h.lineBox()):l=h.lineBox().clone())}return n[r+1]=l[r+1],n[r+2]=l[r+2],n}createVisual(){super.createVisual();const t=this.options;this.line=new M.w({stroke:{color:t.color,width:t.width,opacity:t.opacity,dashType:t.dashType},visible:!1}),this.moveLine(),this.visual.append(this.line)}destroy(){this.tooltip&&this.tooltip.destroy(),super.destroy()}}C(hp,{color:pt,width:2,zIndex:-1,tooltip:{visible:!1}});const N0=hp;class dp extends K{constructor(t,e){super(t),this.pane=e}shouldClip(){const t=this.children,e=t.length;for(let i=0;i<e;i++)if(!0===t[i].options.clip)return!0;return!1}_clipBox(){return this.pane.chartsBox()}createVisual(){if(this.visual=new et.A({zIndex:0}),this.shouldClip()){const e=(this.clipBox=this._clipBox()).toRect(),i=M.w.fromRect(e);Qt(i),this.visual.clip(i),this.unclipLabels()}}stackRoot(){return this}unclipLabels(){const{children:t,clipBox:e}=this;for(let i=0;i<t.length;i++){const s=t[i].points||{},n=s.length;for(let r=0;r<n;r++){const l=s[r];if(l&&!1!==l.visible&&l.overlapsBox&&l.overlapsBox(e))if(l.unclipElements)l.unclipElements();else{const{label:c,note:h}=l;c&&c.options.visible&&(c.alignToClipBox&&c.alignToClipBox(e),c.options.noclip=!0),h&&h.options.visible&&(h.options.noclip=!0)}}}}destroy(){super.destroy(),delete this.parent}}dp.prototype.isStackRoot=!0;const z0=dp;class Sn extends ri{constructor(t){super(t),this.id=function j0(){return"pane"+U0++}(),this.createTitle(),this.content=new K,this.chartContainer=new z0({},this),this.append(this.content),this.axes=[],this.charts=[]}createTitle(){let t=this.options.title;ie(t)&&(t=x({},t,{align:t.position,position:G})),this.title=on.buildTitle(t,Sn.prototype.options.title),this.title&&this.append(this.title)}appendAxis(t){this.content.append(t),this.axes.push(t),t.pane=this}appendAxisAt(t,e){this.content.append(t),this.axes.splice(e,0,t),t.pane=this}appendChart(t){this.chartContainer.parent!==this.content&&this.content.append(this.chartContainer),this.charts.push(t),this.chartContainer.append(t),t.pane=this}empty(){const t=this.parent;if(t){for(let e=0;e<this.axes.length;e++)t.removeAxis(this.axes[e]);for(let e=0;e<this.charts.length;e++)t.removeChart(this.charts[e])}this.axes=[],this.charts=[],this.content.destroy(),this.content.children=[],this.chartContainer.children=[]}reflow(t){let e;mt(this.children)===this.content&&(e=this.children.pop()),super.reflow(t),e&&this.children.push(e),this.title&&(this.contentBox.y1+=this.title.box.height())}visualStyle(){const t=super.visualStyle();return t.zIndex=-10,t}renderComplete(){this.options.visible&&this.createGridLines()}stackRoot(){return this}clipRoot(){return this}createGridLines(){const t=this.axes,e=t.concat(this.parent.axes),i=[],s=[];for(let n=0;n<t.length;n++){const r=t[n],l=r.options.vertical,c=l?i:s;for(let h=0;h<e.length;h++)if(0===c.length){const d=e[h];l!==d.options.vertical&&ki(c,r.createGridLines(d))}}}refresh(){this.visual.clear(),this.content.parent=null,this.content.createGradient=this.createGradient.bind(this),this.content.renderVisual(),this.content.parent=this,this.title&&this.visual.append(this.title.visual),this.visual.append(this.content.visual),this.renderComplete(),this.notifyRender()}chartsBox(){const t=this.axes,e=t.length,i=new k;for(let s=0;s<e;s++){const n=t[s],r=n.options.vertical?D:P,l=n.lineBox();i[r+1]=l[r+1],i[r+2]=l[r+2]}if(0===i.x2){const s=this.parent.axes,n=s.length;for(let r=0;r<n;r++){const l=s[r];if(!l.options.vertical){const c=l.lineBox();i.x1=c.x1,i.x2=c.x2}}}return i}clipBox(){return this.chartContainer.clipBox}notifyRender(){const t=this.getService();t&&t.notify("paneRender",{pane:new Ya(this),index:this.paneIndex,name:this.options.name})}}let U0=1;Sn.prototype.isStackRoot=!0,C(Sn,{zIndex:-1,shrinkToFit:!0,title:{align:U},visible:!0});const G0=Sn,Pl=o=>!1!==o.options.visible;class up extends K{constructor(t,e,i){super(e),this.initFields(t,e),this.series=t,this.initSeries(),this.charts=[],this.options.legend=this.options.legend||{},this.options.legend.data=[],this.axes=[],this.crosshairs=[],this.chartService=i,this.originalOptions=e,this.originalSeries=t,this._bindCache=new WeakMap,this.createPanes(),this.render(),this.createCrosshairs()}initFields(){}initSeries(){const t=this.series;for(let e=0;e<t.length;e++)t[e].index=e}bindPoint(t,e,i){let s=this._bindCache.get(t);s||(s=[],this._bindCache.set(t,s));let n=s[e];return n||(n=s[e]=ot.current.bindPoint(t,e,i)),n}createPanes(){const t=this.options.title||{},e=this.options.paneDefaults,i=this.options.panes||[],s=Math.max(i.length,1),n=[],r=x({title:{color:t.color}},e);for(let l=0;l<s;l++){const c=x({},r,i[l]);jt(c.title)&&(c.title=x({text:c.title},r.title));const h=new G0(c);h.paneIndex=l,n.push(h),this.append(h)}this.panes=n}crosshairOptions(t){return t.options.crosshair}createCrosshairs(t=this.panes){for(let e=0;e<t.length;e++){const i=t[e];for(let s=0;s<i.axes.length;s++){const n=i.axes[s],r=this.crosshairOptions(n);if(r&&r.visible){const l=new N0(this.chartService,n,r);this.crosshairs.push(l),i.content.append(l)}}}}removeCrosshairs(t){const e=this.crosshairs,i=t.axes;for(let s=e.length-1;s>=0;s--)for(let n=0;n<i.length;n++)if(e[s].axis===i[n]){e.splice(s,1);break}}hideCrosshairs(){const t=this.crosshairs;for(let e=0;e<t.length;e++)t[e].hide()}findPane(t){const e=this.panes;let i;for(let s=0;s<e.length;s++)if(e[s].options.name===t){i=e[s];break}return i||e[0]}findPointPane(t){const e=this.panes;let i;for(let s=0;s<e.length;s++)if(e[s].box.containsPoint(t)){i=e[s];break}return i}appendAxis(t){this.findPane(t.options.pane).appendAxis(t),this.axes.push(t),t.plotArea=this}removeAxis(t){const e=[];for(let i=0;i<this.axes.length;i++){const s=this.axes[i];t!==s?e.push(s):s.destroy()}this.axes=e}appendChart(t,e){this.charts.push(t),e?e.appendChart(t):this.append(t)}removeChart(t){const e=[];for(let i=0;i<this.charts.length;i++){const s=this.charts[i];s!==t?e.push(s):s.destroy()}this.charts=e}addToLegend(t){const e=t.length,i=this.options.legend,s=i.labels||{},n=i.inactiveItems||{},r=n.labels||{},l=[];for(let c=0;c<e;c++){const h=t[c],d=!1!==h.visible;if(!1===h.visibleInLegend)continue;let u=h.name;const p=d?kt(s):kt(r)||kt(s);p&&(u=p({text:Xt(u)?u:"",series:h}));const g=h._defaults;let m,v,f=h.color;lt(f)&&g&&(f=g.color),d?(m={},v=f):(m={color:r.color,font:r.font},v=n.markers.color),Xt(u)&&""!==u&&l.push({text:u,labels:m,markerColor:v,series:h,active:d})}ki(i.data,l)}groupAxes(t){const e=[],i=[];for(let s=0;s<t.length;s++){const n=t[s].axes;for(let r=0;r<n.length;r++){const l=n[r];l.options.vertical?i.push(l):e.push(l)}}return{x:e,y:i,any:e.concat(i)}}groupSeriesByPane(){const t=this.series,e={};for(let i=0;i<t.length;i++){const s=t[i],n=this.seriesPaneName(s);e[n]?e[n].push(s):e[n]=[s]}return e}filterVisibleSeries(t){const e=[];for(let i=0;i<t.length;i++){const s=t[i];!1!==s.visible&&e.push(s)}return e}reflow(t){const i=this.panes,s=Z(this.options.plotArea.margin);this.box=t.clone().unpad(s),this.reflowPanes(),this.detachLabels(),this.reflowAxes(i),this.reflowCharts(i)}redraw(t){const e=[].concat(t);this.initSeries();const i=this.getRoot();i&&i.cleanGradients();for(let s=0;s<e.length;s++)this.removeCrosshairs(e[s]),e[s].empty();this._bindCache=new WeakMap,this.render(e),this.detachLabels(),this.reflowAxes(this.panes),this.reflowCharts(e),this.createCrosshairs(e);for(let s=0;s<e.length;s++)e[s].refresh()}axisCrossingValues(t,e){const i=t.options,s=[].concat(i.axisCrossingValues||i.axisCrossingValue),n=e.length-s.length,r=s[0]||0;for(let l=0;l<n;l++)s.push(r);return s}alignAxisTo(t,e,i,s){const n=t.getSlot(i,i,!0),r=t.options.reverse?2:1,l=e.getSlot(s,s,!0),c=e.options.reverse?2:1,h=t.box.translate(l[P+c]-n[P+r],l[D+c]-n[D+r]);t.pane!==e.pane&&h.translate(0,t.pane.box.y1-e.pane.box.y1),t.reflow(h)}alignAxes(t,e){const i=t[0],s=e[0],n=this.axisCrossingValues(i,e),r=this.axisCrossingValues(s,t),l={},c={},h={},d={};for(let u=0;u<e.length;u++){const p=e[u],g=p.pane,f=g.id,m=!1!==p.options.visible,v=nr(t,g)||i;let y=n;if(v!==i&&(y=this.axisCrossingValues(v,e)),this.alignAxisTo(p,v,r[u],y[u]),p.options._overlap)continue;A(p.lineBox().x1)===A(v.lineBox().x1)&&(l[f]&&p.reflow(p.box.alignTo(l[f].box,U).translate(-p.options.margin,0)),m&&(l[f]=p)),A(p.lineBox().x2)===A(v.lineBox().x2)&&(p._mirrored||(p.options.labels.mirror=!p.options.labels.mirror,p._mirrored=!0),this.alignAxisTo(p,v,r[u],y[u]),c[f]&&p.reflow(p.box.alignTo(c[f].box,$).translate(p.options.margin,0)),m&&(c[f]=p));const w=nr(e,g)||s;w!==p&&(p.alignTo(w),p.reflow(p.box))}for(let u=0;u<t.length;u++){const p=t[u],g=p.pane,f=g.id,m=!1!==p.options.visible,v=nr(e,g)||s;let y=r;v!==s&&(y=this.axisCrossingValues(v,t)),this.alignAxisTo(p,v,n[u],y[u]),!p.options._overlap&&(A(p.lineBox().y1)===A(v.lineBox().y1)&&(p._mirrored||(p.options.labels.mirror=!p.options.labels.mirror,p._mirrored=!0),this.alignAxisTo(p,v,n[u],y[u]),h[f]&&p.reflow(p.box.alignTo(h[f].box,G).translate(0,-p.options.margin)),m&&(h[f]=p)),A(p.lineBox().y2,3)===A(v.lineBox().y2,3)&&(d[f]&&p.reflow(p.box.alignTo(d[f].box,Y).translate(0,p.options.margin)),m&&(d[f]=p)),0!==u&&(p.alignTo(i),p.reflow(p.box)))}}shrinkAxisWidth(t){const e=this.groupAxes(t).any,i=Dl(e);let s=0;for(let n=0;n<t.length;n++){const r=t[n];r.axes.length>0&&(s=Math.max(s,i.width()-r.contentBox.width()))}if(0!==s)for(let n=0;n<e.length;n++){const r=e[n];r.options.vertical||r.reflow(r.box.shrink(s,0))}}shrinkAxisHeight(t){let e;for(let i=0;i<t.length;i++){const s=t[i],n=s.axes,r=Math.max(0,Dl(n).height()-s.contentBox.height());if(0!==r){for(let l=0;l<n.length;l++){const c=n[l];c.options.vertical&&c.reflow(c.box.shrink(0,r))}e=!0}}return e}fitAxes(t){const e=this.groupAxes(t).any;let i=0;for(let s=0;s<t.length;s++){const n=t[s],r=n.axes,l=n.contentBox;if(r.length>0){const c=Dl(r),h=Math.max(l.y1-c.y1,l.y2-c.y2);i=Math.max(i,l.x1-c.x1);for(let d=0;d<r.length;d++){const u=r[d];u.reflow(u.box.translate(0,h))}}}for(let s=0;s<e.length;s++){const n=e[s];n.reflow(n.box.translate(i,0))}}reflowAxes(t){const e=this.groupAxes(t);for(let i=0;i<t.length;i++)this.reflowPaneAxes(t[i]);e.x.length>0&&e.y.length>0&&(this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t),this.autoRotateAxisLabels(e),this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t)&&this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t),this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t)&&this.alignAxes(e.x,e.y),this.fitAxes(t))}autoRotateAxisLabels(t){const{panes:e}=this,i=Y0(e);let s;for(let n=0;n<i.length;n++)i[n].autoRotateLabels()&&(s=!0);if(s){for(let n=0;n<e.length;n++)this.reflowPaneAxes(e[n]);t.x.length>0&&t.y.length>0&&(this.alignAxes(t.x,t.y),this.shrinkAxisWidth(e))}}reflowPaneAxes(t){const e=t.axes,i=e.length;if(i>0)for(let s=0;s<i;s++)e[s].reflow(t.contentBox)}reflowCharts(t){const e=this.charts,i=e.length,s=this.box;for(let n=0;n<i;n++){const r=e[n].pane;(!r||N(r,t))&&e[n].reflow(s)}}reflowPanes(){const{box:t,panes:e}=this,i=e.length;let s=t.height(),n=0,r=t.y1;for(let l=0;l<i;l++){const c=e[l],h=c.options.height;if(c.options.width=t.width(),c.options.height){if(h.indexOf&&h.indexOf("%")){const d=parseInt(h,10)/100;c.options.height=d*t.height()}c.reflow(t.clone()),s-=c.options.height}else n++}for(let l=0;l<i;l++){const c=e[l];c.options.height||(c.options.height=s/n)}for(let l=0;l<i;l++){const c=e[l],h=t.clone().move(t.x1,r);c.reflow(h),r+=c.options.height}}backgroundBox(){const t=this.axes,e=t.length;let i;for(let s=0;s<e;s++){const n=t[s];for(let r=0;r<e;r++){const l=t[r];if(n.options.vertical!==l.options.vertical){const c=n.lineBox().clone().wrap(l.lineBox());i=i?i.wrap(c):c}}}return i||this.box}chartsBoxes(){const t=this.panes,e=[];for(let i=0;i<t.length;i++)e.push(t[i].chartsBox());return e}addBackgroundPaths(t){const e=this.chartsBoxes();for(let i=0;i<e.length;i++)t.paths.push(M.w.fromRect(e[i].toRect()))}backgroundContainsPoint(t){const e=this.chartsBoxes();for(let i=0;i<e.length;i++)if(e[i].containsPoint(t))return!0}createVisual(){super.createVisual();const t=this.options.plotArea;let{opacity:e,background:i,border:s={}}=t;(function X0(o){return""===o||null===o||"none"===o||"transparent"===o||!_(o)})(i)&&(i=W,e=0);const n=this._bgVisual=new M.P({fill:{color:i,opacity:e},stroke:{color:s.width?s.color:"",width:s.width,dashType:s.dashType},zIndex:-1});this.addBackgroundPaths(n),this.appendVisual(n)}pointsByCategoryIndex(t){const e=this.charts,i=[];if(null!==t)for(let s=0;s<e.length;s++){if("_navigator"===e[s].pane.options.name)continue;const r=e[s].categoryPoints[t];if(r&&r.length)for(let l=0;l<r.length;l++){const c=r[l];c&&_(c.value)&&null!==c.value&&i.push(c)}}return i}pointsBySeriesIndex(t){return this.filterPoints(function(e){return e.series.index===t})}pointsByPointIndex(t){return this.filterPoints(function(e){return e.getIndex()===t})}pointsBySeriesName(t){return this.filterPoints(function(e){return e.series.name===t})}filterPoints(t){const e=this.charts,i=[];for(let s=0;s<e.length;s++){const r=e[s].points;for(let l=0;l<r.length;l++){const c=r[l];c&&!1!==c.visible&&t(c)&&i.push(c)}}return i}findPoint(t){const e=this.charts;for(let i=0;i<e.length;i++){const n=e[i].points;for(let r=0;r<n.length;r++){const l=n[r];if(l&&!1!==l.visible&&t(l))return l}}}paneByPoint(t){const e=this.panes;for(let i=0;i<e.length;i++){const s=e[i];if(s.box.containsPoint(t))return s}}detachLabels(){const t=this.groupAxes(this.panes),e=t.x,i=t.y;this.detachAxisGroupLabels(i,e),this.detachAxisGroupLabels(e,i)}detachAxisGroupLabels(t,e){let i=0;for(let s=0;s<t.length;s++){const n=t[s],r=n.pane,l=nr(e,r)||e[0],h=this.createLabelAxis(n,s+i,l);if(h){i++;const d=r.axes.indexOf(n)+i;r.appendAxisAt(h,d)}}}createLabelAxis(t,e,i){const s=t.options.labels,n=s.position;if(n!==Xs&&n!==co||!1===s.visible)return null;const c=this.groupAxes(this.panes),d=this.axisCrossingValues(i,i.options.vertical?c.x:c.y),u=n===Xs,p=i.range(),g=u?p.max:p.min;if(R(d[e],p.min,p.max)-g==0)return null;d.splice(e+1,0,g),i.options.axisCrossingValues=d;const m=t.clone();return t.clear(),m.options.name=void 0,m.options.line.visible=!1,m.options.crosshair=void 0,m.options.notes=void 0,m.options.plotBands=void 0,m}isTrendline(t){return t&&N(t.type,bs)}trendlineFactory(){}createTrendlineSeries(){const t=[];return this.series=this.series.map(e=>{if(!this.isTrendline(e))return e;const i=this.seriesByName(e.for);if(!i)throw new Error(`Invalid Configuration: Unable to locate linked series "${e.for}" for trendline "${e.name}".`);const s=ot.current.valueFields(i),n=mt(s),r=this.trendlineFactory(Object.assign({},{field:n},e),i);return r&&(!1===i.visible&&(r.visible=!1),r.color===Gh&&(r.color=i.color),t.push(r)),r}).filter(e=>null!==e),t}seriesByName(t){return this.series.find(e=>e.name===t)}getFirstPoint(){for(let t=0;t<this.series.length;t++){const i=this.pointsBySeriesIndex(t).find(Pl);if(i)return i}}getPointBelow(t){return this._getNextPoint(t,this._pointsByVertical,1)}getPointAbove(t){return this._getNextPoint(t,this._pointsByVertical,-1)}getPointToTheRight(t){return this._getNextPoint(t,this._pointsByHorizontal,1)}getPointToTheLeft(t){return this._getNextPoint(t,this._pointsByHorizontal,-1)}_getNextPoint(t,e,i){let s=e.call(this,t).filter(Pl),r=s.indexOf(t)+i;const l=c=>{let h,d=0;do{d+=c,h=e.call(this,t,d).filter(Pl)}while(0===h.length);return h};return r<0?(s=l(-1),s.at(-1)):r>=s.length?(s=l(1),s.at(0)):s[r]}_pointsByVertical(t){return this.pointsByPointIndex(t.getIndex())}_pointsByHorizontal(t,e=0){let i=go(t.series.index+e,this.series.length);return this.pointsBySeriesIndex(i)}}function H0(o){return!o.pane.axes.some(t=>t.options.vertical===o.options.vertical&&t!==o&&!1!==t.options.visible)}function Dl(o){const t=o.length;let e;for(let i=0;i<t;i++){const s=o[i],n=!1!==s.options.visible;if(n||H0(s)){const r=n?s.contentBox():s.lineBox();e?e.wrap(r):e=r.clone()}}return e||new k}function nr(o,t){for(let e=0;e<o.length;e++){const i=o[e];if(i&&i.pane===t)return i}}const Y0=o=>o.reduce((t,e)=>t.concat(e.axes),[]);C(up,{series:[],plotArea:{margin:{}},background:"",border:{color:pt,width:0},paneDefaults:{title:{}},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}});const pi=up,Tn={hover:function(o,t){this._dispatchEvent(o,t,Du)},click:function(o,t){this._dispatchEvent(o,t,"plotAreaClick")}};function $0(o,t,e){let i=t,s=o;if(o.indexOf(".")>-1){const n=o.split(".");for(;n.length>1;)s=n.shift(),_(i[s])||(i[s]={}),i=i[s];s=n.shift()}i[s]=e}const Q0=class W0 extends I.A{constructor(t,e,i){super();const s=e.canonicalFields(t),n=e.valueFields(t),r=e.sourceFields(t,s),l=this._seriesFields=[],c=i.query(t.type),h=t.aggregate||c;this._series=t,this._binder=e;for(let d=0;d<s.length;d++){const u=s[d];let p;if(ie(h))p=h[u];else{if(0!==d&&!N(u,n))break;p=h}p&&l.push({canonicalName:u,name:r[d],transform:lt(p)?p:Ny[p]})}}aggregatePoints(t,e){const{_series:i,_seriesFields:s}=this,n=this._bindPoints(t||[]),r=n.dataItems[0];let l={};if(r&&!X(r)&&!Pt(r)){const c=function(){};c.prototype=r,l=new c}for(let c=0;c<s.length;c++){const h=s[c],d=this._bindField(n.values,h.canonicalName),u=h.transform(d,i,n.dataItems,e);if(!(null===u||!ie(u)||_(u.length)||u instanceof Date)){l=u;break}_(u)&&$0(h.name,l,u)}return l}_bindPoints(t){const{_binder:e,_series:i}=this,s=[],n=[];for(let r=0;r<t.length;r++){const l=t[r];s.push(e.bindPoint(i,l)),n.push(i.data[l])}return{values:s,dataItems:n}}_bindField(t,e){const i=[],s=t.length;for(let n=0;n<s;n++){const r=t[n],l=r.valueFields;let c;c=_(l[e])?l[e]:r.fields[e],i.push(c)}return i}};class Il extends I.A{constructor(){super(),this._defaults={}}register(t,e){for(let i=0;i<t.length;i++)this._defaults[t[i]]=e}query(t){return this._defaults[t]}}Il.current=new Il;const Bi=Il;class Rl extends kn{createLabel(){const t=this.options.labels,e=x({},t,t.from),i=x({},t,t.to);e.visible&&(this.labelFrom=this.createLabelElement(e),this.append(this.labelFrom)),i.visible&&(this.labelTo=this.createLabelElement(i),this.append(this.labelTo))}reflow(t){this.render();const{labelFrom:e,labelTo:i,value:s}=this;this.box=t,e&&(e.options.aboveAxis=s.from>s.to,e.reflow(t)),i&&(i.options.aboveAxis=s.to>s.from,i.reflow(t)),this.note&&this.note.reflow(t)}}Rl.prototype.defaults=x({},Rl.prototype.defaults,{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}});const Z0=Rl;class pp extends An{pointType(){return Z0}pointValue(t){return t.valueFields}formatPointValue(t,e){return null===t.value.from&&null===t.value.to?"":this.chartService.format.auto(e,t.value.from,t.value.to)}plotRange(t){return t?[t.value.from,t.value.to]:0}updateRange(t,e){const i=e.series.axis,{from:s,to:n}=t;let r=this.valueAxisRanges[i];null!==t&&X(s)&&X(n)&&(r=this.valueAxisRanges[i]=r||{min:ft,max:wt},r.min=Math.min(r.min,s),r.max=Math.max(r.max,s),r.min=Math.min(r.min,n),r.max=Math.max(r.max,n))}aboveAxis(t){const e=t.value;return e.from<e.to}}pp.prototype.plotLimits=Ri.prototype.plotLimits;const K0=pp,gp=class q0 extends Li{aliasFor(){return this.parent}};class or extends K{constructor(t,e){super(),this.value=t,this.options=e,this.aboveAxis=O(this.options.aboveAxis,!0),this.tooltipTracking=!0,this._id=qs(),this.initLabelsFormat()}render(){if(this._rendered)return;this._rendered=!0;const{markers:t,labels:e}=this.options,i=this.value,s=this.fromPoint=new gp(i,x({},this.options,{labels:e.from,markers:t.from})),n=this.toPoint=new gp(i,x({},this.options,{labels:e.to,markers:t.to}));this.copyFields(s),this.copyFields(n),this.append(s),this.append(n)}reflow(t){this.render();const{from:e,to:i}=t;this.positionLabels(e,i),this.fromPoint.reflow(e),this.toPoint.reflow(i),this.box=this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox())}createHighlight(){const t=new et.A;return t.append(this.fromPoint.createHighlight()),t.append(this.toPoint.createHighlight()),t}highlightVisual(){return this.visual}highlightVisualArgs(){return{options:this.options,from:this.fromPoint.highlightVisualArgs(),to:this.toPoint.highlightVisualArgs()}}createFocusHighlight(){const t=new et.A;return t.append(this.fromPoint.createFocusHighlight()),t.append(this.toPoint.createFocusHighlight()),t}tooltipAnchor(){const t=this.owner.pane.clipBox();if(!t||t.overlaps(this.box)){const i=this.box,s=i.center(),n=U;let r,l,c;return this.options.vertical?(r=s.x,l=i.y1-5,c=Y):(r=i.x2+5,l=s.y,c=V),{point:new B(r,l),align:{horizontal:n,vertical:c}}}}formatValue(t){return this.owner.formatPointValue(this,t)}overlapsBox(t){return this.box.overlaps(t)}unclipElements(){this.fromPoint.unclipElements(),this.toPoint.unclipElements()}initLabelsFormat(){const t=this.options.labels;t.format||((!t.from||!t.from.format)&&(t.from=Object.assign({},t.from,{format:"{0}"})),(!t.to||!t.to.format)&&(t.to=Object.assign({},t.to,{format:"{1}"})))}positionLabels(t,e){const{labels:i,vertical:s}=this.options;if("auto"===i.position){let n,r;s?e.y1<=t.y1?(r=Ho,n=Za):(r=Za,n=Ho):e.x1<=t.x1?(r=U,n=$):(r=$,n=U),(!i.from||!i.from.position)&&(this.fromPoint.options.labels.position=n),(!i.to||!i.to.position)&&(this.toPoint.options.labels.position=r)}}copyFields(t){t.dataItem=this.dataItem,t.category=this.category,t.series=this.series,t.color=this.color,t.owner=this.owner}focusVisual(){this.fromPoint.focusVisual()}clearFocusFromVisual(){this.toPoint.clearFocusFromVisual()}getIndex(){return this.categoryIx}}x(or.prototype,me),x(or.prototype,Cs),or.prototype.defaults={markers:{visible:!1,background:W,size:8,type:Ut,border:{width:2},opacity:1},labels:{visible:!1,margin:Z(3),padding:Z(4),animation:{type:ai,delay:le},position:"auto"},notes:{label:{}},highlight:{markers:{border:{color:W,width:2}},zIndex:100},tooltip:{format:"{0} - {1}"},accessibility:{role:hi,className:di,ariaRoleDescription:ui}};const mp=or,Ll=class e_ extends As{createStrokeSegments(){return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()))}stackSegments(){let t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()))),t}createStroke(t){const e=new M.w(t),i=new M.w(t);e.segments.push.apply(e.segments,this.strokeSegments()),i.segments.push.apply(i.segments,this.stackSegments()),this.visual.append(e),this.visual.append(i)}hasStackSegment(){return!0}fromPoints(){return this.linePoints.map(t=>t.fromPoint)}toPoints(){return this.linePoints.map(t=>t.toPoint)}},s_=class i_ extends Ll{createStrokeSegments(){return this.createCurveSegments(this.toPoints())}stackSegments(){let t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.createCurveSegments(this.fromPoints().reverse())),t}createCurveSegments(t){return(new Uo).process(this.toGeometryPoints(t))}};class xp extends Ll{createStrokeSegments(){return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()))}stackSegments(){let t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints())),t.reverse()),t}}x(xp.prototype,vl);const n_=xp;class vp extends Ri{render(){super.render(),this.renderSegments()}pointType(){return mp}createPoint(t,e){const{series:i,seriesIx:s}=e;let n=t.valueFields;if(!Xt(n.from)&&!Xt(n.to)){if(this.seriesMissingValues(i)!==Ve)return null;n={from:0,to:0}}let r=this.pointOptions(i,s);r=this.evalPointOptions(r,n,e);let l=t.fields.color||i.color;lt(i.color)&&(l=r.color);const c=new mp(n,r);return c.color=l,this.append(c),c}createSegment(t,e,i){const s=(e.line||{}).style;let n;return n="smooth"===s?s_:"step"===s?n_:Ll,new n(t,e,i)}plotRange(t,e){return t?[t.value.from,t.value.to]:[e,e]}valueSlot(t,e){const i=t.getSlot(e[0],e[0],!this.options.clip),s=t.getSlot(e[1],e[1],!this.options.clip);if(i&&s)return{from:i,to:s}}pointSlot(t,e){const{from:i,to:s}=e;let n,r;return this.options.invertAxes?(n=new k(i.x1,t.y1,i.x2,t.y2),r=new k(s.x1,t.y1,s.x2,t.y2)):(n=new k(t.x1,i.y1,t.x2,i.y2),r=new k(t.x1,s.y1,t.x2,s.y2)),{from:n,to:r}}addValue(t,e){const i=t.valueFields;X(i.from)||(i.from=i.to),X(i.to)||(i.to=i.from),super.addValue(t,e)}updateRange(t,e){if(null!==t&&X(t.from)&&X(t.to)){const i=e.series.axis,s=this.valueAxisRanges[i]=this.valueAxisRanges[i]||{min:ft,max:wt},{from:n,to:r}=t;s.min=Math.min(s.min,n,r),s.max=Math.max(s.max,n,r)}}formatPointValue(t,e){const i=t.value;return this.chartService.format.auto(e,i.from,i.to)}animationPoints(){const t=this.points,e=[];for(let i=0;i<t.length;i++){const s=t[i];s&&(e.push((s.fromPoint||{}).marker),e.push((s.toPoint||{}).marker))}return e.concat(this._segments)}}x(vp.prototype,yl,Jo);const o_=vp,a_=class r_ extends kl{reflow(t){const{options:e,value:i,owner:s}=this,n=s.seriesValueAxis(e),r=[],l=[],c=[],h=n.getSlot(i.low,i.high),d=n.getSlot(i.open,i.open),u=n.getSlot(i.close,i.close);d.x1=u.x1=h.x1=t.x1,d.x2=u.x2=h.x2=t.x2;const p=h.center().x;r.push([d.x1,d.y1]),r.push([p,d.y1]),l.push([p,u.y1]),l.push([u.x2,u.y1]),c.push([p,h.y1]),c.push([p,h.y2]),this.lines=[r,l,c],this.box=h.clone().wrap(d.clone().wrap(u)),this.reflowNote()}createBody(){}},c_=class l_ extends Al{pointType(){return a_}};class bp extends K{constructor(t,e,i){super(),this.from=t,this.to=e,this.series=i}linePoints(){const t=this.from,{from:{box:e},to:{box:i}}=this,s=[];if(t.isVertical){const n=t.aboveAxis?e.y1:e.y2;s.push([e.x1,n],[i.x2,n])}else{const n=t.aboveAxis?e.x2:e.x1;s.push([n,e.y1],[n,i.y2])}return s}createVisual(){super.createVisual();const t=this.series.line||{},e=M.w.fromPoints(this.linePoints(),{stroke:{color:t.color,width:t.width,opacity:t.opacity,dashType:t.dashType}});Qt(e),this.visual.append(e)}}C(bp,{animation:{type:ai,delay:le}});const h_=bp,u_=class d_ extends An{render(){super.render(),this.createSegments()}traverseDataPoints(t){const e=this.options.series,i=gl(e),s=!this.options.invertAxes;for(let n=0;n<e.length;n++){const r=e[n];let l=0,c=0;for(let h=0;h<i;h++){const d=ot.current.bindPoint(r,h),u=d.valueFields.value,p=d.fields.summary;let f,g=l;p?"total"===p.toLowerCase()?(d.valueFields.value=l,g=0,f=l):(d.valueFields.value=c,f=g-c,c=0):X(u)&&(c+=u,l+=u,f=l),t(d,{category:this.categoryAxis.categoryAt(h),categoryIx:h,series:r,seriesIx:n,total:l,runningTotal:c,from:g,to:f,isVertical:s})}}}updateRange(t,e){super.updateRange({value:e.to},e)}aboveAxis(t){return t.value>=0}plotRange(t){return[t.from,t.to]}createSegments(){const t=this.options.series,e=this.seriesPoints,i=this.segments=[];for(let s=0;s<t.length;s++){const n=t[s],r=e[s];if(r){let l;for(let c=0;c<r.length;c++){const h=r[c];if(h&&l){const d=new h_(l,h,n);i.push(d),this.append(d)}l=h}}}}},yp=function p_(o,t,e){const i=o[String(t)];return i?i(e):null},gi=function g_(o,t){let l,c,e=0,i=0,s=0,n=0,r=0,h=Number.MAX_VALUE,d=Number.MIN_VALUE;for(let u=0;u<o.length;u++){const p=o[u],{xValue:g,yValue:f}=t(p);isFinite(g)&&null!==g&&isFinite(f)&&null!==f&&(h=Math.min(g,h),d=Math.max(g,d),r++,e+=g,i+=f,s+=Math.pow(g,2),n+=g*f)}return r>0&&(l=(r*n-e*i)/(r*s-Math.pow(e,2)),c=(i-l*e)/r),{slope:l,intercept:c,count:r,xMin:h,xMax:d}},Mn=(o,t)=>o.every(({valueFields:e})=>!Xt(e[t])||e[t]>0),En=function f_(o,t){const e=[],i=t.totalRangeIndices(),s=t.currentRangeIndices(),n={min:Math.floor(Math.max(s.min-1,i.min)),max:Math.ceil(Math.min(s.max+2,i.max))};for(let r=n.min;r<n.max;r++){const l=r+1;e[r]={category:t.categoryAt(r,!0),value:o(l)}}return e},_p=function M_(o,t,e){const i=[],s=[],n=Math.max(2,e)-1;let r=0,l=0;for(let c=0;c<o.length;c++){const h=o[c],{xValue:d,yValue:u}=t(h);if(isFinite(u)&&null!==u?(s.push(u),l+=u,r=Math.max(c,r)):s.push(null),c>=n){const p=s.filter(f=>null!==f).length,g=s.shift()||0;if(p>0){i.push([d,l/p]),l-=g;continue}}i.push([d,null])}return i.slice(0,r+1)},Cp=function O_(o,t,e){let i=Math.min(Math.max(e||1,1),6)+1,s=new pd,n=new pd,r=0,l=Number.MAX_VALUE,c=Number.MIN_VALUE,h=u=>u,d=[];for(let u=0;u<o.length;u++){const p=o[u];let{xValue:g,yValue:f}=t(p);if(isFinite(g)&&null!==g&&isFinite(f)&&null!==f){l=Math.min(g,l),c=Math.max(g,c),r++,n.set(u,0,f),s.set(u,0,1),s.set(u,1,g);for(let m=2;m<=i;m++)s.set(u,m,Math.pow(s.get(u,1),m))}else s.set(u,0,0)}return s.width=Math.min(i,r),r>0&&(d=function B_(o,t){const e=o.transpose(),i=e.multiply(o).inverse().multiply(e).multiply(t),s=[];for(let n=0;n<i.height;n++)s.push(i.get(n,0));return s}(s,n),h=u=>d.reduce((p,g,f)=>p+g*Math.pow(u,f),0)),{coefficients:d,count:r,valueMapper:h,xMin:l,xMax:c}},Vi={};Vi[il]=function m_(o){const{options:t,categoryAxis:e,seriesValues:i}=o,s=function v_({seriesValues:o,categoryAxis:t,options:e}){const i=o();if(!Mn(i,e.field))return null;let{slope:s,intercept:n,count:r}=gi(i,(o=>({categoryIx:t,valueFields:e})=>({xValue:t+1,yValue:Math.log(e[o])}))(e.field));if(r>0){const l=Math.exp(n),c=s;return En(h=>l*Math.exp(c*h),t)}return null}({seriesValues:i,categoryAxis:e,options:t});return s?Object.assign({},t,{type:"line",data:s,categoryField:"category",field:"value"}):null},Vi[sl]=function y_(o){const{options:t,categoryAxis:e,seriesValues:i}=o,s=function w_({seriesValues:o,categoryAxis:t,options:e}){const{slope:i,intercept:s,count:n}=gi(o(),(o=>({categoryIx:t,valueFields:e})=>({xValue:t+1,yValue:e[o]}))(e.field));return n>0?En(r=>i*r+s,t):null}({seriesValues:i,categoryAxis:e,options:t});return s?Object.assign({},t,{type:"line",data:s,categoryField:"category",field:"value"}):null},Vi[nl]=function k_(o){const{options:t,categoryAxis:e,seriesValues:i}=o,s=function S_({seriesValues:o,categoryAxis:t,options:e}){let{slope:i,intercept:s,count:n}=gi(o(),(o=>({categoryIx:t,valueFields:e})=>({xValue:Math.log(t+1),yValue:e[o]}))(e.field));if(n>0){const r=i,l=s;return En(c=>r*Math.log(c)+l,t)}return null}({seriesValues:i,categoryAxis:e,options:t});return s?Object.assign({},t,{type:"line",data:s,categoryField:"category",field:"value"}):null},Vi[ol]=function E_(o){const{options:t}=o,e=function I_(o){const{categoryAxis:t}=o,e=function D_({options:o,categoryAxis:t,seriesValues:e}){const i=(o.trendline||{}).period||2,s=t.totalRangeIndices(),n=t.currentRangeIndices(),r={min:Math.floor(Math.max(n.min-i,s.min)),max:Math.ceil(Math.min(n.max+i+2,s.max))};return _p(e(r),(o=>({categoryIx:t,valueFields:e})=>({xValue:t,yValue:e[o]}))(o.field),i)}(o),i=[];return e.forEach(([s,n])=>{i[s]={category:t.categoryAt(s,!0),value:n}}),i.length>0?i:null}(o);return e?Object.assign({},t,{type:"line",data:e,categoryField:"category",field:"value"}):null},Vi[rl]=function V_(o){const{options:t,categoryAxis:e,seriesValues:i}=o,s=function N_({seriesValues:o,categoryAxis:t,options:e}){const i=(e.trendline||{}).order,{count:s,valueMapper:n}=Cp(o(),(o=>({categoryIx:t,valueFields:e})=>({xValue:t+1,yValue:e[o]}))(e.field),i);return s>0?En(r=>n(r),t):null}({seriesValues:i,categoryAxis:e,options:t});return s?Object.assign({},t,{type:"line",data:s,categoryField:"category",field:"value"}):null},Vi[al]=function U_(o){const{options:t,categoryAxis:e,seriesValues:i}=o,s=function G_({seriesValues:o,categoryAxis:t,options:e}){const i=o();if(!Mn(i,e.field))return null;let{slope:s,intercept:n,count:r}=gi(i,(o=>({categoryIx:t,valueFields:e})=>({xValue:Math.log(t+1),yValue:Math.log(e[o])}))(e.field));if(r>0){const l=Math.exp(n),c=s;return En(h=>l*Math.pow(h,c),t)}return null}({seriesValues:i,categoryAxis:e,options:t});return s?Object.assign({},t,{type:"line",data:s,categoryField:"category",field:"value"}):null};const X_=Vi,Ol=[Fe,Ei,ms,Di],kp=[Ne,Pi].concat(Ol);class Bl extends pi{initFields(t){if(this.namedCategoryAxes={},this.namedValueAxes={},this.valueAxisRangeTracker=new tr,this._seriesPointsCache={},this._currentPointsCache={},t.length>0){this.invertAxes=N(t[0].type,[ce,li,Pi,Ei,Di,xs,ps,vs]);for(let e=0;e<t.length;e++){const i=t[e].stack;if(i&&"100%"===i.type){this.stack100=!0;break}}}}render(t=this.panes){this.series=[...this.originalSeries],this.createCategoryAxes(t),this.aggregateCategories(t),this.createTrendlineSeries(t),this.createCategoryAxesLabels(t),this.createCharts(t),this.createValueAxes(t)}removeAxis(t){const e=t.options.name;super.removeAxis(t),t instanceof Le?delete this.namedCategoryAxes[e]:(this.valueAxisRangeTracker.reset(e),delete this.namedValueAxes[e]),t===this.categoryAxis&&delete this.categoryAxis,t===this.valueAxis&&delete this.valueAxis}trendlineFactory(t,e){const i=this.seriesCategoryAxis(t),s=this.seriesValues.bind(this,e.index),n=yp(X_,t.type,{options:t,categoryAxis:i,seriesValues:s});return n&&(n.categoryAxis=e.categoryAxis,n.valueAxis=e.valueAxis,this.filterSeries(n,i))}trendlineAggregateForecast(){return this.series.map(t=>(t.trendline||{}).forecast).filter(t=>void 0!==t).reduce((t,e)=>({before:Math.max(t.before,e.before||0),after:Math.max(t.after,e.after||0)}),{before:0,after:0})}seriesValues(t,e){const i=[];let s=this.srcSeries[t];const n=this.seriesCategoryAxis(s);Ue(n.options.type,Ee)&&(this._seriesPointsCache={},this._currentPointsCache={},n.options.dataItems=[],s=this.aggregateSeries(s,n,n.totalRangeIndices()));const c=e?e.max:s.data.length;for(let h=e?e.min:0;h<c;h++){const d=this.bindPoint(s,h);i.push({categoryIx:h,category:d.fields.category,valueFields:d.valueFields})}return i}createCharts(t){const e=this.groupSeriesByPane();for(let i=0;i<t.length;i++){const s=t[i],n=e[s.options.name||"default"]||[];this.addToLegend(n);const r=this.filterVisibleSeries(n);if(!r)continue;const l=this.groupSeriesByCategoryAxis(r);for(let c=0;c<l.length;c++)this.createChartGroup(l[c],s)}}createChartGroup(t,e){this.createAreaChart(ut(t,[Fe,Ei]),e),this.createRangeAreaChart(ut(t,[ms,Di]),e),this.createBarChart(ut(t,[Se,ce]),e),this.createRangeBarChart(ut(t,[mn,xs]),e),this.createBulletChart(ut(t,[li,xn]),e),this.createCandlestickChart(ut(t,us),e),this.createBoxPlotChart(ut(t,[un,vs]),e),this.createOHLCChart(ut(t,gs),e),this.createWaterfallChart(ut(t,[vn,ps]),e),this.createLineChart(ut(t,[Ne,Pi]),e)}aggregateCategories(t){const e=[...this.series],i=[];this._currentPointsCache={},this._seriesPointsCache=this._seriesPointsCache||{};for(let s=0;s<e.length;s++){let n=e[s];if(!this.isTrendline(n)){const r=this.seriesCategoryAxis(n),l=this.findPane(r.options.pane);n=(Ue(r.options.type,Ee)||n.categoryField)&&N(l,t)?this.aggregateSeries(n,r,r.currentRangeIndices()):this.filterSeries(n,r)}i.push(n)}this._seriesPointsCache=this._currentPointsCache,this._currentPointsCache=null,this.srcSeries=e,this.series=i}filterSeries(t,e){const i=(t.data||{}).length;if(e._seriesMax=Math.max(e._seriesMax||0,i),!_(e.options.min)&&!_(e.options.max))return t;const s=e.currentRangeIndices(),n=N(t.type,kp),r=x({},t);return r.data=(r.data||[]).slice(s.min,s.max+1),n&&Hu(r,s,i,l=>({item:t.data[l],category:e.categoryAt(l,!0),categoryIx:l-s.min}),l=>_(t.data[l])),r}clearSeriesPointsCache(){this._seriesPointsCache={}}seriesSourcePoints(t,e){const i=`${t.index};${e.categoriesHash()}`;if(this._seriesPointsCache&&this._seriesPointsCache[i])return this._currentPointsCache[i]=this._seriesPointsCache[i],this._seriesPointsCache[i];const s=e.options,n=s.srcCategories,r=Ue(s.type,Ee),l=t.data,c=[];r||e.indexCategories();for(let h=0;h<l.length;h++){let d=ot.current.bindPoint(t,h).fields.category;if(r&&(d=Uu(d,l[h],this.chartService.intl)),_(d)||(d=n[h]),_(d)&&null!==d){const u=e.totalIndex(d);c[u]=c[u]||{items:[],category:d},c[u].items.push(h)}}return this._currentPointsCache[i]=c,c}aggregateSeries(t,e,i){if(!t.data.length)return t;const n=this.seriesSourcePoints(t,e),r=x({},t),l=new Q0(x({},t),ot.current,Bi.current),c=r.data=[],h=e.options.dataItems||[],d=u=>{const p=u-i.min;let g=n[u];if(g||(g=n[u]={}),g.categoryIx=p,!g.item){const f=e.categoryAt(u,!0);g.category=f,g.item=l.aggregatePoints(g.items,f)}return g};for(let u=i.min;u<=i.max;u++){const p=d(u);c[p.categoryIx]=p.item,p.items&&p.items.length&&(h[p.categoryIx]=p.item)}return N(r.type,kp)&&Hu(r,i,e.totalCount(),d,u=>n[u]),e.options.dataItems=h,r}appendChart(t,e){const i=t.options.series,s=this.seriesCategoryAxis(i[0]);let n=s.options.categories,r=Math.max(0,gl(i)-n.length);if(r>0)for(n=s.options.categories=s.options.categories.slice(0);r--;)n.push("");this.valueAxisRangeTracker.update(t.valueAxisRanges),super.appendChart(t,e)}seriesPaneName(t){const e=this.options,i=t.axis;return(Zt([].concat(e.valueAxis),function(h){return h.name===i})[0]||{}).pane||((e.panes||[{}])[0]||{}).name||"default"}seriesCategoryAxis(t){const e=t.categoryAxis,i=e?this.namedCategoryAxes[e]:this.categoryAxis;if(!i)throw new Error("Unable to locate category axis with name "+e);return i}stackableChartOptions(t,e){const i=t.some(r=>r.stack),s=t.some(r=>r.stack&&"100%"===r.stack.type);return{defaultStack:t[0].stack,isStacked:i,isStacked100:s,clip:e.options.clip}}groupSeriesByCategoryAxis(t){const e=[],i={};for(let n=0;n<t.length;n++){const r=t[n].categoryAxis||"$$default$$";ba(i,r)||(i[r]=!0,e.push(r))}const s=[];for(let n=0;n<e.length;n++){const l=Y_(t,e[n],n);0!==l.length&&s.push(l)}return s}createBarChart(t,e){if(0===t.length)return;const i=t[0],s=new An(this,Object.assign({series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing},this.stackableChartOptions(t,e)));this.appendChart(s,e)}createRangeBarChart(t,e){if(0===t.length)return;const i=t[0],s=new K0(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(s,e)}createBulletChart(t,e){if(0===t.length)return;const i=t[0],s=new V0(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing,clip:e.options.clip});this.appendChart(s,e)}createLineChart(t,e){if(0===t.length)return;const i=new wl(this,Object.assign({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(t,e)));this.appendChart(i,e)}createAreaChart(t,e){if(0===t.length)return;const i=new C0(this,Object.assign({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(t,e)));this.appendChart(i,e)}createRangeAreaChart(t,e){if(0===t.length)return;const i=new o_(this,{invertAxes:this.invertAxes,series:t,clip:e.options.clip});this.appendChart(i,e)}createOHLCChart(t,e){if(0===t.length)return;const i=t[0],s=new c_(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(s,e)}createCandlestickChart(t,e){if(0===t.length)return;const i=t[0],s=new Al(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(s,e)}createBoxPlotChart(t,e){if(0===t.length)return;const i=t[0],s=new P0(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(s,e)}createWaterfallChart(t,e){if(0===t.length)return;const i=t[0],s=new u_(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(s,e)}axisRequiresRounding(t,e){const i=ut(this.series,Au);for(let s=0;s<this.series.length;s++){const n=this.series[s];if(N(n.type,Ol)){const r=n.line;r&&r.style===dn&&i.push(n)}}for(let s=0;s<i.length;s++){const n=i[s].categoryAxis||"";if(n===t||!n&&0===e)return!0}}aggregatedAxis(t,e){const i=this.series;for(let s=0;s<i.length;s++){const n=i[s].categoryAxis||"";if((n===t||!n&&0===e)&&i[s].categoryField)return!0}}createCategoryAxesLabels(){const t=this.axes;for(let e=0;e<t.length;e++)t[e]instanceof Le&&t[e].createLabels()}createCategoryAxes(t){const e=this.invertAxes,i=[].concat(this.options.categoryAxis),s=[];for(let r=0;r<i.length;r++){let l=i[r];if(N(this.findPane(l.pane),t)){const{name:h,categories:d=[]}=l;let u;if(l=x({vertical:e,reverse:!e&&this.chartService.rtl,axisCrossingValue:e?ft:0},l),_(l.justified)||(l.justified=this.isJustified()),this.axisRequiresRounding(h,r)&&(l.justified=!1),ju(l,d[0])?(l._forecast=this.trendlineAggregateForecast(),u=new cn(l,this.chartService)):u=new Le(l,this.chartService),i[r].categories=u.options.srcCategories,h){if(this.namedCategoryAxes[h])throw new Error(`Category axis with name ${h} is already defined`);this.namedCategoryAxes[h]=u}u.axisIndex=r,s.push(u),this.appendAxis(u)}}const n=this.categoryAxis||s[0];this.categoryAxis=n,e?this.axisY=n:this.axisX=n}isJustified(){const t=this.series;for(let e=0;e<t.length;e++)if(!N(t[e].type,Ol))return!1;return!0}createValueAxes(t){const e=this.valueAxisRangeTracker,i=e.query(),s=[].concat(this.options.valueAxis),n=this.invertAxes,r={vertical:!n,reverse:n&&this.chartService.rtl},l=[];this.stack100&&(r.roundToMajorUnit=!1,r.labels={format:"P0"});for(let h=0;h<s.length;h++){const d=s[h];if(N(this.findPane(d.pane),t)){const p=d.name,g=Ue(d.type,$o)?{min:.1,max:1}:{min:0,max:1},f=e.query(p)||i||g;let m;0===h&&f&&i&&(f.min=Math.min(f.min,i.min),f.max=Math.max(f.max,i.max)),m=Ue(d.type,$o)?No:ae;const v=new m(f.min,f.max,x({},r,d),this.chartService);if(p){if(this.namedValueAxes[p])throw new Error(`Value axis with name ${p} is already defined`);this.namedValueAxes[p]=v}v.axisIndex=h,l.push(v),this.appendAxis(v)}}const c=this.valueAxis||l[0];this.valueAxis=c,n?this.axisX=c:this.axisY=c}_dispatchEvent(t,e,i){const s=t._eventCoordinates(e),n=new B(s.x,s.y),r=this.pointPane(n),l=[],c=[];if(!r)return;const h=r.axes;for(let d=0;d<h.length;d++){const u=h[d];u.getValue?Ko(c,u.getValue(n)):Ko(l,u.getCategory(n))}0===l.length&&Ko(l,this.categoryAxis.getCategory(n)),l.length>0&&c.length>0&&t.trigger(i,{element:ue(e),originalEvent:e,category:ws(l),value:ws(c)})}pointPane(t){const e=this.panes;for(let i=0;i<e.length;i++){const s=e[i];if(s.contentBox.containsPoint(t))return s}}updateAxisOptions(t,e){Ap(this.options,t,e),Ap(this.originalOptions,t,e)}_pointsByVertical(t,e=0){return this.invertAxes?this._siblingsBySeriesIndex(t.series.index,e):this._siblingsByPointIndex(t.getIndex())}_pointsByHorizontal(t,e=0){if(this.invertAxes)return this._siblingsByPointIndex(t.getIndex());const i=this._siblingsBySeriesIndex(t.series.index,e);return this.chartService.rtl?i.reverse():i}_siblingsByPointIndex(t){const e=this.charts,i=[];for(let s=0;s<e.length;s++){let n=e[s];if(n.pane&&"_navigator"===n.pane.options.name)continue;let r=n.points.filter(l=>l&&!1!==l.visible&&l.getIndex()===t);i.push(...r.sort(this._getSeriesCompareFn(r[0])))}return i}_siblingsBySeriesIndex(t,e){const i=go(t+e,this.series.length);return this.pointsBySeriesIndex(i)}_getSeriesCompareFn(t){const e=this._isInStackedSeries(t);return e&&this.invertAxes||!e&&!this.invertAxes?(i,s)=>i.box.center().x-s.box.center().x:(i,s)=>i.box.center().y-s.box.center().y}_isInStackedSeries(t){const e=N(t.series.type,[Fe,Ei,ms,Di,Ne,Pi,fs,fn]),i=N(t.series.type,[Se,ce]);return e||i&&t.options.isStacked}}function Ap(o,t,e){x([].concat(t instanceof Le?o.categoryAxis:o.valueAxis)[t.axisIndex],e)}function Y_(o,t,e){return Zt(o,function(i){return 0===e&&!i.categoryAxis||i.categoryAxis===t})}C(Bl,{categoryAxis:{},valueAxis:{}}),x(Bl.prototype,Tn);const Ge=Bl;var Vl=T(1992);function $_(){this._defaultPrevented=!0}const Q_=class W_ extends I.A{constructor(){super(),this._points=[]}destroy(){this._points=[]}show(t,e){const i=[].concat(t);this.hide();for(let s=0;s<i.length;s++){const n=i[s];n&&n.toggleHighlight&&n.hasHighlight()&&(this.togglePointHighlight(n,!0,e),this._points.push(n))}}togglePointHighlight(t,e,i){const s=(t.options.highlight||{}).toggle;if(s){const n={category:t.category,series:t.series,dataItem:t.dataItem,value:t.value,stackValue:t.stackValue,preventDefault:$_,visual:t.highlightVisual(),show:e};s(n),n._defaultPrevented||t.toggleHighlight(e,i)}else t.toggleHighlight(e,i)}hide(){const t=this._points;for(;t.length;)this.togglePointHighlight(t.pop(),!1)}isHighlighted(t){const e=this._points;for(let i=0;i<e.length;i++)if(t===e[i])return!0;return!1}};function Sp(o,t){const e=(t||"").toLowerCase(),i=o.event;return"none"===e&&!(i.ctrlKey||i.shiftKey||i.altKey)||i[e+"Key"]}function Fl(o){const t={};for(let e=0;e<o.length;e++){const i=o[e];i.axis.options.name&&(t[i.axis.options.name]={min:i.range.min,max:i.range.max})}return t}class Tp extends I.A{constructor(t,e){super(),this.plotArea=t,this.options=x({},this.options,e)}start(t){return this._active=Sp(t,this.options.key),this._active}move(t){if(this._active){const e=this.axisRanges=this._panAxes(t,P).concat(this._panAxes(t,D));if(e.length)return this.axisRanges=e,Fl(e)}}end(){const t=this._active;return this._active=!1,t}pan(){const{plotArea:t,axisRanges:e}=this;if(e.length){for(let i=0;i<e.length;i++){const s=e[i];t.updateAxisOptions(s.axis,s.range)}t.redraw(t.panes)}}destroy(){delete this.plotArea}_panAxes(t,e){const i=this.plotArea,s=-t[e].delta,n=(this.options.lock||"").toLowerCase(),r=[];if(0!==s&&(n||"").toLowerCase()!==e){const l=i.axes;for(let c=0;c<l.length;c++){const h=l[c];if(e===P&&!h.options.vertical||e===D&&h.options.vertical){const d=h.pan(s);d&&(d.limitRange=!0,r.push({axis:h,range:d}))}}}return r}}Tp.prototype.options={key:"none",lock:"none"};const Z_=Tp;class Mp extends I.A{constructor(t,e){super(),this.chart=t,this.options=x({},this.options,e),this.createElement()}createElement(){const t=this._marquee=document.createElement("div");t.className="k-marquee";const e=document.createElement("div");e.className="k-marquee-color",t.appendChild(e)}removeElement(){this._marquee.parentNode&&this._marquee.parentNode.removeChild(this._marquee)}setStyles(t){dt(this._marquee,t)}start(t){if(Sp(t,this.options.key)){const e=this.chart,i=e._eventCoordinates(t),s=this._zoomPane=e._plotArea.paneByPoint(i),n=s?s.chartsBox().clone():null;if(s&&n){const r=this._elementOffset();return n.translate(r.left,r.top),this._zoomPaneClipBox=n,document.body.appendChild(this._marquee),this.setStyles({left:t.pageX+1,top:t.pageY+1,width:0,height:0}),!0}}return!1}_elementOffset(){const t=this.chart.element,{paddingLeft:e,paddingTop:i}=dt(t,["paddingLeft","paddingTop"]),s=ts(t);return{left:e+s.left,top:i+s.top}}move(t){this._zoomPane&&this.setStyles(this._selectionPosition(t))}end(t){if(this._zoomPane){const i=this._elementOffset(),s=this._selectionPosition(t);return s.left-=i.left,s.top-=i.top,this._updateAxisRanges({x:s.left,y:s.top},{x:s.left+s.width,y:s.top+s.height}),this.removeElement(),delete this._zoomPane,Fl(this.axisRanges)}}zoom(){const t=this.axisRanges;if(t&&t.length){const e=this.chart._plotArea;for(let i=0;i<t.length;i++){const s=t[i];e.updateAxisOptions(s.axis,s.range)}e.redraw(e.panes)}}destroy(){this.removeElement(),delete this._marquee,delete this.chart}_updateAxisRanges(t,e){const i=(this.options.lock||"").toLowerCase(),s=[],n=this._zoomPane.axes;for(let r=0;r<n.length;r++){const l=n[r],c=l.options.vertical;if((i!==P||c)&&(i!==D||!c)&&_(l.axisIndex)){const h=l.pointsRange(t,e);h&&s.push({axis:l,range:h})}}this.axisRanges=s}_selectionPosition(t){const e=this._zoomPaneClipBox,i={x:t.x.startLocation,y:t.y.startLocation},{x:{location:s},y:{location:n}}=t,r=(this.options.lock||"").toLowerCase();let l=Math.min(i.x,s),c=Math.min(i.y,n),h=Math.abs(i.x-s),d=Math.abs(i.y-n);return r===P&&(l=e.x1,h=e.width()),r===D&&(c=e.y1,d=e.height()),s>e.x2&&(h=e.x2-i.x),s<e.x1&&(h=i.x-e.x1),n>e.y2&&(d=e.y2-i.y),n<e.y1&&(d=i.y-e.y1),{left:Math.max(l,e.x1),top:Math.max(c,e.y1),width:h,height:d}}}Mp.prototype.options={key:"shift",lock:"none"};const K_=Mp,i1=class e1 extends I.A{constructor(t,e){super(),this.chart=t,this.options=x({rate:.3},this.options,e)}updateRanges(t,e){const i=(this.options.lock||"").toLowerCase(),s=[],n=this.chart._plotArea.axes;for(let r=0;r<n.length;r++){const l=n[r],c=l.options.vertical;if((i!==P||c)&&(i!==D||!c)&&l.zoomRange){const h=R(this.options.rate,.01,.9),d=l.zoomRange(-t*h,e);d&&s.push({axis:l,range:d})}}return this.axisRanges=s,Fl(s)}zoom(){const t=this.axisRanges,e=this.chart._plotArea;if(t&&t.length&&e.updateAxisOptions){for(let i=0;i<t.length;i++){const s=t[i];e.updateAxisOptions(s.axis,s.range)}e.redraw(e.panes)}}destroy(){delete this.chart}};var Nl=T(626);function rr(o,t,e,i,s){let n;return n="start"===e?t.origin[i]:"end"===e?t.origin[i]+t.size[s]-o:t.origin[i]+(t.size[s]-o)/2,n}function n1(o,t,e,i,s){let n;return n="start"===e?t.origin[i]+t.size[s]-o:"end"===e?t.origin[i]:t.origin[i]+(t.size[s]-o)/2,n}const o1={alignContent:"start",justifyContent:"start",alignItems:"start",spacing:0,orientation:"horizontal",lineSpacing:0,wrap:!0,revers:!1},r1=(o,t)=>{o.forEach(t)},a1=(o,t)=>{for(let i=o.length-1;i>=0;i--)t(o[i],i)},c1=class l1 extends et.A{constructor(t,e){super(Object.assign({},o1,e)),this._rect=t,this._fieldMap={}}rect(t){return t?(this._rect=t,this):this._rect}_initMap(){const t=this.options,e=this._fieldMap;"horizontal"===t.orientation?(e.sizeField="width",e.groupsSizeField="height",e.groupAxis="x",e.groupsAxis="y"):(e.sizeField="height",e.groupsSizeField="width",e.groupAxis="y",e.groupsAxis="x"),t.reverse?(this.forEach=a1,this.justifyAlign=n1):(this.forEach=r1,this.justifyAlign=rr)}reflow(){if(!this._rect||0===this.children.length)return;this._initMap(),this.options.transform&&this.transform(null);const t=this.options,e=this._rect,{groups:i,groupsSize:s}=this._initGroups(),{sizeField:n,groupsSizeField:r,groupAxis:l,groupsAxis:c}=this._fieldMap,h=new j.A,d=new j.A,u=new Nl.A;let g,f,m,p=rr(s,e,t.alignContent,c,r);const v=(y,w)=>{const E=f.elements[w];d[l]=g,d[c]=rr(y.size[r],m,t.alignItems,c,r),function s1(o,t,e){const i=e.transform()||(0,bt.A)(),s=i.matrix();s.e+=o.x-t.origin.x,s.f+=o.y-t.origin.y,i.matrix(s),e.transform(i)}(d,y,E),g+=y.size[n]+t.spacing};for(let y=0;y<i.length;y++)f=i[y],h[l]=g=this.justifyAlign(f.size,e,t.justifyContent,l,n),h[c]=p,u[n]=f.size,u[r]=f.lineSize,m=new At.A(h,u),this.forEach(f.bboxes,v),p+=f.lineSize+t.lineSpacing;if(!t.wrap&&f.size>e.size[n]){const y=e.size[n]/m.size[n],w=m.topLeft().scale(y,y),L=rr(m.size[r]*y,e,t.alignContent,c,r),F=(0,bt.A)();"x"===l?F.translate(e.origin.x-w.x,L-w.y):F.translate(L-w.x,e.origin.y-w.y),F.scale(y,y),this.transform(F)}}_initGroups(){const{options:t,children:e}=this,{lineSpacing:i,wrap:s,spacing:n}=t,r=this._fieldMap.sizeField;let l=this._newGroup();const c=[],h=function(){c.push(l),d+=l.lineSize+i};let d=-i;for(let u=0;u<e.length;u++){let p=e[u],g=e[u].clippedBBox();p.visible()&&g&&(s&&l.size+g.size[r]+n>this._rect.size[r]?0===l.bboxes.length?(this._addToGroup(l,g,p),h(),l=this._newGroup()):(h(),l=this._newGroup(),this._addToGroup(l,g,p)):this._addToGroup(l,g,p))}return l.bboxes.length&&h(),{groups:c,groupsSize:d}}_addToGroup(t,e,i){t.size+=e.size[this._fieldMap.sizeField]+this.options.spacing,t.lineSize=Math.max(e.size[this._fieldMap.groupsSizeField],t.lineSize),t.bboxes.push(e),t.elements.push(i)}_newGroup(){return{lineSize:0,size:-this.options.spacing,bboxes:[],elements:[]}}},u1=class d1 extends K{constructor(t,e){super(t),this.chartService=e}render(){const{children:t,options:e}=this,i=e.vertical;var o;this.visual=new c1(null,{spacing:i?0:e.spacing,lineSpacing:i?e.spacing:0,orientation:i?"vertical":pa,reverse:e.rtl,alignItems:i?(o=e.rtl,o?Xs:co):V});for(let s=0;s<t.length;s++){let n=t[s];n.reflow(new k),n.renderVisual()}}reflow(t){this.visual.rect(t.toRect()),this.visual.reflow();const e=this.visual.clippedBBox();this.box=e?as(e):new k}renderVisual(){this.addVisual()}createVisual(){}};class Ep extends Ot{visualStyle(){const t=this.markerOptions(),e=t.border;return{stroke:{width:e.width,color:e.color,opacity:O(e.opacity,t.opacity),dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},cursor:t.cursor}}markerOptions(){return this.options}markerHighlightOptions(){const t=this.markerOptions();return x({},t,{background:t.border.color},t.highlight,t.type===aa?{background:t.highlight.border.color,border:{color:t.highlight.background,width:t.highlight.border.width/2},width:t.width,height:t.height,margin:{top:0,left:0}}:{})}createHighlight(){const t=new Ot(this.markerHighlightOptions()),e=this.paddingBox.clone();return t.reflow(e.pad(t.options.border.width)),this.highlight=[t.getElement()],this.highlight}}C(Ep,{border:{width:2},width:8,height:8,background:W,margin:{top:-1,left:-1},vAlign:G,align:U,highlight:{width:10,height:10,border:{color:W,width:2}}});const p1=Ep;class Pp extends Ot{getElement(){const t=new et.A,e=new M.P(this.visualStyle()),{paddingBox:i}=this,s=i.height()/2;return e.moveTo(i.x1,i.y1+s).lineTo(i.x1,i.y2).lineTo(i.x2,i.y2),t.append(e),t}}C(Pp,{width:15,height:15,align:$,vAlign:Y,margin:{right:-2,bottom:2}});const Dp=Pp;class Ip extends Ot{getElement(){const t=new et.A,e=new M.P({stroke:{color:this.options.border.color,opacity:this.options.opacity,width:this.options.height,dashType:this.options.dashType}}),i=this.paddingBox,s=i.center().y;return e.moveTo(i.x1,s).lineTo(i.x2,s),t.append(e),t}createHighlight(){return this.highlight=[this.createHighlightLine(),this.createHighlightMarker()],this.highlight}createHighlightLine(){const t=x({},{border:{color:this.options.border.color,opacity:this.options.border.opacity,dashType:this.options.border.dashType}},this.options.highlight),e=new Dp(t);return e.reflow(this.parent.paddingBox.clone()),this.highlightLine=e.getElement(),this.highlightLine}createHighlightMarker(){const t=x({},{background:this.options.background},this.options.highlight.markers),e=new Ot(t),i=this.parent.paddingBox,s=t.border.width,n=this.parent.box.clone();return n.pad({left:s-i.x1,top:s-i.y1}),e.reflow(n),this.highlightMarker=e.getElement(),this.highlightMarker}}C(Ip,{border:{width:0},type:"rect",align:U,vAlign:V,highlight:{border:{width:2},markers:{type:Ut,width:10,height:10,border:{width:2,color:W},align:U,vAlign:G}}});const g1=Ip;class Rp extends Ot{createHighlight(){const t=x({},{background:this.options.background},this.options.highlight.markers),e=new Ot(t),i=this.paddingBox.clone(),s=this.parent.box.clone();return i.align(s,P,U),i.align(s,D,G),e.reflow(i),this.highlight=[e.getElement()],this.highlight}}C(Rp,{highlight:{markers:{type:Ut,width:10,height:10,border:{width:2,color:W},margin:{top:-3,left:-3}}}});const f1=Rp;class Lp extends ri{constructor(t){super(t),this.createContainer(),t.rtl?(this.createLabel(),this.createMarker()):(this.createMarker(),this.createLabel()),this._id=qs(),this.options.accessibility.ariaChecked=t.active}createContainer(){this.container=new Ma({vertical:!1,wrap:!1,align:V,spacing:this.options.spacing}),this.append(this.container)}createMarker(){this.markerWrap=new ri({vertical:!1,shrinkToFit:!0,wrap:!1,margin:1,width:22,height:22}),this.container.append(this.markerWrap),this.createMarkerArea(),this.options.markers.visible&&(this._marker=this._createMarker(),this.markerWrap.append(this._marker))}createMarkerArea(){const t=this.options,{markerColor:e,line:i={}}=t,s={border:{color:i.color||e,opacity:i.opacity,dashType:i.dashType}};return this._createLine(s)||this._createMarkerLine(s,i)||this._createSquare()}markerOptions(){const t=this.options,{markers:e={},markerColor:i}=t,{border:s={}}=e;return e.zIndex=void 0,x({},e,{border:{color:s.color||i},highlight:t.highlight.markers})}_highlightOptions(){const t=this.options;return x({markers:{type:t.markers.type}},t.highlight)}_createLine(t){const e=this.options;return e.type===Ne&&!e.markers.visible&&(this._line=new g1(x({},{background:e.markerColor,highlight:this._highlightOptions()},t,e.line)),this.markerWrap.append(this._line)),this._line}_createMarkerLine(t,e){return this.options.type===Ne&&(this._markerLineArea=new Dp(x({},{border:{width:e.height}},t)),this.markerWrap.append(this._markerLineArea)),this._markerLineArea}_reduceSize(t,e,i=.6){"number"==typeof t[e]&&(t[e]=t[e]*i)}_createSquare(){const t=this.options;if(t.type===Fe){let e=t.pattern||(t.series||{}).pattern;e&&("function"==typeof e&&(e=e(t.series)),e=Object.assign({},e),this._reduceSize(e,"gap"),this._reduceSize(e,"width"),this._reduceSize(e,"radius")),this._square=new f1(Object.assign({},{border:t.border,vAlign:t.markers.visible?Y:V,highlight:this._highlightOptions()},t.area,{pattern:e,background:t.area.background||t.markerColor})),this.markerWrap.append(this._square)}return this._square}_createMarker(){return new p1(this.markerOptions())}_highlightMarkers(){this.options.active&&this._toggleHighlight(!0)}_restoreMarkers(){this._toggleHighlight(!1)}_toggleHighlight(t){if(!this.options.highlight.visible)return;const e=this._marker||this._square||this._line;if(e&&e===this._line&&this._line.visual.visible(!t),e){let i=e.highlight;i||(i=e.createHighlight(),i.forEach(s=>s&&this.markerWrap.appendVisual(s))),i.forEach(s=>s&&s.visible(t))}}createLabel(){const t=this.options,e=x({},t.labels);this.container.append(new Ht(t.text,e))}getAriaLabelText(){return this.options.text}focusVisual(){this.visual.options.set("id",this._id),this.toggleFocusHighlight(!0),this._highlightMarkers()}clearFocusFromVisual(){this.visual.options.set("id",""),this.toggleFocusHighlight(!1),this._restoreMarkers()}renderComplete(){super.renderComplete();const t=this.options.cursor||{},e=this._itemOverlay=M.w.fromRect(this.container.box.toRect(),{fill:{color:W,opacity:0},stroke:null,cursor:t.style||t});this.appendVisual(e)}click(t,e){const i=this.eventArgs(e);!t.trigger(Su,i)&&e&&"contextmenu"===e.type&&e.preventDefault()}over(t,e){const i=this.eventArgs(e);return t.trigger("legendItemHover",i)||(t._legendItemHover(i.seriesIndex,i.pointIndex),this._highlightMarkers()),!0}out(t,e){t._unsetActivePoint(),this._restoreMarkers(),t.trigger("legendItemLeave",this.eventArgs(e))}eventArgs(t){const e=this.options;return{element:ue(t),text:e.text,series:e.series,seriesIndex:e.series.index,pointIndex:e.pointIndex}}createVisual(){super.createVisual();const t=this.options;if(this.options.visible){const e=x({ariaLabel:void 0!==t.accessibility.ariaLabel?t.accessibility.ariaLabel:t.text},t.accessibility);Ta(this.visual,e)}}renderVisual(){const t=this.options,e=t.visual;e?(this.visual=e({active:t.active,series:t.series,sender:this.getSender(),pointIndex:t.pointIndex,options:{type:t.type,markers:x({background:this.options.markerColor},this.markerOptions()),labels:t.labels},createVisual:()=>{this.createVisual(),this.renderChildren(),this.renderComplete();const i=this.visual;return delete this.visual,i}}),this._marker=this._markerLineArea=this._square=this._line=null,this.addVisual()):super.renderVisual()}createFocusHighlight(t){return M.w.fromRect(this.container.box.pad(t.stroke.width/2).toRect(),t)}}C(Lp,{accessibility:{role:"checkbox",className:"k-chart-legend-item",ariaRoleDescription:"Legend item"},markers:{},highlight:{visible:!0,markers:{}}});const m1=Lp,ar="custom";class Op extends K{constructor(t,e={}){super(t),this.chartService=e,N(this.options.position,[G,$,Y,U,ar])||(this.options.position=$),this.createContainers(),this.createLegendTitle(t.title),this.createItems()}createContainers(){const t=this.options,{position:e,align:i}=t;let s=e,n=V;e===ar?s=U:N(e,[G,Y])?(s=i===co?U:i===Xs?$:V,n=e):i&&(i===co?n=G:i===Xs&&(n=Y)),this.container=new ri({margin:t.margin,padding:t.padding,background:t.background,border:t.border,vAlign:n,align:s,zIndex:t.zIndex,shrinkToFit:!0}),this.itemsContainer=this.hasTitle()?new ri({vAlign:n,align:s,zIndex:t.zIndex,shrinkToFit:!0}):this.container,this.append(this.container)}createItems(){const t=this.getService(),e=this.options,i=this.isVertical(),s=new u1({vertical:i,spacing:e.spacing,rtl:t.rtl},t);let n=e.data;e.reverse&&(n=n.slice(0).reverse());const r=n.length;for(let l=0;l<r;l++){let c=n[l];const{markers:h={},dashType:d,legendItem:u,opacity:p}=c.series||{},g=x({visible:!1!==h.visible,type:Ut},h);delete g.size;const f=x({},{markers:g,labels:e.labels,rtl:t.rtl,line:Object.assign({},{dashType:d},e.line),area:Object.assign({},{opacity:p},e.area),opacity:p,accessibility:e.accessibility,focusHighlight:e.focusHighlight},e.item,u,c,{markers:e.markers});s.append(new m1(f))}s.render(),this.itemsContainer.append(s)}isVertical(){const{orientation:t,position:e}=this.options;return e===ar&&t!==pa||(_(t)?t!==pa:N(e,[U,$]))}hasItems(){return this.container.children[0].children.length>0}getItems(){return this.itemsContainer.children[0].children}reflow(t){const e=this.options,i=t.clone();this.hasItems()?(e.position===ar?(this.containerCustomReflow(i),this.box=i):this.containerReflow(i),this.hasTitle()&&this.title.reflow(new k(this.container.box.x1,this.title.box.y1,this.container.box.x2,this.title.box.y2))):this.box=i}containerReflow(t){const{options:e,container:i}=this,{position:s,width:n,height:r}=e,l=s===G||s===Y?P:D,c=this.isVertical(),h=t.clone();let d=t.clone();(s===U||s===$)&&(d.y1=h.y1=0),c&&r?(d.y2=d.y1+r,d.align(h,D,i.options.vAlign)):!c&&n&&(d.x2=d.x1+n,d.align(h,P,i.options.align)),i.reflow(d),d=i.box;const u=d.clone();(e.offsetX||e.offsetY)&&(d.translate(e.offsetX,e.offsetY),i.reflow(d)),u[l+1]=t[l+1],u[l+2]=t[l+2],this.box=u}containerCustomReflow(t){const{options:e,container:i}=this,{offsetX:s,offsetY:n,width:r,height:l}=e,c=this.isVertical();let h=t.clone();c&&l?h.y2=h.y1+l:!c&&r&&(h.x2=h.x1+r),i.reflow(h),h=i.box,i.reflow(new k(s,n,s+h.width(),n+h.height()))}renderVisual(){this.hasItems()&&super.renderVisual()}createLegendTitle(t){let e=x({},{color:pt,position:G,align:V},t),i=e.text;if(t&&!1!==t.visible&&t.text){if(_(e)&&e.visible){const s=kt(e);s?i=s({text:i}):e.format&&(i=this.chartService.format.auto(e.format,i))}this.title=new Ht(i,e),this.createTitleLayout(),this.appendTitleLayoutContent()}}createTitleLayout(){this.layout=new Ma({vertical:!0,wrap:!1}),this.container.append(this.layout)}hasTitle(){return!(!this.options.title||!1===this.options.title.visible||!this.options.title.text)}appendTitleLayoutContent(){this.options.title.position===Y?(this.layout.append(this.itemsContainer),this.layout.append(this.title)):(this.layout.append(this.title),this.layout.append(this.itemsContainer))}}C(Op,{position:$,data:[],offsetX:0,offsetY:0,margin:Z(2),padding:Z(5),border:{color:pt,width:0},item:{cursor:ua,spacing:6},spacing:6,background:"",zIndex:1,markers:{},line:{width:20,height:2,cursor:ua,opacity:1},area:{type:"square",align:$,width:15,height:15}});const Bp=Op;class zl extends I.A{constructor(){super(),this._registry=[]}register(t,e){this._registry.push({type:t,seriesTypes:e})}create(t,e,i){const s=this._registry;let r,n=s[0];for(let l=0;l<s.length;l++){const c=s[l];r=ut(t,c.seriesTypes);const h=ut(t,bs);if(r.length-h.length>0){n=c;break}}return new n.type(r,e,i)}}zl.current=new zl;const He=zl;function Xe(o){const t=document.createElement("div");return o&&(t.className=o),t}function Vp(o){let t=o;for(;t&&!$s(t,"k-handle");)t=t.parentNode;return t}class Fp extends I.A{constructor(t,e,i,s){super();const n=t.element;this.options=x({},this.options,i),this.chart=t,this.observer=s,this.chartElement=n,this.categoryAxis=e,this._dateAxis=this.categoryAxis instanceof cn,this.initOptions(),this.visible=this.options.visible&&n.offsetHeight,this.visible&&(this.createElements(),this.set(this._index(this.options.from),this._index(this.options.to)),this.bindEvents())}onPane(t){return this.categoryAxis.pane===t}createElements(){const t=this.options,e=this.wrapper=Xe("k-selector k-pointer-events-none");dt(e,{top:t.offset.top,left:t.offset.left,width:t.width,height:t.height,direction:"ltr"});const i=this.selection=Xe("k-selection k-pointer-events-none");this.leftMask=Xe("k-mask k-pointer-events-none"),this.rightMask=Xe("k-mask k-pointer-events-none"),e.appendChild(this.leftMask),e.appendChild(this.rightMask),e.appendChild(i);const s=this.body=Xe("k-selection-bg k-pointer-events-none");i.appendChild(s);const n=this.leftHandle=Xe("k-handle k-left-handle k-pointer-events-auto"),r=this.rightHandle=Xe("k-handle k-right-handle k-pointer-events-auto");n.appendChild(Xe()),r.appendChild(Xe()),i.appendChild(n),i.appendChild(r),this.chartElement.appendChild(e);const l=dt(i,["borderLeftWidth","borderRightWidth","height"]),c=dt(n,"height").height,h=dt(r,"height").height;t.selection={border:{left:l.borderLeftWidth,right:l.borderRightWidth}},dt(n,{top:(l.height-c)/2}),dt(r,{top:(l.height-h)/2}),e.style.cssText=e.style.cssText}bindEvents(){!1!==this.options.mousewheel&&(this._mousewheelHandler=this._mousewheel.bind(this),Qs(this.chartElement,{[Zo]:this._mousewheelHandler})),this._domEvents=Qd.create(this.chartElement,{stopPropagation:!0,start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),press:this._press.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})}initOptions(){const{options:t,categoryAxis:e}=this,i=e.pane.chartsBox(),s=this.chart.chartService.intl;this._dateAxis&&x(t,{min:Dt(s,t.min),max:Dt(s,t.max),from:Dt(s,t.from),to:Dt(s,t.to)});const{paddingLeft:n,paddingTop:r}=dt(this.chartElement,["paddingLeft","paddingTop"]);this.options=x({},{width:i.width(),height:i.height()+.1,padding:{left:n,top:r},offset:{left:i.x1+n,top:i.y1+r},from:t.min,to:t.max},t)}destroy(){this._domEvents&&(this._domEvents.destroy(),delete this._domEvents),clearTimeout(this._mwTimeout),this._state=null,this.wrapper&&(this._mousewheelHandler&&(Zs(this.chartElement,{[Zo]:this._mousewheelHandler}),this._mousewheelHandler=null),this.chartElement.removeChild(this.wrapper),this.wrapper=null)}_rangeEventArgs(t){return{axis:this.categoryAxis.options,from:this._value(t.from),to:this._value(t.to)}}_pointInPane(t,e){const i=this.categoryAxis.pane.box,s=this.chart._toModelCoordinates(t,e);return i.containsPoint(s)}_start(t){const e=this.options,i=ue(t);if(this._state||!i)return;const s=sd(t);if(!this._pointInPane(s.x,s.y))return;const r=Vp(i),l=this.body.getBoundingClientRect(),c=!r&&s.x>=l.x&&s.x<=l.x+l.width&&s.y>=l.y&&s.y<=l.y+l.height;this.chart._unsetActivePoint(),this._state={moveTarget:r,startLocation:t.x?t.x.location:0,inBody:c,range:{from:this._index(e.from),to:this._index(e.to)}};const h=this._rangeEventArgs({from:this._index(e.from),to:this._index(e.to)});this.trigger(hl,h)&&(this._state=null)}_press(t){let e;e=this._state?this._state.moveTarget:Vp(ue(t)),e&&gt(e,"k-handle-active")}_move(t){if(!this._state)return;const{_state:e,options:i,categoryAxis:s}=this,{range:n,moveTarget:r}=e,l=s.options.reverse,c=this._index(i.from),h=this._index(i.to),d=this._index(i.min),u=this._index(i.max),p=e.startLocation-t.x.location,g_from=n.from,g_to=n.to,f=n.to-n.from,m=dt(this.wrapper,"width").width/(s.categoriesCount()-1),v=Math.round(p/m)*(l?-1:1);if(!r&&!e.inBody)return;const y=r&&$s(r,"k-left-handle"),w=r&&$s(r,"k-right-handle");e.inBody?(n.from=Math.min(Math.max(d,c-v),u-f),n.to=Math.min(n.from+f,u)):y&&!l||w&&l?(n.from=Math.min(Math.max(d,c-v),u-1),n.to=Math.max(n.from+1,n.to)):(y&&l||w&&!l)&&(n.to=Math.min(Math.max(d+1,h-v),u),n.from=Math.min(n.to-1,n.from)),(n.from!==g_from||n.to!==g_to)&&(this.move(n.from,n.to),this.trigger(wn,this._rangeEventArgs(n)))}_end(){if(this._state){const t=this._state.moveTarget;t&&uo(t,"k-handle-active");const e=this._state.range;this.set(e.from,e.to),this.trigger(dl,this._rangeEventArgs(e)),delete this._state}}_tap(t){const{options:e,categoryAxis:i}=this,s=this.chart._eventCoordinates(t),n=i.pointCategoryIndex(new B(s.x,i.box.y1)),r=this._index(e.from),l=this._index(e.to),c=this._index(e.min),h=this._index(e.max),d=l-r,p={},g=3===t.event.which;let f=Math.round(r+d/2-n);this._state||g||(this.chart._unsetActivePoint(),i.options.justified||f--,p.from=Math.min(Math.max(c,r-f),h-d),p.to=Math.min(p.from+d,h),this._start(t),this._state&&(this._state.range=p,this.trigger(wn,this._rangeEventArgs(p)),this._end()))}_mousewheel(t){let e=fa(t);if(this._start(t),this._state){const i=this._state.range;t.preventDefault(),t.stopPropagation(),Math.abs(e)>1&&(e*=3),this.options.mousewheel.reverse&&(e*=-1),this.expand(e)&&this.trigger(wn,{axis:this.categoryAxis.options,delta:e,originalEvent:t,from:this._value(i.from),to:this._value(i.to)}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout(()=>{this._end()},150)}}_gesturestart(t){const e=this.options,i=t.touches[0];if(!this._pointInPane(i.pageX,i.pageY))return;this._state={range:{from:this._index(e.from),to:this._index(e.to)}};const n=this._rangeEventArgs(this._state.range);this.trigger(hl,n)?this._state=null:t.preventDefault()}_gestureend(){this._state&&(this.trigger(dl,this._rangeEventArgs(this._state.range)),delete this._state)}_gesturechange(t){if(!this._state)return;const{chart:e,_state:i,options:s,categoryAxis:n}=this,r=i.range,l=e._toModelCoordinates(t.touches[0].x.location).x,c=e._toModelCoordinates(t.touches[1].x.location).x,h=Math.min(l,c),d=Math.max(l,c);t.preventDefault(),r.from=n.pointCategoryIndex(new B(h))||s.min,r.to=n.pointCategoryIndex(new B(d))||s.max,this.move(r.from,r.to),this.trigger(wn,this._rangeEventArgs(r))}_index(t){let e=t;return t instanceof Date&&(e=this.categoryAxis.categoryIndex(t)),e}_value(t){let e=t;return this._dateAxis&&(e=this.categoryAxis.categoryAt(t),e>this.options.max&&(e=this.options.max)),e}_slot(t){const e=this.categoryAxis,i=this._index(t);return e.getSlot(i,i,!0)}move(t,e){const i=this.options,s=this.categoryAxis.options.reverse,{offset:n,padding:r,selection:{border:l}}=i,h=s?t:e,d="x"+(s?2:1);let u=this._slot(s?e:t);const p=A(u[d]-n.left+r.left);dt(this.leftMask,{width:p}),dt(this.selection,{left:p}),u=this._slot(h);const g=A(i.width-(u[d]-n.left+r.left));dt(this.rightMask,{width:g});let f=i.width-g;f!==i.width&&(f+=l.right),dt(this.rightMask,{left:f}),dt(this.selection,{width:Math.max(i.width-(p+g)-l.right,0)})}set(t,e){const i=this.options,s=this._index(i.min),n=this._index(i.max),r=R(this._index(t),s,n),l=R(this._index(e),r+1,n);i.visible&&this.move(r,l),i.from=this._value(r),i.to=this._value(l)}expand(t){const e=this.options,i=this._index(e.min),s=this._index(e.max),n=e.mousewheel.zoom,r=this._index(e.from),l=this._index(e.to);let c={from:r,to:l};const h=x({},c);if(this._state&&(c=this._state.range),n!==$&&(c.from=R(R(r-t,0,l-1),i,s)),n!==U&&(c.to=R(R(l+t,c.from+1,s),i,s)),c.from!==h.from||c.to!==h.to)return this.set(c.from,c.to),!0}zoom(t,e){const i=this.options,s=this._index(i.min),n=this._index(i.max),r=this._index(i.from),l=this._index(i.to);let c={from:r,to:l};const h=x({},c),{reverse:d}=this.categoryAxis.options,u=P+(d?"2":"1"),p=this.categoryAxis.lineBox(),g=Math.abs(p[u]-e[P]),f=p.width(),m=A(g/f,2),v=A(m*t),y=A((1-m)*t);if(this._state&&(c=this._state.range),c.from=R(R(r-v,0,l-1),s,n),c.to=R(R(l+y,c.from+1,n),s,n),c.from!==h.from||c.to!==h.to)return this.set(c.from,c.to),!0}trigger(t,e){return(this.observer||this.chart).trigger(t,e)}}C(Fp,{visible:!0,mousewheel:{zoom:"both"},min:wt,max:ft});const Np=Fp,y1=class b1 extends El{show(t){if(!t||!t.tooltipAnchor||this._current&&this._current===t)return;const e=x({},this.options,t.options.tooltip),i=t.tooltipAnchor();i?(this._current=t,super.show({point:t,anchor:i},e,t)):this.hide()}hide(){delete this._current,super.hide()}};class zp extends El{constructor(t,e){super(t.chartService,e),this.plotArea=t,this.formatService=t.chartService.format}showAt(t,e){const i=Zt(t,function(s){const n=s.series.tooltip;return!(n&&!1===n.visible)});if(i.length>0){const s=i[0],n=this.plotArea.categoryAxis.getSlot(s.categoryIx),r=e?this._slotAnchor(e,n):this._defaultAnchor(s,n);this.show({anchor:r,shared:!0,points:t,category:s.category,categoryText:this.formatService.auto(this.options.categoryFormat,s.category),series:this.plotArea.series},this.options)}}_slotAnchor(t,e){return this.plotArea.categoryAxis.options.vertical||(t.x=e.center().x),{point:t,align:{horizontal:"left",vertical:"center"}}}_defaultAnchor(t,e){const i=t.owner.pane.chartsBox(),s=this.plotArea.categoryAxis.options.vertical,n=i.center(),r=e.center();let c;return c=s?new B(n.x,r.y):new B(r.x,n.y),{point:c,align:{horizontal:"center",vertical:"center"}}}}C(zp,{categoryFormat:"{0:d}"});const Up=zp;class jp extends re{setup(){const{element:t,options:e}=this;if(t.bbox()){this.origin=e.origin;const s=e.vertical?D:P,n=this.fromScale=new j.A(1,1);n[s]=hn,t.transform(bt.A().scale(n.x,n.y))}else this.abort()}step(t){const e=se(this.fromScale.x,1,t),i=se(this.fromScale.y,1,t);this.element.transform(bt.A().scale(e,i,this.origin))}abort(){super.abort(),this.element.transform(null)}}C(jp,{duration:le}),we.current.register(ce,jp);class Gp extends re{setup(){const t=this.center=this.element.bbox().center();this.element.transform(bt.A().scale(hn,hn,t))}step(t){this.element.transform(bt.A().scale(t,t,this.center))}}C(Gp,{easing:"easeOutElastic"}),we.current.register(ds,Gp);class Hp extends re{setup(){this.fadeTo=this.element.opacity(),this.element.opacity(0)}step(t){this.element.opacity(t*this.fadeTo)}}C(Hp,{duration:200,easing:"linear"}),we.current.register(ai,Hp);class Xp extends re{setup(){this.element.transform(bt.A().scale(hn,hn,this.options.center))}step(t){this.element.transform(bt.A().scale(t,t,this.options.center))}}C(Xp,{easing:"easeOutElastic",duration:le}),we.current.register(ci,Xp);class Yp extends ir{render(){super.render(),this.renderSegments()}createSegment(t,e,i){let n;return n=e.style===hs?bl:ks,new n(t,e,i)}animationPoints(){return super.animationPoints().concat(this._segments)}createMissingValue(t,e){if(e===Ve){const i={x:t.x,y:t.y};return Xt(i.x)||(i.x=0),Xt(i.y)||(i.y=0),i}}}x(Yp.prototype,yl);const Wp=Yp,Pn=function _1(o,t,e){const i=[];let{xMin:s,xMax:n}=t;const r=(e||{}).forecast;r&&(r.before>0&&(s-=r.before),r.after>0&&(n+=r.after));const l=(e||{}).samplingInterval;let c=O(l,ns(s,n)/10);l<=0&&(c=n-s);for(let h=s;h<=n;h+=c)i.push([h,o(h)]);return i},lr=o=>({valueFields:t})=>({xValue:t.x,yValue:t[o]}),$p=function E1(o,t){let e=Number.MAX_VALUE,i=Number.MIN_VALUE;for(let s=0;s<o.length;s++){const n=o[s],{xValue:r,yValue:l}=t(n);isFinite(r)&&null!==r&&isFinite(l)&&null!==l&&(e=Math.min(r,e),i=Math.max(r,i))}return{xMin:e,xMax:i}},Ni={};Ni[il]=function w1(o){const{options:t,seriesValues:e}=o,i=function k1({seriesValues:o,options:t}){const e=o();if(!Mn(e,t.field))return null;let{slope:i,intercept:s,count:n,xMin:r,xMax:l}=gi(e,(o=>({valueFields:t})=>({xValue:t.x,yValue:Math.log(t[o])}))(t.field));const c={xMin:r,xMax:l};if(n>0){const h=Math.exp(s),d=i;return Pn(u=>h*Math.exp(d*u),c,t.trendline)}return null}({seriesValues:e,options:t});return i?Object.assign({},t,{type:"scatterLine",data:i}):null},Ni[sl]=function S1(o){const{options:t,seriesValues:e}=o,i=function T1({seriesValues:o,options:t}){let{slope:e,intercept:i,count:s,xMin:n,xMax:r}=gi(o(),lr(t.field));return s>0?Pn(c=>e*c+i,{xMin:n,xMax:r},t.trendline):null}({seriesValues:e,options:t});return i?Object.assign({},t,{type:"scatterLine",data:i}):null},Ni[nl]=function P1(o){const{options:t,seriesValues:e}=o,i=function R1({seriesValues:o,options:t}){const e=o();if(!Mn(e,"x"))return null;let{slope:i,intercept:s,count:n}=gi(e,(o=>({valueFields:t})=>({xValue:Math.log(t.x),yValue:t[o]}))(t.field)),r=$p(e,(o=>({valueFields:t})=>({xValue:t.x,yValue:t[o]}))(t.field));if(n>0){const l=i,c=s;return Pn(h=>l*Math.log(h)+c,r,t.trendline)}return null}({seriesValues:e,options:t});return i?Object.assign({},t,{type:"scatterLine",data:i}):null},Ni[ol]=function O1(o){const{options:t}=o,e=function B1({options:o,seriesValues:t}){const e=(o.trendline||{}).period||2,s=_p(t({before:e,after:e}),lr(o.field),e);return s.length>0?s:null}(o);return e?Object.assign({},t,{type:"scatterLine",data:e}):null},Ni[rl]=function F1(o){const{options:t,seriesValues:e}=o,i=function N1({seriesValues:o,options:t}){const e=(t.trendline||{}).order,i=lr(t.field),{count:s,valueMapper:n,xMin:r,xMax:l}=Cp(o(),i,e);return s>0?Pn(n,{xMin:r,xMax:l},t.trendline):null}({seriesValues:e,options:t});return i?Object.assign({},t,{type:"scatterLine",data:i}):null},Ni[al]=function U1(o){const{options:t,seriesValues:e}=o,i=function G1({seriesValues:o,options:t}){const e=o();if(!Mn(e,"x"))return null;let{slope:i,intercept:s,count:n}=gi(e,(o=>({valueFields:t})=>({xValue:Math.log(t.x),yValue:Math.log(t[o])}))(t.field)),r=$p(e,lr(t.field));if(n>0){const l=Math.exp(s),c=i;return Pn(h=>l*Math.pow(h,c),r,t.trendline)}return null}({seriesValues:e,options:t});return i?Object.assign({},t,{type:"scatterLine",data:i}):null};const X1=Ni;class Ul extends pi{initFields(){this.namedXAxes={},this.namedYAxes={},this.xAxisRangeTracker=new tr,this.yAxisRangeTracker=new tr}render(t=this.panes){this.series=[...this.originalSeries],this.createTrendlineSeries();const e=this.groupSeriesByPane();for(let i=0;i<t.length;i++){const s=t[i],n=e[s.options.name||"default"]||[];this.addToLegend(n);const r=this.filterVisibleSeries(n);r&&(this.createScatterChart(ut(r,tl),s),this.createScatterLineChart(ut(r,el),s),this.createBubbleChart(ut(r,ds),s))}this.createAxes(t)}appendChart(t,e){this.xAxisRangeTracker.update(t.xAxisRanges),this.yAxisRangeTracker.update(t.yAxisRanges),super.appendChart(t,e)}removeAxis(t){const e=t.options.name;super.removeAxis(t),t.options.vertical?(this.yAxisRangeTracker.reset(e),delete this.namedYAxes[e]):(this.xAxisRangeTracker.reset(e),delete this.namedXAxes[e]),t===this.axisX&&delete this.axisX,t===this.axisY&&delete this.axisY}seriesPaneName(t){const e=this.options,i=t.xAxis,n=Zt([].concat(e.xAxis),function(p){return p.name===i})[0],r=t.yAxis,c=Zt([].concat(e.yAxis),function(p){return p.name===r})[0];return(n||{}).pane||(c||{}).pane||(e.panes||[{}])[0].name||"default"}createScatterChart(t,e){t.length>0&&this.appendChart(new ir(this,{series:t,clip:e.options.clip}),e)}createScatterLineChart(t,e){t.length>0&&this.appendChart(new Wp(this,{series:t,clip:e.options.clip}),e)}createBubbleChart(t,e){t.length>0&&this.appendChart(new R0(this,{series:t,clip:e.options.clip}),e)}createXYAxis(t,e,i){const s=t.name,n=e?this.namedYAxes:this.namedXAxes,r=e?this.yAxisRangeTracker:this.xAxisRangeTracker,l=x({reverse:!e&&this.chartService.rtl},t,{vertical:e}),c=Ue(l.type,$o),h=r.query(),d=c?{min:.1,max:1}:{min:0,max:1},u=r.query(s)||h||d,p=[l.min,l.max],g=this.series;for(let y=0;y<g.length;y++){const w=g[y],E=w[e?"yAxis":"xAxis"];if(E===l.name||0===i&&!E){const L=ot.current.bindPoint(w,0).valueFields;p.push(L[e?"y":"x"]);break}}let f,m;0===i&&h&&(u.min=Math.min(u.min,h.min),u.max=Math.max(u.max,h.max));for(let y=0;y<p.length;y++)if(p[y]instanceof Date){f=!0;break}m=Ue(l.type,Ee)||!l.type&&f?du:c?No:ae;const v=new m(u.min,u.max,l,this.chartService);if(v.axisIndex=i,s){if(n[s])throw new Error(`${e?"Y":"X"} axis with name ${s} is already defined`);n[s]=v}return this.appendAxis(v),v}createAxes(t){const e=this.options,i=[].concat(e.xAxis),s=[],n=[].concat(e.yAxis),r=[];for(let l=0;l<i.length;l++)N(this.findPane(i[l].pane),t)&&s.push(this.createXYAxis(i[l],!1,l));for(let l=0;l<n.length;l++)N(this.findPane(n[l].pane),t)&&r.push(this.createXYAxis(n[l],!0,l));this.axisX=this.axisX||s[0],this.axisY=this.axisY||r[0]}_dispatchEvent(t,e,i){const s=t._eventCoordinates(e),n=new B(s.x,s.y),r=this.axes,l=r.length,c=[],h=[];for(let d=0;d<l;d++){const u=r[d],p=u.options.vertical?h:c,g=u.getValue(n);null!==g&&p.push(g)}c.length>0&&h.length>0&&t.trigger(i,{element:ue(e),originalEvent:e,x:ws(c),y:ws(h)})}updateAxisOptions(t,e){const i=t.options.vertical,s=this.groupAxes(this.panes),n=(i?s.y:s.x).indexOf(t);Qp(this.options,n,i,e),Qp(this.originalOptions,n,i,e)}trendlineFactory(t,e){const i=this.seriesValues.bind(this,e.index),s=yp(X1,t.type,{options:t,seriesValues:i});return s&&(s.xAxis=e.xAxis,s.yAxis=e.yAxis),s}seriesValues(t){const e=[],i=this.series[t];for(let s=0;s<i.data.length;s++){const n=this.bindPoint(i,s);e.push({pointIx:s,valueFields:n.valueFields})}return e}}function Qp(o,t,e,i){x([].concat(e?o.yAxis:o.xAxis)[t],i)}C(Ul,{xAxis:{},yAxis:{}}),x(Ul.prototype,Tn);const jl=Ul;class cr extends K{constructor(t,e,i){super(i),this.value=t,this.sector=e}render(){this._rendered||!1===this.visible||(this._rendered=!0,this.createLabel())}createLabel(){const t=this.options.labels,e=this.owner.chartService;let i=this.getLabelText(t);if(t.visible&&(i||0===i)){if(t.position===V||t.position===Qo)t.color||(t.color=xo(this.options.color)),t.background||(t.background=this.options.color);else{const s=e.theme.seriesDefaults.labels;t.color=t.color||s.color,t.background=t.background||s.background}this.label=new Ht(i,x({},t,{align:V,vAlign:"",animation:{type:ai,delay:this.animationDelay}}),this.pointData()),this.append(this.label)}}getLabelText(t){let e=kt(t);return e?e(this.pointData()):this.owner.chartService.format.auto(t.format,this.value)}reflow(t){this.render(),this.box=t,this.reflowLabel()}reflowLabel(){const{options:{labels:t},label:e}=this,i=this.sector.clone(),s=t.distance,n=i.middle();if(e){const r=e.box.height(),l=e.box.width();let c;if(t.position===V)i.radius=Math.abs((i.radius-r)/2)+r,c=i.point(n),e.reflow(new k(c.x,c.y-r/2,c.x,c.y));else if(t.position===Qo)i.radius=i.radius-r/2,c=i.point(n),e.reflow(new k(c.x,c.y-r/2,c.x,c.y));else{let h;c=i.clone().expand(s).point(n),c.x>=i.center.x?(h=c.x+l,e.orientation=$):(h=c.x-l,e.orientation=U),e.reflow(new k(h,c.y-r,c.x,c.y))}}}createVisual(){const{sector:t,options:e}=this;if(super.createVisual(),this.addAccessibilityAttributesToVisual(),this.value)if(e.visual){const i=(t.startAngle+180)%360,s=e.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,center:new j.A(t.center.x,t.center.y),radius:t.radius,innerRadius:t.innerRadius,startAngle:i,endAngle:i+t.angle,options:e,sender:this.getSender(),createVisual:()=>{const n=new et.A;return this.createSegmentVisual(n),n}});s&&this.visual.append(s)}else this.createSegmentVisual(this.visual)}createSegmentVisual(t){const{sector:e,options:i}=this,s=i.border||{},n=s.width>0?{stroke:{color:s.color,width:s.width,opacity:s.opacity,dashType:s.dashType}}:{},r=i.color,l=oi(i.pattern,{color:r,opacity:i.opacity}),c=this.createSegment(e,x({fill:l,stroke:{opacity:i.opacity},zIndex:i.zIndex},n));t.append(c),fl(i)&&t.append(this.createGradientOverlay(c,{baseColor:r,fallbackFill:l},x({center:[e.center.x,e.center.y],innerRadius:e.innerRadius,radius:e.radius,userSpace:!0},i.overlay)))}createSegment(t,e){return e.singleSegment?new _e.A(new oe.A(new j.A(t.center.x,t.center.y),t.radius),e):Co.current.createRing(t,e)}createAnimation(){const{options:t,sector:{center:e}}=this;x(t,{animation:{center:[e.x,e.y],delay:this.animationDelay}}),super.createAnimation()}createHighlight(t){const e=this.options.highlight||{},i=e.border||{};return this.createSegment(this.sector,x({},t,{fill:{color:e.color,opacity:e.opacity},stroke:{opacity:i.opacity,width:i.width,color:i.color}}))}highlightVisual(){return this.visual.children[0]}highlightVisualArgs(){const t=this.sector;return{options:this.options,radius:t.radius,innerRadius:t.innerRadius,center:new j.A(t.center.x,t.center.y),startAngle:t.startAngle,endAngle:t.angle+t.startAngle,visual:this.visual}}createFocusHighlight(t){const i=this.createSegment(this.sector,x({},t,{stroke:{width:2*this.options.focusHighlight.border.width}})),s=new M.P;return s.paths.push(M.w.fromRect(i.bbox())),s.paths.push(this.createSegment(this.sector,{})),i.clip(s),i}tooltipAnchor(){const t=this.sector.clone().expand(5),e=t.middle();return{point:t.point(e),align:$1(e+180)}}formatValue(t){return this.owner.formatPointValue(this,t)}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}}getIndex(){return this.index}}const Y1=A(Ct(30),J),W1=A(Ct(60),J);function $1(o){const t=Ct(o),e=A(Math.sin(t),J),i=A(Math.cos(t),J);let s,n;return s=Math.abs(e)>W1?V:i<0?$:U,n=Math.abs(e)<Y1?V:e<0?Y:G,{horizontal:s,vertical:n}}C(cr,{color:W,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:!1,distance:35,font:Nh,margin:Z(.5),align:Ut,zIndex:1,position:Ii},animation:{type:ci},highlight:{visible:!0,border:{width:1}},visible:!0,accessibility:{role:hi,className:di,ariaRoleDescription:ui}}),x(cr.prototype,me),x(cr.prototype,Ss);const Zp=cr,Kp={createLegendItem:function(o,t,e){const i=this.options.legend||{},s=i.labels||{},n=i.inactiveItems||{},r=n.labels||{};if(e&&!1!==e.visibleInLegend){const l=!1!==e.visible,c=l?kt(s):kt(r)||kt(s);let d,u,h=e.category;c&&(h=c({text:h,series:e.series,dataItem:e.dataItem,percentage:e.percentage,value:o})),l?(d={},u=t.color):(d={color:r.color,font:r.font},u=(n.markers||{}).color),Xt(h)&&""!==h&&this.legendItems.push({active:l,pointIndex:e.index,text:h,series:e.series,markerColor:u,pattern:t.pattern,labels:d})}}};class hr extends K{constructor(t,e){super(e),this.plotArea=t,this.chartService=t.chartService,this.points=[],this.legendItems=[],this.render()}render(){this.traverseDataPoints(this.addValue.bind(this))}traverseDataPoints(t){const{options:e,plotArea:{options:{seriesColors:i=[]}}}=this,s=i.length,n=e.series,r=n.length;for(let l=0;l<r;l++){const c=n[l],h=c.data,{total:d,points:u,count:p}=Nu(c),g=360/d;let f,m;isFinite(g)||(f=360/p),m=_(c.startAngle)?c.startAngle:e.startAngle,l!==r-1&&c.labels.position===Ii&&(c.labels.position=V);for(let v=0;v<u.length;v++){const y=u[v];if(!y)continue;const{fields:w,value:E,visible:L}=y,F=0!==E?f||E*g:0,H=1!==h.length&&!!w.explode;lt(c.color)||(c.color=w.color||i[v%s]),t(E,new en(null,0,0,m,F),{owner:this,category:_(w.category)?w.category:"",pattern:_(w.pattern)?w.pattern:c.pattern,index:v,series:c,seriesIx:l,dataItem:h[v],percentage:0!==d?E/d:0,explode:H,visibleInLegend:w.visibleInLegend,visible:L,zIndex:r-l,animationDelay:this.animationDelay(v,l,r)}),!1!==L&&(m+=F)}}}evalSegmentOptions(t,e,i){const s=i.series;je(t,{value:e,series:s,dataItem:i.dataItem,category:i.category,percentage:i.percentage},{defaults:s._defaults,excluded:["data","content","template","visual","toggle","ariaTemplate","ariaContent"]})}addValue(t,e,i){const s=x({},i.series,{index:i.index});if(s.pattern=i.pattern||s.pattern,this.evalSegmentOptions(s,t,i),this.createLegendItem(t,s,i),!1===i.visible)return;const n=new Zp(t,e,s);Object.assign(n,i),this.append(n),this.points.push(n)}reflow(t){const{options:e,points:i,seriesConfigs:s=[]}=this,n=i.length,r=t.clone(),c=Math.min(r.width(),r.height()),h=c/2,d=c-.85*c,u=new k(r.x1,r.y1,r.x1+c,r.y1+c),p=u.center(),g=r.center(),f=e.series.length,m=[],v=[];let y=O(e.padding,d);this.targetBox=t,y=y>h-5?h-5:y,u.translate(g.x-p.x,g.y-p.y);const w=h-y,E=new B(w+u.x1+y,w+u.y1+y);for(let L=0;L<n;L++){const F=i[L],H=F.sector,Q=F.seriesIx;if(H.radius=w,H.center=E,s.length){const xt=s[Q];H.innerRadius=xt.innerRadius,H.radius=xt.radius}Q===f-1&&F.explode&&(H.center=H.clone().setRadius(.15*H.radius).point(H.middle())),F.reflow(u);const tt=F.label;tt&&tt.options.position===Ii&&Q===f-1&&(tt.orientation===$?v.push(tt):m.push(tt))}m.length>0&&(m.sort(this.labelComparator(!0)),this.leftLabelsReflow(m)),v.length>0&&(v.sort(this.labelComparator(!1)),this.rightLabelsReflow(v)),this.box=u}leftLabelsReflow(t){const e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)}rightLabelsReflow(t){const e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)}distanceBetweenLabels(t){const e=mt(this.points),i=e.sector,s=t.length-1,n=i.radius+e.options.labels.distance,r=[];let l=t[0].box,c=A(l.y1-(i.center.y-n-l.height()-l.height()/2));r.push(c);for(let h=0;h<s;h++)l=t[h].box,c=A(t[h+1].box.y1-l.y2),r.push(c);return c=A(i.center.y+n-t[s].box.y2-t[s].box.height()/2),r.push(c),r}distributeLabels(t,e){const i=t.length;let s,n,r;for(let l=0;l<i;l++)for(r=-t[l],s=n=l;r>0&&(s>=0||n<i);)r=this._takeDistance(t,l,--s,r),r=this._takeDistance(t,l,++n,r);this.reflowLabels(t,e)}_takeDistance(t,e,i,s){let n=s;if(t[i]>0){const r=Math.min(t[i],n);n-=r,t[i]-=r,t[e]+=r}return n}reflowLabels(t,e){const i=mt(this.points),s=i.sector,n=i.options.labels,r=e.length,l=n.distance;let h,c=s.center.y-(s.radius+l)-e[0].box.height();t[0]+=2;for(let d=0;d<r;d++){const u=e[d],p=u.box;c+=t[d],h=this.hAlignLabel(p.x2,s.clone().expand(l),c,c+p.height(),u.orientation===$),u.orientation===$?(n.align!==Ut&&(h=s.radius+s.center.x+l),u.reflow(new k(h+p.width(),c,h,c))):(n.align!==Ut&&(h=s.center.x-s.radius-l),u.reflow(new k(h-p.width(),c,h,c))),c+=p.height()}}createVisual(){const{options:{connectors:t},points:e}=this,i=e.length;super.createVisual(),this._connectorLines=[];for(let n=0;n<i;n++){const r=e[n],{sector:l,label:c}=r,h=l.middle();if(c){const u=new M.w({stroke:{color:(r.options.connectors||{}).color||t.color,width:t.width},animation:{type:ai,delay:r.animationDelay}});if(c.options.position===Ii){const p=c.box,g=l.center;let v,y,w,f=l.point(h),m=new B(p.x1,p.center().y);f=l.clone().expand(t.padding).point(h),u.moveTo(f.x,f.y),c.orientation===$?(y=new B(p.x1-t.padding,p.center().y),w=qp(g,f,m,y),m=new B(y.x-4,y.y),w=w||m,w.x=Math.min(w.x,m.x),this.pointInCircle(w,l.center,l.radius+4)||w.x<l.center.x?(v=l.center.x+l.radius+4,u.lineTo(r.options.labels.align!==Se?v<m.x?v:f.x+8:v,f.y),u.lineTo(m.x,y.y)):(w.y=y.y,u.lineTo(w.x,w.y))):(y=new B(p.x2+t.padding,p.center().y),w=qp(g,f,m,y),m=new B(y.x+4,y.y),w=w||m,w.x=Math.max(w.x,m.x),this.pointInCircle(w,l.center,l.radius+4)||w.x>l.center.x?(v=l.center.x-l.radius-4,u.lineTo(r.options.labels.align!==Se?v>m.x?v:f.x-8:v,f.y),u.lineTo(m.x,y.y)):(w.y=y.y,u.lineTo(w.x,w.y))),u.lineTo(y.x,y.y),this._connectorLines.push(u),this.visual.append(u)}}}}renderVisual(){if(super.renderVisual(),ld(this.options.series,t=>t.autoFit)){const t=this.targetBox,e=this.box.center(),i=this.visual.bbox();if(!i)return;const s=i.bottomRight(),n=Math.min((e.y-t.y1)/(e.y-i.origin.y),(t.y2-e.y)/(s.y-e.y),(e.x-t.x1)/(e.x-i.origin.x),(t.x2-e.x)/(s.x-e.x));n<1&&this.visual.transform(bt.A().scale(n,n,[e.x,e.y]))}}labelComparator(t){const e=t?-1:1;return function(i,s){return((i.parent.sector.middle()+270)%360-(s.parent.sector.middle()+270)%360)*e}}hAlignLabel(t,e,i,s,n){const{radius:r,center:{x:l,y:c}}=e,h=Math.min(Math.abs(c-i),Math.abs(c-s));return h>r?t:l+Math.sqrt(r*r-h*h)*(n?1:-1)}pointInCircle(t,e,i){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(i,2)}formatPointValue(t,e){return this.chartService.format.auto(e,t.value)}animationDelay(t){return 70*t}stackRoot(){return this}}function qp(o,t,e,i){const n=(i.y-e.y)*(t.x-o.x)-(i.x-e.x)*(t.y-o.y);let r;if(0!==n){const l=((i.x-e.x)*(o.y-e.y)-(i.y-e.y)*(o.x-e.x))/n;r=new B(o.x+l*(t.x-o.x),o.y+l*(t.y-o.y))}return r}C(hr,{startAngle:90,connectors:{width:2,color:"#939393",padding:8},inactiveItems:{markers:{},labels:{}}}),x(hr.prototype,Kp),hr.prototype.isStackRoot=!0;const Jp=hr,tg=class Z1 extends pi{render(){this.createPieChart(this.series)}createPieChart(t){const e=t[0],i=new Jp(this,{series:t,padding:e.padding,startAngle:e.startAngle,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)}appendChart(t,e){super.appendChart(t,e),ki(this.options.legend.data,t.legendItems)}getPointBelow(t){return this.getPointToTheRight(t)}getPointAbove(t){return this.getPointToTheLeft(t)}};class Gl extends Zp{reflowLabel(){const{options:{labels:t},label:e}=this,i=this.sector.clone(),s=i.middle();if(e){const n=e.box.height();if(t.position===V){i.radius-=(i.radius-i.innerRadius)/2;const r=i.point(s);e.reflow(new k(r.x,r.y-n/2,r.x,r.y))}else super.reflowLabel()}}createSegment(t,e){return Co.current.createRing(t,e)}}C(Gl,{overlay:{gradient:"roundedGlass"},labels:{position:V},animation:{type:ci}}),x(Gl.prototype,me);const eg=Gl;class ig extends Jp{addValue(t,e,i){const s=x({},i.series,{index:i.index});if(s.pattern=i.pattern||s.pattern,this.evalSegmentOptions(s,t,i),this.createLegendItem(t,s,i),!1===i.visible)return;const n=new eg(t,e,s);Object.assign(n,i),this.append(n),this.points.push(n)}reflow(t){const e=this.options,i=t.clone(),n=Math.min(i.width(),i.height()),r=n/2,c=e.series,h=c.length;let d=O(e.padding,n-.85*n);d=d>r-5?r-5:d;let g,u=r-d,p=0;for(let w=0;w<h;w++){const E=c[w];0===w&&_(E.holeSize)&&(g=E.holeSize,u-=E.holeSize),_(E.size)?u-=E.size:p++,_(E.margin)&&w!==h-1&&(u-=E.margin)}_(g)||(g=(r-d)/(h+.75)*.75,u-=g);let v,y,f=g,m=0;this.seriesConfigs=[];for(let w=0;w<h;w++){const E=c[w];v=O(E.size,u/p),f+=m,y=f+v,this.seriesConfigs.push({innerRadius:f,radius:y}),m=E.margin||0,f=y}super.reflow(t)}animationDelay(t,e,i){return 50*t+le*(e+1)/(i+1)}}C(ig,{startAngle:90,connectors:{width:2,color:"#939393",padding:8}});const q1=ig,sg=class iw extends pi{initFields(){this.valueAxisRangeTracker=new tr}render(){this.addToLegend(this.series),this.createPolarAxis(),this.createCharts(),this.createValueAxis()}alignAxes(){const t=this.valueAxis,e=t.range(),s=t.getSlot(t.options.reverse?e.max:e.min),n=this.polarAxis.getSlot(0).center,r=t.box.translate(n.x-s.x1,n.y-s.y1);t.reflow(r)}createValueAxis(){const e=this.valueAxisRangeTracker.query(),i=this.valueAxisOptions({roundToMajorUnit:!1,zIndex:-1});let s,n;i.type===$o?(s=Dy,n={min:.1,max:1}):(s=Py,n={min:0,max:1});const r=e||n,l=new s(r.min,r.max,i,this.chartService);this.valueAxis=l,this.appendAxis(l)}reflowAxes(){const{options:{plotArea:t},valueAxis:e,polarAxis:i,box:s}=this,n=.15*Math.min(s.width(),s.height()),r=Z(t.padding||{},n),l=s.clone().unpad(r),c=l.clone();c.y2=c.y1+Math.min(c.width(),c.height()),c.align(l,D,V);const h=c.clone().shrink(0,c.height()/2);i.reflow(c),e.reflow(h);const d=e.lineBox().height()-e.box.height();e.reflow(e.box.unpad({top:d})),this.axisBox=c,this.alignAxes(c)}backgroundBox(){return this.box}detachLabels(){}};class ng extends ir{pointSlot(t,e){const s=B.onCircle(t.center,t.startAngle,t.center.y-e.y1);return new k(s.x,s.y,s.x,s.y)}}C(ng,{clip:!1});const og=ng;class Hl extends Wp{}Hl.prototype.pointSlot=og.prototype.pointSlot,C(Hl,{clip:!1});const rg=Hl,nw=class sw extends Cl{fillToAxes(t){const e=this._polarAxisCenter();t.lineTo(e.x,e.y)}_polarAxisCenter(){return this.parent.plotArea.polarAxis.box.center()}strokeSegments(){let t=this._strokeSegments;if(!t){const e=this._polarAxisCenter(),i=new Uo(!1),s=this.points();s.push(e),t=this._strokeSegments=i.process(s),t.pop()}return t}},rw=class ow extends As{fillToAxes(t){const i=this.parent.plotArea.polarAxis.box.center(),s=new Be.A([i.x,i.y]);t.segments.unshift(s),t.segments.push(s)}};function lw(o,t){return o.value.x-t.value.x}const cw=class aw extends rg{createSegment(t,e,i){let n;return n=(e.line||{}).style===hs?new nw(t,e,i):new rw(t,e,i),n}createMissingValue(t,e){let i;return Xt(t.x)&&e!==cs&&(i={x:t.x,y:t.y},e===Ve&&(i.y=0)),i}seriesMissingValues(t){return t.missingValues||Ve}_hasMissingValuesGap(){const t=this.options.series;for(let e=0;e<t.length;e++)if("gap"===this.seriesMissingValues(t[e]))return!0}sortPoints(t){if(t.sort(lw),this._hasMissingValuesGap())for(let e=0;e<t.length;e++){const i=t[e];i&&!Xt(i.value.y)&&"gap"===this.seriesMissingValues(i.series)&&delete t[e]}return t}};class Xl extends sg{createPolarAxis(){const t=new My(this.options.xAxis,this.chartService);this.polarAxis=t,this.axisX=t,this.appendAxis(t)}render(){this.series=[...this.originalSeries],this.createTrendlineSeries(),super.render()}valueAxisOptions(t){return x(t,{majorGridLines:{type:ei},minorGridLines:{type:ei}},this.options.yAxis)}createValueAxis(){super.createValueAxis(),this.axisY=this.valueAxis}trendlineFactory(t,e){const i=jl.prototype.trendlineFactory.call(this,t,e);return i&&(i.type=Yo),i}appendChart(t,e){this.valueAxisRangeTracker.update(t.yAxisRanges),pi.prototype.appendChart.call(this,t,e)}createCharts(){const t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createLineChart(ut(t,[Yo]),e),this.createScatterChart(ut(t,[Ja]),e),this.createAreaChart(ut(t,[qa]),e)}createLineChart(t,e){if(0===t.length)return;const i=new rg(this,{series:t});this.appendChart(i,e)}createScatterChart(t,e){if(0===t.length)return;const i=new og(this,{series:t});this.appendChart(i,e)}createAreaChart(t,e){if(0===t.length)return;const i=new cw(this,{series:t});this.appendChart(i,e)}_dispatchEvent(t,e,i){const s=t._eventCoordinates(e),n=new B(s.x,s.y),r=this.axisX.getValue(n),l=this.axisY.getValue(n);null!==r&&null!==l&&t.trigger(i,{element:ue(e),x:r,y:l})}createCrosshairs(){}}C(Xl,{xAxis:{},yAxis:{}}),x(Xl.prototype,Tn,{seriesValues:jl.prototype.seriesValues});const hw=Xl;class ag extends wl{pointSlot(t,e){const i=t.center.y-e.y1,s=B.onCircle(t.center,t.middle(),i);return new k(s.x,s.y,s.x,s.y)}renderSegments(){if(super.renderSegments(),this._segments&&this._segments.length>1){const t=function dw(o){const t=[];for(let e=0;e<o.length;e++){const i=o[e];t[i.seriesIx]=t[i.seriesIx]||[],t[i.seriesIx].push(i)}return t}(this._segments);for(let e=0;e<t.length;e++){const i=t[e];if(i&&i.length>1){const s=i[0].linePoints[0],n=mt(i),r=mt(n.linePoints);0===s.categoryIx&&r.categoryIx===r.categoriesCount-1&&mt(i).linePoints.push(s)}}}}createSegment(t,e,i){let n;n=e.style===hs?bl:ks;const r=new n(t,e,i),l=this.seriesMissingValues(e);return(t.length===e.data.length||l===cs)&&(r.options.closed=!0),r}}C(ag,{clip:!1,limitPoints:!1});const lg=ag,pw=class uw extends Cl{fillToAxes(){}},fw=class gw extends As{fillToAxes(){}},xw=class mw extends lg{createSegment(t,e,i,s){const r=(e.line||{}).style;let l,c,h;return this.options.isStacked&&i>0&&s&&(c=s.linePoints.slice(0),l=s),r===hs?(h=new pw(t,e,i,l,c),h.options.closed=!0):(t.push(t[0]),h=new fw(t,e,i,l,c)),h}seriesMissingValues(t){return t.missingValues||Ve}};class cg extends eg{constructor(t,e){super(t,null,e)}getIndex(){return this.categoryIx}}C(cg,{overlay:{gradient:"none"},labels:{distance:10}});const vw=cg;class hg extends K{constructor(t){super(t),this.forEach=t.rtl?Ju:qu}reflow(t){const{options:e,children:i}=this,{gap:s,spacing:n}=e,r=i.length,c=t.angle/(r+s+n*(r-1));let h=t.startAngle+c*(s/2);this.forEach(i,d=>{const u=t.clone();u.startAngle=h,u.angle=c,d.sector&&(u.radius=d.sector.radius),d.reflow(u),d.sector=u,h+=c+c*n})}}C(hg,{gap:1,spacing:0});const bw=hg,_w=class yw extends K{reflow(t){const{options:{reverse:e},children:i}=this,s=i.length,n=e?s-1:0,r=e?-1:1;this.box=new k;for(let l=n;l>=0&&l<s;l+=r){const c=i[l].sector;c.startAngle=t.startAngle,c.angle=t.angle}}};class Yl extends An{pointType(){return vw}clusterType(){return bw}stackType(){return _w}categorySlot(t,e){return t.getSlot(e)}pointSlot(t,e){const i=t.clone(),s=t.center.y;return i.radius=s-e.y1,i.innerRadius=s-e.y2,i}reflowPoint(t,e){t.sector=e,t.reflow()}createAnimation(){this.options.animation.center=this.box.toRect().center(),super.createAnimation()}}Yl.prototype.reflow=Ri.prototype.reflow,C(Yl,{clip:!1,limitPoints:!1,animation:{type:"pie"}});const ww=Yl;class Wl extends sg{createPolarAxis(){const t=new Ha(this.options.categoryAxis,this.chartService);this.polarAxis=t,this.categoryAxis=t,this.appendAxis(t),this.aggregateCategories(),this.createTrendlineSeries(),this.createCategoryAxesLabels()}valueAxisOptions(t){return this._hasBarCharts&&x(t,{majorGridLines:{type:ei},minorGridLines:{type:ei}}),this._isStacked100&&x(t,{roundToMajorUnit:!1,labels:{format:"P0"}}),x(t,this.options.valueAxis)}aggregateCategories(){Ge.prototype.aggregateCategories.call(this,this.panes)}createCategoryAxesLabels(){Ge.prototype.createCategoryAxesLabels.call(this,this.panes)}filterSeries(t){return t}trendlineFactory(t,e){const i=Ge.prototype.trendlineFactory.call(this,t,e);return i&&(i.type=fs),i}createCharts(){const t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createAreaChart(ut(t,[fn]),e),this.createLineChart(ut(t,[fs]),e),this.createBarChart(ut(t,[Wo]),e)}chartOptions(t){const e={series:t},i=t[0];if(i){const s=this.filterVisibleSeries(t),n=i.stack;e.isStacked=n&&s.length>1,e.isStacked100=n&&"100%"===n.type&&s.length>1,e.isStacked100&&(this._isStacked100=!0)}return e}createAreaChart(t,e){if(0===t.length)return;const i=new xw(this,this.chartOptions(t));this.appendChart(i,e)}createLineChart(t,e){if(0===t.length)return;const i=new lg(this,this.chartOptions(t));this.appendChart(i,e)}createBarChart(t,e){if(0===t.length)return;const i=t[0],s=this.chartOptions(t),n=this.filterVisibleSeries(t),r=n.some(h=>h.stack),l=n.some(h=>h.stack&&"100%"===h.stack.type);s.gap=i.gap,s.spacing=i.spacing,s.defaultStack=i.stack&&n.length>1,s.isStacked=r&&n.length>1,s.isStacked100=l&&n.length>1;const c=new ww(this,s);this.appendChart(c,e),this._hasBarCharts=!0}seriesCategoryAxis(){return this.categoryAxis}_dispatchEvent(t,e,i){const s=t._eventCoordinates(e),n=new B(s.x,s.y),r=this.categoryAxis.getCategory(n),l=this.valueAxis.getValue(n);null!==r&&null!==l&&t.trigger(i,{element:ue(e),category:r,value:l})}createCrosshairs(){}_pointsByVertical(t){return super._pointsByVertical(t).sort(this._getSeriesCompareFn())}_getSeriesCompareFn(){return(t,e)=>e.value-t.value}}x(Wl.prototype,Tn,{appendChart:Ge.prototype.appendChart,aggregateSeries:Ge.prototype.aggregateSeries,seriesSourcePoints:Ge.prototype.seriesSourcePoints,seriesValues:Ge.prototype.seriesValues}),C(Wl,{categoryAxis:{categories:[]},valueAxis:{}});const Cw=Wl;class dr extends K{constructor(t,e,i){super(e),this.value=t,this.options.index=i.index}getLabelText(t){let e=kt(t);return e?e(this.pointData()):t.format?this.formatValue(t.format):this.value}reflow(t){const e=this.points,i=this.children[0],s=Math.min(e[0].x,e[3].x),n=Math.max(e[1].x,e[2].x);this.box=new k(s,e[0].y,n,e[2].y),i&&i.reflow(new k(t.x1,e[0].y,t.x2,e[2].y))}createVisual(){const t=this.options;let e;super.createVisual(),this.addAccessibilityAttributesToVisual(),e=t.visual?t.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,points:this.points,options:t,sender:this.getSender(),createVisual:()=>this.createPath()}):this.createPath(),e&&this.visual.append(e)}createPath(){const t=this.options,e=t.border;return M.w.fromPoints(this.points,{fill:oi(t.pattern,{color:t.color,opacity:t.opacity}),stroke:{color:e.color,opacity:e.opacity,width:e.width}}).close()}createHighlight(t){return M.w.fromPoints(this.points,t)}highlightVisual(){return this.visual.children[0]}highlightVisualArgs(){const t=M.w.fromPoints(this.points).close();return{options:this.options,path:t}}createFocusHighlight(t){const e=this.options.focusHighlight.border.width,i=M.w.fromPoints(this.points,x({},t,{stroke:{width:2*e}})).close(),s=new M.P;return s.paths.push(M.w.fromRect(this.box.clone().pad(e).toRect())),s.paths.push(M.w.fromPoints(this.points)),i.clip(s),i}tooltipAnchor(){const t=this.box;return{point:new B(t.center().x,t.y1),align:{horizontal:"center",vertical:"top"}}}formatValue(t){return this.owner.formatPointValue(this,t)}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}}getIndex(){return this.index}}C(dr,{color:W,border:{width:1},labels:{format:""},accessibility:{role:hi,className:di,ariaRoleDescription:ui}}),x(dr.prototype,me),x(dr.prototype,Ss);const kw=dr;class $l extends K{constructor(t,e){super(e),this.plotArea=t,this.chartService=t.chartService,this.points=[],this.labels=[],this.legendItems=[],this.render()}formatPointValue(t,e){return this.plotArea.chartService.format.auto(e,t.value)}render(){const{options:e,plotArea:{options:{seriesColors:i=[]}}}=this,s=e.series[0],n=s.data;if(!n)return;const{total:r,points:l}=Nu(s);for(let c=0;c<l.length;c++){const h=l[c];if(!h)continue;let d=h.fields;lt(s.color)||(s.color=d.color||i[c%i.length]),d=x({index:c,owner:this,series:s,seriesIx:0,dataItem:n[c],percentage:h.value/r},d,{visible:h.visible});const u=h.valueFields.value,p=this.createSegment(u,d),g=this.createLabel(u,d);p&&g&&p.append(g)}}evalSegmentOptions(t,e,i){const s=i.series;je(t,{value:e,series:s,dataItem:i.dataItem,index:i.index},{defaults:s._defaults,excluded:["data","content","template","toggle","visual","ariaTemplate","ariaContent"]})}createSegment(t,e){const i=x({},e.series);if(i.pattern=e.pattern||i.pattern,this.evalSegmentOptions(i,t,e),this.createLegendItem(t,i,e),!1!==e.visible){const s=new kw(t,i,e);return Object.assign(s,e),this.append(s),this.points.push(s),s}}createLabel(t,e){const{series:i,dataItem:s}=e,n=x({},this.options.labels,i.labels);let r=t;if(n.visible){const l=kt(n),c={dataItem:s,value:t,percentage:e.percentage,category:e.category,series:i};l?r=l(c):n.format&&(r=this.chartService.format.auto(n.format,r)),n.color||(n.color=xo(i.color),n.background||(n.background=i.color)),this.evalSegmentOptions(n,t,e);const h=new Ht(r,x({vAlign:n.position},n),c);return this.labels.push(h),h}}labelPadding(){const t=this.labels,e={left:0,right:0};for(let i=0;i<t.length;i++){const n=t[i].options.align;if(n!==V){const r=t[i].box.width();n===U?e.left=Math.max(e.left,r):e.right=Math.max(e.right,r)}}return e}dynamicSlopeReflow(t,e,i){const{options:s,points:n}=this,r=n.length,l=n[0];let c=l;for(let p=0;p<n.length;p++)n[p].percentage>c.percentage&&(c=n[p]);let h=l.percentage/c.percentage*e,d=(e-h)/2,u=0;for(let p=0;p<r;p++){const g=n[p].percentage,f=n[p+1],m=f?f.percentage:g,v=n[p].points=[],y=s.dynamicHeight?i*g:i/r;let w;w=g?(e-h*(m/g))/2:m?0:e/2,w=R(w,0,e),v.push(new j.A(t.x1+d,t.y1+u)),v.push(new j.A(t.x1+e-d,t.y1+u)),v.push(new j.A(t.x1+e-w,t.y1+y+u)),v.push(new j.A(t.x1+w,t.y1+y+u)),d=w,u+=y+s.segmentSpacing,h=R(e-2*w,0,e)}}constantSlopeReflow(t,e,i){const{options:s,points:n}=this,r=n.length,l=s.neckRatio<=1;let h=l?0:(e-e/s.neckRatio)/2;const u=((l?e:e-2*h)-(l?s.neckRatio*e:e))/2;let p=0;for(let g=0;g<r;g++){const f=n[g].points=[],m=n[g].percentage,v=s.dynamicHeight?u*m:u/r,y=s.dynamicHeight?i*m:i/r;f.push(new j.A(t.x1+h,t.y1+p)),f.push(new j.A(t.x1+e-h,t.y1+p)),f.push(new j.A(t.x1+e-h-v,t.y1+y+p)),f.push(new j.A(t.x1+h+v,t.y1+y+p)),h+=v,p+=y+s.segmentSpacing}}reflow(t){const e=this.points,i=e.length;if(!i)return;const s=this.options,n=t.clone().unpad(this.labelPadding()),r=n.height()-s.segmentSpacing*(i-1),l=n.width();s.dynamicSlope?this.dynamicSlopeReflow(n,l,r):this.constantSlopeReflow(n,l,r);for(let c=0;c<i;c++)e[c].reflow(t)}}C($l,{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:V,position:V,zIndex:1}}),x($l.prototype,Kp);const dg=$l,Tw=class Sw extends dg{constructor(t,e){e.dynamicSlope=!1,e.neckRatio=1e6,super(t,e)}};var Pw=T(5503);class Dn extends K{constructor(t,e){super(),this.options=e,this.color=e.color||W,this.value=t}render(){this._rendered||(this._rendered=!0,this.createMarker(),this.createLabel(),this.createNote())}createLabel(){const e=this.options.labels;e.visible&&(this.label=this.createLabelElement(e),this.append(this.label))}createLabelElement(t){let e=t.color;return e||(e=xo(this.color)),new Ht(this.getLabelText(t),x({align:V,vAlign:V,margin:{left:5,right:5},zIndex:O(t.zIndex,this.series.zIndex)},t,{color:e}),this.pointData())}getLabelText(t){let e=kt(t);return e?e(this.pointData()):this.formatValue(t.format)}formatValue(t){return this.owner.formatPointValue(this,t)}reflow(t){this.render();const e=this.label;this.box=t,e&&e.reflow(this.markerBox()),this.note&&this.note.reflow(t),this.marker.reflow(this.markerBox())}createVisual(){super.createVisual(),this.addAccessibilityAttributesToVisual()}markerBox(){const e=this.options.markers,i=e.border,s=this.box.toRect(),r=O(e.type,"rect")===Hh;let l=O(i.width,r?1:0);const c=Math.round(l/2);if(e.size){const h=s.center();s.size.width=s.size.height=e.size,s.origin.x=Math.round(h.x-s.size.width/2),s.origin.y=Math.round(h.y-s.size.height/2)}return s.size.width-=l,s.size.height-=l,s.origin.y+=c+.5,s.origin.x+=c+.5,as(s)}markerBorder(){const t=this.options,i=t.markers.border,s=O(i.opacity,t.opacity);return{color:i.color||this.color,width:i.width,opacity:s,dashType:i.dashType}}createMarker(){const t=this.options,e=t.markers,i=new Ot({type:O(e.type,"rect"),width:e.size,height:e.size,rotation:e.rotation,background:this.color,border:this.markerBorder(),pattern:t.pattern,borderRadius:e.borderRadius,opacity:this.series.opacity||t.opacity,zIndex:O(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});this.marker=i,this.append(i)}createHighlight(t){const e=this.options,i=this.options.highlight.markers||this.options.markers,s=new Ot({type:O(i.type,"rect"),width:i.size,height:i.size,rotation:i.rotation,background:i.color||this.color,border:this.markerBorder(),borderRadius:i.borderRadius,opacity:this.series.opacity||e.opacity,zIndex:O(e.zIndex,this.series.zIndex)});s.reflow(this.markerBox());const n=s.getElement();return n.options.fill=t.fill,n.options.stroke=t.stroke,n}highlightVisual(){return this.rectVisual}highlightVisualArgs(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}}createFocusHighlight(){const t=this.options.markers,e=this.options.focusHighlight,i=new Ot({type:O(t.type,"rect"),width:t.size,height:t.size,rotation:t.rotation,background:e.color,border:e.border,borderRadius:t.borderRadius,padding:e.border.width/2,zIndex:e.zIndex});return i.reflow(this.markerBox()),i.getElement()}tooltipAnchor(){const t=this.box.center().x;return{point:new B(t,this.box.y1-5),align:{horizontal:V,vertical:Y}}}overlapsBox(t){return this.box.overlaps(t)}unclipElements(){}pointData(){return{x:this.value.x,y:this.value.y,value:this.value.value,dataItem:this.dataItem,series:this.series}}}x(Dn.prototype,me),x(Dn.prototype,Cs),x(Dn.prototype,Ss),Dn.prototype.defaults={markers:{type:"rect",borderRadius:4,border:{color:"transparent"}},padding:{top:1},labels:{visible:!1,padding:3},opacity:1,notes:{label:{}},accessibility:{role:hi,className:di,ariaRoleDescription:ui}};const ug=Dn;class pg extends K{constructor(t,e){super(e),this.plotArea=t,this.chartService=t.chartService,this._initFields(),this.render()}_initFields(){this.points=[],this.seriesOptions=[],this.valueRange={min:ft,max:wt},this._evalSeries=[]}render(){this.setRange(),this.traverseDataPoints(this.addValue.bind(this))}setRange(){const{options:{series:t}}=this;for(let e=0;e<t.length;e++){const i=t[e];for(let s=0;s<i.data.length;s++){const{valueFields:n}=this.plotArea.bindPoint(i,s);_(n.value)&&null!==n.value&&(this.valueRange.min=Math.min(this.valueRange.min,n.value),this.valueRange.max=Math.max(this.valueRange.max,n.value))}}}addValue(t,e){let i;t&&_(t.value)&&null!==t.value&&(i=this.createPoint(t,e),i&&Object.assign(i,e)),this.points.push(i)}evalPointOptions(t,e,i){const{series:s,seriesIx:n}=i,r={defaults:s._defaults,excluded:["data","tooltip","content","template","visual","toggle","drilldownSeriesFactory","ariaTemplate","ariaContent"]};let l=this._evalSeries[n];_(l)||(this._evalSeries[n]=l=je(t,{},r,!0));let c=t;return l&&(c=x({},t),je(c,{value:e,series:s,dataItem:i.dataItem,min:this.valueRange.min,max:this.valueRange.max},r)),c}pointType(){return ug}pointOptions(t,e){let i=this.seriesOptions[e];if(!i){const s=this.pointType().prototype.defaults;this.seriesOptions[e]=i=x({},s,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return Object.assign({},i)}createPoint(t,e){const i=e.series;let s=this.pointOptions(i,e.seriesIx),n=e.color||i.color;s.pattern=e.pattern||s.pattern,s=this.evalPointOptions(s,t,e),lt(i.color)?n=s.color:0!==this.valueRange.max&&(n=((o,t=.05)=>{const e=(0,Pw.Ay)(o),i=1-t;return s=>{const n=e.toHSL(),r=100-n.l;return n.l+=Math.min((i-s)*r,r),n.toCss()}})(n)(t.value/this.valueRange.max));const r=new ug(t,s);return r.color=n,this.append(r),r}seriesAxes(t){const{xAxis:e,yAxis:i}=t,s=this.plotArea,n=e?s.namedXAxes[e]:s.axisX,r=i?s.namedYAxes[i]:s.axisY;if(!n)throw new Error("Unable to locate X axis with name "+e);if(!r)throw new Error("Unable to locate Y axis with name "+i);return{xAxis:n,yAxis:r}}reflow(t){const e=this.points,i=!this.options.clip;let s=0;this.traverseDataPoints((n,r)=>{const l=e[s++],{xAxis:c,yAxis:h}=this.seriesAxes(r.series),d=c.categoryIndex(n.x),u=h.categoryIndex(n.y),p=c.getSlot(d,d,i),g=h.getSlot(u,u,i);if(l)if(p&&g){const f=this.pointSlot(p,g);l.reflow(f)}else l.visible=!1}),this.box=t}pointSlot(t,e){return new k(t.x1,e.y1,t.x2,e.y2)}traverseDataPoints(t){const{options:{series:e}}=this;for(let i=0;i<e.length;i++){const s=e[i],{xAxis:n,yAxis:r}=this.seriesAxes(s),l=n.currentRangeIndices(),c=r.currentRangeIndices();for(let h=0;h<s.data.length;h++){const{valueFields:d,fields:u}=this.plotArea.bindPoint(s,h),p=n.totalIndex(d.x),g=r.totalIndex(d.y);l.min<=p&&p<=l.max&&c.min<=g&&g<=c.max&&t(d,x({pointIx:h,series:s,seriesIx:i,dataItem:s.data[h],owner:this},u))}}}formatPointValue(t,e){const i=t.value;return this.chartService.format.auto(e,i.x,i.y,i.value)}animationPoints(){const t=this.points,e=[];for(let i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e}}C(pg,{series:[],tooltip:{format:"{0}, {1}: {2}"},labels:{format:"{2}"},clip:!0});const Iw=pg;class Ql extends pi{initFields(){this.namedXAxes={},this.namedYAxes={}}render(t=this.panes){this.bindCategories(),this.createAxes(t),this.createCharts(t),this.createAxisLabels()}bindCategories(){const t=this.srcSeries||this.series;for(let e=0;e<t.length;e++){const i=t[e],s=i.data||[],{xAxis:n,yAxis:r}=this.seriesAxes(i),l=dd(n.categories||[]),c=dd(r.categories||[]);for(let h=0;h<s.length;h++){const{x:d,y:u}=ot.current.bindPoint(i,h).valueFields;l.has(d)||l.add(d),c.has(u)||c.add(u)}n.categories=l.values(),r.categories=c.values()}}createCharts(t){const e=this.groupSeriesByPane();for(let i=0;i<t.length;i++){const s=t[i],n=e[s.options.name||"default"]||[];this.addToLegend(n);const r=this.filterVisibleSeries(n);r&&this.createHeatmapChart(ut(r,[Ka]),s)}}createHeatmapChart(t,e){const i=new Iw(this,{series:t});this.appendChart(i,e)}seriesPaneName(t){const e=this.options,i=t.xAxis,n=Zt([].concat(e.xAxis),function(p){return p.name===i})[0],r=t.yAxis,c=Zt([].concat(e.yAxis),function(p){return p.name===r})[0];return(n||{}).pane||(c||{}).pane||(e.panes||[{}])[0].name||"default"}seriesAxes(t){let e,i;const s=this.options,n=[].concat(s.xAxis),r=t.xAxis;e=r?n.find(h=>h.name===r):n[0];const l=[].concat(s.yAxis),c=t.yAxis;if(i=c?l.find(h=>h.name===c):l[0],!e)throw new Error("Unable to locate X axis with name "+r);if(!i)throw new Error("Unable to locate Y axis with name "+c);return{xAxis:e,yAxis:i}}createAxisLabels(){const t=this.axes;for(let e=0;e<t.length;e++)t[e].createLabels()}createXYAxis(t,e,i){const s=t.name,n=e?this.namedYAxes:this.namedXAxes,r=Object.assign({axisCrossingValue:0},t,{vertical:e,reverse:e||this.chartService.rtl?!t.reverse:t.reverse,justified:!1}),c=[r.min,r.max,r.categories?r.categories[0]:null],h=this.series;for(let g=0;g<h.length;g++){const f=h[g],m=f[e?"yAxis":"xAxis"];if(m===r.name||0===i&&!m){const v=ot.current.bindPoint(f,0).valueFields;c.push(v[e?"y":"x"]);break}}let d,u;for(let g=0;g<c.length;g++)if(c[g]instanceof Date){d=!0;break}u=Ue(r.type,Ee)||!r.type&&d?cn:Le;const p=new u(r,this.chartService);if(p.axisIndex=i,s){if(n[s])throw new Error(`${e?"Y":"X"} axis with name ${s} is already defined`);n[s]=p}return this.appendAxis(p),p.indexCategories(),p}createAxes(t){const e=this.options,i=[].concat(e.xAxis),s=[],n=[].concat(e.yAxis),r=[];for(let l=0;l<i.length;l++)N(this.findPane(i[l].pane),t)&&s.push(this.createXYAxis(i[l],!1,l));for(let l=0;l<n.length;l++)N(this.findPane(n[l].pane),t)&&r.push(this.createXYAxis(n[l],!0,l));this.axisX=this.axisX||s[0],this.axisY=this.axisY||r[0]}removeAxis(t){const e=t.options.name;super.removeAxis(t),t.options.vertical?delete this.namedYAxes[e]:delete this.namedXAxes[e],t===this.axisX&&delete this.axisX,t===this.axisY&&delete this.axisY}_dispatchEvent(t,e,i){const s=t._eventCoordinates(e),n=new B(s.x,s.y),r=this.axes,l=r.length,c=[],h=[];for(let d=0;d<l;d++){const u=r[d];Ko(u.options.vertical?h:c,u.getCategory(n))}c.length>0&&h.length>0&&t.trigger(i,{element:ue(e),originalEvent:e,x:ws(c),y:ws(h)})}updateAxisOptions(t,e){const i=t.options.vertical,s=this.groupAxes(this.panes),n=(i?s.y:s.x).indexOf(t);gg(this.options,n,i,e),gg(this.originalOptions,n,i,e)}crosshairOptions(t){return Object.assign({},t.options.crosshair,{zIndex:0})}_pointsByVertical(t,e=0){const i=this.axisX.options.reverse?-1*e:e,s=this.axisX.children;let n=this._getPointAxisXIndex(t)+i;n=go(n,s.length);const r=s[n].value,l=this.filterPoints(c=>Zl(c.pointData().x,r)).sort((c,h)=>this._getPointAxisYIndex(c)-this._getPointAxisYIndex(h));return this.axisY.options.reverse?l.reverse():l}_pointsByHorizontal(t,e=0){const i=this.axisY.options.reverse?-1*e:e,s=this.axisY.children;let n=this._getPointAxisYIndex(t)+i;n=go(n,s.length);const r=s[n].value,l=this.filterPoints(c=>Zl(c.pointData().y,r)).sort((c,h)=>this._getPointAxisXIndex(c)-this._getPointAxisXIndex(h));return this.axisX.options.reverse?l.reverse():l}_getPointAxisXIndex(t){return this._getPointAxisIndex(this.axisX,t.pointData().x)}_getPointAxisYIndex(t){return this._getPointAxisIndex(this.axisY,t.pointData().y)}_getPointAxisIndex(t,e){return t.children.findIndex(i=>Zl(e,i.value))}}function Zl(o,t){return o instanceof Date&&t instanceof Date?Eo(o,t):o===t}function gg(o,t,e,i){x([].concat(e?o.yAxis:o.xAxis)[t],i)}C(Ql,{xAxis:{},yAxis:{}}),x(Ql.prototype,Tn);const Rw=Ql,qt="color",Jt="first",Nt="max",Ye="noteText";He.current.register(Ge,[ce,Se,Ne,Pi,Fe,Ei,us,gs,li,xn,un,vs,mn,xs,vn,ps,ms,Di,...bs]),He.current.register(jl,[tl,el,ds,...bs]),He.current.register(tg,[ci]),He.current.register(class J1 extends tg{render(){this.createDonutChart(this.series)}createDonutChart(t){const e=t[0],i=new q1(this,{series:t,padding:e.padding,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)}getPointBelow(t){return this._getNextPoint(t,this._pointsByVertical,-1)}getPointAbove(t){return this._getNextPoint(t,this._pointsByVertical,1)}},[Xo]),He.current.register(class Mw extends pi{render(){this.createChart(dg,ut(this.series,[pn])),this.createChart(Tw,ut(this.series,[gn]))}createChart(t,e){const i=e[0];if(!i)return;const s=new t(this,{series:e,legend:this.options.legend,neckRatio:i.neckRatio,dynamicHeight:i.dynamicHeight,dynamicSlope:i.dynamicSlope,segmentSpacing:i.segmentSpacing,highlight:i.highlight});this.appendChart(s)}appendChart(t,e){super.appendChart(t,e),ki(this.options.legend.data,t.legendItems)}_pointsByVertical(t){return this.pointsBySeriesIndex(t.series.index)}getPointToTheRight(t){return this.getPointBelow(t)}getPointToTheLeft(t){return this.getPointAbove(t)}},[pn,gn]),He.current.register(hw,[qa,Yo,Ja,...bs]),He.current.register(Cw,[fn,Wo,fs,...bs]),He.current.register(Rw,[Ka]),ot.current.register([ce,Se,Ne,Pi,Fe,Ei],[$t],[fe,qt,Ye,wu,Cu,ze,he]),ot.current.register([mn,xs,ms,Di],["from","to"],[fe,qt,Ye,ze,he]),ot.current.register([vn,ps],[$t],[fe,qt,Ye,"summary",ze,he]),ot.current.register([qa,Yo,Ja],[P,D],[qt,ze,he]),ot.current.register([fn,Wo,fs],[$t],[fe,qt,ze,he]),ot.current.register([pn,gn],[$t],[fe,qt,"visibleInLegend","visible",ze,he]),Bi.current.register([ce,Se,Ne,Pi,Fe,Ei,vn,ps],{value:Nt,color:Jt,noteText:Jt,errorLow:"min",errorHigh:Nt}),Bi.current.register([mn,xs,ms,Di],{from:"min",to:Nt,color:Jt,noteText:Jt}),Bi.current.register([fn,Wo,fs],{value:Nt,color:Jt}),ot.current.register([tl,el,ds],[P,D],[qt,Ye,"xErrorLow","xErrorHigh","yErrorLow","yErrorHigh"]),ot.current.register([ds],[P,D,"size"],[qt,fe,Ye,he]),ot.current.register([Ka],[P,D,$t],[qt,Ye,he]),ot.current.register([us,gs],["open","high","low","close"],[fe,qt,"downColor",Ye,he]),Bi.current.register([us,gs],{open:Nt,high:Nt,low:"min",close:Nt,color:Jt,downColor:Jt,noteText:Jt}),ot.current.register([un,vs],["lower","q1","median","q3","upper","mean","outliers"],[fe,qt,Ye,ze,he]),Bi.current.register([un,vs],{lower:Nt,q1:Nt,median:Nt,q3:Nt,upper:Nt,mean:Nt,outliers:Jt,color:Jt,noteText:Jt}),ot.current.register([li,xn],["current","target"],[fe,qt,"visibleInLegend",Ye,ze,he]),Bi.current.register([li,xn],{current:Nt,target:Nt,color:Jt,noteText:Jt}),ot.current.register([ci,Xo],[$t],[fe,qt,"explode","visibleInLegend","visible",ze,he]);const ql=[fe,$t,P,D],fg="mousedown",zi="mousemove",mg="contextmenu",xg="mouseleave",vg="keydown",_g="k-chart-overlay-top";class wg extends I.A{constructor(t,e,i,s={}){super(),this.observers=[],this.addObserver(s.observer),this.chartService=new Ea(this,s),this.chartService.theme=i,this._initElement(t);const n=x({},this.options,e);this._originalOptions=x({},n),this._theme=i,this._initTheme(n,i),this._focusState={},this._initHandlers(),this._initSurface(),this.bindCategories(),Wv.preloadFonts(e,()=>{this.fontLoaded=!0,this._destroyed||(this.trigger("init"),this._redraw(),this._attachEvents(),this._restoreOverlayElement())})}_initElement(t){this._setElementClass(t),t.style.position="relative",t.tabIndex=t.getAttribute("tabindex")?t.getAttribute("tabindex"):0,t.setAttribute("role","graphics-document document");for(let e=t.childNodes.length-1;e>=0;e--){const i=t.childNodes[e];$s(i,"k-chart-overlay")?this.overlayElement=i:t.removeChild(i)}this.element=t}_setElementClass(t){gt(t,"k-chart")}_restoreOverlayElement(){this.overlayElement&&(this._hasSeriesData()?this.overlayElement.style.display="none":(!this.options.title||this.options.title&&this.options.title.position!==Y?gt(this.overlayElement,_g):uo(this.overlayElement,_g),this.overlayElement.style.display=""),this.overlayElement.parentElement!==this.element&&this.element.appendChild(this.overlayElement))}_hasSeriesData(){const t=this.options.series||[];return t.length>0&&t.some(i=>i.data&&i.data.length>0)}_initTheme(t,e){const i=[],s=t.series||[];for(let n=0;n<s.length;n++)i.push(Object.assign({},s[n]));t.series=i,function Fw(o){const t=ql;for(let e=0;e<t.length;e++){const i=t[e]+"Axes";o[i]&&(o[t[e]+"Axis"]=o[i],delete o[i])}}(t),this.applyDefaults(t,e),null===t.seriesColors&&delete t.seriesColors,jt(t.title)&&(t.title={text:t.title}),this.options=x({},e,t),this.applySeriesColors()}getSize(){const t=this.options.chartArea||{};return{width:t.width?parseInt(t.width,10):Math.floor(this.element.offsetWidth),height:t.height?parseInt(t.height,10):Math.floor(this.element.offsetHeight)}}resize(t){const e=this.getSize(),i=this._size,s=e.width>0||e.height>0;t||s&&(!i||e.width!==i.width||e.height!==i.height)?(this._size=e,this._resize(e,t),this.trigger("resize",e)):s&&this._selections&&ld(this._selections,n=>!n.visible)&&(this._destroySelections(),this._setupSelection())}_resize(){this._noTransitionsRedraw()}redraw(t){if(this.applyDefaults(this.options),this.applySeriesColors(),t){const e=this._model._plotArea,i=e.findPane(t);e.redraw(i)}else this._redraw()}getAxis(t){return yu(t,this._plotArea.axes)}findAxisByName(t){return this.getAxis(t)}findPaneByName(t){const e=this._plotArea.panes;for(let i=0;i<e.length;i++)if(e[i].options.name===t)return new Ya(e[i])}findPaneByIndex(t){const e=this._plotArea.panes;if(e[t])return new Ya(e[t])}plotArea(){return new Fy(this._plotArea)}toggleHighlight(t,e){const i=this._plotArea,s=(i.srcSeries||i.series||[])[0];let n;if(lt(e))n=i.filterPoints(e);else{let r,l;ie(e)?(r=e.series,l=e.category):r=l=e,n=s.type===Xo?Cg(i.pointsBySeriesName(r),l):N(s.type,[ci,pn,gn])?Cg((i.charts[0]||{}).points,l):i.pointsBySeriesName(r)}n&&this.togglePointsHighlight(t,n)}togglePointsHighlight(t,e){const i=this._highlight;for(let s=0;s<e.length;s++)i.togglePointHighlight(e[s],t)}showTooltip(t){const e=this._sharedTooltip(),{_tooltip:i,_plotArea:s}=this;let n,r;if(lt(t)?(n=s.findPoint(t),n&&e&&(r=n.categoryIx)):e&&_(t)&&(r=s.categoryAxis.categoryIndex(t)),e){if(r>=0){const l=this._plotArea.pointsByCategoryIndex(r);i.showAt(l)}}else n&&i.show(n)}hideTooltip(){this._tooltip.hide()}_initSurface(){const t=this.surface,e=this._surfaceWrap(),i=this.options.chartArea||{};i.width&&De(e,{width:i.width}),i.height&&De(e,{height:i.height}),t&&t.options.type===this.options.renderAs?(this.surface.clear(),this.surface.resize()):(this._destroySurface(),this.surface=rs.A.create(e,{type:this.options.renderAs}),this.surface.bind("mouseenter",this._surfaceMouseenterHandler),this.surface.bind("mouseleave",this._surfaceMouseleaveHandler)),this.element._kendoExportVisual=this._kendoExportVisual.bind(this)}_surfaceWrap(){return this.element}_redraw(){const t=this._getModel();this._size={width:t.options.width,height:t.options.height},this._destroyView(),this._setElementAccessibilityAttributes(),this._model=t,this._plotArea=t._plotArea,this._legend=t._legend,t.renderVisual(),!1!==this.options.transitions&&t.traverse(function(e){e.animation&&e.animation.setup()}),this._initSurface(),this.surface.draw(t.visual),!1!==this.options.transitions&&t.traverse(function(e){e.animation&&e.animation.play()}),this._tooltip=this._createTooltip(),this._highlight=new Q_,this._setupSelection(),this._createPannable(),this._createZoomSelection(),this._createMousewheelZoom(),this._setComputedStyles(),this.trigger("render"),Ag(this._plotArea.panes),this._navState||this._cancelDomEvents(),this._redrawFocusHighlight()}_setComputedStyles(){const t=this.titleHeight();this.element.style.setProperty("--kendo-chart-computed-title-height",`${t}px`)}_redrawFocusHighlight(){if(this._destroyed)return;const{_focusState:{legendInFocus:t,preserveHighlight:e}}=this;t&&e&&(this._focusElement(this._getFocusedLegendItem(),!1),this._focusState.preserveHighlight=!1)}_setElementAccessibilityAttributes(){let t=this.options.title,e=jt(t)?t:t.description||t.text;e&&this.element.setAttribute("aria-roledescription",e)}_kendoExportVisual(t){if(t&&t.width&&t.height){const e=this._originalOptions.chartArea||{};return this.exportVisual({width:e.width||t.width,height:e.height||t.height})}return this.exportVisual()}exportVisual(t){let e;if(t&&(t.width||t.height||t.options)){const i=this.options,s=x({},t.options,{chartArea:{width:t.width,height:t.height}});Jl(this._originalOptions,s),this.options=x({},this._originalOptions,s),this._initTheme(this.options,this._theme),this.bindCategories();const n=this._getModel();n.renderVisual(),Ag(n._plotArea.panes),e=n.visual,this.options=i}else e=this.surface.exportVisual();return e}_sharedTooltip(){return this._plotArea instanceof Ge&&this.options.tooltip&&this.options.tooltip.shared}_createPannable(){const t=this.options;!1!==t.pannable&&(this._pannable=new Z_(this._plotArea,t.pannable))}_createZoomSelection(){const t=this.options.zoomable,e=(t||{}).selection;!1!==t&&!1!==e&&(this._zoomSelection=new K_(this,e))}_createMousewheelZoom(){const t=this.options.zoomable,e=(t||{}).mousewheel;!1!==t&&!1!==e&&(this._mousewheelZoom=new i1(this,e))}_toggleDragZoomEvents(){const e=this.options.zoomable,s=(e||{}).mousewheel,n=!(this.options.pannable||!1!==e&&!1!==(e||{}).selection||this.requiresHandlers([cl,bn,yn])),r=(!1===e||!1===s)&&!this.requiresHandlers([_n,ys,_s]),l=this.element;this._dragZoomEnabled&&n&&r?(l.style.touchAction=this._touchAction||"",this._dragZoomEnabled=!1):!this._dragZoomEnabled&&!(n&&r)&&(l.style.touchAction="none",this._dragZoomEnabled=!0),this._toggleDomEvents(!n,!r)}_toggleDomEvents(t,e){const i=this.domEvents;i&&(i.toggleDrag&&i.toggleDrag(t),i.toggleZoom&&i.toggleZoom(e))}_createTooltip(){const{options:{tooltip:t}}=this;let e;return e=this._sharedTooltip()?this._createSharedTooltip(t):new y1(this.chartService,t),e}_createSharedTooltip(t){return new Up(this._plotArea,t)}applyDefaults(t,e){(function Nw(o,t){const e=(t||{}).axisDefaults||{};let i,s,n;function r(l){const c=(l||{}).color||s.color,h=x({},e,e[i],s,s[i],{line:{color:c},labels:{color:c},title:{color:c}},l);return delete h[i],h}for(let l=0;l<ql.length;l++)i=ql[l]+"Axis",s=o.axisDefaults||{},n=[].concat(o[i]),n=n.map(r),o[i]=n.length>1?n:n[0]})(t,e),function zw(o,t){const e=o.series,i=e.length,s=o.seriesDefaults,n=x({},o.seriesDefaults),r=t?x({},t.seriesDefaults):{},l=x({},r);kg(n),kg(l);for(let c=0;c<i;c++){const h=e[c].type||o.seriesDefaults.type,d=x({data:[]},l,r[h],{tooltip:o.tooltip},n,s[h]);e[c]._defaults=d,e[c]=x({},d,e[c]),e[c].data=e[c].data||[]}}(t,e)}applySeriesColors(){const t=this.options,e=t.series,i=t.seriesColors||[];for(let s=0;s<e.length;s++){const n=e[s],r=i[s%i.length],l=n._defaults;n.color=n.color||r,l&&(l.color=l.color||r)}}_getModel(){const t=this.options,e=this._createPlotArea(),i=new Zb(this._modelOptions());i.chart=this,i._plotArea=e;const s=on.buildTitle(t.title),n=on.buildTitle(t.subtitle,{align:t.title.align,position:t.title.position});if(i.append.apply(i,on.orderTitles([s,n])),t.legend&&t.legend.visible){const r=new Bp(e.options.legend,this.chartService);i.append(r),i._legend=r}return i.append(e),i.reflow(),this._setTitleBox(s,n),i}_setTitleBox(t,e){if(!t&&!e)return;this._titleBox=(t||e).box.clone();const s=e?e.options.position:"";(t?t.options.position:"")===s&&e?this._titleBox.wrap(e.box):t&&e&&s!==Y&&(this._titleBox=e.box.clone())}_modelOptions(){const t=this.options,e=this.getSize();return x({transitions:t.transitions,width:e.width||600,height:e.height||400},t.chartArea)}_createPlotArea(t){const e=this.options;return He.current.create(t?[]:e.series,e,this.chartService)}_setupSelection(){const{_plotArea:{axes:t}}=this,e=this._selections=[];for(let i=0;i<t.length;i++){const s=t[i],n=s.options;if(s instanceof Le&&n.select&&!n.vertical){const r=s.range(),l=new Np(this,s,x({min:r.min,max:r.max},n.select));e.push(l)}}}_selectStart(t){return this.trigger(hl,t)}_select(t){return this.trigger(wn,t)}_selectEnd(t){return this.trigger(dl,t)}_initHandlers(){this._clickHandler=this._click.bind(this),this._keydownHandler=this._keydown.bind(this),this._focusHandler=this._focus.bind(this),this._blurHandler=this._blur.bind(this),this._mousedownHandler=this._mousedown.bind(this),this._mousewheelHandler=this._mousewheel.bind(this),this._mouseleaveHandler=this._mouseleave.bind(this),this._surfaceMouseenterHandler=this._mouseover.bind(this),this._surfaceMouseleaveHandler=this._mouseout.bind(this),this._mousemoveThrottled=(0,Vl.A)(this._mousemove.bind(this),20)}addObserver(t){t&&this.observers.push(t)}removeObserver(t){const e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)}requiresHandlers(t){const e=this.observers;for(let i=0;i<e.length;i++)if(e[i].requiresHandlers(t))return!0}trigger(t,e={}){e.sender=this,t===Iu?e.anchor.point=this._toDocumentCoordinates(e.anchor.point):t===Eu?this._updateDrilldownPoint(e.point):t===Pu?this._resetDrilldownPoint():t===Tu?(this._focusPoint(e.point),this._startDrilldown(e.point)):t===Su&&this._focusLegendItem(e);const i=this.observers;let s=!1;for(let n=0;n<i.length;n++)i[n].trigger(t,e)&&(s=!0);return s}titleHeight(){return this._titleBox?this._titleBox.height():0}_attachEvents(){const t=this.element;this._touchAction=t.style.touchAction,Qs(t,{[mg]:this._clickHandler,[Zo]:this._mousewheelHandler,[xg]:this._mouseleaveHandler,[vg]:this._keydownHandler,[fg]:this._mousedownHandler,focus:this._focusHandler,blur:this._blurHandler}),this._shouldAttachMouseMove()&&Qs(t,{[zi]:this._mousemoveThrottled}),this.domEvents=Qd.create(this.element,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)}),this._toggleDragZoomEvents()}_mouseleave(t){this._hoveredPoint&&(this._hoveredPoint.out(this,t),this._hoveredPoint=null),this._plotAreaHovered&&(this._plotAreaHovered=!1,this.trigger(ll)),this._hasInactiveOpacity()&&this._activeChartInstance&&(this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._updateSeriesOpacity(null,!0))}_cancelDomEvents(){this.domEvents&&this.domEvents.cancel&&this.domEvents.cancel()}_gesturestart(t){this._mousewheelZoom&&!this._stopChartHandlers(t)&&(this._gestureDistance=t.distance,this._unsetActivePoint(),this._clearFocusedElement(),this.surface.suspendTracking())}_gestureend(t){this._zooming&&!this._stopChartHandlers(t)&&(this.surface&&this.surface.resumeTracking(),this._zooming=!1,this.trigger(_s,{}))}_gesturechange(t){const e=this._mousewheelZoom;if(e&&!this._stopChartHandlers(t)){t.preventDefault();let s=-t.distance/this._gestureDistance+1;if(Math.abs(s)>=.1){s=Math.round(10*s),this._gestureDistance=t.distance;const n={delta:s,axisRanges:In(this._plotArea.axes),originalEvent:t};if(this._zooming||!this.trigger(_n,n)){const r=this._eventCoordinates(t);this._zooming||(this._zooming=!0),(n.axisRanges=e.updateRanges(s,r))&&!this.trigger(ys,n)&&e.zoom()}}}}_mouseout(t){if(t.element){const e=this._drawingChartElement(t.element,t);e&&e.leave&&e.leave(this,t.originalEvent)}}_start(t){const e=this._eventCoordinates(t);this._stopChartHandlers(t)||!this._plotArea.backgroundContainsPoint(e)||(this.requiresHandlers([cl,bn,yn])&&this._startNavigation(t,e,cl),this._pannable&&this._pannable.start(t)&&(this.surface.suspendTracking(),this._unsetActivePoint(),this._clearFocusedElement(),this._suppressHover=!0,this.chartService.panning=!0),this._zoomSelection&&this._zoomSelection.start(t)&&this.trigger(_n,{axisRanges:In(this._plotArea.axes),originalEvent:t}))}_move(t){let{_navState:e,_pannable:i}=this;if(!this._stopChartHandlers(t)){if(i){const s=i.move(t);s&&!this.trigger(bn,{axisRanges:s,originalEvent:t})&&i.pan()}else if(e){const s={},n=e.axes;for(let r=0;r<n.length;r++){const l=n[r];if(l.options.name){const h=l.options.vertical?t.y:t.x,d=h.startLocation-h.location;0!==d&&(s[l.options.name]=l.translateRange(d))}}e.axisRanges=s,this.trigger(bn,{axisRanges:s,originalEvent:t})}this._zoomSelection&&this._zoomSelection.move(t)}}_end(t){if(this._stopChartHandlers(t))return;const e=this._pannable;if(e&&e.end(t)?(this.surface.resumeTracking(),this.trigger(yn,{axisRanges:In(this._plotArea.axes),originalEvent:t}),this._suppressHover=!1,this.chartService.panning=!1):this._endNavigation(t,yn),this._zoomSelection){const i=this._zoomSelection.end(t);i&&!this.trigger(ys,{axisRanges:i,originalEvent:t})&&(this._zoomSelection.zoom(),this.trigger(_s,{axisRanges:i,originalEvent:t}))}}_stopChartHandlers(t){const e=this._selections||[];if(!e.length)return!1;const i=this._eventCoordinates(t),s=this._plotArea.paneByPoint(i);if(s)for(let n=0;n<e.length;n++)if(e[n].onPane(s))return!0}_mousewheelZoomRate(){return O(((this.options.zoomable||{}).mousewheel||{}).rate,.3)}_mousewheel(t){const e=fa(t),i=this._mousewheelZoom,s=this._eventCoordinates(t);if(!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(s))if(i){const n={delta:e,axisRanges:In(this._plotArea.axes),originalEvent:t};(this._zooming||!this.trigger(_n,n))&&(t.preventDefault(),this._zooming||(this._unsetActivePoint(),this._clearFocusedElement(),this.surface.suspendTracking(),this._zooming=!0),this._mwTimeout&&clearTimeout(this._mwTimeout),n.axisRanges=i.updateRanges(e,s),n.axisRanges&&!this.trigger(ys,n)&&i.zoom(),this._mwTimeout=setTimeout(()=>{this.trigger(_s,n),this._zooming=!1,this.surface&&this.surface.resumeTracking()},150))}else{let n=this._navState;if(n||this._startNavigation(t,s,_n)||(n=this._navState),n){const r=n.totalDelta||e;n.totalDelta=r+e;const l=this._navState.axes,c={};for(let h=0;h<l.length;h++){const d=l[h],u=d.options.name;u&&(c[u]=d.scaleRange(-r*this._mousewheelZoomRate(),s))}this.trigger(ys,{delta:e,axisRanges:c,originalEvent:t}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout(()=>{this._endNavigation(t,_s)},150)}}}_startNavigation(t,e,i){const s=this._model._plotArea,n=s.findPointPane(e),r=s.axes.slice(0);if(!n)return;const l=In(r);this.trigger(i,{axisRanges:l,originalEvent:t})?this._cancelDomEvents():(this._suppressHover=!0,this._unsetActivePoint(),this._clearFocusedElement(),this._navState={axisRanges:l,pane:n,axes:r})}_endNavigation(t,e){this._navState&&(this.trigger(e,{axisRanges:this._navState.axisRanges,originalEvent:t}),this._suppressHover=!1,this._navState=null)}_getChartElement(t,e){const i=this.surface.eventTarget(t);if(i)return this._drawingChartElement(i,t,e)}_drawingChartElement(t,e,i){let n,s=t;for(;s&&!n;)n=s.chartElement,s=s.parent;if(n)return n.aliasFor&&(n=n.aliasFor(e,this._eventCoordinates(e))),i&&(n=n.closest(i),n&&n.aliasFor&&(n=n.aliasFor())),n}_eventCoordinates(t){const e=sd(t);return this._toModelCoordinates(e.x,e.y)}_elementPadding(){if(!this._padding){const{paddingLeft:t,paddingTop:e}=dt(this.element,["paddingLeft","paddingTop"]);this._padding={top:e,left:t}}return this._padding}_toDocumentCoordinates(t){const e=this._elementPadding(),i=ts(this.element);return{left:A(t.x+e.left+i.left),top:A(t.y+e.top+i.top)}}_toModelCoordinates(t,e){const i=this.element,s=ts(i),n=this._elementPadding(),r=function tb(o){if(!o)return mo.unit();let t=cd(o),e=o.parentElement;for(;e;){const i=cd(e);t=t.multiplyCopy(i),e=e.parentElement}return t.b=t.c=t.e=t.f=0,t}(i).invert(),l=new j.A(t-s.left-n.left,e-s.top-n.top).transform(r);return new B(l.x,l.y)}_tap(t){const e=this.surface.eventTarget(t),i=this._drawingChartElement(e,t),s=this._sharedTooltip();!this._startHover(e,t)&&!s&&this._unsetActivePoint(),s&&this._trackSharedTooltip(this._eventCoordinates(t),t,!0),this._propagateClick(i,t),this.handlingTap=!0,setTimeout(()=>{this.handlingTap=!1},0)}_click(t){const e=this._getChartElement(t);this._propagateClick(e,t)}_propagateClick(t,e){let i=t;for(;i;)i.click&&i.click(this,e),i=i.parent}_isLegendBeforeChart(){const{options:{legend:{position:t}},_legend:e}=this;return e&&e.hasItems()&&(t===G||t===U)}_focus(){this._preventInitialPointFocus||(this._isLegendBeforeChart()?this._focusFirstLegendItem():this._focusFirstPoint()),this._preventInitialPointFocus=!1}_keydown(t){const{_focusState:{legendInFocus:e,focusedElement:i},_legend:s}=this;if("Tab"===t.key){this._clearFocusedElement();const n=this._isLegendBeforeChart();e&&n!==t.shiftKey?this._navigatePoints(t):!e&&n===t.shiftKey&&s.hasItems()&&this._navigateLegend(t)}else"Escape"===t.key?(i&&t.stopPropagation(),this._tooltip&&this._tooltip.visible?this._hideTooltip():this._blur()):"Enter"===t.key?i&&(this._focusState.preserveHighlight=!0,this._propagateClick(i,t),this._focusElement(i)):e?this._navigateLegend(t):this._navigatePoints(t)}_navigatePoints(t){const{_focusState:e,_plotArea:i}=this;if(e.legendInFocus=!1,!e.focusedElement)return this._focusFirstPoint(),void t.preventDefault();const s=n=>{e.focusedPoint=n,this._focusElement(e.focusedPoint),this._displayTooltip(n),t.preventDefault()};switch(t.key){case Fh:s(i.getPointToTheRight(e.focusedPoint));break;case Vh:s(i.getPointToTheLeft(e.focusedPoint));break;case Bh:s(i.getPointBelow(e.focusedPoint));break;case Oh:s(i.getPointAbove(e.focusedPoint))}}_navigateLegend(t){const{_focusState:e,_legend:i,chartService:{rtl:s}}=this;if(e.legendInFocus=!0,!e.focusedElement)return this._focusFirstLegendItem(),void t.preventDefault();const n=i.getItems().length,r=l=>{e.focusedLegendItemIndex=l(e.focusedLegendItemIndex,n),this._focusElement(this._getFocusedLegendItem()),t.preventDefault()};switch(t.key){case Oh:case Vh:r(s?$h:Qh);break;case Bh:case Fh:r(s?Qh:$h)}}_focusFirstPoint(){const t=this._focusState.focusedPoint=this._plotArea.getFirstPoint();t&&(this._focusElement(t),this._displayTooltip(t))}_hasFocus(){return this.element.ownerDocument.activeElement===this.element}_mousedown(){this._hasFocus()||(this._preventInitialPointFocus=!0)}_focusChart(){this._hasFocus()||(this._preventInitialPointFocus=!0,this.element.focus())}_focusPoint(t){this._focusState.focusedPoint=t,this._focusChart(),this._focusElement(t,!0)}_focusFirstLegendItem(){const{_focusState:t}=this;t.focusedLegendItemIndex=0,this._focusElement(this._getFocusedLegendItem()),t.legendInFocus=!0,this._hideTooltip()}_focusLegendItem(t){const{_focusState:e}=this;e.focusedLegendItemIndex=this._legend.getItems().findIndex(i=>i.options.series.index===t.seriesIndex&&i.options.pointIndex===t.pointIndex),e.legendInFocus=!0,this._focusChart(),this._focusElement(this._getFocusedLegendItem(),!0)}_getFocusedLegendItem(){const{_focusState:t,_legend:e}=this;return e.getItems()[t.focusedLegendItemIndex]}_focusElement(t,e){const{_focusState:i}=this;if(this._clearFocusedElement(),t&&(i.focusedElement=t,this._setElementActiveDescendant(t),!e))if(t.focusVisual(),i.legendInFocus){const s=t.options;this._showSeriesInactiveOpacity(s.series.index,s.pointIndex)}else this._showInactiveOpacity(t)}_clearFocusedElement(){const{_focusState:t}=this;t&&(t.focusedElement&&t.focusedElement.clearFocusFromVisual&&(t.focusedElement.clearFocusFromVisual(),this._clearElementActiveDescendant()),t.focusedElement=null)}_setElementActiveDescendant(t){"canvas"===this.options.renderAs&&(this._pseudoFocusedElement=this._createPseudoFocusedElement(t),this.element.append(this._pseudoFocusedElement)),this.element.setAttribute(qi,t._id)}_clearElementActiveDescendant(){this._pseudoFocusedElement&&(this._pseudoFocusedElement.remove(),this._pseudoFocusedElement=null),this.element.removeAttribute(qi)}_createPseudoFocusedElement(t){const e=document.createElement("div"),i=t.options.accessibility;e.id=t._id,e.setAttribute("aria-label",t.getAriaLabelText()),e.setAttribute("role",i.role),e.setAttribute("aria-roledescription",i.ariaRoleDescription);const s=i.ariaChecked;return _(s)&&e.setAttribute("aria-checked",s),e}_blur(){this._focusState.legendInFocus=!1,this._clearFocusedElement(),this._hideInactiveOpacity()}_startHover(t,e){if(this._suppressHover)return!1;let i=this._drawingChartElement(t,e,function(n){return(n.hover||n.over)&&!(n instanceof pi)});const s=this._activePoint;return this._updateHoveredPoint(i,e),i&&s!==i&&i.hover&&(this._activePoint=i,!this._sharedTooltip()&&!i.hover(this,e)&&(this._displayTooltip(i),this._showInactiveOpacity(i))),i}_displayTooltip(t){x({},this.options.tooltip,t.options.tooltip).visible&&(this._sharedTooltip()&&t.box?this._trackSharedTooltip(t.box.center(),{}):this._tooltip.show(t))}_hideTooltip(){this._tooltip&&this._tooltip.hide()}_displayInactiveOpacity(t,e,i){const s=this._activeChartInstance=this._chartInstanceFromPoint(t);if(s)if(e)this._updateSeriesOpacity(t),this._applySeriesOpacity(s.children,null,!0),this._applySeriesOpacity(s.children,t.series),this._highlight.show(i||t);else{let n;if(!s.supportsPointInactiveOpacity())return void this._highlight.show(t);n=this._getInactivePoints(t,s),n&&n.length&&this._highlight.show(n,1-this._getInactiveOpacityForSeries(t.series))}}_getInactivePoints(t,e){return this._getAllPointsOfType(e,t.constructor).filter(s=>s!==t)}_getAllPointsOfType(t,e){let i=[];for(let s=0;s<t.children.length;s++){const n=t.children[s];n.constructor===e?i.push(n):n.children&&n.children.length&&(i=i.concat(this._getAllPointsOfType(n,e)))}return i}_updateHoveredPoint(t,e){const i=this._hoveredPoint;i&&i!==t&&(i.out(this,e),this._hoveredPoint=null),t&&i!==t&&t.over&&(this._hoveredPoint=t,t.over(this,e))}_updateDrilldownPoint(t){if(!t||!t.series)return;const{fields:e}=ot.current.bindPoint(t.series,null,t.dataItem);e.drilldown&&(this._drilldownState={cursor:this.element.style.cursor},this.element.style.cursor="pointer")}_resetDrilldownPoint(){this._drilldownState&&(this.element.style.cursor=this._drilldownState.cursor,this._drilldownState=null)}_startDrilldown(t){if(!t||!t.series)return;const e=t.series,{fields:i}=ot.current.bindPoint(e,null,t.dataItem),s=i.drilldown;s&&this.trigger("drilldown",{series:e,point:t,value:s,sender:this})}_updateSeriesOpacity(t,e){const i=this._plotArea,s=i.series.length;for(let n=0;n<s;n++){const r=i.series[n],l=this._getDefaultOpacityForSeries(r),c=this._getInactiveOpacityForSeries(r);e||r===t.series?(r.opacity=l,r.line&&(r.line.opacity=l)):(r.defaultOpacity=l,r.opacity=c,r.line&&(r.line.opacity=c))}}_applySeriesOpacity(t,e,i,s){for(let n=0;n<t.length;n++){const r=t[n],l=r.series||s;l&&(l.highlight||{}).visible&&r.visual&&(l!==e||i)&&r.visual.opacity(i?1:s?s.opacity:r.series.opacity),r.children&&r.children.length&&this._applySeriesOpacity(r.children,e,i,r.series)}}_chartInstanceFromPoint(t){let e=t.parent;for(;e&&!e.plotArea;)e=e.parent;return e}_showInactiveOpacity(t){const e=this._plotArea.series.length>1;this._hasInactiveOpacity()?this._displayInactiveOpacity(t,e):this._highlight.show(t)}_hideInactiveOpacity(t){const e=this._plotArea.series.length>1;this._hasInactiveOpacity()&&(e&&this._activeChartInstance&&(this._updateSeriesOpacity(t,!0),this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._activeChartInstance=null),this._highlight&&this._highlight.hide(),this._activePoint=null)}_hasInactiveOpacity(){let t=void 0!==this.options.seriesDefaults.highlight.inactiveOpacity,e=this.options.series.filter(i=>void 0!==i.highlight.inactiveOpacity).length>0;return t||e}_getInactiveOpacityForSeries(t){return t.highlight.inactiveOpacity||this.options.seriesDefaults.highlight.inactiveOpacity||t.opacity||1}_getDefaultOpacityForSeries(t){return t.defaultOpacity||t.opacity||1}_mouseover(t){const e=this._startHover(t.element,t.originalEvent);e&&e.tooltipTracking&&!this._mouseMoveTrackHandler&&!this._sharedTooltip()&&(this._mouseMoveTrackHandler=this._mouseMoveTracking.bind(this),Qs(document,{[zi]:this._mouseMoveTrackHandler}))}_mouseMoveTracking(t){const{options:e,_tooltip:i,_highlight:s,_activePoint:n}=this,r=this._eventCoordinates(t);if(this._plotArea.box.containsPoint(r)){if(n&&n.tooltipTracking&&n.series&&n.parent.getNearestPoint){const l=n.parent.getNearestPoint(r.x,r.y,n.seriesIx);l&&l!==n&&(this._activePoint=l,l.hover(this,t)||(x({},e.tooltip,l.options.tooltip).visible&&i.show(l),s.show(l)))}}else Zs(document,{[zi]:this._mouseMoveTrackHandler}),this._unsetActivePoint(),this._clearFocusedElement(),this._mouseMoveTrackHandler=null,this._hideInactiveOpacity(n)}_mousemove(t){const e=this._eventCoordinates(t),i=this._plotArea;if(this._trackCrosshairs(e),i.hover){const s=i.backgroundContainsPoint(e);s?(this._plotAreaHovered=!0,this._plotArea.hover(this,t)):this._plotAreaHovered&&!s&&(this._plotAreaHovered=!1,this.trigger(ll))}this._sharedTooltip()&&this._trackSharedTooltip(e,t)}_trackCrosshairs(t){const e=this._plotArea.crosshairs;for(let i=0;i<e.length;i++){const s=e[i];s.box.containsPoint(t)?s.showAt(t):s.hide()}}_trackSharedTooltip(t,e,i){if(this._suppressHover)return;const{options:{tooltip:s},_plotArea:n,_plotArea:{categoryAxis:r},_tooltip:l,_highlight:c}=this;if(n.backgroundContainsPoint(t)){const h=r.pointCategoryIndex(t);if(h!==this._tooltipCategoryIx||!this._sharedHighlight&&i){const d=n.pointsByCategoryIndex(h),u=d.map(function(g){return g.eventArgs(e)}),p=u[0]||{};p.categoryPoints=u,d.length>0&&!this.trigger(Mu,p)?(s.visible&&l.showAt(d,t),c.show(d),this._sharedHighlight=!0):l.hide(),this._tooltipCategoryIx=h}else i&&this._sharedHighlight&&(c.hide(),l.hide(),this._sharedHighlight=!1)}else this._sharedHighlight&&(c.hide(),l.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1)}hideElements(t){const e=this._plotArea;this._mousemoveThrottled.cancel(),e.hideCrosshairs(),this._unsetActivePoint(t)}_unsetActivePoint(t){const{_highlight:e}=this;this._activePoint=null,this._hoveredPoint=null,(!t||!t.keepTooltipOpen)&&this._hideTooltip(),this._tooltipCategoryIx=null,this._sharedHighlight=!1,e&&e.hide()}_deferRedraw(){this._redraw()}_clearRedrawTimeout(){this._redrawTimeout&&(clearInterval(this._redrawTimeout),this._redrawTimeout=null)}bindCategories(){const e=[].concat(this.options.categoryAxis);for(let i=0;i<e.length;i++){const s=e[i];!1!==s.autoBind&&this.bindCategoryAxisFromSeries(s,i)}}bindCategoryAxisFromSeries(t,e){const i=new Set,s=this.options.series.filter(d=>d.categoryAxis===t.name||!d.categoryAxis&&0===e),n=s.some(d=>!!d.categoryField),r=s.filter(d=>d.data&&d.data.length>0),l=r.map(d=>ot.current.bindPoint(d,0).fields.category),c=l.reduce((d,u)=>d||ju(t,u),!1);if(r.filter((d,u)=>d.categoryField||_(l[u])).forEach(d=>d.data.forEach((u,p)=>{let g=ot.current.bindPoint(d,p).fields.category;if(c){const f=Uu(g,u,this.chartService.intl);g=f?f.getTime():void 0}i.add(g)})),i.size>0){let d=Array.from(i.values());c&&(d=d.sort().map(u=>u&&new Date(u))),t.categories=d}else n&&(t.categories=[])}_isBindable(t){const e=ot.current.valueFields(t);let i=!0;for(let s=0;s<e.length;s++){let n=e[s];if(n===$t?n="field":n+="Field",!_(t[n])){i=!1;break}}return i}_noTransitionsRedraw(){const t=this.options;let e;!1!==t.transitions&&(t.transitions=!1,e=!0),this._redraw(),e&&(t.transitions=!0)}_legendItemHover(t,e){this._showSeriesInactiveOpacity(t,e)}_showSeriesInactiveOpacity(t,e){const{_plotArea:i,_highlight:s}=this,n=(i.srcSeries||i.series)[t];let r;r=N(n.type,[ci,Xo,pn,gn])?i.findPoint(function(l){return l.series.index===t&&l.index===e}):i.pointsBySeriesIndex(t),this._hasInactiveOpacity()&&n.visible&&r?this._displayInactiveOpacity(r.length?r[0]:r,i.series.length>1,r):s.show(r)}_shouldAttachMouseMove(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()||this.requiresHandlers([Du,ll])}updateMouseMoveHandler(){Zs(this.element,{[zi]:this._mousemoveThrottled}),this._shouldAttachMouseMove()&&Qs(this.element,{[zi]:this._mousemoveThrottled})}applyOptions(t,e){Jl(this._originalOptions,t),this._originalOptions=x(this._originalOptions,t),this.options=x({},this._originalOptions),e&&(this._theme=e,this.chartService.theme=e),this._initTheme(this.options,this._theme),this._toggleDragZoomEvents()}setOptions(t,e){this.applyOptions(t,e),this.bindCategories(),this.redraw(),this.updateMouseMoveHandler(),this._restoreOverlayElement()}setDirection(t){this.chartService.rtl=!!t,this.surface&&"svg"===this.surface.type&&this._destroySurface()}setIntlService(t){this.chartService.intl=t}noTransitionsRedraw(){this._noTransitionsRedraw()}destroy(){this._destroyed=!0,Zs(this.element,{[mg]:this._clickHandler,[Zo]:this._mousewheelHandler,[zi]:this._mousemoveThrottled,[xg]:this._mouseleaveHandler,[fg]:this._mousedownHandler,[vg]:this._keydownHandler,focus:this._focusHandler,blur:this._blurHandler}),this.domEvents&&(this.domEvents.destroy(),delete this.domEvents),this._mouseMoveTrackHandler&&Zs(document,{[zi]:this._mouseMoveTrackHandler}),this._focusState=null,this.element._kendoExportVisual=null,this._destroyView(),this._destroySurface(),this._clearRedrawTimeout()}_destroySurface(){const t=this.surface;t&&(t.unbind("mouseenter",this._surfaceMouseenterHandler),t.unbind("mouseleave",this._surfaceMouseleaveHandler),t.destroy(),this.surface=null)}_destroySelections(){const t=this._selections;if(t)for(;t.length>0;)t.shift().destroy()}_destroyView(){const t=this._model;t&&(t.destroy(),this._model=null),this._unsetActivePoint(),this._clearFocusedElement(),this._resetDrilldownPoint(),this._destroySelections(),this._tooltip&&this._tooltip.destroy(),this._highlight&&this._highlight.destroy(),this._zoomSelection&&(this._zoomSelection.destroy(),delete this._zoomSelection),this._pannable&&(this._pannable.destroy(),delete this._pannable),this._mousewheelZoom&&(this._mousewheelZoom.destroy(),delete this._mousewheelZoom)}}function Cg(o,t){if(o)for(let e=0;e<o.length;e++)if(o[e].category===t)return[o[e]]}function kg(o){delete o.bar,delete o.column,delete o.rangeColumn,delete o.line,delete o.verticalLine,delete o.pie,delete o.donut,delete o.area,delete o.verticalArea,delete o.scatter,delete o.scatterLine,delete o.bubble,delete o.candlestick,delete o.ohlc,delete o.boxPlot,delete o.bullet,delete o.verticalBullet,delete o.polarArea,delete o.polarLine,delete o.radarArea,delete o.radarLine,delete o.waterfall}function In(o){const t={};for(let e=0;e<o.length;e++){const i=o[e],s=i.options.name;s&&(t[s]=i.range())}return t}const Uw=["data","categories"];function Jl(o,t){for(let e in t)if(!N(e,Uw)&&ba(t,e)){const i=t[e],s=o[e];if(_(s)){const n=null===i;n||!_(i)?(delete o[e],n&&delete t[e]):s&&ie(i)&&ie(s)&&Jl(s,i)}}}function Ag(o){for(let t=0;t<o.length;t++)o[t].notifyRender()}C(wg,{renderAs:"",chartArea:{},legend:{visible:!0,labels:{},accessibility:{},focusHighlight:{border:{opacity:1,color:pt,width:2}}},categoryAxis:{},seriesDefaults:{type:Se,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1},accessibility:{},focusHighlight:{border:{opacity:1,width:2},zIndex:200}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{narrowRange:!1},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:!1,zoomable:!1});const tc=wg,Hw=class Gw extends Up{_slotAnchor(t,e){const s=this.plotArea.categoryAxis.options.vertical,n=s?{horizontal:"left",vertical:"center"}:{horizontal:"center",vertical:"bottom"};let r;return r=s?new B(this.plotArea.box.x2,e.center().y):new B(e.center().x,-2),{point:r,align:n}}_defaultAnchor(t,e){return this._slotAnchor({},e)}},Sg=[ce,li];function Tg(o){const t=[];for(let e=0;e<o.length;e++){const i=o[e];t[e]=i.style.display,i.style.display="none"}return t}function Mg(o,t){for(let e=0;e<o.length;e++)o[e].style.display=t[e]}function Eg(o){return X(o)?[o]:o}class Pg extends tc{_setElementClass(t){gt(t,"k-sparkline")}_initElement(t){super._initElement(t),this._initialWidth=Math.floor(De(t).width)}_resize(){const t=this.element,e=Tg(t.childNodes);this._initialWidth=Math.floor(De(t).width),Mg(t.childNodes,e),super._resize()}_modelOptions(){const t=this.options,e=this._surfaceWrap(),i=Tg(e.childNodes),s=document.createElement("span");s.innerHTML="&nbsp;",e.appendChild(s);const n=x({width:this._autoWidth,height:De(e).height,transitions:t.transitions},t.chartArea,{inline:!0,align:!1});return De(e,{width:n.width,height:n.height}),e.removeChild(s),Mg(e.childNodes,i),this.surface&&this.surface.resize(),n}_surfaceWrap(){if(!this.stage){const t=this.stage=document.createElement("span");this.element.appendChild(t)}return this.stage}_createPlotArea(t){const e=super._createPlotArea(t);return this._autoWidth=this._initialWidth||this._calculateWidth(e),e}_calculateWidth(t){const e=this.options,i=Z(e.chartArea.margin),s=t.charts,n=this._surfaceWrap();let r=0;for(let c=0;c<s.length;c++){const h=s[c],d=(h.options.series||[])[0];if(!d)continue;if(d.type===ce)return 150;if(d.type===li)return 150;if(d.type===ci)return De(n).height;const u=h.categoryAxis;if(u){const p=u.categoriesCount()*(!h.options.isStacked&&N(d.type,[Se,xn])?h.seriesOptions.length:1);r=Math.max(r,p)}}let l=r*e.pointWidth;return l>0&&(l+=i.left+i.right),l}_createSharedTooltip(t){return new Hw(this._plotArea,t)}static normalizeOptions(t){let e=Eg(t);return e=Pt(e)?{seriesDefaults:{data:e}}:x({},e),e.series||(e.series=[{data:Eg(e.data)}]),x(e,{seriesDefaults:{type:e.type}}),(N(e.series[0].type,Sg)||N(e.seriesDefaults.type,Sg))&&(e=x({},{categoryAxis:{crosshair:{visible:!1}}},e)),e}}C(Pg,{chartArea:{margin:2},axisDefaults:{visible:!1,majorGridLines:{visible:!1},valueAxis:{narrowRange:!0}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:!0},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:!1},border:{width:0},markers:{size:2,visible:!1}},tooltip:{visible:!0,shared:!0},categoryAxis:{crosshair:{visible:!0,tooltip:{visible:!1}}},legend:{visible:!1},transitions:!1,pointWidth:5,panes:[{clip:!1}]});const ec=Pg,$w=class Ww extends re{setup(){this._initialOpacity=parseFloat(dt(this.element,"opacity").opacity)}step(t){dt(this.element,{opacity:String(se(this._initialOpacity,0,t))})}abort(){super.abort(),dt(this.element,{display:"none",opacity:String(this._initialOpacity)})}cancel(){super.abort(),dt(this.element,{opacity:String(this._initialOpacity)})}};function ic(o,t){const e=document.createElement("div");return e.className=o,t&&(e.style.cssText=t),e}class Dg extends I.A{constructor(t,e,i){super(),this.options=x({},this.options,i),this.container=t,this.chartService=e;const s=dt(t,["paddingLeft","paddingTop"]);this.chartPadding={top:s.paddingTop,left:s.paddingLeft},this.createElements(),t.appendChild(this.element)}createElements(){const t=this.element=ic("k-navigator-hint","display: none; position: absolute; top: 1px; left: 1px;"),e=this.tooltip=ic("k-tooltip k-chart-tooltip"),i=this.scroll=ic("k-scroll");e.innerHTML="&nbsp;",t.appendChild(e),t.appendChild(i)}show(t,e,i){const{element:s,options:n,scroll:r,tooltip:l}=this,c=it(st(t)+st(e-t)/2),h=.4*i.width(),d=i.center().x-h,f=(i.center().x-d)/(n.max-n.min),m=c-n.min;let v=this.chartService.intl.format(n.format,t,e);const y=kt(n);this.clearHideTimeout(),this._visible||(dt(s,{visibility:"hidden",display:"block"}),this._visible=!0),y&&(v=y({from:t,to:e})),l.innerHTML=v,dt(l,{left:i.center().x-l.offsetWidth/2,top:i.y1});const w=dt(l,["marginTop","borderTopWidth","height"]);dt(r,{width:h,left:d+m*f,top:i.y1+w.marginTop+w.borderTopWidth+w.height/2}),dt(s,{visibility:"visible"})}clearHideTimeout(){this._hideTimeout&&clearTimeout(this._hideTimeout),this._hideAnimation&&this._hideAnimation.cancel()}hide(){this.clearHideTimeout(),this._hideTimeout=setTimeout(()=>{this._visible=!1,this._hideAnimation=new $w(this.element),this._hideAnimation.setup(),this._hideAnimation.play()},this.options.hideDelay)}destroy(){this.clearHideTimeout(),this.container&&this.container.removeChild(this.element),delete this.container,delete this.chartService,delete this.element,delete this.tooltip,delete this.scroll}}C(Dg,{format:"{0:d} - {1:d}",hideDelay:500});const Qw=Dg,We="_navigator",$e=We,Ig="_default";class ur extends I.A{constructor(t){super(),this.chart=t;const e=this.options=x({},this.options,t.options.navigator),i=e.select;i&&(i.from=this.parseDate(i.from),i.to=this.parseDate(i.to)),_(e.hint.visible)||(e.hint.visible=e.visible),this.chartObserver=new ga(this,{[bn]:"_drag",[yn]:"_dragEnd",[ys]:"_zoom",[_s]:"_zoomEnd"}),t.addObserver(this.chartObserver)}parseDate(t){return Dt(this.chart.chartService.intl,t)}clean(){this.selection&&(this.selection.destroy(),this.selection=null),this.hint&&(this.hint.destroy(),this.hint=null)}destroy(){this.chart&&(this.chart.removeObserver(this.chartObserver),delete this.chart),this.clean()}redraw(){this._redrawSelf(),this.initSelection()}initSelection(){const{chart:t,options:e}=this,i=this.mainAxis(),{min:s,max:n}=i.roundedRange(),{from:r,to:l,mousewheel:c}=e.select,h=function Kw(o){return Rg.prototype=o,new Rg}(i);0!==i.categoriesCount()&&(this.clean(),h.box=i.box,this.selection=new Np(t,h,{min:s,max:n,from:r||s,to:l||n,mousewheel:O(c,{zoom:"left"}),visible:e.visible},new ga(this,{selectStart:"_selectStart",select:"_select",selectEnd:"_selectEnd"})),e.hint.visible&&(this.hint=new Qw(t.element,t.chartService,{min:s,max:n,template:kt(e.hint),format:e.hint.format})))}setRange(){const e=this.chart._createPlotArea(!0).namedCategoryAxes[$e],{min:i,max:s}=e.roundedRange(),n=this.options.select||{};let r=n.from||i;r<i&&(r=i);let l=n.to||s;l>s&&(l=s),this.options.select=x({},n,{from:r,to:l}),this.filterAxes()}_redrawSelf(t){const e=this.chart._plotArea;e&&e.redraw(mt(e.panes),t)}redrawSlaves(){const t=this.chart,e=t._plotArea,i=e.panes.filter(s=>s.options.name!==We);e.srcSeries=t.options.series,e.options.categoryAxis=t.options.categoryAxis,e.clearSeriesPointsCache(),e.redraw(i)}_drag(t){const{chart:e,selection:i}=this,s=e._eventCoordinates(t.originalEvent),n=this.mainAxis(),r=n.roundedRange(),l=n.pane.box.containsPoint(s),h=t.axisRanges[e._plotArea.categoryAxis.options.name],d=this.options.select;let u;if(!h||l||!i)return;u=d.from&&d.to?st(d.to)-st(d.from):st(i.options.to)-st(i.options.from);const p=it(R(st(h.min),r.min,st(r.max)-u)),g=it(R(st(p)+u,st(r.min)+u,r.max));this.options.select={from:p,to:g},this.options.liveDrag&&(this.filterAxes(),this.redrawSlaves()),i.set(p,g),this.showHint(p,g)}_dragEnd(){this.filterAxes(),this.filter(),this.redrawSlaves(),this.hint&&this.hint.hide()}readSelection(){const{selection:{options:{from:t,to:e}},options:{select:i}}=this;i.from=t,i.to=e}filterAxes(){const{options:{select:t={}},chart:e}=this,i=e.options.categoryAxis,{from:s,to:n}=t;for(let r=0;r<i.length;r++){const l=i[r];l.pane!==We&&(l.min=s,l.max=n)}}filter(){const{chart:t,options:{select:e}}=this;if(!t.requiresHandlers(["navigatorFilter"]))return;const i=this.mainAxis(),s={from:e.from,to:e.to};if("category"!==i.options.type){const n=new cn(x({baseUnit:"fit"},t.options.categoryAxis[0],{categories:[e.from,e.to]}),t.chartService).options;s.from=It(n.min,-n.baseUnitStep,n.baseUnit),s.to=It(n.max,n.baseUnitStep,n.baseUnit)}this.chart.trigger("navigatorFilter",s)}_zoom(t){const{chart:{_plotArea:{categoryAxis:e}},selection:i,options:{select:s,liveDrag:n}}=this,r=this.mainAxis();let l=t.delta;if(!i)return;const c=r.categoryIndex(i.options.from),h=r.categoryIndex(i.options.to),d=this.chart._eventCoordinates(t.originalEvent);t.originalEvent.preventDefault(),Math.abs(l)>1&&(l*=3),h-c>1?(i.zoom(l,d),this.readSelection()):(e.options.min=s.from,s.from=e.scaleRange(-t.delta*this.chart._mousewheelZoomRate(),d).min),n&&(this.filterAxes(),this.redrawSlaves()),i.set(s.from,s.to),this.showHint(this.options.select.from,this.options.select.to)}_zoomEnd(t){this._dragEnd(t)}showHint(t,e){this.hint&&this.hint.show(t,e,this.chart._plotArea.backgroundBox())}_selectStart(t){return this.chart._selectStart(t)}_select(t){return this.showHint(t.from,t.to),this.chart._select(t)}_selectEnd(t){return this.hint&&this.hint.hide(),this.readSelection(),this.filterAxes(),this.filter(),this.redrawSlaves(),this.chart._selectEnd(t)}mainAxis(){const t=this.chart._plotArea;if(t)return t.namedCategoryAxes[$e]}select(t,e){const i=this.options.select;return t&&e&&(i.from=this.parseDate(t),i.to=this.parseDate(e),this.filterAxes(),this.filter(),this.redrawSlaves(),this.selection.set(t,e)),{from:i.from,to:i.to}}static setup(t={},e={}){if(t.__navi)return;t.__navi=!0;const i=x({},e.navigator,t.navigator),s=t.panes=[].concat(t.panes),n=x({},i.pane,{name:We});i.visible||(n.visible=!1,n.height=.1),"top"!==t.navigator.position?s.push(n):s.unshift(n),s.forEach(r=>{r.name=r.name||Ig}),ur.attachAxes(t,i),ur.attachSeries(t,i,e)}static attachAxes(t,e){const i=e.series||[],s=t.categoryAxis=[].concat(t.categoryAxis),n=t.valueAxis=[].concat(t.valueAxis);s.concat(n).forEach(u=>{u.pane=u.pane||Ig});const c=0===ut(i,Au).length,h=x({type:"date",pane:We,roundToBaseUnit:!c,justified:c,_collapse:!1,majorTicks:{visible:!0},tooltip:{visible:!1},labels:{step:1},autoBind:e.autoBindElements,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]}}),d=e.categoryAxis;s.push(x({},h,{maxDateGroups:200},d,{name:$e,title:null,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),x({},h,d,{name:$e+"_labels",maxDateGroups:20,baseUnitStep:"auto",labels:{position:""},plotBands:[],autoBaseUnitSteps:{minutes:[]},_overlap:!0}),x({},h,d,{name:$e+"_ticks",maxDateGroups:200,majorTicks:{width:.5},plotBands:[],title:null,labels:{visible:!1,mirror:!0},_overlap:!0})),n.push(x({name:$e,pane:We,majorGridLines:{visible:!1},visible:!1},e.valueAxis))}static attachSeries(t,e,i){const s=t.series=t.series||[],n=[].concat(e.series||[]),r=i.seriesColors,l=e.seriesDefaults;for(let c=0;c<n.length;c++)s.push(x({color:r[c%r.length],categoryField:e.dateField,visibleInLegend:!1,tooltip:{visible:!1}},l,n[c],{axis:$e,categoryAxis:$e,autoBind:e.autoBindElements}))}}function Rg(){}const Lg=ur;class Og extends tc{applyDefaults(t,e){const i=De(this.element).width||600;let s=e;const n={seriesDefaults:{categoryField:t.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:Math.floor(i/28)}}};s&&(s=x({},s,n)),Lg.setup(t,s),super.applyDefaults(t,s)}_setElementClass(t){gt(t,"k-chart k-stockchart")}setOptions(t){this.destroyNavigator(),super.setOptions(t)}noTransitionsRedraw(){const t=this.options.transitions;this.options.transitions=!1,this._fullRedraw(),this.options.transitions=t}_resize(){this.noTransitionsRedraw()}_redraw(){const t=this.navigator;!this._dirty()&&t&&t.options.partialRedraw?t.redrawSlaves():this._fullRedraw()}_dirty(){const t=this.options,i=Zt([].concat(t.series,t.navigator.series),function(n){return n&&n.visible}).length,s=this._seriesCount!==i;return this._seriesCount=i,s}_fullRedraw(){let t=this.navigator;t||(t=this.navigator=new Lg(this),this.trigger("navigatorCreated",{navigator:t})),t.clean(),t.setRange(),super._redraw(),t.initSelection()}_trackSharedTooltip(t){const i=this._plotArea.paneByPoint(t);i&&i.options.name===We?this._unsetActivePoint():super._trackSharedTooltip(t)}bindCategories(){super.bindCategories(),this.copyNavigatorCategories()}copyNavigatorCategories(){const t=[].concat(this.options.categoryAxis);let e;for(let i=0;i<t.length;i++){const s=t[i];s.name===$e?e=s.categories:e&&s.pane===We&&(s.categories=e)}}destroyNavigator(){this.navigator&&(this.navigator.destroy(),this.navigator=null)}destroy(){this.destroyNavigator(),super.destroy()}_stopChartHandlers(t){const e=this._eventCoordinates(t),i=this._plotArea.paneByPoint(e);return super._stopChartHandlers(t)||i&&i.options.name===We}_toggleDragZoomEvents(){this._dragZoomEnabled||(this.element.style.touchAction="none",this._dragZoomEnabled=!0)}}C(Og,{dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!1},highlight:{visible:!1},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}});const Jw=Og,Vg="arrowPointer",Ln="barPointer",zg=Math.PI/180,mi="inside",pr="linear",sc="outside",Ug="radialPointer",jg="radialRangePointer";function Gg(o,t){const e=o.getOrigin(),i=o.getSize(),s=Z(t);return o.setOrigin([e.x-s.left,e.y-s.top]),o.setSize([i.width+(s.left+s.right),i.height+(s.top+s.bottom)]),o}const{YJ:eC,wA:Hg,EY:iC}=Me;function Xg(o,t){const e=o.box,i=o.children[0].box,s=t.border||{},n=t.background||"",r=Hg.fromRect(new At.A([e.x1,e.y1],[e.width(),e.height()]),{stroke:{}}),l=new iC(o.text,new j.A(i.x1,i.y1),{font:t.font,fill:{color:t.color}}),c=Gg(l.bbox().clone(),t.padding),h=Hg.fromRect(c,{stroke:{color:s.width?s.color:"",width:s.width,opacity:s.opacity,dashType:s.dashType,lineJoin:"round",lineCap:"round"},fill:{color:n}}),d=new eC;return d.append(r),d.append(h),d.append(l),d}function Yg(o,t,e){const i=_(o.from)?o.from:wt,s=_(o.to)?o.to:ft;return o.from=Math.max(Math.min(s,i),t),o.to=Math.min(Math.max(s,i),e),o}function Wg(o,t){const e=Z(t);return e.left=-e.left,e.top=-e.top,e.right=-e.right,e.bottom=-e.bottom,Gg(o,e)}const{wA:nC,ui:oC}=Me;class $g extends I.A{constructor(t,e,i,s={}){super(),this.element=t,this.theme=i,this.contextService=new Ea(this,s),this._originalOptions=x({},this.options,e),this.options=x({},this._originalOptions),this._initTheme(i),this.redraw()}destroy(){this.surface&&(this.surface.destroy(),this.surface=null),delete this.element,delete this.surfaceElement}value(t){const e=this.pointers[0];if(0===arguments.length)return e.value();e.value(t),this._setValueOptions(t)}_draw(){const t=this.surface;t.clear(),t.draw(this._visuals)}exportVisual(){return this._visuals}allValues(t){const e=this.pointers,i=[];if(0===arguments.length){for(let s=0;s<e.length;s++)i.push(e[s].value());return i}if(Pt(t))for(let s=0;s<t.length;s++)X(t[s])&&e[s].value(t[s]);this._setValueOptions(t)}_setValueOptions(t){const e=[].concat(this.options.pointer),i=[].concat(t);for(let s=0;s<i.length;s++)e[s].value=i[s]}resize(){this.noTransitionsRedraw()}noTransitionsRedraw(){const t=this.options.transitions;this._toggleTransitions(!1),this.redraw(),this._toggleTransitions(t)}redraw(){const t=this._surfaceSize(),e=new At.A([0,0],[t.width,t.height]);this._initSurface(),this.gaugeArea=this._createGaugeArea(),this._createModel();const i=Wg(e.bbox(),this._gaugeAreaMargin);this.reflow(i)}setOptions(t,e){this._originalOptions=x(this._originalOptions,t),this.options=x({},this._originalOptions),this._initTheme(e),this.redraw()}setDirection(t){this.contextService.rtl=!!t,this.surface&&"svg"===this.surface.type&&(this.surface.destroy(),this.surface=null)}setIntlService(t){this.contextService.intl=t}_initTheme(t){let e=t||this.theme||{};this.theme=e,this.options=x({},e,this.options);const i=this.options,s=i.pointer;if(Pt(s)){const n=[];for(let r=0;r<s.length;r++)n.push(x({},e.pointer,s[r]));i.pointer=n}}_createGaugeArea(){const t=this.options.gaugeArea,e=this.surface.size(),i=t.border||{};let s=new At.A([0,0],[e.width,e.height]);return this._gaugeAreaMargin=t.margin||5,i.width>0&&(s=Wg(s,i.width)),nC.fromRect(s,{stroke:{color:i.width?i.color:"",width:i.width,opacity:i.opacity,dashType:i.dashType,lineJoin:"round",lineCap:"round"},fill:{color:t.background}})}_initSurface(){const{options:t,surface:e}=this,i=this._surfaceElement(),s=this._surfaceSize();De(i,s),e&&e.options.type===t.renderAs?(this.surface.clear(),this.surface.resize()):(e&&e.destroy(),this.surface=oC.create(i,{type:t.renderAs}))}_surfaceSize(){const t=this.options,e=this._getSize();return t.gaugeArea&&x(e,t.gaugeArea),e}_surfaceElement(){return this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.element.appendChild(this.surfaceElement)),this.surfaceElement}getSize(){return this._getSize()}_getSize(){const t=this.element,e=this._defaultSize();let i=t.offsetWidth,s=t.offsetHeight;return i||(i=e.width),s||(s=e.height),{width:i,height:s}}_defaultSize(){return{width:200,height:200}}_toggleTransitions(t){this.options.transitions=t;for(let e=0;e<this.pointers.length;e++)this.pointers[e].options.animation.transitions=t}}C($g,{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}});const Qg=$g,{wA:nc,YJ:On}=Me,gr=j.A;function rC(o,t){const{position:e,tickX:i,tickY:s}=o;let n,r;return o.vertical?(n=new gr(i,e),r=new gr(i+t.size,e)):(n=new gr(e,s),r=new gr(e,s+t.size)),new nc({stroke:{color:t.color,width:t.width}}).moveTo(n).lineTo(r)}function Zg(o,t,e,i){const s=t.length;if(i.visible){const{mirror:n,lineBox:r}=e;for(let l=i.skip;l<s;l+=i.step)l%i.skipUnit!=0&&(e.tickX=n?r.x2:r.x2-i.size,e.tickY=n?r.y1-i.size:r.y1,e.position=t[l],o.append(rC(e,i)))}}class Kg extends ae{constructor(t,e){let i=t||{};!_(i.reverse)&&!1===i.vertical&&(e||{}).rtl&&(i=Object.assign({},i,{reverse:!0})),super(0,1,i,e),this.options.minorUnit=this.options.minorUnit||this.options.majorUnit/10}initUserOptions(t){let e=x({},this.options,t);return e=x({},e,{labels:{mirror:e.mirror}}),e.majorUnit=e.majorUnit||ns(e.min,e.max),e}initFields(){}render(){const t=this.elements=new On,e=this.renderLabels(),i=this.renderLine(),s=this.renderTicks(),n=this.renderRanges();return t.append(i,e,s,n),t}renderRanges(){const t=this.options,{min:e,max:i,vertical:s,labels:{mirror:n}}=t,r=t.ranges||[],l=new On,c=r.length,h=t.rangeSize||t.minorTicks.size/2;for(let d=0;d<c;d++){const u=Yg(r[d],e,i),p=this.getSlot(u.from,u.to),g=s?this.lineBox():p,f=s?p:this.lineBox();s?g.x1-=h*(n?-1:1):f.y2+=h*(n?-1:1),l.append(nc.fromRect(new At.A([g.x1,f.y1],[g.x2-g.x1,f.y2-f.y1]),{fill:{color:u.color,opacity:u.opacity},stroke:{}}))}return l}renderLabels(){const{labels:t,options:e}=this,i=new On;for(let s=0;s<t.length;s++)i.append(Xg(t[s],e.labels));return i}renderLine(){const t=this.options.line,e=this.lineBox(),i=new On;if(t.width>0&&t.visible){const s=new nc({stroke:{color:t.color,dashType:t.dashType,width:t.width}});s.moveTo(e.x1,e.y1).lineTo(e.x2,e.y2),i.append(s)}return i}renderTicks(){const t=new On,e=this.options,i=e.majorTicks.visible?e.majorUnit:0,s={vertical:e.vertical,mirror:e.labels.mirror,lineBox:this.lineBox()};return Zg(t,this.getMajorTickPositions(),s,e.majorTicks),Zg(t,this.getMinorTickPositions(),s,x({},{skipUnit:i/e.minorUnit},e.minorTicks)),t}}C(Kg,{min:0,max:50,majorTicks:{size:15,align:mi,color:pt,width:.5,visible:!0},minorTicks:{size:10,align:mi,color:pt,width:.5,visible:!0},line:{width:.5},labels:{position:mi,padding:2},mirror:!1,_alignLines:!1});const aC=Kg;class qg extends I.A{constructor(t,e){super();const{min:i,max:s}=t.options,n=this.options=x({},this.options,e);n.fill=n.color,this.scale=t,n.value=_(n.value)?R(n.value,i,s):i}value(t){const e=this.options;if(0===arguments.length)return e.value;const{min:s,max:n}=this.scale.options;e._oldValue=_(e._oldValue)?e.value:s,e.value=R(t,s,n),this.elements&&this.repaint()}}C(qg,{color:pt});const oc=qg;class Jg extends oc{constructor(t,e){super(t,e),this.options=x({track:{visible:_(e.track)}},this.options)}reflow(){const{options:t,scale:e}=this,{mirror:i,vertical:s}=e.options,n=e.lineBox(),r=t.track.size||t.size,l=t.size/2,c=Z(t.margin);let d,u,p,h=s?c[i?"left":"right"]:c[i?"bottom":"top"];h=i?-h:h,s?(p=new k(n.x1+h,n.y1,n.x1+h,n.y2),i?p.x1-=r:p.x2+=r,t.shape!==Ln&&(u=new k(n.x2+h,n.y1-l,n.x2+h,n.y2+l),d=u)):(p=new k(n.x1,n.y1-h,n.x2,n.y1-h),i?p.y2+=r:p.y1-=r,t.shape!==Ln&&(u=new k(n.x1-l,n.y1-h,n.x2+l,n.y1-h),d=u)),this.trackBox=p,this.pointerRangeBox=u,this.box=d||p.clone().pad(t.border.width)}getElementOptions(){const t=this.options;return{fill:{color:t.color,opacity:t.opacity},stroke:_(t.border)?{color:t.border.width?t.border.color||t.color:"",width:t.border.width,dashType:t.border.dashType,opacity:t.opacity}:null}}_margin(){const{scale:t,options:e}=this,{mirror:i,vertical:s}=t.options,n=Z(e.margin);return s?n[i?"left":"right"]:n[i?"bottom":"top"]}}C(Jg,{shape:Ln,track:{border:{width:1}},color:pt,border:{width:1},opacity:1,margin:Z(3),animation:{type:Ln},visible:!0});const tf=Jg;class rc extends re{setup(){const t=this.options,{margin:e,from:i,to:s,vertical:n}=t,r=n?"x1":"y1";t.mirror===n?(i[r]-=e,s[r]-=e):(i[r]+=e,s[r]+=e);const l=this.fromScale=new j.A(i.x1,i.y1),c=this.toScale=new j.A(s.x1,s.y1);0!==t.duration&&(t.duration=Math.max(l.distanceTo(c)/t.duration*1e3,1))}step(t){const e=se(this.fromScale.x,this.toScale.x,t),i=se(this.fromScale.y,this.toScale.y,t);this.element.transform(bt.A().translate(e,i))}}C(rc,{easing:pr,duration:250}),we.current.register(Vg,rc);const lC=rc,Es=j.A,cC=M.w,dC=class hC extends tf{constructor(t,e){super(t,e),_(this.options.size)||(this.options.size=.6*this.scale.options.majorTicks.size)}pointerShape(){const{scale:t,options:{size:e}}=this,i=e/2,s=t.options.mirror?-1:1;let n;return n=t.options.vertical?[new Es(0,0-i),new Es(0-s*e,0),new Es(0,0+i)]:[new Es(0-i,0),new Es(0,0+s*e),new Es(0+i,0)],n}repaint(){const{scale:t,options:e}=this,i=new lC(this.elements,x(e.animation,{vertical:t.options.vertical,mirror:t.options.mirror,margin:this._margin(e.margin),from:t.getSlot(e._oldValue),to:t.getSlot(e.value)}));!1===e.animation.transitions&&(i.options.duration=0),i.setup(),i.play()}render(){const{scale:t,options:e}=this,i=this.getElementOptions(),s=this.pointerShape(e.value);e.animation.type=Vg;const n=new cC({stroke:i.stroke,fill:i.fill}).moveTo(s[0]).lineTo(s[1]).lineTo(s[2]).close(),r=t.getSlot(e.value);return n.transform(bt.A().translate(r.x1,r.y1)),this.elements=n,n}};class ac extends re{setup(){const t=this.options,e=this.axis=t.vertical?D:P,i=this.to=t.newPoints[0][e],s=this.from=t.oldPoints[0][e];0!==t.duration&&(t.duration=Math.max(Math.abs(i-s)/t.speed*1e3,1)),this._set(s)}step(t){const e=se(this.from,this.to,t);this._set(e)}_set(t){const e="set"+this.axis.toUpperCase(),i=this.options.newPoints;i[0][e](t),i[1][e](t)}}C(ac,{easing:pr,speed:250}),we.current.register(Ln,ac);const uC=ac,{YJ:pC,wA:ef}=Me,fC=class gC extends tf{constructor(t,e){super(t,e),_(this.options.size)||(this.options.size=.3*this.scale.options.majorTicks.size)}pointerShape(t){const{scale:e,options:i}=this,{mirror:s,vertical:n}=e.options,r=s===n?-1:1,l=i.size*r,c=e.getSlot(e.options.min),h=e.getSlot(t),d=n?D:P,u=n?P:D,p=this._margin()*r,g=new j.A;g[d]=c[d+"1"],g[u]=c[u+"1"];const f=new j.A;f[d]=h[d+"1"],f[u]=h[u+"1"],n?(g.translate(p,0),f.translate(p,0)):(g.translate(0,p),f.translate(0,p));const m=f.clone(),v=g.clone();return n?(m.translate(l,0),v.translate(l,0)):(m.translate(0,l),v.translate(0,l)),[g,f,m,v]}repaint(){const{scale:t,options:e}=this,i=this.pointerShape(e.value),s=this.pointerPath,n=this.pointerShape(e._oldValue);s.moveTo(i[0]).lineTo(i[1]).lineTo(i[2]).lineTo(i[3]).close();const r=new uC(s,x(e.animation,{reverse:t.options.reverse,vertical:t.options.vertical,oldPoints:[n[1],n[2]],newPoints:[i[1],i[2]]}));!1===e.animation.transitions&&(r.options.duration=0),r.setup(),r.play()}render(){const t=new pC,e=this.getElementOptions();this.options.track.visible&&t.append(this.renderTrack());const i=this.pointerPath=new ef({stroke:e.stroke,fill:e.fill});return t.append(i),this.elements=t,t}renderTrack(){const t=this.options.track,e=t.border||{},i=this.trackBox.clone().pad(e.width||0);return new ef.fromRect(i.toRect(),{fill:{color:t.color,opacity:t.opacity},stroke:{color:e.width?e.color||t.color:"",width:e.width,dashType:e.dashType}})}},vC=et.A;C(class bC extends Qg{reflow(t){const e=this.pointers,i=t.origin.x,s=t.origin.y,n=new k(i,s,i+t.width(),s+t.height());this.scale.reflow(n),this._shrinkScaleWidth(n);for(let r=0;r<e.length;r++)e[r].reflow();this.bbox=this._getBox(n),this._alignElements(),this._shrinkElements(),this._buildVisual(),this._draw()}_buildVisual(){const t=new vC,e=this.scale.render(),i=this.pointers;t.append(this.gaugeArea),t.append(e);for(let s=0;s<i.length;s++){const n=i[s];t.append(n.render()),n.value(n.options.value)}this._visuals=t}_createModel(){const t=this.options,e=this.scale=new aC(t.scale,this.contextService);this.pointers=[];let i=t.pointer;i=Pt(i)?i:[i];for(let s=0;s<i.length;s++){const n=x({},i[s],{animation:{transitions:t.transitions}});this.pointers.push(new("arrow"===n.shape?dC:fC)(e,n))}}_defaultSize(){const t=this.options.scale.vertical;return{width:t?60:200,height:t?200:60}}_getBox(t){const{scale:e,pointers:i}=this,s=t.center();let r,n=i[0].box.clone().wrap(e.box);for(let l=0;l<i.length;l++)n.wrap(i[l].box.clone());return e.options.vertical?(r=n.width()/2,n=new k(s.x-r,t.y1,s.x+r,t.y2)):(r=n.height()/2,n=new k(t.x1,s.y-r,t.x2,s.y+r)),n}_alignElements(){const{scale:t,pointers:e}=this,i=t.box,s=e[0].box.clone().wrap(t.box),n=this.bbox;for(let l=0;l<e.length;l++)s.wrap(e[l].box.clone());let r;t.options.vertical?(r=n.center().x-s.center().x,t.reflow(new k(i.x1+r,n.y1,i.x2+r,n.y2))):(r=n.center().y-s.center().y,t.reflow(new k(i.x1,i.y1+r,i.x2,i.y2+r)));for(let l=0;l<e.length;l++)e[l].reflow(this.bbox)}_shrinkScaleWidth(t){const{scale:e}=this;if(!e.options.vertical){const i=e.contentBox().width()-t.width();i>0&&(e.box.shrink(i,0),e.box.alignTo(t,"center"),e.reflow(e.box))}}_shrinkElements(){const{scale:t,pointers:e}=this,i=t.box.clone(),s=t.options.vertical?"y":"x",n=e[0].box;for(let r=0;r<e.length;r++)n.wrap(e[r].box.clone());i[s+1]+=Math.max(i[s+1]-n[s+1],0),i[s+2]-=Math.max(n[s+2]-i[s+2],0),t.reflow(i);for(let r=0;r<e.length;r++)e[r].reflow(this.bbox)}},{transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}});const{l5:yC,wA:_C,YJ:mr}=Me;function sf(o,t,e,i){const s=new mr,n=o.center,r=o.getRadiusX();if(i.visible)for(let l=0;l<t.length;l++){const c=o.pointAt(t[l]),h=new j.A(n.x+r-i.size,n.y).rotate(t[l],n);s.append(new _C({stroke:{color:i.color,width:i.width}}).moveTo(c).lineTo(h))}return s}function lc(o,t,e,i){return{from:o,to:t,color:e,opacity:i}}class nf extends ae{constructor(t,e){super(0,1,t,e)}initUserOptions(t){const e=x({},this.options,t);return e.majorUnit=e.majorUnit||ns(e.min,e.max),e.minorUnit=e.minorUnit||e.majorUnit/10,e}initFields(){}render(t,e){const i=this.renderArc(t,e);this.bbox=i.bbox(),this.labelElements=this.renderLabels(),this.ticks=this.renderTicks(),this.ranges=this.renderRanges()}reflow(t){const e=t.center(),i=Math.min(t.height(),t.width())/2;if(!_(this.bbox))return this.render(e,i);this.bbox=this.arc.bbox(),this.radius(this.arc.getRadiusX()),this.repositionRanges(),this.renderLabels()}slotAngle(t){const{min:e,max:i,reverse:s,startAngle:n,endAngle:r}=this.options,l=r-n;let c;return c=s?r-(t-e)/(i-e)*l:(t-e)/(i-e)*l+n,c+180}hasRanges(){const t=this.options.ranges;return t&&t.length}ticksSize(){const{majorTicks:t,minorTicks:e}=this.options;let i=0;return t.visible&&(i=t.size),e.visible&&(i=Math.max(e.size,i)),i}labelsCount(){let t=super.labelsCount();const e=this.options;return e.endAngle-e.startAngle>=360&&e.max%e.majorUnit==0&&(t-=1),t}renderLabels(){const t=this.options,e=this.arc.clone();let i=e.getRadiusX();const s=this.tickAngles(e,t.majorUnit),n=t.rangeSize=t.rangeSize||.1*i,r=new mr;let l=.05*i;_(t.rangeDistance)?l=t.rangeDistance:t.rangeDistance=l;const c=t.labels,h=c.position===mi,d=_(this.labelElements);h&&(i-=this.ticksSize(),this.hasRanges()&&!d&&(i-=n+l),e.setRadiusX(i).setRadiusY(i));const u=this.labels,p=u.length,g=Z(c.padding),f=(g.left+g.right)/2,m=(g.top+g.bottom)/2;for(let v=0;v<p;v++){const y=u[v],w=y.box.width()/2,E=y.box.height()/2,L=s[v],F=(L-180)*zg,H=e.pointAt(L),Q=H.x+Math.cos(F)*(w+f)*(h?1:-1),tt=H.y+Math.sin(F)*(E+m)*(h?1:-1);y.reflow(new k(Q-w,tt-E,Q+w,tt+E));const xt=new j.A(y.box.x1,y.box.y1);let at;if(d){at=this.labelElements.children[v];const ee=at.bbox().origin,Vt=at.transform()||bt.A();Vt.translate(xt.x-ee.x,xt.y-ee.y),at.transform(Vt)}else at=Xg(y,t.labels),r.append(at);this.bbox=At.A.union(this.bbox,at.bbox())}return r}repositionRanges(){const t=this.ranges.children;if(t.length>0){const{rangeDistance:e,rangeSize:i}=this.options;let s=this.getRangeRadius();this.options.labels.position===mi&&(s+=i+e);const n=s+i/2;for(let r=0;r<t.length;r++)t[r]._geometry.setRadiusX(n).setRadiusY(n);this.bbox=At.A.union(this.bbox,this.ranges.bbox())}}renderRanges(){const t=this.rangeSegments(),e=t.length,i=new mr;if(e){const{rangeSize:s,reverse:n,rangeDistance:r}=this.options,l=this.getRangeRadius();this.radius(this.radius()-s-r);for(let c=0;c<e;c++){const h=t[c],d=this.slotAngle(h[n?"to":"from"]),u=this.slotAngle(h[n?"from":"to"]);u-d!=0&&i.append(this.createRange(d,u,l,h))}}return i}createRange(t,e,i,s){const n=this.options.rangeSize,r=new os.A(this.arc.center,{radiusX:i+n/2,radiusY:i+n/2,startAngle:t,endAngle:e});return new yC(r,{stroke:{width:n,color:s.color,opacity:s.opacity,lineCap:s.lineCap}})}rangeSegments(){const t=this.options,e=t.ranges||[],i=e.length,s=[];if(i){const{min:n,max:r,rangePlaceholderColor:l}=t;s.push(lc(n,r,l));for(let c=0;c<i;c++){const h=Yg(e[c],n,r),d=s.length;for(let u=0;u<d;u++){const p=s[u];if(p.from<=h.from&&h.from<=p.to){s.push(lc(h.from,h.to,h.color,h.opacity)),p.from<=h.to&&h.to<=p.to&&s.push(lc(h.to,p.to,l,h.opacity)),p.to=h.from;break}}}}return s}getRangeRadius(){const{arc:t,options:e}=this,{rangeSize:i,rangeDistance:s,majorTicks:{size:n}}=e;let r;return r=e.labels.position===sc?t.getRadiusX()-n-s-i:t.getRadiusX()-i,r}renderArc(t,e){const i=this.options;return this.arc=new os.A(t,{radiusX:e,radiusY:e,startAngle:i.startAngle+180,endAngle:i.endAngle+180})}renderTicks(){const{arc:t,options:e}=this,i=t.clone();this.majorTickAngles=this.tickAngles(t,e.majorUnit),this.majorTicks=sf(i,this.majorTickAngles,0,e.majorTicks);const s=new mr;s.append(this.majorTicks);const n=e.majorTicks.size,r=e.minorTicks.size;if(this._tickDifference=n-r,e.labels.position===sc){const l=i.getRadiusX();i.setRadiusX(l-n+r).setRadiusY(l-n+r)}return this.minorTickAngles=this.normalizeTickAngles(this.tickAngles(t,e.minorUnit)),this.minorTicks=sf(i,this.minorTickAngles,0,e.minorTicks),s.append(this.minorTicks),s}normalizeTickAngles(t){const e=this.options,i=e.majorUnit/e.minorUnit;for(let s=t.length-1;s>=0;s--)s%i==0&&t.splice(s,1);return t}tickAngles(t,e){const i=this.options,r=t.endAngle-t.startAngle;let l=(i.max-i.min)/e,c=t.startAngle,h=r/l;i.reverse&&(c+=r,h=-h),r>=360&&i.max%e==0&&(l-=1);const d=[];for(let u=0;u<l;u++)d.push(A(c,3)),c+=h;return A(c)<=t.endAngle&&d.push(c),d}radius(t){if(!t)return this.arc.getRadiusX();this.arc.setRadiusX(t).setRadiusY(t),this.repositionTicks(this.majorTicks.children,this.majorTickAngles),this.repositionTicks(this.minorTicks.children,this.minorTickAngles,!0)}repositionTicks(t,e,i){const s=i&&this._tickDifference||0;let n=this.arc;const r=n.getRadiusX();i&&this.options.labels.position===sc&&0!==s&&(n=this.arc.clone(),n.setRadiusX(r-s).setRadiusY(r-s));for(let l=0;l<t.length;l++){const c=n.pointAt(e[l]),h=t[l].segments,d=c.x-h[0].anchor().x,u=c.y-h[0].anchor().y;t[l].transform((new bt.A).translate(d,u))}}}C(nf,{min:0,max:100,majorTicks:{size:15,align:mi,color:pt,width:.5,visible:!0},minorTicks:{size:10,align:mi,color:pt,width:.5,visible:!0},startAngle:-30,endAngle:210,labels:{position:mi,padding:2}});const of=nf;class cc extends re{constructor(t,e){super(t,e);const i=this.options;i.duration=Math.max(Math.abs(i.newAngle-i.oldAngle)/i.duration*1e3,1)}step(t){const e=this.options,i=se(e.oldAngle,e.newAngle,t);this.element.transform(bt.A().rotate(i,e.center))}}C(cc,{easing:pr,duration:150}),we.current.register(Ug,cc);const wC=cc,{jl:kC,YJ:AC,wA:SC}=Me;class rf extends oc{setAngle(t){this.elements.transform(bt.A().rotate(t,this.center))}repaint(){const{scale:t,options:e}=this,i=t.slotAngle(e._oldValue),s=t.slotAngle(e.value);!1===e.animation.transitions?this.setAngle(s):new wC(this.elements,x(e.animation,{oldAngle:i,newAngle:s})).play()}render(){const{scale:t,options:e}=this,i=new AC;return!1!==e.animation&&x(e.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse}),i.append(this._renderNeedle(),this._renderCap()),this.elements=i,this.setAngle(zg),i}reflow(t){const e=this.center=t.center,i=R(this.options.length||1,.1,1.5),s=this.radius=t.getRadiusX()*i,n=this.capSize=Math.round(s*this.options.cap.size);this.bbox=At.A.fromPoints(new j.A(e.x-n,e.y-n),new j.A(e.x+n,e.y+n))}_renderNeedle(){const t=this.scale.options.minorTicks.size,e=this.center,i=this.options.color,s=new SC({fill:{color:i},stroke:{color:i,width:.5}});return s.moveTo(e.x+this.radius-t,e.y).lineTo(e.x,e.y-this.capSize/2).lineTo(e.x,e.y+this.capSize/2).close(),s}_renderCap(){const t=this.options,e=t.cap.color||t.color,i=new oe.A(this.center,this.capSize);return new kC(i,{fill:{color:e},stroke:{color:e}})}}C(rf,{cap:{size:.05},arrow:{width:16,height:14},animation:{type:Ug,duration:150}});const TC=rf,MC=et.A;C(class EC extends Qg{reflow(t){const e=this.pointers;this.scale.reflow(t),this._initialPlotArea=this.scale.bbox;for(let i=0;i<e.length;i++)e[i].reflow(this.scale.arc),this._initialPlotArea=At.A.union(this._initialPlotArea,e[i].bbox);this.fitScale(t),this.alignScale(t),this._buildVisual(this.gaugeArea,e,this.scale),this._draw()}_buildVisual(t,e,i){const s=this._visuals=new MC;s.append(t),s.append(i.ticks),s.append(i.ranges),this._buildPointers(e),s.append(i.labelElements)}_buildPointers(t){for(let e=0;e<t.length;e++){const i=t[e];i.render(),this._visuals.append(i.elements),i.value(i.options.value)}}fitScale(t){const e=this.scale.arc,s=Math.abs(this.getDiff(this._initialPlotArea,t));let l,c,h,d,u,n=A(s,3),r=A(-s,3),p=0,g=0;for(;g++<100&&(p=u===h?p+1:0,!(p>5||n!==d&&(l=this.getPlotBox(n,t,e),0<=l&&l<=2)||r!==d&&(h=this.getPlotBox(r,t,e),0<=h&&h<=2)||(d=l>0&&h>0?2*n:l<0&&h<0?2*r:A((n+r)/2||1,3),c=this.getPlotBox(d,t,e),0<=c&&c<=2)));)u=h,c>0?(r=d,h=c):(n=d,l=c)}getPlotBox(t,e,i){const s=this.scale,n=this.pointers,r=i.getRadiusX(),l=i.clone();l.setRadiusX(r+t).setRadiusY(r+t),s.arc=l,s.reflow(e),this.plotBbox=s.bbox;for(let c=0;c<n.length;c++)n[c].reflow(l),this.plotBbox=At.A.union(this.plotBbox,n[c].bbox);return this.getDiff(this.plotBbox,e)}getDiff(t,e){return Math.min(e.width()-t.width(),e.height()-t.height())}alignScale(t){const e=this.plotBbox.center(),i=t.center(),s=e.x-i.x,n=e.y-i.y,{scale:r,pointers:l}=this;r.arc.center.x-=s,r.arc.center.y-=n,r.reflow(t);for(let c=0;c<l.length;c++)l[c].reflow(r.arc),this.plotBbox=At.A.union(r.bbox,l[c].bbox)}_createModel(){const t=this.options,e=t.pointer,i=this.scale=new of(t.scale,this.contextService);this.pointers=[];const s=Pt(e)?e:[e];for(let n=0;n<s.length;n++){const r=new TC(i,x({},s[n],{animation:{transitions:t.transitions}}));this.pointers.push(r)}}},{transitions:!0,gaugeArea:{background:""}}),C(class PC extends of{rangeSegments(){const{min:t,max:e,rangePlaceholderColor:i,rangeLineCap:s}=this.options;return[{from:t,to:e,color:i,lineCap:s}]}hasRanges(){return!0}placeholderRangeAngle(t){const e=this.ranges.children[0].geometry();this.options.reverse?e.setEndAngle(t):e.setStartAngle(t)}addRange(t,e,i){const s=this.options.reverse,n=this.slotAngle(s?e:t),r=this.slotAngle(s?t:e),l=this.createRange(n,r,this.getRangeRadius(),i);return this.ranges.append(l),l}},{min:0,max:100,majorTicks:{visible:!1},minorTicks:{visible:!1},labels:{visible:!1},startAngle:0,endAngle:180,rangeLineCap:"round"});class hc extends re{constructor(t,e){super(t,e);const i=this.options,s=Math.abs(i.newAngle-i.oldAngle)/i.duration*1e3;i.duration=R(s,150,800);const n=t.elements.options.get("stroke.color"),r=t.currentColor();n!==r&&(this.startColor=new be.A(n),this.color=new be.A(r))}step(t){const{options:e,startColor:i,color:s}=this,n=se(e.oldAngle,e.newAngle,t);if(this.element.angle(n),s){const r=A(se(i.r,s.r,t)),l=A(se(i.g,s.g,t)),c=A(se(i.b,s.b,t));this.element.stroke(new be.A(r,l,c).toHex())}}}C(hc,{easing:pr,duration:150}),we.current.register(jg,hc);const IC=hc;C(class RC extends oc{repaint(){const{scale:t,options:e}=this,i=t.slotAngle(e._oldValue),s=t.slotAngle(e.value);this.animation&&this.animation.abort(),!1===e.animation.transitions?(this.angle(s),this.stroke(this.currentColor())):(this.animation=new IC(this,x(e.animation,{oldAngle:i,newAngle:s})),this.animation.play())}angle(t){const e=this.elements.geometry();this.scale.options.reverse?e.setStartAngle(t):e.setEndAngle(t),this.scale.placeholderRangeAngle(t)}stroke(t){this.elements.stroke(t)}render(){if(this.elements)return;const{scale:t,options:e}=this;!1!==e.animation&&x(e.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse}),this.elements=t.addRange(t.options.min,this.options.value,{color:this.currentColor(),opacity:e.opacity,lineCap:t.options.rangeLineCap})}currentColor(){const{min:t,max:e}=this.scale.options,{colors:i,color:s,value:n}=this.options,r=X(n)?n:t;if(i)for(let l=0;l<i.length;l++){const{color:c,from:h=t,to:d=e}=i[l];if(h<=r&&r<=d)return c}return s}reflow(){this.render(),this.bbox=this.elements.bbox()}},{animation:{type:jg,duration:150}});class Ui extends I.A{constructor(t){super(),this.setOptions(t),this.initProperties()}initProperties(){}setOptions(t){this.options=Object.assign({},this.options,t),this.quietZoneLength=this.options.addQuietZone?2*this.options.quietZoneLength:0}encode(t,e,i){const s=_(t)?String(t):t;return this.initValue(s,e,i),this.options.addQuietZone&&this.addQuietZone(),this.addData(),this.options.addQuietZone&&this.addQuietZone(),{baseUnit:this.baseUnit,pattern:this.pattern}}initValue(){}addQuietZone(){this.pattern.push(this.options.quietZoneLength||10)}addData(){}invalidCharacterError(t){throw new Error(`Character "${t}" is not valid for symbology ${this.name}.`)}}C(Ui,{quietZoneLength:10,addQuietZone:!0,addCheckSum:!0});const OC=Object.assign;class lf extends Ui{initProperties(){super.initProperties(),OC(this,{name:"Code 11",characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221"})}initValue(t,e){this.pattern=[],this.value=t,this.width=e,this.totalUnits=0}addData(){const t=this.value;this.addPattern(this.START);for(let e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()}setBaseUnit(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)}addCheckSum(){const t=this.value;let e=t.length;const i=this.getWeightedSum(t,e,this.cCheckSumTotal)%this.checkSumMod;if(this.checksum=String(i),this.addPattern(this.characterMap[i]),e++,e>=this.kCheckSumMinLength){let s=(i+this.getWeightedSum(t,e,this.kCheckSumTotal))%this.checkSumMod;this.checksum+=s,this.addPattern(this.characterMap[s])}}getWeightedSum(t,e,i){let s=0;for(let n=0;n<t.length;n++)s+=this.weightedValue(this.getValue(t.charAt(n)),e,n,i);return s}weightedValue(t,e,i,s){return((e-i)%s||s)*t}getValue(t){return isNaN(t)?(t!==this.DASH&&this.invalidCharacterError(t),this.DASH_VALUE):parseInt(t,10)}addCharacter(t){const e=this.getValue(t);this.addPattern(this.characterMap[e])}addPattern(t){let e;for(let i=0;i<t.length;i++)e=parseInt(t.charAt(i),10),this.pattern.push(e),this.totalUnits+=e}}C(lf,{addCheckSum:!0});const cf=Object.assign;class hf extends Ui{initProperties(){super.initProperties(),cf(this,{minBaseUnitLength:.7})}addData(){const t=this.value;this.addStart();for(let e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.pushCheckSum(),this.addStop(),this.prepareValues()}addCharacter(t){const e=this.characterMap[t];e||this.invalidCharacterError(t),this.addBase(e)}addBase(){}}class dc extends hf{initProperties(){super.initProperties(),cf(this,{name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}}})}initValue(t,e,i){this.width=e,this.height=i,this.value=t,this.dataLength=t.length,this.pattern=[],this.patternString=""}prepareValues(){const t=this.minBaseUnitLength,e=this.minRatio,i=Math.ceil(Math.max(.15*this.width,24));let s,n=this.maxRatio;if(this.height<i)throw new Error(`Insufficient height for Code39 encoding: the current height is ${this.height}px and the minimum height is ${i}px.`);for(s=this.getBaseUnit(n);s<t&&n>e;)n=parseFloat((n-.1).toFixed(1)),s=this.getBaseUnit(n);if(s<t){let r=Math.ceil(this.getBaseWidth(e)*t);throw new Error(`Insufficient width for Code39 encoding: the current width is ${this.width}px and the minimum width for value "${this.value}" is ${r}px.`)}this.ratio=n,this.baseUnit=s,this.patternString=this.patternString.substring(0,this.patternString.length-1),this.pattern=this.pattern.concat(this.patternString.replace(/ratio/g,n).split(this.splitCharacter))}getBaseUnit(t){return this.width/this.getBaseWidth(t)}getBaseWidth(t){return this.quietZoneLength+3*(t+2)*(this.dataLength+2)+this.gapWidth*(this.dataLength+1)}addStart(){this.addPattern(this.characterMap.START.pattern),this.addCharacterGap()}addBase(t){this.addPattern(t.pattern),this.addCharacterGap()}addStop(){this.addPattern(this.characterMap.START.pattern)}addPattern(t){for(let e=0;e<t.length;e++)this.patternString+=this.patternMappings[t.charAt(e)]}addCharacterGap(){this.patternString+=this.gapWidth+this.splitCharacter}}C(dc,{addCheckSum:!1});const df={addCharacter(o){this.characterMap[o]?this.addBase(this.characterMap[o]):o.charCodeAt(0)>127?this.invalidCharacterError(o):this.addExtended(o.charCodeAt(0))},addExtended(o){let t;for(let e=0;e<this.extendedMappings.length;e++)if(t=this.extendedMappings[e].call(this,o),t){for(let i=0;i<t.length;i++)this.addBase(t[i]);return void(this.dataLength+=t.length-1)}},extendedMappings:[function(o){if(97<=o&&o<=122)return[this.characterMap[this.shiftCharacters[0]],this.characterMap[String.fromCharCode(o-32)]]},function(o){if(33<=o&&o<=58)return[this.characterMap[this.shiftCharacters[1]],this.characterMap[String.fromCharCode(o+32)]]},function(o){if(1<=o&&o<=26)return[this.characterMap[this.shiftCharacters[2]],this.characterMap[String.fromCharCode(o+64)]]},function(o){let t,e;if(this.specialAsciiCodes[o]){t=[];for(let i=0;i<this.specialAsciiCodes[o].length;i++)t.push(this.characterMap[this.shiftCharacters[3]]),t.push(this.characterMap[this.specialAsciiCodes[o][i]])}else e=6*Math.floor(o/32)+(o-27)%32+64,t=[this.characterMap[this.shiftCharacters[3]],this.characterMap[String.fromCharCode(e)]];return t}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":!1,"/":!1,$:!1,"%":!1},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]},VC=Object.assign;class uf extends hf{initProperties(){super.initProperties(),VC(this,{name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}})}initValue(t,e,i){this.value=t,this.width=e,this.height=i,this.pattern=[],this.values=[],this.dataLength=t.length}prepareValues(){let t=Math.ceil(Math.max(.15*this.width,24));if(this.height<t)throw new Error(`Insufficient height for Code93 encoding: the current height is ${this.height}px, the minimum required height is ${t}px.`);if(this.setBaseUnit(),this.baseUnit<this.minBaseUnitLength){const e=Math.ceil(this.minBaseUnitLength*(this.width/this.baseUnit));throw new Error(`Insufficient width for Code93 encoding: the current width is ${this.width}px and the minimum required width for value "${this.value}" is ${e}px.`)}}setBaseUnit(){this.baseUnit=this.width/(9*(this.dataLength+2+2)+this.quietZoneLength+1)}addStart(){this.addPattern(this.characterMap.START.pattern)}addStop(){this.addStart(),this.pattern.push(this.characterMap.TERMINATION_BAR)}addBase(t){this.addPattern(t.pattern),this.values.push(t.value)}pushCheckSum(){const t=this._getCheckValues();let e;this.checksum=t.join("");for(let i=0;i<t.length;i++)e=this.characterMap[this._findCharacterByValue(t[i])],this.addPattern(e.pattern)}_getCheckValues(){const t=this.values,e=t.length;let s,n,r,i=0;for(r=e-1;r>=0;r--)i+=this.weightedValue(t[r],e-r,this.cCheckSumTotal);for(s=i%this.checkSumMod,i=this.weightedValue(s,1,this.kCheckSumTotal),r=e-1;r>=0;r--)i+=this.weightedValue(t[r],e-r+1,this.kCheckSumTotal);return n=i%this.checkSumMod,[s,n]}_findCharacterByValue(t){for(let e in this.characterMap)if(this.characterMap[e].value===t)return e}weightedValue(t,e,i){return(e%i||i)*t}addPattern(t){let e;for(let i=0;i<t.length;i++)e=parseInt(t.charAt(i),10),this.pattern.push(e)}}const NC=/^\d+$/,zC=Object.assign,uc=/^\d+$/,jC=/^[a-z0-9]+$/i,xe=Object.assign;class xr extends I.A{constructor(t){super(),this.encoding=t,this.initProperties()}initProperties(){}addStart(){}is(){}isCode(){return!1}move(){}pushState(){}}class pf extends xr{constructor(t,e){super(t),this.states=e,this._initMoves(e)}initProperties(){super.initProperties(),x(this,{FNC4:"FNC4",SHIFT:98})}addStart(){this.encoding.addPattern(this.START)}is(t,e){let i=t.charCodeAt(e);return this.isCode(i)}move(t){let e=0;for(;!this._moves[e].call(this,t)&&e<this._moves.length;)e++}pushState(t){let n,i=t.value,s=i.length;if(N("C",this.states)){let r=i.substr(t.index).match(/\d{4,}/g);r&&(s=i.indexOf(r[0],t.index))}for(;(n=t.value.charCodeAt(t.index))>=0&&this.isCode(n)&&t.index<s;)this.encoding.addPattern(this.getValue(n)),t.index++}_initMoves(t){this._moves=[],N(this.FNC4,t)&&this._moves.push(this._moveFNC),N(this.shiftKey,t)&&this._moves.push(this._shiftState),this._moves.push(this._moveState)}_moveFNC(t){if(t.fnc)return t.fnc=!1,t.previousState===this.key}_shiftState(t){if(t.previousState===this.shiftKey&&(t.index+1>=t.value.length||this.encoding[this.shiftKey].is(t.value,t.index+1)))return this.encoding.addPattern(this.SHIFT),t.shifted=!0,!0}_moveState(){return this.encoding.addPattern(this.MOVE),!0}}const Ps={};Ps.A=class extends pf{initProperties(){super.initProperties(),xe(this,{key:"A",shiftKey:"B",MOVE:101,START:103})}isCode(t){return 0<=t&&t<96}getValue(t){return t<32?t+64:t-32}},Ps.B=class extends pf{initProperties(){super.initProperties(),xe(this,{key:"B",shiftKey:"A",MOVE:100,START:104})}isCode(t){return 32<=t&&t<128}getValue(t){return t-32}},Ps.C=class extends xr{initProperties(){super.initProperties(),xe(this,{key:"C",MOVE:99,START:105})}addStart(){this.encoding.addPattern(this.START)}is(t,e){let i=pc(t,e,4);return(e+4<=t.length||2===t.length)&&uc.test(i)}move(){this.encoding.addPattern(this.MOVE)}pushState(t){let e;for(;(e=pc(t.value,t.index,2))&&uc.test(e)&&2===e.length;)this.encoding.addPattern(parseInt(e,10)),t.index+=2}getValue(t){return t}},Ps.FNC4=class extends xr{constructor(t,e){super(t),this._initSubStates(e)}initProperties(){super.initProperties(),xe(this,{key:"FNC4",dependentStates:["A","B"]})}addStart(t){let e=t.value.charCodeAt(0)-128,i=this._getSubState(e);this.encoding[i].addStart()}is(t,e){let i=t.charCodeAt(e);return this.isCode(i)}isCode(t){return 128<=t&&t<256}pushState(t){let n,e=this._initSubState(t),i=this.encoding,s=e.value.length;if(t.index+=s,s<3)for(;e.index<s;e.index++)n=e.value.charCodeAt(e.index),e.state=this._getSubState(n),e.previousState!==e.state&&(e.previousState=e.state,i[e.state].move(e)),i.addPattern(i[e.state].MOVE),i.addPattern(i[e.state].getValue(n));else e.state!==e.previousState&&i[e.state].move(e),this._pushStart(e),i.pushData(e,this.subStates),t.index<t.value.length&&this._pushStart(e);t.fnc=!0,t.state=e.state}_pushStart(t){this.encoding.addPattern(this.encoding[t.state].MOVE),this.encoding.addPattern(this.encoding[t.state].MOVE)}_initSubState(t){const e={value:this._getAll(t.value,t.index),index:0};return e.state=this._getSubState(e.value.charCodeAt(0)),e.previousState=t.previousState===this.key?e.state:t.previousState,e}_initSubStates(t){this.subStates=[];for(let e=0;e<t.length;e++)N(t[e],this.dependentStates)&&this.subStates.push(t[e])}_getSubState(t){for(let e=0;e<this.subStates.length;e++)if(this.encoding[this.subStates[e]].isCode(t))return this.subStates[e]}_getAll(t,e){let i,s="",n=e;for(;(i=t.charCodeAt(n++))&&this.isCode(i);)s+=String.fromCharCode(i-128);return s}},Ps.FNC1=class extends xr{constructor(t,e){super(t),this.states=e}initProperties(){super.initProperties(),xe(this,{key:"FNC1",startState:"C",startAI:"(",endAI:")",dependentStates:["C","B"],applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[-9]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102})}addStart(){this.encoding[this.startState].addStart()}is(){return N(this.key,this.states)}pushState(t){let l,c,h,e=this.encoding,i=t.value.replace(/\s/g,""),s=new RegExp("["+this.startAI+this.endAI+"]","g"),n=t.index,r={state:this.startState};for(e.addPattern(this.START);;){if(r.index=0,h=i.charAt(n)===this.startAI?2:0,l=h>0?this.getBySeparator(i,n):this.getByLength(i,n),l.ai.length)c=n+h+l.id.length+l.ai.length;else if(c=i.indexOf(this.startAI,n+1),c<0){if(n+l.ai.max+l.id.length+h<i.length)throw new Error("Separators are required after variable length identifiers");c=i.length}if(r.value=i.substring(n,c).replace(s,""),this.validate(l,r.value),e.pushData(r,this.dependentStates),c>=i.length)break;n=c,r.state!==this.startState&&(e[this.startState].move(r),r.state=this.startState),l.ai.length||e.addPattern(this.START)}t.index=t.value.length}validate(t,e){let i=e.substr(t.id.length),s=t.ai;if(!s.type&&!uc.test(i))throw new Error("Application identifier "+t.id+" is numeric only but contains non numeric character(s).");if("alphanumeric"===s.type&&!jC.test(i))throw new Error("Application identifier "+t.id+" is alphanumeric only but contains non alphanumeric character(s).");if(s.length&&s.length!==i.length)throw new Error("Application identifier "+t.id+" must be "+s.length+" characters long.");if(s.min&&s.min>i.length)throw new Error("Application identifier "+t.id+" must be at least "+s.min+" characters long.");if(s.max&&s.max<i.length)throw new Error("Application identifier "+t.id+" must be at most "+s.max+" characters long.")}getByLength(t,e){let i,s;for(let n=2;n<=4;n++)if(i=pc(t,e,n),s=this.getApplicationIdentifier(i)||this.getApplicationIdentifier(i.substring(0,i.length-1)),s)return{id:i,ai:s};this.unsupportedAIError(i)}unsupportedAIError(t){throw new Error("'"+t+"' is not a supported Application Identifier")}getBySeparator(t,e){let i=t.indexOf(this.startAI,e),s=t.indexOf(this.endAI,i),n=t.substring(i+1,s),r=this.getApplicationIdentifier(n)||this.getApplicationIdentifier(n.substr(n.length-1));return r||this.unsupportedAIError(n),{ai:r,id:n}}getApplicationIdentifier(t){let e=this.applicationIdentifiers,i=e.multiKey;if(e[t])return e[t];for(let s=0;s<i.length;s++){if(i[s].ids&&N(t,i[s].ids))return i[s].type;if(i[s].ranges){let n=i[s].ranges;for(let r=0;r<n.length;r++)if(n[r][0]<=t&&t<=n[r][1])return i[s].type}}}};class Bn extends Ui{constructor(t){super(t),this._initStates()}initProperties(){super.initProperties(),xe(this,{characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106})}_initStates(){for(let t=0;t<this.states.length;t++)this[this.states[t]]=new Ps[this.states[t]](this,this.states)}initValue(t,e,i){this.pattern=[],this.value=t,this.width=e,this.height=i,this.checkSum=0,this.totalUnits=0,this.index=0,this.position=1}addData(){let t={value:this.value,index:0,state:""};0!==this.value.length&&(t.state=t.previousState=this.getNextState(t,this.states),this.addStart(t),this.pushData(t,this.states),this.addCheckSum(),this.addStop(),this.setBaseUnit())}pushData(t,e){for(;this[t.state].pushState(t),!(t.index>=t.value.length);)if(t.shifted){let s=t.state;t.state=t.previousState,t.previousState=s,t.shifted=!1}else t.previousState=t.state,t.state=this.getNextState(t,e),this[t.state].move(t)}addStart(t){this[t.state].addStart(t),this.position=1}addCheckSum(){this.checksum=this.checkSum%103,this.addPattern(this.checksum)}addStop(){this.addPattern(this.STOP)}setBaseUnit(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)}addPattern(t){const e=this.characterMap[t].toString();let i;for(let s=0;s<e.length;s++)i=parseInt(e.charAt(s),10),this.pattern.push(i),this.totalUnits+=i;this.checkSum+=t*this.position++}getNextState(t,e){for(let i=0;i<e.length;i++)if(this[e[i]].is(t.value,t.index))return e[i];this.invalidCharacterError(t.value.charAt(t.index))}}function pc(o,t,e){return o.substring(t,t+e)}const Vn=Object.assign;class vr extends Ui{initProperties(){super.initProperties(),Vn(this,{characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:"",checkSums:qC})}initValue(t,e){this.pattern=[],this.value=t,this.checkSumLength=0,this.width=e}setBaseUnit(){this.baseUnit=this.width/(12*(this.value.length+this.checkSumLength)+this.quietZoneLength+7)}addData(){const t=this.value;this.addPattern(this.START);for(let e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()}addCharacter(t){const e=this.characterMap[t];e||this.invalidCharacterError(t),this.addPattern(e)}addPattern(t){for(let e=0;e<t.length;e++)this.pattern.push(parseInt(t.charAt(e),10))}addCheckSum(){const e=this.checkSums[this.checkSumType].call(this.checkSums,this.value);this.checksum=e.join("");for(let i=0;i<e.length;i++)this.checkSumLength++,this.addPattern(this.characterMap[e[i]])}}const qC={Modulo10(o){let i,s,n,t=[0,""],e=o.length%2;for(i=0;i<o.length;i++)t[(i+e)%2]+=parseInt(o.charAt(i),10);for(n=t[0],s=(2*t[1]).toString(),i=0;i<s.length;i++)n+=parseInt(s.charAt(i),10);return[(10-n%10)%10]},Modulo11(o){let s,n,t=0,i=o.length;for(let r=0;r<i;r++)s=((i-r)%6||6)+1,t+=s*o.charAt(r);return n=(11-t%11)%11,10!==n?[n]:[1,0]},Modulo11Modulo10(o){let e,t=this.Modulo11(o);return e=o+t[0],t.concat(this.Modulo10(e))},Modulo10Modulo10(o){let e,t=this.Modulo10(o);return e=o+t[0],t.concat(this.Modulo10(e))}},JC=Object.assign;class gf extends Ui{initProperties(){super.initProperties(),JC(this,{name:"EAN 13",keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}})}initValue(t,e,i){const s=String(t);if(12!==s.length||/\D/.test(s))throw new Error('The value of the "EAN13" encoding should be 12 symbols');this.pattern=[],this.options.height=i,this.baseUnit=e/(95+this.quietZoneLength),this.value=s,this.checksum=this.calculateChecksum(),this.leftKey=s[0],this.leftPart=s.substr(1,6),this.rightPart=s.substr(7)+this.checksum}addData(){this.addPieces(this.characterMap.start),this.addSide(this.leftPart,this.leftKey),this.addPieces(this.characterMap.middle),this.addSide(this.rightPart),this.addPieces(this.characterMap.start)}addSide(t,e){for(let i=0;i<t.length;i++)e&&parseInt(this.keyTable[e].charAt(i),10)?this.addPieces(Array.prototype.slice.call(this.characterMap.digits[t.charAt(i)]).reverse(),!0):this.addPieces(this.characterMap.digits[t.charAt(i)],!0)}addPieces(t,e){for(let i=0;i<t.length;i++)this.pattern.push(e?{y1:0,y2:.95*this.options.height,width:t[i]}:t[i])}calculateChecksum(){let t=0,e=0,i=this.value.split("").reverse().join("");for(let n=0;n<i.length;n++)n%2?e+=parseInt(i.charAt(n),10):t+=parseInt(i.charAt(n),10);return(10-(3*t+e)%10)%10}}const tk=Object.assign,ff={code11:lf,code39:dc,code39extended:class BC extends dc{initProperties(){super.initProperties(),x(this,df,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}})}},code93:uf,code93extended:class FC extends uf{initProperties(){super.initProperties(),x(this,df,{name:"Code 93 extended",pushCheckSum:function(){const t=this._getCheckValues();let e;this.checksum=t.join("");for(let i=0;i<t.length;i++)if(e=t[i],this.shiftValuesAsciiCodes[e])this.addExtended(this.shiftValuesAsciiCodes[e]);else{const s=this._findCharacterByValue(e);this.addPattern(this.characterMap[s].pattern)}}})}},code128:class YC extends Bn{initProperties(){super.initProperties(),xe(this,{name:"Code 128",states:["C","B","A","FNC4"]})}},code128a:class GC extends Bn{initProperties(){super.initProperties(),xe(this,{name:"Code 128 A",states:["A"]})}},code128b:class HC extends Bn{initProperties(){super.initProperties(),xe(this,{name:"Code 128 B",states:["B"]})}},code128c:class XC extends Bn{initProperties(){super.initProperties(),xe(this,{name:"Code 128 C",states:["C"]})}},"gs1-128":class WC extends Bn{initProperties(){super.initProperties(),xe(this,{name:"Code GS1-128",states:["FNC1","C","B"]})}},msimod10:class $C extends vr{initProperties(){super.initProperties(),Vn(this,{name:"MSI Modulo10",checkSumType:"Modulo10"})}},msimod11:class QC extends vr{initProperties(){super.initProperties(),Vn(this,{name:"MSI Modulo11",checkSumType:"Modulo11"})}},msimod1010:class ZC extends vr{initProperties(){super.initProperties(),Vn(this,{name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"})}},msimod1110:class KC extends vr{initProperties(){super.initProperties(),Vn(this,{name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"})}},postnet:class UC extends Ui{initProperties(){super.initProperties(),zC(this,{name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]})}initValue(t,e,i){this.height=i,this.width=e,this.baseHeight=i/2,this.value=t.replace(new RegExp(this.DIGIT_SEPARATOR,"g"),""),this.pattern=[],this.validate(this.value),this.checkSum=0,this.setBaseUnit()}addData(){const t=this.value;this.addPattern(this.START);for(let e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.START),this.pattern.pop()}addCharacter(t){const e=this.characterMap[t];this.checkSum+=parseInt(t,10),this.addPattern(e)}addCheckSum(){this.checksum=(10-this.checkSum%10)%10,this.addCharacter(this.checksum)}setBaseUnit(){this.baseUnit=this.width/(10*(this.value.length+1)+3+this.quietZoneLength)}validate(t){if(NC.test(t)||this.invalidCharacterError(t.match(/[^0-9]/)[0]),!N(t.length,this.VALID_CODE_LENGTHS))throw new Error("Invalid value length. Valid lengths for the Postnet symbology are "+this.VALID_CODE_LENGTHS.join(",")+".")}addPattern(t){let e;for(let i=0;i<t.length;i++)e=this.height-this.baseHeight*t.charAt(i),this.pattern.push({width:1,y1:e,y2:this.height}),this.pattern.push(1)}},ean8:class ek extends gf{initProperties(){super.initProperties(),tk(this,{name:"EAN 8"})}initValue(t,e,i){if(7!==t.length||/\D/.test(t))throw new Error("Invalid value provided");this.value=t,this.options.height=i,this.checksum=this.calculateChecksum(this.value),this.leftPart=this.value.substr(0,4),this.rightPart=this.value.substr(4)+this.checksum,this.pattern=[],this.baseUnit=e/(67+this.quietZoneLength)}},ean13:gf};function mf(o,t){const e=o.style.display;"canvas"===t&&(o.style.display="block");const i={width:o.clientWidth,height:o.clientHeight};return o.style.display=e,i}C(class nk extends I.A{constructor(t,e,i=ud){super(),this.options=x({},this.options,e),this.element=t,this.onError=i,this._initElement(),this._initSurface(),this._setOptions(e),e&&_(e.value)&&this.redraw()}destroy(){this._destroySurface()}_initElement(){gt(this.element,"k-barcode")}_initSurface(){const{options:t,surface:e}=this;(!e||e.options.type!==t.renderAs)&&(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())}_createSurface(){return rs.A.create(this.surfaceElement,{type:this.options.renderAs})}_destroySurface(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())}_initSurfaceElement(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))}_destroySurfaceElement(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)}setOptions(t){this._setOptions(t),this._initSurface(),this.redraw()}redraw(){let t=this._getSize();this.surface.clear(),this.surface.setSize({width:t.width,height:t.height}),this.createVisual(),this.surface.draw(this.visual)}getSize(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}}_resize(){this.redraw()}createVisual(){this.visual=this._render()}_render(){const t=this.options,e=t.value,i=t.text,s=Z(i.margin),n=this._getSize(),r=t.border||{},l=this.encoding,c=new k(0,0,n.width,n.height).unpad(r.width).unpad(t.padding);let d,u,p,h=c.height();const g=new et.A;this.contentBox=c,g.append(this._getBackground(n)),i.visible&&(p=zd.A(e,{font:i.font}).height,h-=p+s.top+s.bottom);try{d=l.encode(e,c.width(),h)}catch(f){return this.onError(f),g}return i.visible&&(u=e,t.checksum&&_(l.checksum)&&(u+=" "+l.checksum),g.append(this._getText(u))),this.barHeight=h,this._bandsGroup=this._getBands(d.pattern,d.baseUnit),g.append(this._bandsGroup),g}exportVisual(){return this._render()}_getSize(){const e=mf(this.element,this.options.renderAs),i=new Nl.A(300,100);return e.width>0&&(i.width=e.width),e.height>0&&(i.height=e.height),this.options.width&&(i.width=this.options.width),this.options.height&&(i.height=this.options.height),i}value(t){if(!_(t))return this.options.value;this.options.value=String(t),this.redraw()}_getBands(t,e){const i=this.contentBox;let n,r,s=i.x1;const l=new et.A;for(let c=0;c<t.length;c++){if(r=ie(t[c])?t[c]:{width:t[c],y1:0,y2:this.barHeight},n=r.width*e,c%2){const h=At.A.fromPoints(new j.A(s,r.y1+i.y1),new j.A(s+n,r.y2+i.y1)),d=M.w.fromRect(h,{fill:{color:this.options.color},stroke:null});l.append(d)}s+=n}return l}_getBackground(t){const e=this.options,i=e.border||{},s=new k(0,0,t.width,t.height).unpad(i.width/2);return M.w.fromRect(s.toRect(),{fill:{color:e.background},stroke:{color:i.width?i.color:"",width:i.width,dashType:i.dashType}})}_getText(t){const e=this.options.text,i=this._textbox=new Ht(t,{font:e.font,color:e.color,align:"center",vAlign:"bottom",margin:e.margin});return i.reflow(this.contentBox),i.renderVisual(),i.visual}_setOptions(t){if(this.type=(t.type||this.options.type).toLowerCase(),"upca"===this.type&&(this.type="ean13",t.value="0"+t.value),"upce"===this.type&&(this.type="ean8",t.value="0"+t.value),!ff[this.type])throw new Error(`Encoding '${this.type}' is not supported.`);this.encoding=new ff[this.type],this.options=x({},this.options,t)}},{name:"Barcode",renderAs:"svg",value:"",type:"code39",checksum:!1,width:0,height:0,color:"black",background:"white",text:{visible:!0,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}});var ak=T(3244);const Ds=Object.assign;function xf(o,t){let e=[],i=0;for(;i<o.length;)e.push(o.substring(i,i+t)),i+=t;return e}function Yt(o,t){let e=Number(o).toString(2);return e.length<t&&(e=new Array(t-e.length+1).join(0)+e),e}function br(o){return parseInt(o,2)}class lk extends I.A{constructor(t){super(),this.matrix=t,this.row=t.length-1,this.column=t.length-1,this.startColumn=this.column,this.dir=-1,this.c=0}move(){this.row+=this.dir*this.c,this.c^=1,this.column=this.startColumn-this.c}getNextCell(){for(;void 0!==this.matrix[this.row][this.column];)this.move(),(this.row<0||this.row>=this.matrix.length)&&(this.dir=-this.dir,this.startColumn-=8!==this.startColumn?2:3,this.column=this.startColumn,this.row=this.dir<0?this.matrix.length-1:0);return{row:this.row,column:this.column}}getNextRemainderCell(){if(this.move(),void 0===this.matrix[this.row][this.column])return{row:this.row,column:this.column}}}class vf extends I.A{constructor(t,e){super(),this.dataString=t,this.version=e}}const bf="alphanumeric",dk=/^\d+/,yf="A-Z0-9 $%*+./:-",pk=new RegExp("^[A-Z $%*+./:-]+"),_f=new RegExp("^["+yf+"]+"),wf=new RegExp("^[^"+yf+"]+");function Cf(o,t,e,i,s){let u,p,n=dk.exec(o),r=n?n[0]:"",l=pk.exec(o),c=l?l[0]:"",h=_f.exec(o),d=h?h[0]:"";return r&&(r.length>=t||o.length===r.length||r.length>=e&&!_f.test(o.charAt(r.length)))?(u="numeric",p=r):d&&(o.length===d.length||d.length>=i||s===bf)?(u=bf,p=r||c):(u="byte",p=d?d+wf.exec(o.substring(d.length))[0]:wf.exec(o)[0]),{mode:u,modeString:p}}class gc extends I.A{constructor(){super(),this.initProperties()}initProperties(){Ds(this,{modeIndicator:"",bitsInCharacterCount:[]})}getVersionIndex(t){return t<10?0:t>26?2:1}getBitsCharacterCount(t){return this.bitsInCharacterCount[this.getVersionIndex(t||40)]}getModeCountString(t,e){return this.modeIndicator+Yt(t,this.getBitsCharacterCount(e))}encode(){}getStringBitsLength(){}getValue(){}}let fc={numeric:new class gk extends gc{initProperties(){super.initProperties(),Ds(this,{bitsInCharacterCount:[10,12,14],modeIndicator:"0001"})}getValue(t){return parseInt(t,10)}encode(t,e){let r,s=xf(t,3),n=this.getModeCountString(t.length,e);for(r=0;r<s.length-1;r++)n+=Yt(s[r],10);return n+Yt(s[r],1+3*s[r].length)}getStringBitsLength(t,e){let i=t%3;return 4+this.getBitsCharacterCount(e)+10*Math.floor(t/3)+3*i+(0===i?0:1)}},alphanumeric:new class fk extends gc{initProperties(){super.initProperties(),Ds(this,{characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010"})}getValue(t){return this.characters[t]}encode(t,e){let n,r,i=xf(t,2),s=this.getModeCountString(t.length,e);for(r=0;r<i.length-1;r++)n=45*this.getValue(i[r].charAt(0))+this.getValue(i[r].charAt(1)),s+=Yt(n,11);return n=2===i[r].length?45*this.getValue(i[r].charAt(0))+this.getValue(i[r].charAt(1)):this.getValue(i[r].charAt(0)),s+Yt(n,1+5*i[r].length)}getStringBitsLength(t,e){return 4+this.getBitsCharacterCount(e)+11*Math.floor(t/2)+t%2*6}},byte:new class mk extends gc{initProperties(){super.initProperties(),Ds(this,{bitsInCharacterCount:[8,16,16],modeIndicator:"0100"})}getValue(t){let e=t.charCodeAt(0);if(e<=127||160<=e&&e<=255)return e;throw new Error(`Unsupported character in QR Code: "${t}".`)}encode(t,e){let i=this,s=i.getModeCountString(t.length,e);for(let n=0;n<t.length;n++)s+=Yt(i.getValue(t.charAt(n)),8);return s}getStringBitsLength(t,e){return 4+this.getBitsCharacterCount(e)+8*t}}};const Fn=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}];function kf(o,t){let e=0,i=Fn.length-1,s=Math.floor(Fn.length/2);do{o<Fn[s][t].totalDataCodewords?i=s:e=s,s=e+Math.floor((i-e)/2)}while(i-e>1);return o<=Fn[e][t].totalDataCodewords?s+1:i+1}class Ek extends I.A{getEncodingResult(t,e){let i=function Mk(o){let e,t=[],i=0,s=o;for(t.push(Cf(s,8,5,8,e)),e=t[0].mode,s=s.substr(t[0].modeString.length);s.length>0;){let n=Cf(s,17,9,16,e);n.mode!==e?(e=n.mode,t.push(n),i++):t[i].modeString+=n.modeString,s=s.substr(n.modeString.length)}return t}(t),s=function yk(o){let e,t=0;for(let i=0;i<o.length;i++)e=fc[o[i].mode],t+=e.getStringBitsLength(o[i].modeString.length);return Math.ceil(t/8)}(i),n=kf(s,e),r=function _k(o,t){let i,e="";for(let s=0;s<o.length;s++)i=fc[o[s].mode],e+=i.encode(o[s].modeString,t);return e}(i,n);return new vf(r,n)}}class Dk extends I.A{constructor(){super(),this.initProperties(),this.mode=fc[this.encodingMode]}initProperties(){Ds(this,{encodingMode:"byte",utfBOM:"111011111011101110111111",initialModeCountStringLength:20,ranges:[128,2048,65536,2097152,67108864]})}getEncodingResult(t,e){let i=this.encode(t),n=kf(this.getDataCodewordsCount(i),e),r=this.mode.getModeCountString(i.length/8,n)+i;return new vf(r,n)}getDataCodewordsCount(t){return Math.ceil((this.initialModeCountStringLength+t.length)/8)}encode(t){let e=this.utfBOM;for(let i=0;i<t.length;i++)e+=this.encodeCharacter(t.charCodeAt(i));return e}encodeCharacter(t){let e=this.getBytesCount(t),i=e-1,s="";if(1===e)s=Yt(t,8);else{let n=8-e;for(let r=0;r<i;r++)s=Yt(t>>6*r&63|128,8)+s;s=(t>>6*i|255>>n<<n).toString(2)+s}return s}getBytesCount(t){let e=this.ranges;for(let i=0;i<e.length;i++)if(t<e[i])return i+1}}let mc={1:0},xi={0:1},Ik={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},xc=[1,0,1,1,1],Rk=[1,0,1],Lk={L:"01",M:"00",Q:"11",H:"10"},Fk=["11101100","00010001"],Nk=93,vc=[(o,t)=>(o+t)%2==0,(o,t)=>o%2==0,(o,t)=>t%3==0,(o,t)=>(o+t)%3==0,(o,t)=>(Math.floor(o/2)+Math.floor(t/3))%2==0,(o,t)=>o*t%2+o*t%3==0,(o,t)=>(o*t%2+o*t%3)%2==0,(o,t)=>((o+t)%2+o*t%3)%2==0];const bc=[[1,0],[1,25,0]];function zt(o,t,e,i){for(let s=0;s<o.length;s++)o[s][e][i]=t}function Sf(o,t,e,i){for(let s=0;s<vc.length;s++)o[s][e][i]=vc[s](e,i)?1^t:parseInt(t,10)}function Gk(o,t){let e=[];for(let s=o.length-2;s>=0;s--)e[s]=o[s]^t[s];return e}function Hk(o,t){let e=[];for(let i=0;i<o.length;i++)for(let s=0;s<t.length;s++)e[i+s]=void 0===e[i+s]?(o[i]+(t[s]>=0?t[s]:0))%255:mc[xi[e[i+s]]^xi[(o[i]+t[s])%255]];return e}function Yk(o,t){let e=[],i=o.length-1;do{e[i]=xi[(o[i]+t)%255],i--}while(void 0!==o[i]);return e}function Wk(o,t){let l,c,e=bc[t-1],i=new Array(t).concat(o),s=new Array(i.length-e.length).concat(e),n=o.length,r=[];for(c=0;c<n;c++)l=Yk(s,mc[i[i.length-1]]),s.splice(0,1),i=Gk(l,i);for(c=i.length-1;c>=0;c--)r[t-1-c]=Yt(i[c],8);return r}function Tf(o,t,e){let i=br(t),s=t.length-1,n=o<<s,l=Yt(o,e-s),c=function Zk(o,t){let e=t.toString(2).length,i=o.toString(2).length,s=o;do{s^=t<<i-e,i=s.toString(2).length}while(i>=e);return s}(n,i);return c=l+Yt(c,s),c}function Nn(o,t){return parseInt(o.charAt(t),10)}function Mf(o,t){let i,s,e=o[0],n=0,r=t.length;for(i=0,s=8;i<=8;i++)6!==i&&zt(o,Nn(t,r-1-n++),i,s);for(i=8,s=7;s>=0;s--)6!==s&&zt(o,Nn(t,r-1-n++),i,s);for(n=0,s=e.length-1,i=8;s>=e.length-8;s--)zt(o,Nn(t,r-1-n++),i,s);for(zt(o,1,e.length-8,8),i=e.length-7,s=8;i<e.length;i++)zt(o,Nn(t,r-1-n++),i,s)}function Ef(o,t){let c,h,d,i=o[0].length,n=i-11,r=i-11;for(let u=0;u<t.length;u++)c=Math.floor(u/3),h=u%3,d=Nn(t,t.length-u-1),zt(o,d,0+c,n+h),zt(o,d,r+h,0+c)}function yr(o,t,e,i){let r,s=t.length+2,n=t.length+1;for(let l=0;l<t.length;l++)for(let c=l;c<s-l;c++)r=t[l],zt(o,r,e+c,i+l),zt(o,r,e+l,i+c),zt(o,r,e+n-c,i+n-l),zt(o,r,e+n-l,i+n-c)}function yc(o,t,e,i){let s=e,n=i,r=o[0];do{zt(o,0,s,i),zt(o,0,e,n),s+=t[0],n+=t[1]}while(s>=0&&s<r.length)}function Pf(o,t,e,i,s){t[o][i]=(t[o][i]<<1^s)%128,t[o][i]===Nk&&(e[o]+=40)}function Df(o,t,e,i,s,n){e[o][n]===i?s[o][n]++:(e[o][n]=i,s[o][n]>=5&&(t[o]+=3+s[o][n]-5),s[o][n]=1)}function sA(o,t){let e=Math.floor(o/t*100),i=e%5,s=Math.abs(e-i-50),n=Math.abs(e+5-i-50);return 10*Math.min(s/5,n/5)}(function jk(){let o,t;for(t=1;t<255;t++)o=2*xi[t-1],o>255&&(o^=285),xi[t]=o,mc[o]=t;o=2*xi[t-1]^285,xi[t]=o,xi[-1]=0})(),function Xk(){for(let t=2;t<=68;t++)bc[t]=Hk(bc[t-1],[t,0])}();const zn=Math.round,rA=[[0,1],[1,1],[1,2],[2,2],[2,1],[3,1],[3,0],[2,0],[2,-1],[1,-1],[1,0]],If=[[0,1],[1,1],[1,0]];C(class aA extends I.A{constructor(t,e,i=ud){super(),this.options=x({},this.options,e),this.element=t,this.wrapper=this.element,this.onError=i,this._initElement(),this._initSurface(),this.setOptions(e)}destroy(){this._destroySurface()}_initElement(){gt(this.element,"k-qrcode")}_initSurface(){const{options:t,surface:e}=this;(!e||e.options.type!==t.renderAs)&&(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())}_createSurface(){return rs.A.create(this.surfaceElement,{type:this.options.renderAs})}_destroySurface(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())}_initSurfaceElement(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))}_destroySurfaceElement(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)}redraw(){let t=this._getSize();this.surface.clear(),this.surface.setSize({width:t,height:t}),this.createVisual(),this.surface.draw(this.visual)}getSize(){const t=this.element,e=t.clientWidth,i=t.clientHeight,s={width:0,height:0};return e>0&&(s.width=e),i&&(s.height=i),s}_resize(){this.redraw()}createVisual(){this.visual=this._render()}exportVisual(){return this._render()}_render(){let e,r,l,c,h,d,t=this._value,i=this.options.border||{},s=this.options.padding||0,n=i.width||0;i.width=n;let u=new et.A;try{t&&(l=function oA(o,t,e){let i=function nA(o){return o&&o.toLowerCase().indexOf("utf_8")>=0?new Dk:new Ek}(e),s=i.getEncodingResult(o,t),n=s.version,r=Fn[n-1][t],l=function Uk(o,t){let e=8*t,i=0,s=0,n=o;for(;n.length<e&&i<4;)n+="0000".charAt(i++);for(n.length%8!=0&&(n+=new Array(9-n.length%8).join("0"));n.length<e;)n+=Fk[s],s^=1;return n}(s.dataString,r.totalDataCodewords),c=function $k(o,t){let n,l,c,h,d,e=0,i=[],s=[],r=t.groups;for(let u=0;u<r.length;u++){c=r[u][0];for(let p=0;p<c;p++){l=r[u][1],n=[],h=[];for(let g=1;g<=l;g++)d=o.substring(e,e+8),n.push(d),h[l-g]=br(d),e+=8;i.push(n),s.push(Wk(h,t.errorCodewordsPerBlock))}}return[i,s]}(l,r),h=function Kk(o){let t=[],e=17+4*o;for(let i=0;i<vc.length;i++){t[i]=new Array(e);for(let s=0;s<e;s++)t[i][s]=new Array(e)}return t}(n);(function Jk(o){let t=o[0].length;yr(o,xc,0,0),yc(o,[-1,-1],7,7),yr(o,xc,t-7,0),yc(o,[1,-1],t-8,7),yr(o,xc,0,t-7),yc(o,[-1,1],7,t-8)})(h),function tA(o,t){if(t<2)return;let r,l,e=o[0],i=e.length,s=Math.floor(t/7),n=[6],c=0;for((r=Ik[t])?l=(i-13-r)/s:r=l=(i-13)/(s+1),n.push(n[c++]+r);n[c]+l<i;)n.push(n[c++]+l);for(let h=0;h<n.length;h++)for(let d=0;d<n.length;d++)void 0===e[n[h]][n[d]]&&yr(o,Rk,n[h]-2,n[d]-2)}(h,n),function eA(o){let i=1,s=o[0].length;for(let n=8;n<s-8;n++)zt(o,i,6,n),zt(o,i,n,6),i^=1}(h),n>=7&&Ef(h,Yt(0,18)),Mf(h,Yt(0,15)),function zk(o,t){let i,s,n,e=new lk(o[0]);for(let r=0;r<t.length;r++)for(i=t[r],s=0;i.length>0;){for(let l=0;l<i.length;l++)for(let c=0;c<8;c++)n=e.getNextCell(),Sf(o,i[l][s].charAt(c),n.row,n.column);for(s++;i[0]&&s===i[0].length;)i.splice(0,1)}for(;n=e.getNextRemainderCell();)Sf(o,0,n.row,n.column)}(h,c);let d=function iA(o){let r,l,t=[],e=[],i=[],s=[],n=[],d=o[0].length;for(l=0;l<o.length;l++)t[l]=0,i[l]=0,n[l]=[0,0],s[l]=[0,0],e[l]=[];for(let f=0;f<d;f++)for(let m=0;m<d;m++)for(let v=0;v<o.length;v++)r=o[v],i[v]+=parseInt(r[f][m],10),e[v][0]===r[f][m]&&f+1<d&&m-1>=0&&r[f+1][m]===e[v][0]&&r[f+1][m-1]===e[v][0]&&(t[v]+=3),Pf(v,s,t,0,r[f][m]),Pf(v,s,t,1,r[m][f]),Df(v,t,e,r[f][m],n,0),Df(v,t,e,r[m][f],n,1);let p,u=d*d,g=Number.MAX_VALUE;for(l=0;l<t.length;l++)t[l]+=sA(i[l],u),t[l]<g&&(g=t[l],p=l);return p}(h),u=h[d];return n>=7&&Ef([u],function qk(o){return Tf(o,"1111100100101",18)}(n)),Mf([u],function Qk(o){let e,i="";if(0===br(o))return"101010000010010";e=Tf(br(o),"10100110111",15);for(let s=0;s<e.length;s++)i+=e.charAt(s)^"101010000010010".charAt(s);return i}(Lk[t]+Yt(d,3))),u}(t,this.options.errorCorrection,this.options.encoding),c=this._getSize(),d=c-2*(n+s),e=this._calculateBaseUnit(d,l.length),h=l.length*e,r=n+s+(d-h)/2,u.append(this._renderBackground(c,i)),u.append(this._renderMatrix(l,e,r)),this._hasCustomLogo()?u.append(this._renderLogo(c,e)):this._isSwiss()&&u.append(this._renderSwissCode(c,e)))}catch(p){this.onError(p)}return u}_renderLogo(t,e){let i,s,n=zn(t/2),r=this._getLogoSize(7*e),l=this.options.overlay.imageUrl,c={x:n-r.width/2,y:n-r.height/2};return s=new At.A(new j.A(c.x,c.y),new Nl.A(r.width,r.height)),i=new ak.A(l,s),i}_renderSwissCode(t,e){let i=this._getLogoSize(7*e);i=Math.max(i.width,i.height);let s=i/4,n=s/2,r=t/2,l={},c=new et.A;return l.x=l.y=Math.ceil(r-e-i/2),c.append(this._renderShape(l,Math.ceil(i+2*e),If,"#fff")),l.x=l.y=r-i/2,c.append(this._renderShape(l,i,If,this.options.color)),l.x=r+n-i/2,l.y=r+n+s-i/2,c.append(this._renderShape(l,s,rA,"#fff")),c}_renderShape(t,e,i,s){let n=new M.P({fill:{color:s},stroke:null});n.moveTo(t.x,t.y);for(let r=0;r<i.length;r++)n.lineTo(t.x+e*i[r][0],t.y+e*i[r][1]);return n.close(),n}_getSize(){let t;if(this.options.size)t=parseInt(this.options.size,10);else{const i=mf(this.element,this.options.renderAs),s=Math.min(i.width,i.height);t=s>0?s:200}return t}_calculateBaseUnit(t,e){let i=Math.floor(t/e);if(i<1){const s=Math.ceil(1*e);this.onError(new Error(`Insufficient size for QR Code: the current size is ${t}px and the minimum size is ${s}px.`))}else i*e>=t&&i-1>=1&&i--;return i}_renderMatrix(t,e,i){let s=new M.P({fill:{color:this.options.color},stroke:null});for(let n=0;n<t.length;n++){let r=i+n*e,l=0;for(;l<t.length;){for(;0===t[n][l]&&l<t.length;)l++;if(l<t.length){let c=l;for(;1===t[n][l];)l++;let h=zn(i+c*e),d=zn(r),u=zn(i+l*e),p=zn(r+e);s.moveTo(h,d).lineTo(h,p).lineTo(u,p).lineTo(u,d).close()}}}return s}_renderBackground(t,e){const i=new k(0,0,t,t).unpad(e.width/2);return M.w.fromRect(i.toRect(),{fill:{color:this.options.background},stroke:{color:e.color,width:e.width}})}setOptions(t){this.options=Ds(this.options,t||{}),void 0!==t.value&&(this._value=String(this.options.value)),this._initSurface(),this.redraw()}value(t){if(void 0===t)return this._value;this._value=String(t),this.redraw()}_hasCustomLogo(){return!!this.options.overlay.imageUrl}_isSwiss(){return"swiss"===this.options.overlay.type}_getLogoSize(t){let e=this.options.overlay.width,i=this.options.overlay.height;return e||i?e&&!i?i=e:!e&&i&&(e=i):e=i=t,{width:e,height:i}}},{name:"QRCode",renderAs:"svg",encoding:"ISO_8859_1",value:"",errorCorrection:"L",background:"#fff",color:"#000",size:"",padding:0,border:{color:"",width:0},overlay:{type:"image",imageUrl:"",width:0,height:0}});const _c={WGS84:{a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149}};function Te(o){return o*o}let vi=Math,cA=vi.abs,Rf=vi.atan,_r=vi.atan2,bi=vi.cos,Ze=vi.sin,Lf=vi.tan;class rt extends I.A{constructor(t,e){super(),this.initProperties(),1===arguments.length?(this.lat=t[0],this.lng=t[1]):(this.lat=t,this.lng=e)}initProperties(){x(this,{DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6}{1:N6}"})}toArray(){return[this.lat,this.lng]}equals(t){return t&&t.lat===this.lat&&t.lng===this.lng}clone(){return new rt(this.lat,this.lng)}round(t){return this.lng=A(this.lng,t),this.lat=A(this.lat,t),this}wrap(){return this.lng=this.lng%180,this.lat=this.lat%90,this}distanceTo(t,e){return this.greatCircleTo(t,e).distance}destination(t,e,i){let s=Ct(e),n=i||_c.WGS84,r=Ct(this.lat),l=Ct(this.lng),c=t/n.a,h=vi.asin(Ze(r)*bi(c)+bi(r)*Ze(c)*bi(s)),d=l+_r(Ze(s)*Ze(c)*bi(r),bi(c)-Ze(r)*Ze(h));return new rt(ii(h),ii(d))}greatCircleTo(t,e){let i=rt.create(i),s=e||_c.WGS84;if(!i||this.clone().round(8).equals(i.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};let v,E,L,F,H,Q,tt,xt,n=s.a,r=s.b,l=s.f,c=Ct(i.lng-this.lng),h=Rf((1-l)*Lf(Ct(this.lat))),d=Ze(h),u=bi(h),p=Rf((1-l)*Lf(Ct(i.lat))),g=Ze(p),f=bi(p),m=c,y=this.DISTANCE_ITERATIONS,w=!1;for(;!w&&y-- >0;){E=Ze(m),L=bi(m),F=vi.sqrt(Te(f*E)+Te(u*g-d*f*L)),Q=d*g+u*f*L,xt=_r(F,Q);let ht=u*f*E/F;H=1-Te(ht),tt=0,0!==H&&(tt=Q-2*d*g/H),v=m;let St=l/16*H*(4+l*(4-3*H));m=c+(1-St)*l*ht*(xt+St*F*(tt+St*Q*(2*Te(tt)-1))),w=cA(m-v)<=this.DISTANCE_CONVERGENCE}let at=H*(Te(n)-Te(r))/Te(r),ee=1+at/16384*(4096+at*(at*(320-175*at)-768)),Vt=at/1024*(256+at*(at*(74-47*at)-128)),no=Vt*F*(tt+Vt/4*(Q*(2*Te(tt)-1)-Vt/6*tt*(4*Te(F)-3)*(4*Te(tt)-3))),oo=_r(f*E,u*g-d*f*L),nt=_r(u*E,-d*f+u*g*L);return{distance:A(r*ee*(xt-no),this.DISTANCE_PRECISION),azimuthFrom:ii(oo),azimuthTo:ii(nt)}}toString(){return String(this.lat)+","+String(this.lng)}static fromLngLat(t){return new rt(t[1],t[0])}static fromLatLng(t){return new rt(t[0],t[1])}static create(t,e){if(_(t))return t instanceof rt?t.clone():1===arguments.length&&2===t.length?rt.fromLatLng(t):new rt(t,e)}}let yi=Math,wc=yi.atan,Of=yi.exp,Bf=yi.pow,Vf=yi.sin,Ff=yi.log,Nf=yi.tan,zf=j.A,wr=yi.PI,Cc=wr/2,Uf=wr/4,hA=wr/180,dA=_c.WGS84;class kc extends I.A{constructor(t){super(),this.initProperties(),this._initOptions(t)}_initOptions(t){this.options=x({},this.options,t)}initProperties(){x(this,{MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12})}forward(t,e){let i=this,s=i.options,r=s.datum.a,l=s.centralMeridian,c=R(t.lat,-i.MAX_LAT,i.MAX_LAT),h=e?R(t.lng,-i.MAX_LNG,i.MAX_LNG):t.lng,d=Ct(h-l)*r,u=i._projectLat(c);return new zf(d,u)}_projectLat(t){let e=this.options.datum,i=e.e,s=e.a,n=Ct(t),r=Nf(Uf+n/2),l=i*Vf(n),c=Bf((1-l)/(1+l),i/2);return s*Ff(r*c)}inverse(t,e){let i=this,s=i.options,c=t.x/(hA*s.datum.a)+s.centralMeridian,h=R(i._inverseY(t.y),-i.MAX_LAT,i.MAX_LAT);return e&&(c=R(c,-i.MAX_LNG,i.MAX_LNG)),new rt(h,c)}_inverseY(t){let h,e=this,i=e.options.datum,n=i.e,r=n/2,l=Of(-t/i.a),c=Cc-2*wc(l);for(h=0;h<=e.INVERSE_ITERATIONS;h++){let d=n*Vf(c),u=Bf((1-d)/(1+d),r),p=Cc-2*wc(l*u)-c;if(c+=p,yi.abs(p)<=e.INVERSE_CONVERGENCE)break}return ii(c)}}C(kc,{centralMeridian:0,datum:dA});class uA extends kc{initProperties(){super.initProperties(),x(this,{MAX_LAT:85.0511287798})}_projectLat(t){let e=this.options.datum.a,i=Ct(t),s=Nf(Uf+i/2);return e*Ff(s)}_inverseY(t){let i=Of(-t/this.options.datum.a);return ii(Cc-2*wc(i))}}class gA extends I.A{constructor(){super();let e=this._proj=new uA,i=this.c=2*wr*e.options.datum.a;this._tm=bt.A().translate(.5,.5).scale(1/i,-1/i),this._itm=bt.A().scale(i,-i).translate(-.5,-.5)}toPoint(t,e,i){return this._proj.forward(t,i).transform(this._tm).scale(e||1)}toLocation(t,e,i){let s=t.clone().scale(1/(e||1)).transform(this._itm);return this._proj.inverse(s,i)}}const yt=(o,t)=>o.bind(t);let ji=o=>{const t=document.createElement("div");return t.innerHTML=o,t.firstChild},Un=o=>{for(;o.firstChild;)o.removeChild(o.firstChild)},jf=(o,t)=>{t.insertBefore(o,t.firstChild)},Gf=o=>o.replace(/([a-z][A-Z])/g,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()}),Hf=o=>{let t;return t=o&&String(o).endsWith("px")?o:String(o)+"px",t};const Cr=(o,t)=>{const e=o.prototype;e.events?t.forEach(i=>{e.events.indexOf(i)<0&&e.events.push(i)}):e.events=t},Xf=o=>{let t=[];if(o){let e=Gf(o).split("-");for(let i=0;i<e.length;i++)t.push("k-pos-"+e[i])}return t.join(" ")};class Yf extends ne{constructor(t,e){super(),this.element=t,this._initOptions(e),this.items=[],gt(this.element,"k-widget k-attribution")}_initOptions(t){this.options=x({},this.options,t)}filter(t,e){this._extent=t,this._zoom=e,this._render()}add(t){let e=t;_(t)&&("string"==typeof t&&(e={text:t}),this.items.push(e),this._render())}remove(t){let e=[];for(let i=0;i<this.items.length;i++){let s=this.items[i];s.text!==t&&e.push(s)}this.items=e,this._render()}clear(){this.items=[],Un(this.element)}_render(){let t=[];for(let e=0;e<this.items.length;e++){let s=this._itemText(this.items[e]);""!==s&&t.push(s)}t.length>0?(Un(this.element),((o,t)=>{const e=document.createElement("div");for(e.innerHTML=o;e.childNodes.length>0;)t.appendChild(e.childNodes[0])})(t.join(this.options.separator),this.element),this.showElement()):this.hideElement()}hideElement(){this.element.style.display="none"}showElement(){this.element.style.display=""}_itemText(t){let e="",i=this._inZoomLevel(t.minZoom,t.maxZoom),s=this._inArea(t.extent);return i&&s&&(e+=t.text),e}_inZoomLevel(t,e){let i=!0,s=O(t,-Number.MAX_VALUE),n=O(e,Number.MAX_VALUE);return i=this._zoom>s&&this._zoom<n,i}_inArea(t){let e=!0;return t&&(e=t.contains(this._extent)),e}}C(Yf,{name:"Attribution",separator:"&nbsp;|&nbsp;"});const bA={up:{className:"k-navigator-n",iconClass:"k-i-caret-alt-up"},down:{className:"k-navigator-s",iconClass:"k-i-caret-alt-down"},right:{className:"k-navigator-e",iconClass:"k-i-caret-alt-right"},left:{className:"k-navigator-w",iconClass:"k-i-caret-alt-left"}};function kr(o,t){const e='<button class="k-button k-button-square k-rounded-full k-button-flat k-button-flat-base k-icon-button '+bA[o].className+'" aria-label="move '+o+'">'+es({icon:`caret-alt-${o}`,iconClass:"k-button-icon",svgIcons:t.svgIcons,type:t.type})+"</button>";return ji(e)}class Ac extends ne{constructor(t,e){super(),this.element=t,this._initOptions(e);const i=kr("up",e.icons),s=kr("right",e.icons),n=kr("down",e.icons),r=kr("left",e.icons);this.element.appendChild(i),this.element.appendChild(s),this.element.appendChild(n),this.element.appendChild(r),gt(this.element,"k-widget k-navigator"),Gt(this.element,"click",".k-button",yt(this._click,this));let l=this.element.parentNode.closest("[data-role]");this._keyroot=l||this.element,this._tabindex(this._keyroot),this._keydownHandler=yt(this._keydown,this),Gt(this._keyroot,"keydown",this._keydownHandler)}destroy(){this.dispose()}dispose(){Kt(this._keyroot,"keydown",this._keydownHandler)}_tabindex(t){const e=t||this.wrapper||this.element;let i=this.element,s="tabindex",n=e.getAttribute(s)||i.getAttribute(s);i.removeAttribute(s),e.setAttribute(s,isNaN(n)?0:n)}_initOptions(t){this.options=x({},this.options,t)}_pan(t,e){let i=this.options.panStep;this.trigger("pan",{x:t*i,y:e*i})}_click(t){let e=0,i=0,s=t.currentTarget;s.matches(".k-navigator-n")?i=1:s.matches(".k-navigator-s")?i=-1:s.matches(".k-navigator-e")?e=1:s.matches(".k-navigator-w")&&(e=-1),this._pan(e,i),t.preventDefault()}_keydown(t){switch(t.which){case 38:this._pan(0,1),t.preventDefault();break;case 40:this._pan(0,-1),t.preventDefault();break;case 39:this._pan(1,0),t.preventDefault();break;case 37:this._pan(-1,0),t.preventDefault()}}}function $f(o,t,e){const i='<button class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-zoom-'+o+'" title="zoom-'+o+'" aria-label="zoom-'+o+'">'+es({icon:t,iconClass:"k-button-icon",svgIcons:e.svgIcons,type:e.type})+"</button>";return ji(i)}C(Ac,{name:"Navigator",panStep:1}),Cr(Ac,["pan"]);class Sc extends ne{constructor(t,e,i){super(),this.element=t,this._initOptions(e);const s=$f("in","plus",i),n=$f("out","minus",i);this.element.appendChild(s),this.element.appendChild(n),this.element.setAttribute("role","group"),gt(this.element,"k-widget k-zoom-control k-button-group k-group-horizontal"),this._clickHandler=this._click.bind(this),Gt(this.element,"click",".k-button",this._clickHandler);let r=this.element.parentNode.closest("[data-role]");this._keyroot=r||this.element,this._tabindex(this._keyroot),this._keydownHandler=this._keydown.bind(this),Gt(this._keyroot,"keydown",this._keydownHandler)}destroy(){this.element&&Kt(this.element,"click",this._clickHandler),this._keyroot&&Kt(this._keyroot,"keydown",this._keydownHandler)}_tabindex(t){const e=t||this.wrapper||this.element;let i=this.element,s="tabindex",n=e.getAttribute(s)||i.getAttribute(s);i.removeAttribute(s),e.setAttribute(s,isNaN(n)?0:n)}_initOptions(t){this.options=x({},this.options,t)}_change(t){this.trigger("change",{delta:t*this.options.zoomStep})}_click(t){let i=1;$s(t.currentTarget,"k-zoom-out")&&(i=-1),this._change(i),t.preventDefault()}_keydown(t){switch(t.which){case 107:case 187:case 61:this._change(1);break;case 109:case 189:case 173:this._change(-1)}}}C(Sc,{name:"ZoomControl",zoomStep:1}),Cr(Sc,["change"]);let Zf=Math,Kf=Zf.max,qf=Zf.min;class Ke extends I.A{constructor(t,e){super();let i=rt.create(t),s=rt.create(e);i.lng+180>s.lng+180&&i.lat+90<s.lat+90?(this.se=i,this.nw=s):(this.se=s,this.nw=i)}contains(t){let e=this.nw,i=this.se,s=O(t.lng,t[1]),n=O(t.lat,t[0]);return t&&s+180>=e.lng+180&&s+180<=i.lng+180&&n+90>=i.lat+90&&n+90<=e.lat+90}center(){let t=this.nw,e=this.se;return new rt(t.lat+(e.lat-t.lat)/2,t.lng+(e.lng-t.lng)/2)}containsAny(t){let e=!1;for(let i=0;i<t.length;i++)e=e||this.contains(t[i]);return e}include(t){let e=this.nw,i=this.se,s=O(t.lng,t[1]),n=O(t.lat,t[0]);e.lng=qf(e.lng,s),e.lat=Kf(e.lat,n),i.lng=Kf(i.lng,s),i.lat=qf(i.lat,n)}includeAll(t){for(let e=0;e<t.length;e++)this.include(t[e])}edges(){let t=this.nw,e=this.se;return{nw:this.nw,ne:new rt(t.lat,e.lng),se:this.se,sw:new rt(e.lat,t.lng)}}toArray(){let t=this.nw,e=this.se;return[t,new rt(t.lat,e.lng),e,new rt(e.lat,t.lng)]}overlaps(t){return this.containsAny(t.toArray())||t.containsAny(this.toArray())}static create(t,e){return t instanceof Ke?t:t&&e?new Ke(t,e):t&&4===t.length&&!e?new Ke([t[0],t[1]],[t[2],t[3]]):void 0}static get World(){return new Ke([90,-180],[-90,180])}}const Jf="centerChange";class tm extends I.A{constructor(t,e){super(),this.widgetService=t,this.options=x({},this.options,e),this.offset={x:0,y:0}}show(t,e){this.location!==e.location&&(this.anchor=t,this.location=e.location,this.widgetService.notify("showTooltip",Object.assign({anchor:this.anchor},e)),this.visible=!0)}hide(){this.widgetService&&this.widgetService.notify("hideTooltip"),this.visible=!1,this.location=null}get anchor(){return this._anchor}set anchor(t){const e=this.widgetService.widget._toDocumentCoordinates({x:t.left-this.offset.x,y:t.top-this.offset.y});this._anchor={left:e.left,top:e.top}}destroy(){this.widgetService=null}}C(tm,{border:{width:1},opacity:1});class Tc extends I.A{constructor(t,e){super(),this.support=tn(),this._initOptions(e),this.map=t;let i=document.createElement("div");gt(i,"k-layer"),i.style.zIndex=this.options.zIndex,i.style.opacity=this.options.opacity,this.element=i,t.scrollElement.appendChild(this.element),this._beforeReset=this._beforeReset.bind(this),this._reset=this._reset.bind(this),this._resize=this._resize.bind(this),this._panEnd=this._panEnd.bind(this),this._activate(),this._updateAttribution()}destroy(){this._deactivate()}_initOptions(t){this.options=x({},this.options,t)}show(){this.reset(),this._activate(),this._applyExtent(!0)}hide(){this._deactivate(),this._setVisibility(!1)}reset(){this._beforeReset(),this._reset()}_reset(){this._applyExtent()}_beforeReset(){}_resize(){}_panEnd(){this._applyExtent()}_applyExtent(){let t=this.options,e=this.map.zoom(),i=!_(t.minZoom)||e>=t.minZoom,s=!_(t.maxZoom)||e<=t.maxZoom,n=Ke.create(t.extent),r=!n||n.overlaps(this.map.extent());this._setVisibility(i&&s&&r)}_setVisibility(t){this.element.style.display=t?"":"none"}_activate(){let t=this.map;this._deactivate(),t.bind("beforeReset",this._beforeReset),t.bind("reset",this._reset),t.bind("resize",this._resize),t.bind("panEnd",this._panEnd)}_deactivate(){let t=this.map;t.unbind("beforeReset",this._beforeReset),t.unbind("reset",this._reset),t.unbind("resize",this._resize),t.unbind("panEnd",this._panEnd)}_updateAttribution(){const t=this.map.attribution;t&&t.add(this.options.attribution)}_readData(){return this.options.data||[]}_hasData(){return this._data&&this._data.length>0}_layerIndex(){return(this.map.layers||[]).indexOf(this)}}let _i=Math,Mc=j.A;function em(o){return lt(o)?o:fo.compile(o)}function im(o){let t=o;return"string"!=typeof o&&(t+="px"),t}class sm extends Tc{constructor(t,e){super(t,e),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));let i=this._viewType();this._view=new i(this.element,this.options)}destroy(){super.destroy(),this._view.destroy(),this._view=null}_beforeReset(){let t=this.map,e=t.locationToLayer(t.extent().nw).round();this._view.viewOrigin(e)}_reset(){super._reset(),this._updateView(),this._view.reset()}_viewType(){return EA}_activate(){super._activate(),this.support.mobileOS||(this._pan||(this._pan=(0,Vl.A)(this._render.bind(this),100)),this.map.bind("pan",this._pan))}_deactivate(){super._deactivate(),this._pan&&this.map.unbind("pan",this._pan)}_updateView(){let t=this._view,e=this.map,i=e.extent(),s={nw:e.locationToLayer(i.nw).round(),se:e.locationToLayer(i.se).round()};t.center(e.locationToLayer(e.center())),t.extent(s),t.zoom(e.zoom())}_resize(){this._render()}_panEnd(t){super._panEnd(t),this._render()}_render(){this._updateView(),this._view.render()}}C(sm,{tileSize:256,subdomains:["a","b","c"],urlTemplate:"",zIndex:1});class EA extends I.A{constructor(t,e){super(),this.element=t,this._initOptions(e),this.pool=new om}_initOptions(t){this.options=x({},this.options,t)}center(t){this._center=t}extent(t){this._extent=t}viewOrigin(t){this._viewOrigin=t}zoom(t){this._zoom=t}pointToTileIndex(t){return new Mc(_i.floor(t.x/this.options.tileSize),_i.floor(t.y/this.options.tileSize))}tileCount(){let t=this.size(),e=this.pointToTileIndex(this._extent.nw),i=this._extent.nw,s=this.indexToPoint(e).translate(-i.x,-i.y);return{x:_i.ceil((_i.abs(s.x)+t.width)/this.options.tileSize),y:_i.ceil((_i.abs(s.y)+t.height)/this.options.tileSize)}}size(){let t=this._extent.nw,i=this._extent.se.clone().translate(-t.x,-t.y);return{width:i.x,height:i.y}}indexToPoint(t){return new Mc(t.x*this.options.tileSize,t.y*this.options.tileSize)}subdomainText(){let t=this.options.subdomains;return t[this.subdomainIndex++%t.length]}destroy(){Un(this.element),this.pool.empty()}reset(){this.pool.reset(),this.subdomainIndex=0,this.render()}render(){let i,s,n,t=this.tileCount(),e=this.pointToTileIndex(this._extent.nw);for(s=0;s<t.x;s++)for(n=0;n<t.y;n++)i=this.createTile({x:e.x+s,y:e.y+n}),i.visible||i.show()}createTile(t){let e=this.tileOptions(t),i=this.pool.get(this._center,e);return i.element.parentNode||this.element.append(i.element),i}tileOptions(t){let e=this.wrapIndex(t),i=this.indexToPoint(t),s=this._viewOrigin,n=i.clone().translate(-s.x,-s.y);return{index:e,currentIndex:t,point:i,offset:(o=n,new Mc(A(o.x),A(o.y))),zoom:this._zoom,size:this.options.tileSize,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate};var o}wrapIndex(t){let e=_i.pow(2,this._zoom);return{x:this.wrapValue(t.x,e),y:R(t.y,0,e-1)}}wrapValue(t,e){let i=_i.abs(t)%e,s=t;return s=t>=0?i:e-(0===i?e:i),s}}class nm extends I.A{constructor(t,e){super(),this.id=t,this.visible=!0,this._initOptions(e),this.createElement(),this.show()}destroy(){const t=this.element,e=t?t.parentNode:null;t&&(e&&e.removeChild(t),this.element=null)}_initOptions(t){this.options=x({},this.options,t)}createElement(){let t=document.createElement("img");const e=this.options.size+"px";t.setAttribute("alt",""),t.style.position="absolute",t.style.display="block",t.style.width=t.style.maxWidth=e,t.style.height=t.style.maxHeight=e,this.element=t}show(){let t=this.element;t.style.top=im(this.options.offset.y),t.style.left=im(this.options.offset.x);let e=this.url();e&&t.setAttribute("src",e),t.style.visibility="visible",this.visible=!0}hide(){this.element.style.visibility="hidden",this.visible=!1}url(){return em(this.options.urlTemplate)(this.urlOptions())}errorUrl(){return em(this.options.errorUrlTemplate)(this.urlOptions())}urlOptions(){let t=this.options;return{zoom:t.zoom,subdomain:t.subdomain,z:t.zoom,x:t.index.x,y:t.index.y,s:t.subdomain,quadkey:t.quadkey,q:t.quadkey,culture:t.culture,c:t.culture}}}C(nm,{urlTemplate:"",errorUrlTemplate:""});class om extends I.A{constructor(){super(),this._items=[]}get(t,e){return this._items.length>=this.options.maxSize&&this._remove(t),this._create(e)}empty(){let t=this._items;for(let e=0;e<t.length;e++)t[e].destroy();this._items=[]}reset(){let t=this._items;for(let e=0;e<t.length;e++)t[e].hide()}_create(t){let i,e=this._items,s=Xv(t.point.toString()+t.offset.toString()+t.zoom+t.urlTemplate);for(let n=0;n<e.length;n++)if(e[n].id===s){i=e[n];break}return i?i.show():(i=new nm(s,t),this._items.push(i)),i}_remove(t){let e=this._items,i=-1,s=-1;for(let n=0;n<e.length;n++){let r=e[n].options.point.distanceTo(t);r>i&&!e[n].visible&&(s=n,i=r)}-1!==s&&(e[s].destroy(),e.splice(s,1))}}C(om,{maxSize:100});const Gi=Object.assign,jn="change";class PA extends ne{constructor(t,e){super();let i=this,s=t[0]||t;i.capture=!1,s.addEventListener?(ss.down.split(" ").forEach(function(n){s.addEventListener(n,yt(i._press,i),!0)}),ss.up.split(" ").forEach(function(n){s.addEventListener(n,yt(i._release,i),!0)})):(ss.down.split(" ").forEach(function(n){s.attachEvent(n,yt(i._press,i))}),ss.up.split(" ").forEach(function(n){s.attachEvent(n,yt(i._release,i))})),i.bind(["press","release"],e||{})}captureNext(){this.capture=!0}cancelCapture(){this.capture=!1}_press(t){this.trigger("press"),this.capture&&t.preventDefault()}_release(t){let e=this;e.trigger("release"),e.capture&&(t.preventDefault(),e.cancelCapture())}}class rm extends ne{constructor(t){super();let e=this;e.forcedEnabled=!1,Gi(e,t),e.scale=1,e.horizontal?(e.measure="offsetWidth",e.scrollSize="scrollWidth",e.axis="x"):(e.measure="offsetHeight",e.scrollSize="scrollHeight",e.axis="y")}makeVirtual(){Gi(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})}virtualSize(t,e){(this._virtualMin!==t||this._virtualMax!==e)&&(this._virtualMin=t,this._virtualMax=e,this.update())}outOfBounds(t){return t>this.max||t<this.min}forceEnabled(){this.forcedEnabled=!0}getSize(){return this.container[this.measure]}getTotal(){return this.element[this.scrollSize]}rescale(t){this.scale=t}update(t){let e=this,i=e.virtual?e._virtualMax:e.getTotal(),s=i*e.scale,n=e.getSize();0===i&&!e.forcedEnabled||(e.max=e.virtual?-e._virtualMin:0,e.size=n,e.total=s,e.min=Math.min(e.max,n-s),e.minScale=n/i,e.centerOffset=(s-n)/2,e.enabled=e.forcedEnabled||s>n,t||e.trigger(jn,e))}}class DA extends ne{constructor(t){super();let e=this;e.x=new rm(Gi({horizontal:!0},t)),e.y=new rm(Gi({horizontal:!1},t)),e.container=t.container,e.forcedMinScale=t.minScale,e.maxScale=t.maxScale||100,e.bind(jn,t)}rescale(t){this.x.rescale(t),this.y.rescale(t),this.refresh()}centerCoordinates(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}}refresh(){let t=this;t.x.update(),t.y.update(),t.enabled=t.x.enabled||t.y.enabled,t.minScale=t.forcedMinScale||Math.min(t.x.minScale,t.y.minScale),t.fitScale=Math.max(t.x.minScale,t.y.minScale),t.trigger(jn)}}class am extends ne{constructor(t){super(),Gi(this,t)}outOfBounds(){return this.dimension.outOfBounds(this.movable[this.axis])}dragMove(t){let e=this,i=e.dimension,s=e.axis,n=e.movable,r=n[s]+t;if(!i.enabled)return;let l=t;(r<i.min&&t<0||r>i.max&&t>0)&&(l*=e.resistance),n.translateAxis(s,l),e.trigger(jn,e)}}class IA extends I.A{constructor(t){super();let i,s,n,r,e=this;Gi(e,{elastic:!0},t),n=e.elastic?.5:0,r=e.movable,e.x=i=new am({axis:"x",dimension:e.dimensions.x,resistance:n,movable:r}),e.y=s=new am({axis:"y",dimension:e.dimensions.y,resistance:n,movable:r}),e.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart(l){e.gesture=l,e.offset=ts(e.dimensions.container)},press(l){const c=l.event.target.closest("a");c&&c.matches("[data-navigate-on-press=true]")&&l.sender.cancel()},gesturechange(l){let f,c=e.gesture,h=c.center,d=l.center,u=l.distance/c.distance,g=e.dimensions.maxScale;r.scale<=e.dimensions.minScale&&u<1&&(u+=.8*(1-u)),r.scale*u>=g&&(u=g/r.scale);let m=r.x+e.offset.left,v=r.y+e.offset.top;f={x:(m-h.x)*u+d.x-m,y:(v-h.y)*u+d.y-v},r.scaleWith(u),i.dragMove(f.x),s.dragMove(f.y),e.dimensions.rescale(r.scale),e.gesture=l,l.preventDefault()},move(l){l.event.target.tagName.match(/textarea|input/i)||(i.dimension.enabled||s.dimension.enabled?(i.dragMove(l.x.delta),s.dragMove(l.y.delta),l.preventDefault()):l.touch.skip())},end(l){l.preventDefault()}})}}let lm=function(o,t,e){return"translate3d("+o+"px,"+t+"px,0) scale("+e+")"};class Ec extends ne{constructor(t){super();let e=this;e.element=t,e.element.style.transformOrigin="left top",e.x=0,e.y=0,e.scale=1;const i=lm(e.x,e.y,e.scale);e.element.style.transform=i,e._saveCoordinates(i)}translateAxis(t,e){this[t]+=e,this.refresh()}scaleTo(t){this.scale=t,this.refresh()}scaleWith(t){this.scale*=t,this.refresh()}translate(t){this.x+=t.x,this.y+=t.y,this.refresh()}moveAxis(t,e){this[t]=e,this.refresh()}moveTo(t){Gi(this,t),this.refresh()}refresh(){let s,t=this,e=t.x,i=t.y;t.round&&(e=Math.round(e),i=Math.round(i)),s=lm(e,i,t.scale),s!==t.coordinates&&(t.element.style.transform=s,t._saveCoordinates(s),t.trigger(jn))}_saveCoordinates(t){this.coordinates=t}}const Pc=et.A;class Dc extends Tc{constructor(t,e){super(t,e),this._pan=yt(this._pan,this),this.surface=rs.A.create(this.element,{width:t.scrollElement.clientWidth,height:t.scrollElement.clientHeight}),this._initRoot(),this.movable=new Ec(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave),this.surface.bind("mouseenter",this._mouseenter.bind(this))}destroy(){super.destroy(),this.surface.destroy()}_reset(){super._reset(),this._translateSurface(),this._data=this._readData(),this._hasData()&&this._load(this._data)}_initRoot(){this._root=new Pc,this.surface.draw(this._root)}_beforeReset(){this.surface.clear(),this._initRoot()}_resize(){this.surface.size(this.map.size())}_readData(){const t=super._readData();return"FeatureCollection"===t.type?t.features:"GeometryCollection"===t.type?t.geometries:t}_load(t){this._data=t,this._clearMarkers(),this._loader||(this._loader=new RA(this.map,this.options.style,this));let e=new Pc;for(let i=0;i<t.length;i++){let s=this._loader.parse(t[i]);s&&e.append(s)}this._root.clear(),this._root.append(e)}shapeCreated(t){let e=!1;return t instanceof _e.A&&this.map.options.renderPointsAsMarkers&&(e=_(this._createMarker(t))),e||(e=this.map.trigger("shapeCreated",{layer:this,shape:t})),e}featureCreated(t){t.layer=this,this.map.trigger("shapeFeatureCreated",t)}_createMarker(t){let e=this.map.markers.bind({location:t.location},t.dataItem);return e&&this._markers.push(e),e}_clearMarkers(){for(let t=0;t<this._markers.length;t++)this.map.markers.remove(this._markers[t]);this._markers=[]}_pan(){this._panning||(this._panning=!0,this.surface.suspendTracking())}_panEnd(t){super._panEnd(t),this._translateSurface(),this.surface.resumeTracking(),this._panning=!1}_translateSurface(){let t=this.map,e=t.locationToView(t.extent().nw);this.surface.translate&&(this.surface.translate(e),this.movable.moveTo({x:e.x,y:e.y}))}_eventArgs(t){return{layer:this,layerIndex:this._layerIndex(),shape:t.element,shapeIndex:(this._data||[]).indexOf(t.element.dataItem),originalEvent:t.originalEvent}}_handler(t){return e=>{e.element&&this.map.trigger(t,this._eventArgs(e))}}_mouseenter(t){if(!t.element)return;this.map.trigger("shapeMouseEnter",this._eventArgs(t));const e=t.element,i=this._tooltipAnchor(t);this.map._tooltip.show(i,this._tooltipContext(e))}_tooltipContext(t){return{type:"shape",layerIndex:this._layerIndex(),className:"k-map-shape-tooltip",dataItem:t.dataItem,location:t.location}}_tooltipAnchor(t){const e=this.map.eventOffset(t.originalEvent);return{top:e.y,left:e.x}}_activate(){super._activate(),this._panHandler=yt(this._pan,this),this.map.bind("pan",this.panHandler)}_deactivate(){super._deactivate(),this.map.unbind("pan",this._panHandler)}}C(Dc,{autoBind:!0,zIndex:100});class RA extends I.A{constructor(t,e,i){super(),this.observer=i,this.locator=t,this.style=e}parse(t){let e=new Pc,i=!0;return"Feature"===t.type?(i=!1,this._loadGeometryTo(e,t.geometry,t),this._featureCreated(e,t)):this._loadGeometryTo(e,t,t),i&&e.children.length<2&&(e=e.children[0]),e}_shapeCreated(t){let e=!1;return this.observer&&this.observer.shapeCreated&&(e=this.observer.shapeCreated(t)),e}_featureCreated(t,e){this.observer&&this.observer.featureCreated&&this.observer.featureCreated({group:t,dataItem:e,properties:e.properties})}_loadGeometryTo(t,e,i){let n,r,s=e.coordinates;switch(e.type){case"LineString":r=this._loadPolygon(t,[s],i),this._setLineFill(r);break;case"MultiLineString":for(n=0;n<s.length;n++)r=this._loadPolygon(t,[s[n]],i),this._setLineFill(r);break;case"Polygon":this._loadPolygon(t,s,i);break;case"MultiPolygon":for(n=0;n<s.length;n++)this._loadPolygon(t,s[n],i);break;case"Point":this._loadPoint(t,s,i);break;case"MultiPoint":for(n=0;n<s.length;n++)this._loadPoint(t,s[n],i)}}_setLineFill(t){let e=t.segments;(e.length<4||!e[0].anchor().equals(mt(e).anchor()))&&(t.options.fill=null)}_loadShape(t,e){return this._shapeCreated(e)||t.append(e),e}_loadPolygon(t,e,i){let s=this._buildPolygon(e);return s.dataItem=i,s.location=this.locator.viewToLocation(s.bbox().center()),this._loadShape(t,s)}_buildPolygon(t){let i=new(t.length>1?M.P:M.w)(this.style);for(let s=0;s<t.length;s++)for(let n=0;n<t[s].length;n++){let r=this.locator.locationToView(rt.fromLngLat(t[s][n]));0===n?i.moveTo(r.x,r.y):i.lineTo(r.x,r.y)}return i}_loadPoint(t,e,i){let s=rt.fromLngLat(e),n=this.locator.locationToView(s),r=new oe.A(n,10),l=new _e.A(r,this.style);return l.dataItem=i,l.location=s,this._loadShape(t,l)}}class cm extends Dc{_readData(){return this.options.data||[]}_load(t){if(this._data=t,this.surface.clear(),0===t.length)return;let e=this.options,i=Pe(e.valueField),s=t.slice(0);s.sort(function(c,h){return i(h)-i(c)});let r,n=this._scaleType(),l=Pe(this.options.locationField);for(let c=0;c<s.length;c++){let h=s[c],d=l(h),u=i(h);if(_(d)&&_(u)){r||(r=new n([0,u],[e.minSize,e.maxSize])),d=rt.create(d);let p=this.map.locationToView(d),g=r.map(u),f=this._createSymbol({center:p,size:g,style:e.style,dataItem:h,location:d});f.dataItem=h,f.location=d,f.value=u,this._drawSymbol(f)}}}_scaleType(){let t=this.options.scale;return lt(t)?t:OA[t]}_createSymbol(t){let e=this.options.symbol;return lt(e)||(e=BA[e]),e(t)}_drawSymbol(t){this.map.trigger("shapeCreated",{layer:this,shape:t})||this.surface.draw(t)}_tooltipContext(t){return{type:"bubble",layerIndex:this._layerIndex(),className:"k-map-bubble-tooltip",dataItem:t.dataItem,location:t.location,value:t.value}}_tooltipAnchor(t){const i=t.element.bbox().center();return{top:i.y,left:i.x}}}C(cm,{locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle",zIndex:200});let OA={sqrt:class LA extends I.A{constructor(t,e){super(),this._domain=t,this._range=e;let i=Math.sqrt(t[1])-Math.sqrt(t[0]);this._ratio=(e[1]-e[0])/i}map(t){let e=(Math.sqrt(t)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+e}}},BA={circle:function(o){let t=new oe.A(o.center,o.size/2);return new _e.A(t,o.style)},square:function(o){let t=new M.w(o.style),e=o.size/2,i=o.center;return t.moveTo(i.x-e,i.y-e).lineTo(i.x+e,i.y-e).lineTo(i.x+e,i.y+e).lineTo(i.x-e,i.y+e).close(),t}};const dm="mouseenter",um="mouseleave",VA=Object.assign,pm="k-marker",Ic="."+pm;class Rc extends Tc{constructor(t,e){super(t,e),this._markerClickHandler=yt(this._markerClick,this),Gt(this.element,"click",Ic,this._markerClickHandler),this.items=[],this._load(this._readData())}destroy(){super.destroy(),Kt(this.element,"click",this._markerClickHandler),this.clear()}add(t){if(!Pt(t))return this._addOne(t);for(let e=0;e<t.length;e++)this._addOne(t[e])}remove(t){t.destroy();let e=(this.items||[]).indexOf(t);e>-1&&this.items.splice(e,1)}clear(){for(let t=0;t<this.items.length;t++)this.items[t].destroy();this.items=[]}update(t){let e=t.location();e&&(t.showAt(this.map.locationToView(e)),this.map.trigger("markerActivate",{marker:t,layer:this}))}_reset(){super._reset();let t=this.items;for(let e=0;e<t.length;e++)this.update(t[e])}bind(t,e){let i=Gn.create(t,this.options);if(i.dataItem=e,!this.map.trigger("markerCreated",{marker:i,layer:this}))return this.add(i),i}_addOne(t){let e=Gn.create(t,this.options);return e.addTo(this),e}_readData(){return this.options.data||[]}_load(t){this._data=t,this.clear();let e=Pe(this.options.locationField),i=Pe(this.options.titleField);for(let s=0;s<t.length;s++){let n=t[s];this.bind({location:e(n),title:i(n)},n)}}_markerClick(t){const e=t.currentTarget._kendoNode;let i={layer:this,layerIndex:this._layerIndex(),marker:e,markerIndex:(this.items||[]).indexOf(e),originalEvent:t};this.map.trigger("markerClick",i)}_markerMouseEnter(t){const e=this._createMarkerEventArgs(t);this.map.trigger("markerMouseEnter",e)}_markerMouseLeave(t){const e=this._createMarkerEventArgs(t);this.map.trigger("markerMouseLeave",e)}_createMarkerEventArgs(t){const e=t.marker;return VA({},{layer:this,layerIndex:this._layerIndex(),marker:e,markerIndex:(this.items||[]).indexOf(e)},t)}}C(Rc,{zIndex:1e3,autoBind:!0,locationField:"location",titleField:"title",template:""});class Gn extends I.A{constructor(t){super(),this.options=t||{}}destroy(){this.layer=null,this.unbindEvents(),this.hide()}addTo(t){this.layer=t.markers||t,this.layer.items.push(this),this.layer.update(this)}location(t){return t?(this.options.location=rt.create(t).toArray(),this.layer&&this.layer.update(this),this):rt.create(this.options.location)}showAt(t){this.render(),this._anchor={left:Math.round(t.x),top:Math.round(t.y)},this.element.style.left=Hf(this._anchor.left),this.element.style.top=Hf(this._anchor.top)}hide(){this.element&&(this.element.remove(),this.element=null)}bindEvents(){this.element&&(this._mouseEnterHandler=yt(this._mouseEnter,this),Gt(this.element,dm,Ic,this._mouseEnterHandler),this._mouseLeaveHandler=yt(this._mouseLeave,this),Gt(this.element,um,Ic,this._mouseLeaveHandler))}unbindEvents(){this.element&&(Kt(this.element,dm,this._mouseEnterHandler),Kt(this.element,um,this._mouseLeaveHandler))}render(){if(!this.element){let t=this.options,e=this.layer,i=document.createElement("span");if(gt(i,pm),this.options.template){const r=this._compileTemplate(this.options.template)(this.dataItem),l=ji(r);i.appendChild(l)}else if(t.svgIcon)es(i,{icon:t.svgIcon,iconClass:"k-icon-xxl",svgIcons:this.options.icons.svgIcons,type:"svg"});else{let n={icon:"map-marker",iconClass:"k-icon-xxl",svgIcons:this.options.icons.svgIcons,type:this.options.icons.type};t.shape?"pinTarget"===t.shape?(n.icon="map-marker-target",es(i,n)):"pin"===t.shape?es(i,n):gt(i,"k-icon k-icon-xxl k-i-marker-"+Gf(t.shape||"pin")):es(i,n)}t.title&&i.setAttribute("title",t.title);const s=t.attributes||{};Object.keys(s).forEach(function(n){i.setAttribute(n,s[n])}),i._kendoNode=this,i.style.zIndex=t.zIndex,this.element=i,e&&e.element.appendChild(this.element),this.bindEvents()}}_mouseEnter(t){const e=this._createEventArgs(t);this.layer._markerMouseEnter(e),this.layer.map._tooltip.show({top:this._anchor.top-this.element.offsetHeight,left:this._anchor.left},this._tooltipContext())}_tooltipContext(){return{type:"marker",layerIndex:this.layer._layerIndex(),className:"k-map-marker-tooltip",dataItem:this.dataItem,title:this.options.title,location:this.location()}}_mouseLeave(t){const e=this._createEventArgs(t);this.layer._markerMouseLeave(e)}_createEventArgs(t){return{marker:this,originalEvent:t}}_compileTemplate(t){return fo.compile(t,{paramName:"dataItem",useWithBlock:!1})}static create(t,e){return t instanceof Gn?t:new Gn(x({},e,t))}}const FA=Object.assign;function gm(o){window.requestAnimationFrame(o)}class Ar extends I.A{constructor(){super();let t=this;t._tickProxy=yt(t._tick,t),t._started=!1}tick(){}done(){}onEnd(){}onCancel(){}start(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,gm(this._tickProxy)))}enabled(){return!0}cancel(){this._started=!1,this.onCancel()}_tick(){let t=this;t._started&&(t.tick(),t.done()?(t._started=!1,t.onEnd()):gm(t._tickProxy))}}class fm extends Ar{constructor(t){super(),FA(this,t)}done(){return this.timePassed()>=this.duration}timePassed(){return Math.min(this.duration,ni()-this.startDate)}moveTo(t){let e=this;e.initial=e.movable[e.axis],e.delta=t.location-e.initial,e.duration="number"==typeof t.duration?t.duration:300,e.tick=e._easeProxy(t.ease),e.startDate=ni(),e.start()}_easeProxy(t){let e=this;return function(){e.movable.moveAxis(e.axis,t(e.timePassed(),e.initial,e.delta,e.duration))}}static easeOutExpo(t,e,i,s){return t===s?e+i:i*(1-Math.pow(2,-10*t/s))+e}}let Is=Object.assign,Hi=Math.abs,Sr="change";class WA extends Ar{constructor(t){super(t);let e=this;Is(e,t),e.userEvents.bind("gestureend",e.start.bind(this)),e.tapCapture.bind("press",e.cancel.bind(this))}enabled(){return this.movable.scale<this.dimensions.minScale}done(){return this.dimensions.minScale-this.movable.scale<.01}tick(){let t=this.movable;t.scaleWith(1.1),this.dimensions.rescale(t.scale)}onEnd(){let t=this.movable;t.scaleTo(this.dimensions.minScale),this.dimensions.rescale(t.scale)}}class $A extends Ar{constructor(t){super();let e=this;Is(e,t,{transition:new fm({axis:t.axis,movable:t.movable,onEnd(){e._end()}})}),e.tapCapture.bind("press",function(){e.cancel()}),e.userEvents.bind("end",yt(e.start,e)),e.userEvents.bind("gestureend",yt(e.start,e)),e.userEvents.bind("tap",yt(e.onEnd,e))}onCancel(){this.transition.cancel()}freeze(t){this.cancel(),this._moveTo(t)}onEnd(){let t=this;t.paneAxis.outOfBounds()?t._snapBack():t._end()}done(){return Hi(this.velocity)<1}start(t){let i,e=this;e.dimension.enabled&&(e.paneAxis.outOfBounds()?e.transition._started?(e.transition.cancel(),e.velocity=Math.min(t.touch[e.axis].velocity*e.velocityMultiplier,55),super.start()):e._snapBack():(i=2===t.touch.id?0:t.touch[e.axis].velocity,e.velocity=Math.max(Math.min(i*e.velocityMultiplier,55),-55),e.tapCapture.captureNext(),super.start()))}tick(){let t=this,e=t.dimension,i=t.paneAxis.outOfBounds()?.5:t.friction,s=t.velocity*=i,n=t.movable[t.axis]+s;!t.elastic&&e.outOfBounds(n)&&(n=Math.max(Math.min(n,e.max),e.min),t.velocity=0),t.movable.moveAxis(t.axis,n)}_end(){this.tapCapture.cancelCapture(),this.end()}_snapBack(){let t=this,e=t.dimension;t._moveTo(t.movable[t.axis]>e.max?e.max:e.min)}_moveTo(t){this.transition.moveTo({location:t,duration:500,ease:fm.easeOutExpo})}}class QA extends Ar{constructor(t){super(t),Is(this,t,{origin:{},destination:{},offset:{}})}tick(){this._updateCoordinates(),this.moveTo(this.origin)}done(){return Hi(this.offset.y)<5&&Hi(this.offset.x)<5}onEnd(){this.moveTo(this.destination),this.callback&&this.callback.call()}setCoordinates(t,e){this.offset={},this.origin=t,this.destination=e}setCallback(t){t&&lt(t)?this.callback=t:t=void 0}_updateCoordinates(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}}class ZA extends I.A{constructor(t){super();let e=this,i="x"===t.axis;const n=ji('<div class="km-touch-scrollbar km-'+(i?"horizontal":"vertical")+'-scrollbar" />');Is(e,t,{element:n,elementSize:0,movable:new Ec(n),scrollMovable:t.movable,alwaysVisible:t.alwaysVisible,size:i?"width":"height"}),e.scrollMovable.bind(Sr,e.refresh.bind(e)),e.container.appendChild(n),t.alwaysVisible&&e.show()}refresh(){let t=this,e=t.axis,i=t.dimension,s=i.size,r=s/i.total,l=Math.round(-t.scrollMovable[e]*r),c=Math.round(s*r);this.element.style.display=r>=1?"none":"",l+c>s?c=s-l:l<0&&(c+=l,l=0),t.elementSize!==c&&(t.element.style[t.size]=c+"px",t.elementSize=c),t.movable.moveAxis(e,l)}show(){this.element.style.opacity=.7,this.element.style.visibility="visible"}hide(){this.alwaysVisible||(this.element.style.opacity=0)}}class Oc extends ne{constructor(t,e){super();let i=this;this.element=t,this._initOptions(e);const s=(o=>{const{mobileOS:t}=tn();return t.ios||t.android})(navigator);i._native=i.options.useNative&&s;const n=ji('<div class="km-scroll-header"/>');if(i._native)return gt(t,"km-native-scroller"),jf(n,t),void Is(i,{scrollElement:t,fixedContainer:t.children[0]});t.style.overflow="hidden",gt(t,"km-scroll-wrapper"),((o,t)=>{for(o.appendChild(t);o.firstChild!==t;)t.appendChild(o.firstChild)})(t,ji('<div class="km-scroll-container"/>')),jf(n,t);let l=t.children[1],c=new PA(t),h=new Ec(l),d=new DA({element:l,container:t,forcedEnabled:i.options.zoom}),u=this.options.avoidScrolling,p=new Ai(t,{touchAction:"none",allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:i.options.zoom,supportDoubleTap:i.options.supportDoubleTap,start(v){d.refresh();let y=Hi(v.x.velocity),w=Hi(v.y.velocity),E=2*y>=w,F=2*w>=y;!i.fixedContainer.contains(v.event.target)&&!u(v)&&i.enabled&&(d.x.enabled&&E||d.y.enabled&&F)?p.capture():p.cancel()}}),g=new IA({movable:h,dimensions:d,userEvents:p,elastic:i.options.elastic}),f=new WA({movable:h,dimensions:d,userEvents:p,tapCapture:c}),m=new QA({moveTo(v){i.scrollTo(v.x,v.y)}});h.bind(Sr,function(){i.scrollTop=-h.y,i.scrollLeft=-h.x,i.trigger("scroll",{scrollTop:i.scrollTop,scrollLeft:i.scrollLeft})}),i.options.mousewheelScrolling&&(this._wheelScrollHandler=this._wheelScroll.bind(this),Gt(t,"wheel",this._wheelScrollHandler)),Is(i,{movable:h,dimensions:d,zoomSnapBack:f,animatedScroller:m,userEvents:p,pane:g,tapCapture:c,pulled:!1,enabled:!0,scrollElement:l,scrollTop:0,scrollLeft:0,fixedContainer:t.children[0]}),i._initAxis("x"),i._initAxis("y"),i._wheelEnd=function(){i._wheel=!1,i.userEvents.end(0,i._wheelY)},d.refresh(),i.options.pullToRefresh&&i._initPullToRefresh()}_initOptions(t){this.options=x({},this.options,t)}_wheelScroll(t){if(t.ctrlKey)return;this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);let e=(o=>{const t=o.wheelDeltaY;let e;return o.wheelDelta?(void 0===t||t)&&(e=o.wheelDelta):o.detail&&o.axis===o.VERTICAL_AXIS&&(e=10*-o.detail),e})(t);e&&(this._wheelY+=e,this.userEvents.move(0,this._wheelY)),t.preventDefault()}makeVirtual(){this.dimensions.y.makeVirtual()}virtualSize(t,e){this.dimensions.y.virtualSize(t,e)}height(){return this.dimensions.y.size}scrollHeight(){return this.scrollElement.scrollHeight}scrollWidth(){return this.scrollElement.scrollWidth}_resize(){this._native||this.contentResized()}setOptions(t){this._initOptions(t),t.pullToRefresh&&this._initPullToRefresh()}reset(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))}contentResized(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)}zoomOut(){let t=this.dimensions;t.refresh(),this._scale(t.fitScale),this.movable.moveTo(t.centerCoordinates())}enable(){this.enabled=!0}disable(){this.enabled=!1}scrollTo(t,e){this._native?(this.scrollElement.scrollLeft(Hi(t)),this.scrollElement.scrollTop(Hi(e))):(this.dimensions.refresh(),this.movable.moveTo({x:t,y:e}))}animatedScrollTo(t,e,i){let s,n;this._native?this.scrollTo(t,e):(s={x:this.movable.x,y:this.movable.y},n={x:t,y:e},this.animatedScroller.setCoordinates(s,n),this.animatedScroller.setCallback(i),this.animatedScroller.start())}pullHandled(){}destroy(){Kt(this.element,"wheel",this._wheelScrollHandler),this.userEvents&&this.userEvents.destroy()}_scale(t){this.dimensions.rescale(t),this.movable.scaleTo(t)}_initPullToRefresh(){}_dragEnd(){}_paneChange(){}_initAxis(t){let e=this,i=e.movable,s=e.dimensions[t],n=e.tapCapture,r=e.pane[t],l=new ZA({axis:t,movable:i,dimension:s,container:e.element,alwaysVisible:e.options.visibleScrollHints});s.bind(Sr,function(){l.refresh()}),r.bind(Sr,function(){l.show()}),e[t+"inertia"]=new $A({axis:t,paneAxis:r,movable:i,tapCapture:n,userEvents:e.userEvents,dimension:s,elastic:e.options.elastic,friction:e.options.friction||.96,velocityMultiplier:e.options.velocityMultiplier||10,end(){l.hide(),e.trigger("scrollEnd",{axis:t,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})}})}}C(Oc,{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:()=>!1,pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}}),Cr(Oc,["pull","scroll","resize"]);const qA=class KA{constructor(t,e={}){this.sender=e.sender||t,this.widget=t,this.rtl=!!e.rtl}notify(t,e){this.widget&&this.widget.trigger(t,e)}};let wi=Math,vm=wi.min,Bc=wi.pow,bm=j.A,Tr="marker",Mr="location";const nS={bubble:cm,shape:Dc,tile:sm,[Tr]:Rc};class _m extends ne{constructor(t,e={},i={},s={}){super(),this._init(t,e,i,s)}destroy(){this.scroller.destroy(),this._tooltip&&this._tooltip.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),Pt(this.markers)?this.markers.forEach(t=>{t.destroy()}):this.markers.destroy();for(let t=0;t<this.layers.length;t++)this.layers[t].destroy();Kt(this.element,"wheel",this._mousewheelHandler),super.destroy()}_init(t,e={},i={},s={}){this.support=tn(),this.context=s,this.initObserver(s),this.initServices(s),this._notifyObserver("init"),this._initOptions(e),this._setEvents(e),this.crs=new gA,this._initElement(t),this._viewOrigin=this._getOrigin(),this._tooltip=this._createTooltip(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset();const n=(0,Vl.A)(this._mousewheel.bind(this),50);this._mousewheelHandler=r=>{r.preventDefault(),n(r)},Gt(this.element,"wheel",this._mousewheelHandler)}_initOptions(t){this.options=x({},this.options,t)}_initElement(t){this.element=t,gt(t,"k-map"),t.style.position="relative",t.setAttribute("data-role","map"),Un(t);const e=ji("<div />");this.element.appendChild(e)}initServices(t={}){this.widgetService=new qA(this,t)}initObserver(t={}){this.observers=[],this.addObserver(t.observer)}addObserver(t){t&&this.observers.push(t)}removeObserver(t){const e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)}requiresHandlers(t){const e=this.observers;for(let i=0;i<e.length;i++)if(e[i].requiresHandlers(t))return!0}trigger(t,e={}){e.sender=this;const i=this.observers;let s=!1;for(let n=0;n<i.length;n++)i[n].trigger(t,e)&&(s=!0);return s||super.trigger(t,e),s}_notifyObserver(t,e={}){e.sender=this;const i=this.observers;let s=!1;for(let n=0;n<i.length;n++)i[n].trigger(t,e)&&(s=!0);return s}zoom(t){let i,e=this.options;if(_(t)){const s=wi.round(R(t,e.minZoom,e.maxZoom));e.zoom!==s&&(e.zoom=s,this.widgetService.notify("zoomChange",{zoom:e.zoom}),this._reset()),i=this}else i=e.zoom;return i}center(t){let e;if(t){const i=rt.create(t),s=rt.create(this.options.center);i.equals(s)||(this.options.center=i.toArray(),this.widgetService.notify(Jf,{center:this.options.center}),this._reset()),e=this}else e=rt.create(this.options.center);return e}extent(t){let e;return t?(this._setExtent(t),e=this):e=this._getExtent(),e}setOptions(t={}){const e=this.element;this.destroy(),Un(e),this._init(e,t,{},this.context),this._reset()}locationToLayer(t,e){let i=!this.options.wraparound;const s=rt.create(t);return this.crs.toPoint(s,this._layerSize(e),i)}layerToLocation(t,e){let i=!this.options.wraparound;const s=bm.create(t);return this.crs.toLocation(s,this._layerSize(e),i)}locationToView(t){const e=rt.create(t);let i=this.locationToLayer(this._viewOrigin);return this.locationToLayer(e).translateWith(i.scale(-1))}viewToLocation(t,e){const i=this.locationToLayer(this._getOrigin(),e),n=bm.create(t).clone().translateWith(i);return this.layerToLocation(n,e)}eventOffset(t){let e,i,s=ts(this.element);if(t.x&&t.x[Mr]||t.y&&t.y[Mr])e=t.x[Mr]-s.left,i=t.y[Mr]-s.top;else{let r=t.originalEvent||t;e=O(r.pageX,r.clientX)-s.left,i=O(r.pageY,r.clientY)-s.top}return new j.A(e,i)}eventToView(t){let e=this.eventOffset(t);return this.locationToView(this.viewToLocation(e))}eventToLayer(t){return this.locationToLayer(this.eventToLocation(t))}eventToLocation(t){let e=this.eventOffset(t);return this.viewToLocation(e)}viewSize(){let t=this.element,e=this._layerSize(),i=t.clientWidth;return this.options.wraparound||(i=vm(e,i)),{width:i,height:vm(e,t.clientHeight)}}exportVisual(){return this._reset(),!1}hideTooltip(){this._tooltip&&this._tooltip.hide()}_setOrigin(t,e){let s,i=this.viewSize();const n=this._origin=rt.create(t);return s=this.locationToLayer(n,e),s.x+=i.width/2,s.y+=i.height/2,this.options.center=this.layerToLocation(s,e).toArray(),this.widgetService.notify(Jf,{center:this.options.center}),this}_getOrigin(t){let i,e=this.viewSize();return(t||!this._origin)&&(i=this.locationToLayer(this.center()),i.x-=e.width/2,i.y-=e.height/2,this._origin=this.layerToLocation(i)),this._origin}_setExtent(t){let e=Ke.create(t),i=e.se.clone();this.options.wraparound&&i.lng<0&&t.nw.lng>0&&(i.lng=180+(180+i.lng));const s=new Ke(e.nw,i);this.center(s.center());let l,n=this.element.clientWidth,r=this.element.clientHeight;for(l=this.options.maxZoom;l>=this.options.minZoom;l--){let c=this.locationToLayer(s.nw,l),h=this.locationToLayer(s.se,l),d=wi.abs(h.x-c.x),u=wi.abs(h.y-c.y);if(d<=n&&u<=r)break}this.zoom(l)}_getExtent(){let t=this._getOrigin(),e=this.locationToLayer(t),i=this.viewSize();e.x+=i.width,e.y+=i.height;let s=this.layerToLocation(e);return new Ke(t,s)}_zoomAround(t,e){this._setOrigin(this.layerToLocation(t,e),e),this.zoom(e)}_initControls(){let t=this.options.controls;t.attribution&&this._createAttribution(t.attribution),this.support.mobileOS||(t.navigator&&this._createNavigator(t.navigator),t.zoom&&this._createZoomControl(t.zoom))}_createControlElement(t,e){let i=t.position||e,s="."+Xf(i).replace(" ","."),n=this.element.querySelector(".k-map-controls"+s)||[];if(0===n.length){let l=document.createElement("div");gt(l,"k-map-controls "+Xf(i)),n=l,this.element.appendChild(n)}let r=document.createElement("div");return n.appendChild(r),r}_createAttribution(t){let e=this._createControlElement(t,"bottomRight");this.attribution=new Yf(e,t)}_createNavigator(t){let e=this._createControlElement(t,"topLeft"),i=this.navigator=new Ac(e,x({},t,{icons:this.options.icons}));this._navigatorPan=this._navigatorPan.bind(this),i.bind("pan",this._navigatorPan),this._navigatorCenter=this._navigatorCenter.bind(this),i.bind("center",this._navigatorCenter)}_navigatorPan(t){let e=this.scroller,i=e.scrollLeft+t.x,s=e.scrollTop-t.y,n=this._virtualSize,l=this.element.clientHeight;i=R(i,n.x.min,n.x.max-this.element.clientWidth),s=R(s,n.y.min,n.y.max-l),this.scroller.one("scroll",yt(this._scrollEnd,this)),this.scroller.scrollTo(-i,-s)}_navigatorCenter(){this.center(this.options.center)}_createZoomControl(t){let e=this._createControlElement(t,"topLeft"),i=this.zoomControl=new Sc(e,t,this.options.icons);this._zoomControlChange=this._zoomControlChange.bind(this),i.bind("change",this._zoomControlChange)}_zoomControlChange(t){this.trigger("zoomStart",{originalEvent:t})||(this.zoom(this.zoom()+t.delta),this.trigger("zoomEnd",{originalEvent:t}))}_initScroller(){let i=this.scroller=new Oc(this.element.children[0],{friction:this.support.mobileOS?.93:.9,velocityMultiplier:5,zoom:!1!==this.options.zoomable,mousewheelScrolling:!1,supportDoubleTap:!0});i.bind("scroll",yt(this._scroll,this)),i.bind("scrollEnd",yt(this._scrollEnd,this)),i.userEvents.bind("gesturestart",yt(this._scaleStart,this)),i.userEvents.bind("gestureend",yt(this._scale,this)),i.userEvents.bind("doubleTap",yt(this._doubleTap,this)),i.userEvents.bind("tap",yt(this._tap,this)),this.scrollElement=i.scrollElement}_initLayers(){let t=this.options.layers,e=this.layers=[];for(let i=0;i<t.length;i++){const n=this._createLayer(t[i]);e.push(n)}}_createLayer(t){let e=t.type||"shape",i=this.options.layerDefaults[e],s=e===Tr?x({},this.options.markerDefaults,t,{icons:this.options.icons}):x({},i,t),r=new(0,nS[e])(this,s);return e===Tr&&(this.markers=r),r}_createTooltip(){return new tm(this.widgetService,this.options.tooltip)}_initMarkers(){(this.options.layers||[]).filter(e=>e&&e.type===Tr).length>0||(this.markers=new Rc(this,x({},this.options.markerDefaults,{icons:this.options.icons})),this.markers.add(this.options.markers))}_scroll(t){let e=this.locationToLayer(this._viewOrigin).round(),i=t.sender.movable,s=new j.A(i.x,i.y).scale(-1).scale(1/i.scale);e.x+=s.x,e.y+=s.y,this._scrollOffset=s,this._tooltip.offset=s,this.hideTooltip(),this._setOrigin(this.layerToLocation(e)),this.trigger("pan",{originalEvent:t,origin:this._getOrigin(),center:this.center()})}_scrollEnd(t){!this._scrollOffset||!this._panComplete()||(this._scrollOffset=null,this._panEndTimestamp=ni(),this.trigger("panEnd",{originalEvent:t,origin:this._getOrigin(),center:this.center()}))}_panComplete(){return ni()-(this._panEndTimestamp||0)>50}_scaleStart(t){if(this.trigger("zoomStart",{originalEvent:t})){let e=t.touches[1];e&&e.cancel()}}_scale(t){let i=this._scaleToZoom(this.scroller.movable.scale),s=new j.A(t.center.x,t.center.y),n=this.viewToLocation(s,i),l=this.locationToLayer(n,i).translate(-s.x,-s.y);this._zoomAround(l,i),this.trigger("zoomEnd",{originalEvent:t})}_scaleToZoom(t){let i=this._layerSize()*t/this.options.minSize,s=wi.log(i)/wi.log(2);return wi.round(s)}_reset(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.hideTooltip(),this.trigger("beforeReset"),this.trigger("reset")}_resetScroller(){let t=this.scroller,e=t.dimensions.x,i=t.dimensions.y,s=this._layerSize(),n=this.extent().nw,r=this.locationToLayer(n).round();t.movable.round=!0,t.reset(),t.userEvents.cancel();let l=this.zoom();t.dimensions.forcedMinScale=Bc(2,this.options.minZoom-l),t.dimensions.maxScale=Bc(2,this.options.maxZoom-l);let c={min:-r.x,max:s-r.x},h={min:-r.y,max:s-r.y};if(this.options.wraparound&&(c.max=20*s,c.min=-c.max),!1===this.options.pannable){let d=this.viewSize();c.min=h.min=0,c.max=d.width,h.max=d.height}e.makeVirtual(),i.makeVirtual(),e.virtualSize(c.min,c.max),i.virtualSize(h.min,h.max),this._virtualSize={x:c,y:h}}_renderLayers(){}_layerSize(t){const e=O(t,this.options.zoom);return this.options.minSize*Bc(2,e)}_tap(t){if(!this._panComplete())return;let e=this.eventOffset(t);this.hideTooltip(),this.trigger("click",{originalEvent:t,location:this.viewToLocation(e)})}_doubleTap(t){if(!1!==this.options.zoomable&&!this.trigger("zoomStart",{originalEvent:t})){let i=this.zoom()+1,s=this.eventOffset(t),n=this.viewToLocation(s),l=this.locationToLayer(n,i).translate(-s.x,-s.y);this._zoomAround(l,i),this.trigger("zoomEnd",{originalEvent:t})}}_mousewheel(t){let e=fa(t)>0?-1:1,i=this.options,s=this.zoom(),n=R(s+e,i.minZoom,i.maxZoom);if(!1!==i.zoomable&&n!==s&&!this.trigger("zoomStart",{originalEvent:t})){let r=this.eventOffset(t),l=this.viewToLocation(r),h=this.locationToLayer(l,n).translate(-r.x,-r.y);this._zoomAround(h,n),this.trigger("zoomEnd",{originalEvent:t})}}_toDocumentCoordinates(t){const e=ts(this.element);return{left:A(t.x+e.left),top:A(t.y+e.top)}}}C(_m,{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],icons:{type:"font",svgIcons:{}},zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0,renderPointsAsMarkers:!1}),Cr(_m,["beforeReset","click","markerActivate","markerClick","markerCreated","markerMouseEnter","markerMouseLeave","pan","panEnd","reset","shapeClick","shapeCreated","shapeFeatureCreated","shapeMouseEnter","shapeMouseLeave","zoomEnd","zoomStart"]);const Vc=(o,t)=>o.map(t).reduce((e,i)=>e+i,0),Er=(o,t)=>o.y0===t.y0?o.index-t.index:o.y0+o.y1-t.y0-t.y1,aS=(o,t)=>Er(o.source,t.source),lS=(o,t)=>Er(o.target,t.target),Fc=o=>o.value;function Nc(o){o.forEach(t=>{t.targetLinks.forEach(e=>{e.source.sourceLinks.sort(lS)}),t.sourceLinks.forEach(e=>{e.target.targetLinks.sort(aS)})})}const cS=(o,t)=>"left"===o.align?o.depth:"right"===o.align?t-o.height:o.sourceLinks.length?o.depth:t;class hS{constructor(t){const{offset:e={},align:i}=t.nodesOptions;this.data={nodes:t.nodes.map(s=>x({},{offset:e,align:i},s)),links:t.links.map(s=>x({},s))},this.width=t.width,this.height=t.height,this.offsetX=t.offsetX||0,this.offsetY=t.offsetY||0,this.nodeWidth=t.nodesOptions.width,this.nodePadding=t.nodesOptions.padding,this.reverse=t.reverse,this.targetColumnIndex=t.targetColumnIndex,this.loops=t.loops,this.autoLayout=t.autoLayout}calculate(){const{nodes:t,links:e}=this.data;this.connectLinksToNodes(t,e),this.calculateNodeValues(t);const i=this.calculateNodeHeights(t);if(i)return{nodes:[],links:[],columns:[],circularLinks:i};this.calculateNodeDepths(t);const s=this.calculateNodeColumns(t);return this.calculateNodeBreadths(s),this.applyNodesOffset(t),this.calculateLinkBreadths(t),Object.assign({},this.data,{columns:s})}connectLinksToNodes(t,e){const i=new Map;t.forEach((s,n)=>{s.index=n,s.sourceLinks=[],s.targetLinks=[],s.id=void 0!==s.id?s.id:s.label.text,i.set(s.id,s)}),e.forEach(s=>{s.source=i.get(s.sourceId),s.target=i.get(s.targetId),s.source.sourceLinks.push(s),s.target.targetLinks.push(s)})}calculateNodeValues(t){t.forEach(e=>{e.value=Math.max(Vc(e.sourceLinks,Fc),Vc(e.targetLinks,Fc))})}calculateNodeDepths(t){let e=new Set(t),i=new Set,s=0;for(;e.size;){const n=Array.from(e);for(let r=0;r<n.length;r++){const l=n[r];l.depth=s;for(let c=0;c<l.sourceLinks.length;c++)i.add(l.sourceLinks[c].target)}s++,e=i,i=new Set}}calculateNodeHeights(t){const e=t.length;let i=new Set(t),s=new Set,n=0;const r=l=>{l.height=n,l.targetLinks.forEach(c=>{s.add(c.source)})};for(;i.size;){if(i.forEach(r),n++,n>e)return!0;i=s,s=new Set}return!1}calculateNodeColumns(t){const e=Math.max.apply(null,t.map(n=>n.depth)),i=(this.width-this.offsetX-this.nodeWidth)/e,s=new Array(e+1);for(let n=0;n<t.length;n++){const r=t[n],l=Math.max(0,Math.min(e,cS(r,e)));r.x0=this.offsetX+l*i,r.x1=r.x0+this.nodeWidth,r.layer=l,s[l]=s[l]||[],s[l].push(r)}return s}calculateNodeBreadths(t){const e=((o,t)=>Math.min.apply(null,o.map(t)))(t,i=>(this.height-this.offsetY-(i.length-1)*this.nodePadding)/Vc(i,Fc));if(t.forEach(i=>{let s=this.offsetY;i.forEach(n=>{n.y0=s,n.y1=s+n.value*e,s=n.y1+this.nodePadding,n.sourceLinks.forEach(r=>{r.width=r.value*e})}),s=(this.height-s+this.nodePadding)/(i.length+1),i.forEach((n,r)=>{n.y0+=s*(r+1),n.y1+=s*(r+1)})}),!1!==this.autoLayout){const i=void 0!==this.loops?this.loops:t.length-1,s=this.targetColumnIndex||1;for(let n=0;n<i;n++)this.reverse?(this.uncurlLinksToRight(t,s),this.uncurlLinksToLeft(t,s)):(this.uncurlLinksToLeft(t,s),this.uncurlLinksToRight(t,s))}t.forEach(Nc)}applyNodesOffset(t){t.forEach(e=>{const i=(e.offset?e.offset.left:0)||0,s=(e.offset?e.offset.top:0)||0;e.x0+=i,e.x1+=i,e.y0+=s,e.y1+=s})}calculateLinkBreadths(t){t.forEach(e=>{const{sourceLinks:i,targetLinks:s}=e;let n=e.y0,r=n;i.forEach(l=>{l.x0=l.source.x1,l.y0=n+l.width/2,n+=l.width}),s.forEach(l=>{l.x1=l.target.x0,l.y1=r+l.width/2,r+=l.width})})}uncurlLinksToRight(t,e){const i=t.length;for(let s=e;s<i;s++){const n=t[s];n.forEach(r=>{let l=0,c=0;r.targetLinks.forEach(d=>{let u=d.value*(r.layer-d.source.layer);l+=this.targetTopPos(d.source,r)*u,c+=u});let h=0===l?0:l/c-r.y0;r.y0+=h,r.y1+=h,Nc([r])}),n.sort(Er),this.arrangeNodesVertically(n)}}uncurlLinksToLeft(t,e){for(let n=t.length-1-e;n>=0;n--){const r=t[n];for(let l=0;l<r.length;l++){const c=r[l];let h=0,d=0;c.sourceLinks.forEach(p=>{let g=p.value*(p.target.layer-c.layer);h+=this.sourceTopPos(c,p.target)*g,d+=g});let u=0===h?0:h/d-c.y0;c.y0+=u,c.y1+=u,Nc([c])}r.sort(Er),this.arrangeNodesVertically(r)}}arrangeNodesVertically(t){this.arrangeUp(t,this.height,t.length-1),this.arrangeDown(t,this.offsetY,0)}arrangeDown(t,e,i){let s=e;for(let n=i;n<t.length;n++){const r=t[n],l=Math.max(0,s-r.y0);r.y0+=l,r.y1+=l,s=r.y1+this.nodePadding}}arrangeUp(t,e,i){let s=e;for(let n=i;n>=0;--n){const r=t[n],l=Math.max(0,r.y1-s);r.y0-=l,r.y1-=l,s=r.y0-this.nodePadding}}sourceTopPos(t,e){let i=e.y0-(e.targetLinks.length-1)*this.nodePadding/2;for(let s=0;s<e.targetLinks.length;s++){const n=e.targetLinks[s];if(n.source===t)break;i+=n.width+this.nodePadding}for(let s=0;s<t.sourceLinks.length;s++){const n=t.sourceLinks[s];if(n.target===e)break;i-=n.width}return i}targetTopPos(t,e){let i=t.y0-(t.sourceLinks.length-1)*this.nodePadding/2;for(let s=0;s<t.sourceLinks.length;s++){const n=t.sourceLinks[s];if(n.target===e)break;i+=n.width+this.nodePadding}for(let s=0;s<e.targetLinks.length;s++){const n=e.targetLinks[s];if(n.source===t)break;i-=n.width}return i}}const Rs=o=>new hS(o).calculate();function Pr(o,t,e,i,s,n){const r=(n-t)*(e-o),l=(i-t)*(s-o);return r>l?1:r===l?0:-1}function uS(o,t){const e=Pr(o.x0,o.y0,o.x1,o.y1,t.x1,t.y1),i=Pr(o.x0,o.y0,o.x1,o.y1,t.x0,t.y0),s=Pr(o.x0,o.y0,t.x0,t.y0,t.x1,t.y1),n=Pr(o.x1,o.y1,t.x0,t.y0,t.x1,t.y1);return e!==i&&s!==n}class Hn extends I.A{constructor(t){super(),this.options=x({},this.options,t),this.createVisual()}createVisual(){this.visual=this.createElement()}exportVisual(){return this.visual}createElement(){const t=this.options.visual;let e;return e=t?t({sender:this.getSender(),options:this.visualOptions(),createVisual:()=>this.getElement()}):this.getElement(),e}getSender(){return this}}class wm extends Hn{getElement(){return M.w.fromRect(this.getRect(),this.visualOptions())}getRect(){const t=this.options.node;return new At.A([t.x0,t.y0],[t.x1-t.x0,t.y1-t.y0])}getLabelText(t){let e=t.labels.ariaTemplate;if(e)return e({node:t.node})}visualOptions(){const t=x({},this.options,this.options.node),e=this.getLabelText(t);return{fill:{color:t.color,opacity:t.opacity},stroke:{width:0},className:"k-sankey-node",role:"graphics-symbol",ariaRoleDescription:"Node",ariaLabel:e}}createFocusHighlight(){if(this.options.navigatable)return this._highlight=M.w.fromRect(this.getRect(),{stroke:this.options.focusHighlight.border,visible:!1}),this._highlight}focus(t){if(this._highlight){const{highlight:e=!0}=t||{};e&&this._highlight.options.set("visible",!0);const i=this.options.node.id;this.visual.options.set("id",i),this.options.root()&&this.options.root().setAttribute(qi,i)}}blur(){this._highlight&&(this._highlight.options.set("visible",!1),this.visual.options.set("id",""),this.options.root()&&this.options.root().removeAttribute(qi))}}const pS=(o,t,e)=>o.color||t[e%t.length],Cm=(o,t,e,i)=>{const s=x({},t,t.node);return x({},{color:pS(o,e,i)},s,{node:o},{visual:o.visual,opacity:o.opacity,offset:o.offset,color:o.color})},Dr=(o,t,e,i,s)=>{const n=1-s,r=n*n,l=s*s;return o*r*n+3*t*s*r+3*e*l*n+i*l*s};class xS extends Hn{getElement(){const t=this.options.link,{x0:e,x1:i,y0:s,y1:n}=t,r=(e+i)/2;return new M.w(this.visualOptions()).moveTo(e,s).curveTo([r,s],[r,n],[i,n])}getLabelText(t){let e=t.labels.ariaTemplate;if(e)return e({link:t.link})}visualOptions(){const t=this.options,e=this.options.link,i=this.getLabelText(t);return{stroke:{width:t.link.width,color:e.color||t.color,opacity:_(e.opacity)?e.opacity:t.opacity},role:"graphics-symbol",ariaRoleDescription:"Link",ariaLabel:i}}createFocusHighlight(){if(!this.options.navigatable)return;const{link:t}=this.options,{x0:e,x1:i,y0:s,y1:n}=t,r=(e+i)/2,l=t.width/2,c=((o,t)=>{const e=o.width/2,i=t?o.x1:o.x0,s=t?o.x0:o.x1,n=t?o.y1:o.y0,r=t?o.y0:o.y1,l=(i+s)/2,c=[l,Dr(n,n,r,r,.5)],h=.4999,d=[Dr(i,l,l,s,h),Dr(n,n,r,r,h)],u=function gS(o,t,e,i,s){let l,c,n=(o+e)/2,r=(t+i)/2;if(t===i)l=0,c=s/2;else if(o===e)l=s/2,c=0;else{let p=-1/((i-t)/(e-o));l=s/2/Math.sqrt(1+p*p),c=p*l}return{P1:{x:n-l,y:r-c},P2:{x:n+l,y:r+c}}}(c[0],c[1],d[0],d[1],o.width),p=[l,Dr(n+e,n+e,r+e,r+e,.5)],g=u.P1.y>u.P2.y?u.P1:u.P2,L=function fS(o,t,e,i,s){const n_x=(o.x+t.x)/2,n_y=(o.y+t.y)/2;let c=-(t.y-o.y),h=t.x-o.x;const d=Math.sqrt(c*c+h*h);c=c/d*e,h=h/d*e;const u_x=n_x+c,u_y=n_y+h,p_x=n_x-c,p_y=n_y-h,g=s.x-i.x,f=s.y-i.y,m=f*(u_x-p_x)-g*(u_y-p_y);if(Math.abs(m)<1e-10)return null;const v=(g*(p_y-i.y)-f*(p_x-i.x))/m,y=((u_x-p_x)*(p_y-i.y)-(u_y-p_y)*(p_x-i.x))/m;return v>=0&&v<=1&&y>=0&&y<=1?{x:p_x+v*(u_x-p_x)}:null}(g,{x:p[0],y:p[1]},e,{x:p[0],y:p[1]},{x:Math.max(1,p[0]+(n>r?1:-1)*e),y:p[1]})||{x:(p[0]+g.x)/2};return l-(L.x-.125*i-.125*s)/.75})(t,this.options.rtl);this._highlight=new M.w({stroke:this.options.focusHighlight.border,visible:!1}).moveTo(e,s+l).lineTo(e,s-l).curveTo([r+c,s-l],[r+c,n-l],[i,n-l]).lineTo(i,n+l).curveTo([r-c,n+l],[r-c,s+l],[e,s+l])}focus(t){if(this._highlight){const{highlight:e=!0}=t||{};e&&this._highlight.options.set("visible",!0);const i=`${this.options.link.sourceId}->${this.options.link.targetId}`;this.visual.options.set("id",i),this.options.root()&&this.options.root().setAttribute(qi,i)}}blur(){this._highlight&&(this._highlight.options.set("visible",!1),this.visual.options.set("id",""),this.options.root()&&this.options.root().removeAttribute(qi))}}const Ir="inside",Ls="before",Rr="after";class zc extends Hn{getElement(){const t=x({},this.options,this.options.node.label),{node:e,diagramMinX:i,diagramMaxX:s,text:n,offset:r,rtl:l}=t;let c=t.position;if(l&&c!==Ir&&(c=c===Ls?Rr:Ls),!t.visible||!n)return null;const h=new k(e.x0,e.y0,e.x1,e.y1),d=this.visualOptions();l&&!d.align&&(d.align="right");const u=new Ht(n,d);u.reflow(new k);const p=u.box,g=h.center().y-p.height()/2,f=e.x1+p.width()>s,m=e.x0-p.width()<i;let v=c===Ls||c===Ir&&f?Ls:Rr;l&&(v=c===Rr||c===Ir&&m?Rr:Ls);const y=[v===Ls?e.x0-p.width():e.x1,g],w=new k(y[0],y[1],y[0]+p.width(),y[1]+p.height());return w.translate(r.left||0,r.top||0),u.reflow(w),u.renderVisual(),u.visual}visualOptions(){const t=x({},this.options,this.options.node.label);return{color:t.color,font:t.font,border:t.border,margin:t.margin,padding:t.padding,align:t.align,paintOrder:t.paintOrder,stroke:t.stroke}}}C(zc,{position:Ir});const km=(o,t,e,i,s)=>x({},t,{node:o,diagramMinX:i,diagramMaxX:s,rtl:e,visual:o.label.visual,visible:o.label.visible,margin:o.label.margin,padding:o.label.padding,border:o.label.border,align:o.label.align,offset:o.label.offset});class Uc extends Hn{getElement(){const t=this.options,{drawingRect:e,text:i}=t;if(!1===t.visible||!i)return null;const s=on.buildTitle(i,t);return s.reflow(e),s.renderVisual(),s.visual}createElement(){return this.getElement()}}C(Uc,{align:V,border:{width:0},margin:Z(5),padding:Z(5)});const bS=(o,t)=>o.node.x0-t.node.x0!=0?o.node.x0-t.node.x0:o.node.y0-t.node.y0,yS=(o,t)=>o.node.x1-t.node.x1!=0?o.node.x1-t.node.x1:t.node.y0-o.node.y0;class Lr extends Hn{getElement(){const t=this.options,{drawingRect:e,rtl:i,nodes:s=[],item:n,position:r}=t;if(!1===t.visible||!s.length)return null;const l=t.labels||{};let c;l.content&&(c=kt(l));const h=s.map(p=>({text:c?c(p):p.label&&p.label.text||"",area:{background:void 0!==n.areaBackground?n.areaBackground:p.color,opacity:void 0!==n.areaOpacity?n.areaOpacity:p.opacity},node:p}));h.sort(i?yS:bS);const u=new Bp(Object.assign({},t,{data:h,reverse:i&&r!==U&&r!==$}),{rtl:i});return u.reflow(e),u.renderVisual(),u.visual}createElement(){return this.getElement()}}C(Lr,{markers:{visible:!1},item:{type:Fe,cursor:ua,opacity:1},position:Y,align:V,accessibility:{role:"presentation",ariaLabel:null,ariaRoleDescription:null},border:{width:0}});const Xn="link",Os="node";class Am extends ne{constructor(t,e,i){super(),this._initTheme(i),this._setOptions(e),this._initElement(t),this._initSurface(),e&&e.data&&(this._redraw(),this._initResizeObserver(),this._initNavigation(t))}destroy(){this.unbind(),this._destroySurface(),this._destroyResizeObserver(),this.element&&(this.element.removeEventListener("keydown",this._keydownHandler),this.element.removeEventListener("focus",this._focusHandler),this.element.removeEventListener("mousedown",this._onDownHandler),this.element.removeEventListener("touchstart",this._onDownHandler),this.element.removeEventListener("pointerdown",this._onDownHandler)),this._focusState=null,this.element=null}_initElement(t){this.element=t,gt(t,["k-chart","k-sankey"]),t.setAttribute("role","graphics-document");const{title:e}=this.options;e.text&&t.setAttribute("aria-label",e.text),e.description&&t.setAttribute("aria-roledescription",e.description)}_initSurface(){this.surface||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())}_initNavigation(t){t.tabIndex=t.getAttribute("tabindex")||0,!this.options.disableKeyboardNavigation&&(this._keydownHandler=this._keydown.bind(this),this._focusHandler=this._focus.bind(this),this._blurHandler=this._blur.bind(this),this._onDownHandler=this._onDown.bind(this),t.addEventListener("keydown",this._keydownHandler),t.addEventListener("focus",this._focusHandler),t.addEventListener("blur",this._blurHandler),t.addEventListener("mousedown",this._onDownHandler),t.addEventListener("touchstart",this._onDownHandler),t.addEventListener("pointerdown",this._onDownHandler),this._focusState={node:this.firstFocusableNode(),link:null})}firstFocusableNode(){return this.columns[0][0]}_initResizeObserver(){const t=new ResizeObserver(e=>{e.forEach(i=>{const{width:s,height:n}=i.contentRect;i.target!==this.element||this.size&&this.size.width===s&&this.size.height===n||(this.size={width:s,height:n},this.surface.setSize(this.size),this.resize=!0,this._redraw())})});this._resizeObserver=t,t.observe(this.element)}_createSurface(){return rs.A.create(this.surfaceElement,{mouseenter:this._mouseenter.bind(this),mouseleave:this._mouseleave.bind(this),mousemove:this._mousemove.bind(this),click:this._click.bind(this)})}_initTheme(t){let e=t||this.theme||{};this.theme=e,this.options=x({},e,this.options)}setLinksOpacity(t){this.linksVisuals.forEach(e=>{this.setOpacity(e,t,e.linkOptions.opacity)})}setLinksInactivityOpacity(t){this.linksVisuals.forEach(e=>{this.setOpacity(e,t,e.linkOptions.highlight.inactiveOpacity)})}setOpacity(t,e,i){t.options.set("stroke",Object.assign({},t.options.stroke,{opacity:_(i)?i:e}))}trigger(t,e){const n=Object.assign({},e,{type:t,targetType:e.element.type,dataItem:e.element.dataItem});return super.trigger(t,n)}_mouseenter(t){const e=t.element,i=e.type===Xn,s=e.type===Os,n=!(!e.chartElement||!e.chartElement.options.node);if(i&&this.trigger("linkEnter",t)||s&&this.trigger("nodeEnter",t))return;const{highlight:r}=this.options.links;if(i)this.setLinksInactivityOpacity(r.inactiveOpacity),this.setOpacity(e,r.opacity,e.linkOptions.highlight.opacity);else if(s)this.highlightLinks(e,r);else if(n){const l=this.nodesVisuals.get(e.chartElement.options.node.id);this.highlightLinks(l,r)}}_mouseleave(t){const e=t.element,i=e.type===Xn,s=e.type===Os,n=!(!e.chartElement||!e.chartElement.options.node),r=t.originalEvent.relatedTarget;i&&r&&"text"===r.nodeName||((i||s)&&(this.tooltipTimeOut&&(clearTimeout(this.tooltipTimeOut),this.tooltipTimeOut=null),this.tooltipShown=!1,this.trigger("tooltipHide",t)),!(i&&this.trigger("linkLeave",t)||s&&this.trigger("nodeLeave",t))&&(i||s||n)&&this.linksVisuals.forEach(l=>{this.setOpacity(l,this.options.links.opacity,l.linkOptions.opacity)}))}_mousemove(t){const{followPointer:e,delay:i}=this.options.tooltip,s=t.element,n=s.type;if(n!==Xn&&n!==Os||this.tooltipShown&&!e)return;const r=t.originalEvent,l=this.element.getBoundingClientRect();if(t.tooltipData={popupOffset:{left:r.pageX,top:r.pageY},popupAlign:{horizontal:r.clientX-l.left<l.width/2?"left":"right",vertical:r.clientY-l.top<l.height/2?"top":"bottom"}},n===Os){const{sourceLinks:u,targetLinks:p}=s.dataItem;t.nodeValue=(p.length?p:u).reduce((f,m)=>f+m.value,0)}this.tooltipTimeOut&&(clearTimeout(this.tooltipTimeOut),this.tooltipTimeOut=null),this.tooltipTimeOut=setTimeout(()=>{this.trigger("tooltipShow",t),this.tooltipShown=!0,this.tooltipTimeOut=null},e&&this.tooltipShown?0:i)}_click(t){const e=t.element,i=e.dataItem,s=e.type===Xn,r=this._focusState||{};if(e.type===Os)!r.link&&this.sameNode(r.node,i)||(this._focusState={node:i,link:null},this._focusNode({highlight:!1})),this.trigger("nodeClick",t);else if(s){const l={sourceId:i.source.id,targetId:i.target.id,value:i.value};this.sameLink(r.link,l)||(this._focusState={node:i.source,link:l},this._focusLink({highlight:!1})),this.trigger("linkClick",t)}}sameNode(t,e){return t&&e&&t.id===e.id}sameLink(t,e){return t&&e&&t.sourceId===e.sourceId&&t.targetId===e.targetId}_focusNode(t){this._cleanFocusHighlight(),this.models.map.get(this._focusState.node.id).focus(t)}_focusLink(t){this._cleanFocusHighlight();const e=this._focusState.link;this.models.map.get(`${e.sourceId}-${e.targetId}`).focus(t)}_focusNextNode(t=1){const e=this._focusState.node,i=this.columns.findIndex(l=>l.find(c=>c.id===e.id)),s=this.columns[i],n=s.findIndex(l=>l.id===e.id),r=s[n+t];r&&(this._focusState.node=r,this._focusNode())}_focusNextLink(t=1){const e=this._focusState.node,i=this._focusState.link,s=e.sourceLinks.findIndex(r=>r.sourceId===i.sourceId&&r.targetId===i.targetId),n=e.targetLinks.findIndex(r=>r.sourceId===i.sourceId&&r.targetId===i.targetId);if(-1!==s){const r=e.sourceLinks[s+t];r&&(this._focusState.link=r,this._focusLink())}else if(-1!==n){const r=e.targetLinks[n+t];r&&(this._focusState.link=r,this._focusLink())}}_focusSourceNode(){const e=this.models.map.get(this._focusState.link.sourceId);this._focusState={node:e.options.node,link:null},this._focusNode()}_focusTargetNode(){const e=this.models.map.get(this._focusState.link.targetId);this._focusState={node:e.options.node,link:null},this._focusNode()}_focusSourceLink(){const i=this._focusState.node.sourceLinks[0];i&&(this._focusState.link=i,this._focusLink())}_focusTargetLink(){const i=this._focusState.node.targetLinks[0];i&&(this._focusState.link=i,this._focusLink())}_focus(){this._skipFocusHighlight||(this._focusState.link?this._focusLink():this._focusNode()),this._skipFocusHighlight=!1}_blur(){this._cleanFocusHighlight()}_onDown(){this._hasFocus()||(this._skipFocusHighlight=!0)}_hasFocus(){return this.element.ownerDocument.activeElement===this.element}_cleanFocusHighlight(){this.models.nodes.forEach(t=>t.blur()),this.models.links.forEach(t=>t.blur())}_keydown(t){let e=this["on"+t.key];const i=this.options.rtl;i&&"ArrowLeft"===t.key?e=this.onArrowRight:i&&"ArrowRight"===t.key&&(e=this.onArrowLeft),e&&e.call(this,t)}onEscape(t){t.preventDefault(),this._focusState={node:this.firstFocusableNode(),link:null},this._focusNode()}onArrowDown(t){t.preventDefault(),this._focusState.link?this._focusNextLink(1):this._focusNextNode(1)}onArrowUp(t){t.preventDefault(),this._focusState.link?this._focusNextLink(-1):this._focusNextNode(-1)}onArrowLeft(t){t.preventDefault(),this._focusState.link?this._focusSourceNode():this._focusTargetLink()}onArrowRight(t){t.preventDefault(),this._focusState.link?this._focusTargetNode():this._focusSourceLink()}highlightLinks(t,e){t&&(this.setLinksInactivityOpacity(e.inactiveOpacity),t.links.forEach(i=>{this.setOpacity(i,e.opacity,i.linkOptions.highlight.opacity)}))}_destroySurface(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())}_destroyResizeObserver(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}_initSurfaceElement(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.element.appendChild(this.surfaceElement))}_destroySurfaceElement(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)}setOptions(t,e){this._setOptions(t),this._initTheme(e),this._initSurface(),this._redraw()}_redraw(){this.surface.clear();const{width:t,height:e}=this._getSize();this.size={width:t,height:e},this.surface.setSize(this.size),this.createVisual(),this.surface.draw(this.visual)}_getSize(){return this.element.getBoundingClientRect()}createVisual(){this.visual=this._render()}titleBox(t,e){return t&&!1!==t.visible&&t.text?new Uc(Object.assign({},{drawingRect:e},t)).exportVisual().chartElement.box:null}legendBox(t,e,i){return t&&!1!==t.visible?new Lr(Object.assign({},{nodes:e},t,{drawingRect:i})).exportVisual().chartElement.box:null}calculateSankey(t,e){const{title:i,legend:s,data:n,nodes:r,labels:l,nodeColors:c,disableAutoLayout:h,disableKeyboardNavigation:d,rtl:u}=e,p=!h,f=d?0:(((r.focusHighlight||{}).border||{}).width||0)/2,m=new k(0,0,t.width,t.height);m.unpad(f);const v=this.titleBox(i,m);let y=m.clone();if(v){const q=v.height();i.position===G?(m.unpad({top:q}),y=new k(0,q,t.width,t.height)):(m.shrink(0,q),y=new k(0,0,t.width,t.height-q))}const w=this.legendBox(s,n.nodes,y),E=s&&s.position||Lr.prototype.options.position;w&&(E===U&&m.unpad({left:w.width()}),E===$&&m.shrink(w.width(),0),E===G&&m.unpad({top:w.height()}),E===Y&&m.shrink(0,w.height()));const{nodes:L,circularLinks:F}=Rs(Object.assign({},t,{offsetX:0,offsetY:0,width:m.width(),height:m.height()}));if(F)return console.warn("Circular links detected. Kendo Sankey diagram does not support circular links."),{sankey:{nodes:[],links:[],columns:[[]],circularLinks:F},legendBox:w,titleBox:v};const H=new k,Q=L.reduce((q,Ft)=>Math.min(q,Ft.x0),1/0),tt=L.reduce((q,Ft)=>Math.max(q,Ft.x1),0);L.forEach((q,Ft)=>{if(u){const{x0:UE,x1:jE}=q;q.x0=tt-jE,q.x1=tt-UE}const Rh=Cm(q,r,c,Ft),oa=new wm(Rh);H.wrap(as(oa.exportVisual().rawBBox()));const yv=new zc(km(q,l,u,Q,tt)).exportVisual();yv&&H.wrap(as(yv.rawBBox()))});let xt=m.x1,at=m.y1,ee=m.width()+xt,Vt=m.height()+at;if(ee-=H.x2>m.width()?H.x2-m.width():0,Vt-=H.y2>m.height()?H.y2-m.height():0,xt+=H.x1<0?-H.x1:0,at+=H.y1<0?-H.y1:0,!1===p)return{sankey:Rs(Object.assign({},t,{offsetX:xt,offsetY:at,width:ee,height:Vt,autoLayout:!1})),legendBox:w,titleBox:v};if(this.resize&&p&&this.permutation)return this.resize=!1,{sankey:Rs(Object.assign({},t,{offsetX:xt,offsetY:at,width:ee,height:Vt},this.permutation)),legendBox:w,titleBox:v};const nt=Rs(Object.assign({},t,{offsetX:xt,offsetY:at,width:ee,height:Vt,autoLayout:!1})).columns.length,ht=[],St=(q,Ft)=>{let oa=(o=>{let t=0;const e=o.length;for(let i=0;i<e;i++){const s=o[i];for(let n=i+1;n<e;n++){const r=o[n];uS(s,r)&&(t+=Math.min(s.value,r.value))}}return t})(Rs(Object.assign({},t,{offsetX:xt,offsetY:at,width:ee,height:Vt,loops:2,targetColumnIndex:q,reverse:Ft})).links);return ht.push({crosses:oa,reverse:Ft,targetColumnIndex:q}),0===oa};for(let q=1;q<=nt-1&&!St(q,!1)&&!St(q,!0);q++);const Lt=Math.min.apply(null,ht.map(q=>q.crosses)),de=ht.find(q=>q.crosses===Lt);return this.permutation={targetColumnIndex:de.targetColumnIndex,reverse:de.reverse},{sankey:Rs(Object.assign({},t,{offsetX:xt,offsetY:at,width:ee,height:Vt},this.permutation)),legendBox:w,titleBox:v}}_render(t,e){const i=t||this.options,s=e||this,{labels:n,nodes:r,links:l,nodeColors:c,title:h,legend:d,rtl:u,disableKeyboardNavigation:p}=i;let g=i.data;const{width:f,height:m}=s.size,v=Object.assign({},g,{width:f,height:m,nodesOptions:r,title:h,legend:d}),{sankey:y,titleBox:w,legendBox:E}=this.calculateSankey(v,i);u&&(o=>{const{nodes:t,links:e}=o,i=Math.min(...t.map(r=>r.x0)),n=Math.max(...t.map(r=>r.x1))-i;t.forEach(r=>{const c=n-(r.x0-2*i);r.x0=n-(r.x1-2*i),r.x1=c}),e.forEach(r=>{const c=n-(r.x0-2*i);r.x1=n-(r.x1-2*i),r.x0=c})})(y);const{nodes:L,links:F,columns:H}=y;s.columns=H.map(nt=>{const ht=nt.slice();return ht.sort((St,Lt)=>St.y0-Lt.y0),ht});const Q=new et.A({clip:M.w.fromRect(new At.A([0,0],[f,m]))});if(w){const ht=new Uc(Object.assign({},h,{drawingRect:w})).exportVisual();Q.append(ht)}if(y.circularLinks)return Q;const tt=new Map;s.nodesVisuals=tt;const xt={nodes:[],links:[],map:new Map};s.models=xt;const at=[];L.forEach((nt,ht)=>{const St=Cm(nt,r,c,ht);St.root=()=>s.element,St.navigatable=!0!==p;const Lt=new wm(St),de=Lt.exportVisual();de.links=[],de.type=Os,nt.color=St.color,nt.opacity=St.opacity,de.dataItem=Object.assign({},g.nodes[ht],{color:St.color,opacity:St.opacity,sourceLinks:nt.sourceLinks.map(Wt=>({sourceId:Wt.sourceId,targetId:Wt.targetId,value:Wt.value})),targetLinks:nt.targetLinks.map(Wt=>({sourceId:Wt.sourceId,targetId:Wt.targetId,value:Wt.value}))}),tt.set(nt.id,de),xt.nodes.push(Lt),xt.map.set(nt.id,Lt),Q.append(de),Lt.createFocusHighlight(),Lt._highlight&&at.push(Lt._highlight)});const ee=F.slice().sort((nt,ht)=>ht.value-nt.value),Vt=[];s.linksVisuals=Vt,ee.forEach(nt=>{const{source:ht,target:St}=nt,Lt=tt.get(ht.id),de=tt.get(St.id),Wt=((o,t,e,i)=>{const s=x({},t,{link:o,opacity:o.opacity,color:o.color,colorType:o.colorType,visual:o.visual,highlight:o.highlight});return"source"===s.colorType?s.color=e.options.fill.color:"target"===s.colorType&&(s.color=i.options.fill.color),s})(nt,l,Lt,de);Wt.root=()=>s.element,Wt.navigatable=!0!==p,Wt.rtl=u;const q=new xS(Wt),Ft=q.exportVisual();Ft.type=Xn,Ft.dataItem={source:Object.assign({},Lt.dataItem),target:Object.assign({},de.dataItem),value:nt.value},Ft.linkOptions=Wt,Vt.push(Ft),Lt.links.push(Ft),de.links.push(Ft),xt.links.push(q),xt.map.set(`${ht.id}-${St.id}`,q),q.createFocusHighlight(),q._highlight&&at.push(q._highlight),Q.append(Ft)});const no=L.reduce((nt,ht)=>Math.min(nt,ht.x0),1/0),oo=L.reduce((nt,ht)=>Math.max(nt,ht.x1),0);if(L.forEach(nt=>{const ht=km(nt,n,u,no,oo),Lt=new zc(ht).exportVisual();Lt&&Q.append(Lt)}),E){const ht=new Lr(Object.assign({},d,{rtl:u,drawingRect:E,nodes:L})).exportVisual();Q.append(ht)}if(0!==at.length){const nt=new et.A;nt.append(...at),Q.append(nt)}return Q}exportVisual(t){const e=t&&t.options?x({},this.options,t.options):this.options,i={size:{width:_(t&&t.width)?t.width:this.size.width,height:_(t&&t.height)?t.height:this.size.height}};return this._render(e,i)}_setOptions(t){this.options=x({},this.options,t)}}const Sm={opacity:1,width:2,color:pt};C(Am,{title:{position:G},labels:{visible:!0,margin:{left:8,right:8},padding:0,border:{width:0},paintOrder:"stroke",stroke:{lineJoin:"round",width:1},offset:{left:0,top:0}},nodes:{width:24,padding:16,opacity:1,align:"stretch",offset:{left:0,top:0},focusHighlight:{border:Object.assign({},Sm)},labels:{ariaTemplate:({node:o})=>o.label.text}},links:{colorType:"static",opacity:.4,highlight:{opacity:.8,inactiveOpacity:.2},focusHighlight:{border:Object.assign({},Sm)},labels:{ariaTemplate:({link:o})=>`${o.source.label.text} to ${o.target.label.text}`}},tooltip:{followPointer:!1,delay:200}});const z=Object.freeze({seriesType:0,stacked:1,categoryAxisX:2,valueAxisY:3,seriesChange:4,areaMarginLeft:5,areaMarginRight:6,areaMarginTop:7,areaMarginBottom:8,areaBackground:9,titleText:10,titleFontName:11,titleFontSize:12,titleColor:13,subtitleText:14,subtitleFontName:15,subtitleFontSize:16,subtitleColor:17,seriesColor:18,seriesLabel:19,legendVisible:20,legendFontName:21,legendFontSize:22,legendColor:23,legendPosition:24,categoryAxisTitleText:25,categoryAxisTitleFontName:26,categoryAxisTitleFontSize:27,categoryAxisTitleColor:28,categoryAxisLabelsFontName:29,categoryAxisLabelsFontSize:30,categoryAxisLabelsColor:31,categoryAxisLabelsRotation:32,categoryAxisReverseOrder:33,valueAxisTitleText:34,valueAxisTitleFontName:35,valueAxisTitleFontSize:36,valueAxisTitleColor:37,valueAxisLabelsFormat:38,valueAxisLabelsFontName:39,valueAxisLabelsFontSize:40,valueAxisLabelsColor:41,valueAxisLabelsRotation:42}),jc="12px",Mm=[{text:"Arial",value:"Arial, Helvetica, sans-serif",style:{fontFamily:"Arial, Helvetica, sans-serif"}},{text:"Courier New",value:"'Courier New', Courier, monospace",style:{fontFamily:"'Courier New', Courier, monospace"}},{text:"Georgia",value:"Georgia, serif",style:{fontFamily:"Georgia, serif"}},{text:"Impact",value:"Impact, Charcoal, sans-serif",style:{fontFamily:"Impact, Charcoal, sans-serif"}},{text:"Lucida Console",value:"'Lucida Console', Monaco, monospace",style:{fontFamily:"'Lucida Console', Monaco, monospace"}},{text:"Tahoma",value:"Tahoma, Geneva, sans-serif",style:{fontFamily:"Tahoma, Geneva, sans-serif"}},{text:"Times New Roman",value:"'Times New Roman', Times,serif",style:{fontFamily:"'Times New Roman', Times,serif"}},{text:"Trebuchet MS",value:"'Trebuchet MS', Helvetica, sans-serif",style:{fontFamily:"'Trebuchet MS', Helvetica, sans-serif"}},{text:"Verdana",value:"Verdana, Geneva, sans-serif",style:{fontFamily:"Verdana, Geneva, sans-serif"}}],Xi=Mm[0].value,Dm="scatter",PS=["column","bar","line",Dm],DS={type:"line",width:0};function Yn(o){return o&&PS.includes(o)}const Wn=["string","date","number"],$n=["number"],Im={bar:[{axisType:"category",types:Wn},{axisType:"value",types:$n}],column:[{axisType:"category",types:Wn},{axisType:"value",types:$n}],line:[{axisType:"category",types:Wn},{axisType:"value",types:$n}],pie:[{axisType:"category",types:Wn},{axisType:"value",types:$n,count:1}],scatter:[{axisType:"category",types:Wn},{axisType:"value",types:$n}]};function Rm(o,t){return`${t||""} ${o||""}`.trim()}function Gc(o){const t=(o||"").indexOf(" ");return{size:o&&o.substring(0,t),name:o&&o.substring(t+1)}}const Yi=(o,t,e)=>{const{size:i}=Gc(e);return o?Rm(o,i||t):""},Wi=(o,t,e)=>{const{name:i}=Gc(e);return o?Rm(i||t,o):""},Qn=o=>null!=o,Lm=o=>{const t=structuredClone(o[0]);return t.forEach((e,i)=>{if(!Qn(e.value))for(let s=0;s<o.length;s++){const n=o[s][i].value;if(Qn(n)){e.value=n;break}}}),t},Om=(o,t)=>{const e=[],i=Lm(o);t.types.forEach(n=>{i.forEach((r,l)=>{typeof r.value===n&&e.push(l)})});const s=e.findIndex(n=>{const r=o.map(l=>l[n].value);return new Set(r).size===r.length});return Math.max(s,0)},Bm=(o,t)=>{const e=[],i=Lm(o);return t.forEach(s=>{s.types.forEach(n=>{i.forEach((r,l)=>{typeof r.value===n&&e.push(l)})})}),e},Vm=()=>structuredClone({columns:[],data:[],series:[],initialSeries:[],categoryAxis:[{categories:[],labels:{visible:!0,rotation:"auto"},title:{text:""}}],valueAxis:[{labels:{visible:!0,rotation:"auto"}}],area:{margin:{left:void 0,right:void 0,top:void 0,bottom:void 0}},title:{text:""},subtitle:{text:""},stack:!1}),Fm=(o,t,e)=>{const i=Vm();i.seriesType=t,i.data=o||[],i.legend={visible:!0,position:"bottom"};const s=Im[t];if(!s||!o.length)return i;const n=o[0].slice();i.columns=o[0].map(p=>String(p.field));const r=s.find(p=>"category"===p.axisType);let l=-1;r&&(l=e&&e.categoryAxis?i.columns.indexOf(e.categoryAxis):Om(o,r));const c=s.filter(p=>"value"===p.axisType);let h=Bm(o,c);h.includes(l)&&(h.length>1?h=h.filter(p=>p!==l):l=-1);const d=[];h.forEach(p=>{const g=n[p],f=[];o.forEach(m=>{f.push(m[p].value)}),d.push(Object.assign({},{name:g.field,type:t,data:f,stack:!1,labels:{visible:!1}},t===Dm?DS:{}))});const u=l>-1?o.map(p=>String(Qn(p[l].value)?p[l].value:" ")):[];return d.length&&(i.series=d.map((p,g)=>Object.assign({},p,{id:g})),i.initialSeries=structuredClone(i.series)),i.categoryAxis=[{categories:u,labels:{visible:!0,rotation:"auto"}}],i.categoryField=i.columns[l],i},Hc=(o,t,e)=>{const i=Vm();i.seriesType=t,i.data=o||[];const s=Im[t];if(!s||!o.length)return i;const n=o[0].map(p=>p.field),r=s.find(p=>"category"===p.axisType);let l=-1;r&&(l=e&&e.categoryAxis?n.indexOf(e.categoryAxis):Om(o,r));const c=s.filter(p=>"value"===p.axisType);let h=[];h=e&&e.valueAxis?[n.indexOf(e.valueAxis)]:Bm(o,c),h.includes(l)&&h.length>1&&(h=h.filter(p=>p!==l)),"number"==typeof c[0].count&&(h=h.slice(0,c[0].count));const d=l>-1?o.map(p=>String(p[l].value)):[],u=[];return o.forEach(p=>{const g={};h.forEach(f=>{const m=p[f];g[m.field]=m.value||0,g[p[l].field]=p[l].value||" "}),u.push(g)}),i.columns=n,i.categoryAxis=[{categories:d,title:{text:""}}],i.series=[{id:0,data:u,type:t,name:n[l],labels:{visible:!0},categoryField:n[l],field:n[h[0]]}],i.categoryField=n[l],i.valueField=n[h[0]],i.initialSeries=structuredClone(i.series),i};function Xc(o,t){return(Yn(t)?Fm:Hc)(o,t)}function Or(o,t){const e=structuredClone(t);if(e.legend=o.legend,e.area=o.area,e.title=o.title,e.subtitle=o.subtitle,e.series.length===o.series.length)for(let i=0;i<e.series.length;i++)e.series[i].color=o.series[i].color,e.series[i].labels=o.series[i].labels;return o.series.every(i=>i.labels&&i.labels.visible)&&Yn(e.seriesType)&&Yn(o.seriesType)&&e.series.forEach(i=>{i.labels=i.labels||{},i.labels.visible=!0}),e}function Nm(o,t,e){const i=Object.assign({},o);switch(t){case z.seriesType:return Xc(i.data,e);case z.stacked:return i.series=i.series.map(s=>Object.assign({},s,{stack:e})),i.stack=e,i;case z.categoryAxisX:return i.seriesType&&Yn(i.seriesType)?Or(i,Fm(i.data,i.seriesType,{categoryAxis:e})):"pie"===i.seriesType?Or(i,Hc(i.data,i.seriesType,{categoryAxis:e})):i;case z.valueAxisY:return"pie"===i.seriesType?Or(i,Hc(i.data,i.seriesType,{categoryAxis:i.categoryField,valueAxis:e})):i;case z.seriesChange:return i.series=e,i;case z.areaMarginLeft:return i.area=Object.assign({},i.area,{margin:Object.assign({},i.area&&i.area.margin||{},{left:e})}),i;case z.areaMarginRight:return i.area=Object.assign({},i.area,{margin:Object.assign({},i.area&&i.area.margin||{},{right:e})}),i;case z.areaMarginTop:return i.area=Object.assign({},i.area,{margin:Object.assign({},i.area&&i.area.margin||{},{top:e})}),i;case z.areaMarginBottom:return i.area=Object.assign({},i.area,{margin:Object.assign({},i.area&&i.area.margin||{},{bottom:e})}),i;case z.areaBackground:return i.area=Object.assign({},i.area,{background:e}),i;case z.titleText:return i.title=Object.assign({},i.title,{text:e}),i;case z.titleFontName:return i.title=Object.assign({},i.title,{font:Yi(e,"20px",i.title&&i.title.font)}),i;case z.titleFontSize:return i.title=Object.assign({},i.title,{font:Wi(e,Xi,i.title&&i.title.font)}),i;case z.titleColor:return i.title=Object.assign({},i.title,{color:e}),i;case z.subtitleText:return i.subtitle=Object.assign({},i.subtitle,{text:e}),i;case z.subtitleFontName:return i.subtitle=Object.assign({},i.subtitle,{font:Yi(e,"16px",i.subtitle&&i.subtitle.font)}),i;case z.subtitleFontSize:return i.subtitle=Object.assign({},i.subtitle,{font:Wi(e,Xi,i.subtitle&&i.subtitle.font)}),i;case z.subtitleColor:return i.subtitle=Object.assign({},i.subtitle,{color:e}),i;case z.seriesColor:return i.series=i.series.map(s=>Object.assign({},s,{color:e.seriesName===s.name?e.color:s.color})),i;case z.seriesLabel:return i.series=i.series.map(s=>e.all||e.seriesName===s.name?Object.assign({},s,{labels:{visible:e.visible}}):s),i;case z.legendVisible:return i.legend=Object.assign({},i.legend,{visible:e}),i;case z.legendFontName:{const s=i.legend||{};return i.legend=Object.assign({},s,{labels:Object.assign({},s.labels,{font:Yi(e,jc,s.labels&&s.labels.font)})}),i}case z.legendFontSize:{const s=i.legend||{};return i.legend=Object.assign({},s,{labels:Object.assign({},s.labels,{font:Wi(e,Xi,s.labels&&s.labels.font)})}),i}case z.legendColor:{const s=i.legend||{};return i.legend=Object.assign({},s,{labels:Object.assign({},s.labels,{color:e})}),i}case z.legendPosition:return i.legend=Object.assign({},i.legend,{position:e}),i;case z.categoryAxisTitleText:return i.categoryAxis=(i.categoryAxis||[]).map(s=>Object.assign({},s,{title:Object.assign({},s.title,{text:e})})),i;case z.categoryAxisTitleFontName:return i.categoryAxis=(i.categoryAxis||[]).map(s=>Object.assign({},s,{title:Object.assign({},s.title,{font:Yi(e,"16px",s.title&&s.title.font)})})),i;case z.categoryAxisTitleFontSize:return i.categoryAxis=(i.categoryAxis||[]).map(s=>Object.assign({},s,{title:Object.assign({},s.title,{font:Wi(e,Xi,s.title&&s.title.font)})})),i;case z.categoryAxisTitleColor:return i.categoryAxis=(i.categoryAxis||[]).map(s=>Object.assign({},s,{title:Object.assign({},s.title,{color:e})})),i;case z.categoryAxisLabelsFontName:return i.categoryAxis=(i.categoryAxis||[]).map(s=>Object.assign({},s,{labels:Object.assign({},s.labels,{font:Yi(e,jc,s.labels&&s.labels.font)})})),i;case z.categoryAxisLabelsFontSize:return i.categoryAxis=(i.categoryAxis||[]).map(s=>Object.assign({},s,{labels:Object.assign({},s.labels,{font:Wi(e,Xi,s.labels&&s.labels.font)})})),i;case z.categoryAxisLabelsColor:return i.categoryAxis=(i.categoryAxis||[]).map(s=>Object.assign({},s,{labels:Object.assign({},s.labels,{color:e})})),i;case z.categoryAxisLabelsRotation:{const s=Qn(e)?e:"auto";return i.categoryAxis=(i.categoryAxis||[]).map(n=>Object.assign({},n,{labels:Object.assign({},n.labels,{rotation:s})})),i}case z.categoryAxisReverseOrder:return i.categoryAxis=(i.categoryAxis||[]).map(s=>Object.assign({},s,{reverse:e})),i;case z.valueAxisTitleText:return i.valueAxis=i.valueAxis&&0!==i.valueAxis.length?(i.valueAxis||[]).map(s=>Object.assign({},s,{title:Object.assign({},s.title,{text:e})})):[{title:{text:e}}],i;case z.valueAxisTitleFontName:return i.valueAxis=(i.valueAxis||[]).map(s=>Object.assign({},s,{title:Object.assign({},s.title,{font:Yi(e,"16px",s.title&&s.title.font)})})),i;case z.valueAxisTitleFontSize:return i.valueAxis=(i.valueAxis||[]).map(s=>Object.assign({},s,{title:Object.assign({},s.title,{font:Wi(e,Xi,s.title&&s.title.font)})})),i;case z.valueAxisTitleColor:return i.valueAxis=(i.valueAxis||[]).map(s=>Object.assign({},s,{title:Object.assign({},s.title,{color:e})})),i;case z.valueAxisLabelsFormat:return i.valueAxis=(i.valueAxis||[]).map(s=>Object.assign({},s,{labels:Object.assign({},s.labels,{format:e})})),i;case z.valueAxisLabelsFontName:return i.valueAxis=(i.valueAxis||[]).map(s=>Object.assign({},s,{labels:Object.assign({},s.labels,{font:Yi(e,jc,s.labels&&s.labels.font)})})),i;case z.valueAxisLabelsFontSize:return i.valueAxis=(i.valueAxis||[]).map(s=>Object.assign({},s,{labels:Object.assign({},s.labels,{font:Wi(e,Xi,s.labels&&s.labels.font)})})),i;case z.valueAxisLabelsColor:return i.valueAxis=(i.valueAxis||[]).map(s=>Object.assign({},s,{labels:Object.assign({},s.labels,{color:e})})),i;case z.valueAxisLabelsRotation:{const s=Qn(e)?e:"auto";return i.valueAxis=(i.valueAxis||[]).map(n=>Object.assign({},n,{labels:Object.assign({},n.labels,{rotation:s})})),i}default:return i}}const RS=Object.freeze({windowTitle:"Chart Preview",exportButton:"Export",exportPDFButton:"PDF File",exportSVGButton:"SVG File",exportPNGButton:"PNG File",tabChart:"Chart",tabData:"Data",tabFormat:"Format",barChart:"Bar Chart",barChartBar:"Bar",barChartStackedBar:"Stacked Bar",barChart100StackedBar:"100% Stacked Bar",pieChart:"Pie Chart",pieChartPie:"Pie",columnChart:"Column Chart",columnChartColumn:"Column",columnChartStackedColumn:"Stacked Column",columnChart100StackedColumn:"100% Stacked Column",lineChart:"Line Chart",lineChartLine:"Line",lineChartStackedLine:"Stacked Line",lineChart100StackedLine:"100% Stacked Line",scatterChart:"Scatter Chart",scatterChartScatter:"Scatter",configuration:"Configuration",configurationCategoryAxis:"Category Axis",configurationXAxis:"X Axis",configurationValueAxis:"Value Axis",configurationSeries:"Series",configurationSeriesAdd:"Add",formatChartArea:"Chart Area",formatChartAreaMargins:"Margins",formatChartAreaMarginsAuto:"Auto",formatChartAreaMarginsLeft:"Left",formatChartAreaMarginsRight:"Right",formatChartAreaMarginsTop:"Top",formatChartAreaMarginsBottom:"Bottom",formatChartAreaBackground:"Background",formatChartAreaBackgroundColor:"Color",formatTitle:"Title",formatTitleApplyTo:"Apply to",formatTitleChartTitle:"Chart Title",formatTitleChartSubtitle:"Chart Subtitle",formatTitleLabel:"Title",formatTitleFont:"Font",formatTitleFontPlaceholder:"(inherited font)",formatTitleSize:"Size",formatTitleSizePlaceholder:"px",formatTitleColor:"Color",formatSeries:"Series",formatSeriesApplyTo:"Apply to",formatSeriesAllSeries:"All Series",formatSeriesColor:"Color",formatSeriesShowLabels:"Show Labels",formatLegend:"Legend",formatLegendShowLegend:"Show Legend",formatLegendFont:"Font",formatLegendFontPlaceholder:"(inherited font)",formatLegendSize:"Size",formatLegendSizePlaceholder:"px",formatLegendColor:"Color",formatLegendPosition:"Position",formatLegendPositionTop:"Top",formatLegendPositionBottom:"Bottom",formatLegendPositionLeft:"Left",formatLegendPositionRight:"Right",formatCategoryAxis:"Category Axis",formatXAxis:"X Axis",formatCategoryAxisTitle:"Title",formatCategoryAxisTitlePlaceholder:"Axis Title",formatCategoryAxisTitleFont:"Font",formatCategoryAxisTitleFontPlaceholder:"(inherited font)",formatCategoryAxisTitleSize:"Size",formatCategoryAxisTitleSizePlaceholder:"px",formatCategoryAxisTitleColor:"Color",formatCategoryAxisLabels:"Labels",formatCategoryAxisLabelsFont:"Font",formatCategoryAxisLabelsFontPlaceholder:"(inherited font)",formatCategoryAxisLabelsSize:"Size",formatCategoryAxisLabelsSizePlaceholder:"px",formatCategoryAxisLabelsColor:"Color",formatCategoryAxisLabelsRotation:"Rotation",formatCategoryAxisLabelsRotationAuto:"Auto",formatCategoryAxisLabelsReverseOrder:"Reverse Order",formatValueAxis:"Value Axis",formatYAxis:"Y Axis",formatValueAxisTitle:"Title",formatValueAxisTitlePlaceholder:"Axis Title",formatValueAxisTitleFont:"Font",formatValueAxisTitleFontPlaceholder:"(inherited font)",formatValueAxisTitleSize:"Size",formatValueAxisTitleSizePlaceholder:"px",formatValueAxisTitleColor:"Color",formatValueAxisLabels:"Labels",formatValueAxisLabelsFormat:"Label Format",formatValueAxisLabelsFormatText:"Text",formatValueAxisLabelsFormatNumber:"Number",formatValueAxisLabelsFormatCurrency:"Currency",formatValueAxisLabelsFormatPercent:"Percent",formatValueAxisLabelsFont:"Font",formatValueAxisLabelsFontPlaceholder:"(inherited font)",formatValueAxisLabelsSize:"Size",formatValueAxisLabelsSizePlaceholder:"px",formatValueAxisLabelsColor:"Color",formatValueAxisLabelsRotation:"Rotation",formatValueAxisLabelsRotationAuto:"Auto"}),Yc=(Object.freeze({getWizardDataFromDataRows:function kS(o){const t=[];return o.forEach(e=>{const{dataItem:i,dataColumns:s}=e,n=[];s.forEach(r=>{n.push({field:r.title||r.field,value:Pe(r.field)(i)})}),t.push(n)}),t},ActionTypes:z,createInitialState:function IS(o,t,e){const i=Xc(o,e&&e.seriesType||t);return typeof(e&&e.stack)<"u"?Nm(i,z.stacked,e.stack):i},createState:Xc,fontNames:Mm,fontSizes:[{text:"10",value:"10px"},{text:"12",value:"12px"},{text:"14",value:"14px"},{text:"16",value:"16px"},{text:"20",value:"20px"},{text:"28",value:"28px"},{text:"42",value:"42px"},{text:"56",value:"56px"}],isCategorical:Yn,mergeStates:Or,parseFont:Gc,updateState:Nm,messages:RS}),"Arial, Helvetica, sans-serif"),LS="11px "+Yc,Br="12px "+Yc,Um="16px "+Yc,jm="transparent",Vs={type:Ne},Vr={type:Fe},Bt=Object.assign({},Vr,{markers:{visible:!1},highlight:{visible:!1}}),Hm=()=>({icon:{border:{width:1}},label:{font:Br,padding:3},line:{length:10,width:2},legendItem:Bt,visible:!0}),Xm=()=>({highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},legendItem:Vr,opacity:.4}),Ym=()=>({highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},legendItem:Vr,opacity:.4}),Wm=()=>({outliersField:"",meanField:"",border:{_brightness:.8,width:1},downColor:"#fff",gap:1,highlight:{border:{opacity:1,width:2},whiskers:{width:3},mean:{width:2},median:{width:2}},mean:{width:2},median:{width:2},spacing:.3,whiskers:{width:2},legendItem:Bt}),$m=()=>({gap:1.5,spacing:.4,target:{color:"#ff0000"},legendItem:Bt}),Qm=()=>({width:2,legendItem:Vs}),Zm=()=>({line:{opacity:1,width:0},markers:{size:6,visible:!1},legendItem:Vr,opacity:.5}),Km=()=>({markers:{visible:!1},legendItem:Vs,width:2}),qm=()=>({gap:.5,line:{color:"#000",width:1},legendItem:Bt,spacing:.4}),Jm=()=>({labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}},legendItem:Bt}),QS=Jm,Fs=o=>Object.assign({color:Gh,trendline:{},markers:{visible:!1},width:1,dashType:"longDash",legendItem:Vs},o),KS=o=>({visible:!0,labels:{font:LS},overlay:o.gradients?{}:{gradient:"none"},area:Xm(),rangeArea:Ym(),verticalRangeArea:Ym(),bar:{gap:1.5,spacing:.4,legendItem:Bt},boxPlot:Wm(),bubble:{border:{width:0},labels:{background:jm},legendItem:Bt,opacity:.6},bullet:$m(),candlestick:{border:{_brightness:.8,width:1},downColor:"#fff",gap:1,highlight:{border:{opacity:1,width:2},line:{width:2}},line:{color:"#000",width:1},legendItem:Bt,spacing:.3},column:{gap:1.5,spacing:.4,legendItem:Bt},heatmap:{labels:{color:"",background:jm,visible:!0},highlight:{border:{width:0}},legendItem:Bt},pie:{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}},legendItem:Bt},donut:{margin:1,legendItem:Bt},funnel:Jm(),pyramid:QS(),horizontalWaterfall:qm(),line:Qm(),notes:Hm(),ohlc:{gap:1,highlight:{line:{opacity:1,width:3}},line:{width:1},legendItem:Bt,spacing:.3},radarArea:Zm(),radarLine:Km(),radarColumn:{legendItem:Bt},polarArea:Zm(),polarLine:Km(),polarScatter:{legendItem:Vs},rangeBar:{gap:1.5,spacing:.4,legendItem:Bt},rangeColumn:{gap:1.5,spacing:.4,legendItem:Bt},scatter:{legendItem:Vs},scatterLine:{width:1,legendItem:Vs},verticalArea:Xm(),verticalBoxPlot:Wm(),verticalBullet:$m(),verticalLine:Qm(),waterfall:qm(),linearTrendline:Fs(),exponentialTrendline:Fs({style:"smooth"}),logarithmicTrendline:Fs({style:"smooth"}),polynomialTrendline:Fs({style:"smooth"}),powerTrendline:Fs({style:"smooth"}),movingAverageTrendline:Fs()}),tx=(o={})=>({axisDefaults:{labels:{font:Br},notes:Hm(),title:{font:Um,margin:5}},categoryAxis:{majorGridLines:{visible:!0}},navigator:{pane:{height:90,margin:{top:10}}},seriesDefaults:KS(o),title:{font:Um},subtitle:{font:Br},legend:{labels:{font:Br}}}),ex="--kendo-chart-series-",Kn=o=>o.ownerDocument.defaultView.getComputedStyle(o),Wc={},Rt=(o,t)=>{let e=Kn(o).getPropertyValue(t);return/^color-mix/i.test(e)&&(e=((o,t)=>{if(Wc[o])return Wc[o];const e=t.style.color;t.style.color=o;const i=Kn(t).color;return t.style.color=e,Wc[o]=i,i})(e,o)),e},$c=(o,t)=>parseFloat(Kn(o).getPropertyValue(t)),Fr=(o,t,e,i)=>{const s=Kn(o);return[s.getPropertyValue(t),s.getPropertyValue(e),s.getPropertyValue(i)||s.fontFamily].join(" ")},ix=o=>{const t=Kn(o),e=[];let i=1,s=t.getPropertyValue(`${ex}${i}`);for(;s||i<=30;)e.push(s),i++,s=t.getPropertyValue(`${ex}${i}`);return e},Nr=o=>Fr(o,"--kendo-font-weight","--kendo-chart-font-size","--kendo-font-family"),sx=o=>Fr(o,"--kendo-chart-pane-title-font-weight","--kendo-chart-pane-title-font-size","--kendo-font-family"),zr=o=>Rt(o,"--kendo-chart-text"),nx=o=>({color:zr(o),font:Fr(o,"--kendo-font-weight","--kendo-chart-title-font-size","--kendo-font-family")}),ox=o=>{const t=zr(o);return{labels:{color:t,font:Nr(o)},title:{color:t}}},sT=o=>{const t=Rt(o,"--kendo-chart-inactive");return Object.assign({},{inactiveItems:{labels:{color:t},markers:{color:t}}},ox(o))};var rx=T(7053),aT=T(7793),lT=T(4059),cT=T(9563),hT=T(4898);function ax(o,t){let e=function dT(o){const t=new cT.A({skipBaseHref:!0}),e=o.clippedBBox();let i=o;if(e){const n=e.getOrigin(),r=new et.A;r.transform((0,bt.A)().translate(-n.x,-n.y)),r.children.push(o),i=r}t.load([i]);const s=`<?xml version='1.0' ?><svg xmlns='${hT.Rc}' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>${t.render()}</svg>`;return t.destroy(),s}(o);return(!t||!t.raw)&&(e="data:image/svg+xml;base64,"+(0,aT.A)(e)),(0,lT.A)().resolve(e)}var Ur=T(5987),uT=T(1413),pT=T(4412),lx=T(4572),gT=T(8359),Qc=T(3798),cx=T(8141),ve=T(1730),fT=T(2446),jr=T(8936),hx=T(3974);T(1553);const Zc=["content"];function mT(o,t){if(1&o&&(a.j41(0,"div",1),a.EFF(1),a.k0s()),2&o){const e=a.XpG();a.Y8G("ngStyle",e.style),a.R7$(),a.SpI(" ",e.value," ")}}function xT(o,t){if(1&o&&a.nrm(0,"kendo-chart-crosshair-tooltip",1),2&o){const e=t.$implicit,i=a.XpG();a.Y8G("key",e)("popupSettings",i.popupSettings)}}function vT(o,t){}function bT(o,t){if(1&o&&a.DNE(0,vT,0,0,"ng-template",5),2&o){const e=a.XpG(2);a.Y8G("ngTemplateOutlet",e.seriesTooltipTemplateRef)("ngTemplateOutletContext",e.seriesTooltipContext)}}function yT(o,t){}function _T(o,t){if(1&o&&a.DNE(0,yT,0,0,"ng-template",5),2&o){const e=a.XpG(2);a.Y8G("ngTemplateOutlet",e.seriesSharedTooltipTemplateRef)("ngTemplateOutletContext",e.seriesSharedTooltipContext)}}function wT(o,t){if(1&o&&(a.j41(0,"div",3),a.DNE(1,bT,1,2,null,4)(2,_T,1,2,null,4),a.k0s()),2&o){const e=a.XpG();a.Y8G("ngClass",e.popupClasses)("ngStyle",e.style),a.R7$(),a.Y8G("ngIf",!e.shared),a.R7$(),a.Y8G("ngIf",e.shared)}}function CT(o,t){1&o&&a.nrm(0,"span",6),2&o&&a.Y8G("innerHTML",t.formattedValue,a.npT)}function kT(o,t){if(1&o&&(a.j41(0,"td"),a.nrm(1,"span",8),a.k0s()),2&o){const e=a.XpG().$implicit;a.R7$(),a.xc7("background-color",e.series.color)}}function AT(o,t){if(1&o&&(a.qex(0),a.EFF(1),a.bVm()),2&o){const e=a.XpG(2).$implicit;a.R7$(),a.JRh(e.series.name)}}function ST(o,t){1&o&&(a.qex(0),a.EFF(1,"\xa0"),a.bVm())}function TT(o,t){if(1&o&&(a.j41(0,"td"),a.DNE(1,AT,2,1,"ng-container",4)(2,ST,2,0,"ng-container",4),a.k0s()),2&o){const e=a.XpG().$implicit;a.R7$(),a.Y8G("ngIf",void 0!==e.series.name),a.R7$(),a.Y8G("ngIf",void 0===e.series.name)}}function MT(o,t){}function ET(o,t){if(1&o&&(a.j41(0,"tr"),a.DNE(1,kT,2,2,"td",4)(2,TT,3,2,"td",4),a.j41(3,"td"),a.DNE(4,MT,0,0,"ng-template",5),a.k0s()()),2&o){const e=t.$implicit,i=a.XpG(),s=i.colorMarker,n=i.nameColumn;a.R7$(),a.Y8G("ngIf",s),a.R7$(),a.Y8G("ngIf",n),a.R7$(2),a.Y8G("ngTemplateOutlet",e.template)("ngTemplateOutletContext",e)}}function PT(o,t){if(1&o&&(a.j41(0,"table")(1,"tr")(2,"th"),a.EFF(3),a.k0s()(),a.DNE(4,ET,5,4,"tr",7),a.k0s()),2&o){const e=t.points,i=t.categoryText,s=t.colspan;a.R7$(2),a.BMQ("colspan",s),a.R7$(),a.SpI(" ",i," "),a.R7$(),a.Y8G("ngForOf",e)}}const DT=["surface"];function IT(o,t){}function RT(o,t){if(1&o&&a.DNE(0,IT,0,0,"ng-template",13),2&o){const e=a.XpG(2);a.Y8G("ngTemplateOutlet",e.noDataTemplate.templateRef)}}function LT(o,t){if(1&o&&a.EFF(0),2&o){const e=a.XpG(2);a.SpI(" ",e.messageFor("noData")," ")}}function OT(o,t){if(1&o&&(a.j41(0,"div",10)(1,"div",11),a.DNE(2,RT,1,1,null,12)(3,LT,1,1,"ng-template",null,1,a.C5r),a.k0s()()),2&o){const e=a.sdS(4),i=a.XpG();a.xc7("display","none"),a.R7$(2),a.Y8G("ngIf",i.noDataTemplate)("ngIfElse",e)}}function BT(o,t){}function VT(o,t){if(1&o&&(a.j41(0,"div",14),a.DNE(1,BT,0,0,"ng-template",13),a.k0s()),2&o){const e=a.XpG();a.Y8G("ngStyle",e.donutCenterStyle),a.R7$(),a.Y8G("ngTemplateOutlet",e.donutCenterTemplate.templateRef)}}function FT(o,t){1&o&&a.nrm(0,"div",15)}function NT(o,t){1&o&&a.nrm(0,"div",6)}function zT(o,t){1&o&&a.nrm(0,"div",6)}const UT=["breadcrumb"];function jT(o,t){}function GT(o,t){if(1&o&&a.DNE(0,jT,0,0,"ng-template",6),2&o){const e=a.XpG(2);a.Y8G("ngTemplateOutlet",e.nodeTooltipTemplateRef)("ngTemplateOutletContext",e.nodeTooltipContext)}}function HT(o,t){}function XT(o,t){if(1&o&&a.DNE(0,HT,0,0,"ng-template",6),2&o){const e=a.XpG(2);a.Y8G("ngTemplateOutlet",e.linkTooltipTemplateRef)("ngTemplateOutletContext",e.linkTooltipContext)}}function YT(o,t){if(1&o&&(a.j41(0,"div",3)(1,"div",4),a.DNE(2,GT,1,2,null,5)(3,XT,1,2,null,5),a.k0s()()),2&o){const e=a.XpG();a.Y8G("ngStyle",e.style),a.R7$(2),a.Y8G("ngIf",e.isNode),a.R7$(),a.Y8G("ngIf",e.isLink)}}function WT(o,t){if(1&o&&(a.j41(0,"div",7),a.nrm(1,"div",8),a.j41(2,"span",7),a.EFF(3),a.k0s(),a.j41(4,"span",7),a.EFF(5),a.k0s()()),2&o){const e=t.color,i=t.label,s=t.value,n=a.XpG();a.Y8G("ngStyle",n.tooltipStyle),a.R7$(),a.Y8G("color",e),a.R7$(),a.Y8G("ngStyle",n.textStyle),a.R7$(),a.JRh(i.text),a.R7$(),a.Y8G("ngStyle",n.textStyle),a.R7$(),a.JRh(n.formatUnits(s))}}function $T(o,t){if(1&o&&(a.j41(0,"div",7),a.nrm(1,"div",8),a.j41(2,"span",7),a.EFF(3),a.k0s(),a.nrm(4,"kendo-icon-wrapper",9)(5,"div",8),a.j41(6,"span",7),a.EFF(7),a.k0s(),a.j41(8,"span",7),a.EFF(9),a.k0s()()),2&o){const e=t.source,i=t.target,s=t.value,n=a.XpG();a.Y8G("ngStyle",n.tooltipStyle),a.R7$(),a.Y8G("color",e.color),a.R7$(),a.Y8G("ngStyle",n.textStyle),a.R7$(),a.JRh(null==e.label?null:e.label.text),a.R7$(),a.Y8G("name",n.arrowIcon.name)("svgIcon",n.arrowIcon),a.R7$(),a.Y8G("color",i.color),a.R7$(),a.Y8G("ngStyle",n.textStyle),a.R7$(),a.JRh(null==i.label?null:i.label.text),a.R7$(),a.Y8G("ngStyle",n.textStyle),a.R7$(),a.JRh(n.formatUnits(s))}}const QT=["instance"];function ZT(o,t){1&o&&a.nrm(0,"div",5)}const qT=du.prototype.options.labels.dateFormats,ux={milliseconds:"HH:mm:ss.SSS",seconds:{time:"medium"},minutes:{time:"short"},hours:{time:"short"},days:{skeleton:"Md"},weeks:{skeleton:"Md"},months:{skeleton:"yyMMM"},years:{skeleton:"y"}};Object.assign(cn.prototype.options.labels.dateFormats,ux),Object.assign(qT,ux);let px=(()=>{class o{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(i){return new(i||o)(a.rXU(a.C4Q,8))};static \u0275dir=a.FsC({type:o,selectors:[["","kendoChartDonutCenterTemplate",""]],standalone:!0})}return o})(),gx=(()=>{class o{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(i){return new(i||o)(a.rXU(a.C4Q,8))};static \u0275dir=a.FsC({type:o,selectors:[["","kendoChartNoDataTemplate",""]],standalone:!0})}return o})();class JT{sender;options;constructor(t,e){this.sender=t,this.options=e}}let _t=(()=>{class o{onItemChange$;source;constructor(){this.source=new uT.B,this.onItemChange$=this.source.asObservable()}notify(e){this.source.next(e)}static \u0275fac=function(i){return new(i||o)};static \u0275prov=a.jDH({token:o,factory:o.\u0275fac})}return o})();const Kc=1e3/60;class qc{key;value;constructor(t,e){this.key=t,this.value=e}}let b=(()=>{class o{ngZone;onChange$;onFastChange$;store={};source=new pT.t({});constructor(e){this.ngZone=e,this.initSource()}initSource(){this.onFastChange$=this.source.asObservable(),this.onChange$=this.onFastChange$.pipe((0,Qc.Z)(Kc))}push(e){this.store=e,this.next()}notify(e){this.set(e.key,e.value),this.next()}set(e,i){let s=this.store;const n=e.split(".");let r=n.shift();for(;n.length>0;)s=s[r]=s[r]||{},r=n.shift();s[r]=i}next(){this.ngZone.runOutsideAngular(()=>{this.source.next(this.store)})}static \u0275fac=function(i){return new(i||o)(a.KVO(a.SKi))};static \u0275prov=a.jDH({token:o,factory:o.\u0275fac})}return o})();function Gr(o,t){for(const e in o){if(!Object.hasOwnProperty.call(o,e))continue;const i=o[e].currentValue;void 0===i?delete t[e]:t[e]=i}}function Hr(o){const t={};for(const e in o)Object.hasOwnProperty.call(o,e)&&(t[e]=new a.FRM(null,o[e],!1));return t}let Ns=(()=>{class o{configurationService;collectionService;subscription;options={};hidden=!1;constructor(e,i){this.configurationService=e,this.collectionService=i,this.subscription=e.onFastChange$.subscribe(s=>{this.options=s,this.notify()})}ngOnChanges(e){const i=this.configurationService.store;Gr(e,i),this.configurationService.push(i)}notifyChanges(e){this.ngOnChanges(Hr(e))}ngOnDestroy(){this.subscription.unsubscribe()}notify(){this.collectionService&&this.collectionService.notify(new JT(this,this.options))}static \u0275fac=function(i){return new(i||o)(a.rXU(b),a.rXU(_t))};static \u0275dir=a.FsC({type:o,features:[a.OA$]})}return o})(),S=(()=>{class o{configKey;configurationService;store={};constructor(e,i){if(this.configKey=e,this.configurationService=i,void 0===e)throw new Error("Configuration key not set")}ngOnDestroy(){this.store=void 0,this.notify()}ngOnChanges(e){Gr(e,this.store),this.notify()}notifyChanges(e){this.ngOnChanges(Hr(e))}markAsVisible(){this.store.visible=!0,this.notify()}notify(){this.configurationService.notify(new qc(this.configKey,this.store))}static \u0275fac=function(i){a.QTQ()};static \u0275dir=a.FsC({type:o,features:[a.OA$]})}return o})(),Xr=(()=>{class o extends S{configurationService;background;border;color;font;format;padding;visible;seriesTooltipTemplate;constructor(e){super("tooltip",e),this.configurationService=e,this.markAsVisible()}get seriesTooltipTemplateRef(){return this.seriesTooltipTemplate}static \u0275fac=function(i){return new(i||o)(a.rXU(b))};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-chart-series-item-tooltip"]],contentQueries:function(i,s,n){if(1&i&&a.wni(n,a.C4Q,5),2&i){let r;a.mGM(r=a.lsd())&&(s.seriesTooltipTemplate=r.first)}},inputs:{background:"background",border:"border",color:"color",font:"font",format:"format",padding:"padding",visible:"visible"},standalone:!0,features:[a.Vt3,a.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})(),Jc=(()=>{class o{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(i){return new(i||o)(a.rXU(a.C4Q,8))};static \u0275dir=a.FsC({type:o,selectors:[["","kendoChartDrilldownSeries",""]],standalone:!0})}return o})();const fx=o=>void 0!==o&&!o;let Ci=(()=>{class o extends Ns{configurationService;collectionService;aggregate;autoFit;axis;border;categoryAxis;categoryField;closeField;color;colorField;connectors;currentField;dashType;data;downColor;downColorField;drilldownField;dynamicHeight;dynamicSlope;errorHighField;errorLowField;explodeField;field;fromField;gap;highField;holeSize;line;lowField;lowerField;margin;maxSize;mean;meanField;median;medianField;minSize;missingValues;name;neckRatio;negativeColor;negativeValues;noteTextField;opacity;openField;outliersField;overlay;padding;q1Field;q3Field;segmentSpacing;size;sizeField;spacing;stack;startAngle;style;summaryField;target;toField;type;upperField;visible;visibleInLegend;visibleInLegendField;visual;width;whiskers;xAxis;xErrorHighField;xErrorLowField;xField;yAxis;yErrorHighField;yErrorLowField;yField;zIndex;trendline;for;legendItem;pattern;patternField;errorBars;extremes;highlight;labels;markers;notes;outliers;tooltip;seriesTooltip;drilldownTemplate;constructor(e,i){super(e,i),this.configurationService=e,this.collectionService=i}toggleVisibility(){this.options.visible=fx(this.options.visible),this.notify()}togglePointVisibility(e){const i=this.options.pointVisibility=this.options.pointVisibility||{};i[e]=fx(i[e]),this.notify()}get seriesTooltipTemplateRef(){if(this.seriesTooltip)return this.seriesTooltip.seriesTooltipTemplateRef}static \u0275fac=function(i){return new(i||o)(a.rXU(b),a.rXU(_t))};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-chart-series-item"]],contentQueries:function(i,s,n){if(1&i&&(a.wni(n,Xr,5),a.wni(n,Jc,5)),2&i){let r;a.mGM(r=a.lsd())&&(s.seriesTooltip=r.first),a.mGM(r=a.lsd())&&(s.drilldownTemplate=r.first)}},inputs:{aggregate:"aggregate",autoFit:"autoFit",axis:"axis",border:"border",categoryAxis:"categoryAxis",categoryField:"categoryField",closeField:"closeField",color:"color",colorField:"colorField",connectors:"connectors",currentField:"currentField",dashType:"dashType",data:"data",downColor:"downColor",downColorField:"downColorField",drilldownField:"drilldownField",dynamicHeight:"dynamicHeight",dynamicSlope:"dynamicSlope",errorHighField:"errorHighField",errorLowField:"errorLowField",explodeField:"explodeField",field:"field",fromField:"fromField",gap:"gap",highField:"highField",holeSize:"holeSize",line:"line",lowField:"lowField",lowerField:"lowerField",margin:"margin",maxSize:"maxSize",mean:"mean",meanField:"meanField",median:"median",medianField:"medianField",minSize:"minSize",missingValues:"missingValues",name:"name",neckRatio:"neckRatio",negativeColor:"negativeColor",negativeValues:"negativeValues",noteTextField:"noteTextField",opacity:"opacity",openField:"openField",outliersField:"outliersField",overlay:"overlay",padding:"padding",q1Field:"q1Field",q3Field:"q3Field",segmentSpacing:"segmentSpacing",size:"size",sizeField:"sizeField",spacing:"spacing",stack:"stack",startAngle:"startAngle",style:"style",summaryField:"summaryField",target:"target",toField:"toField",type:"type",upperField:"upperField",visible:"visible",visibleInLegend:"visibleInLegend",visibleInLegendField:"visibleInLegendField",visual:"visual",width:"width",whiskers:"whiskers",xAxis:"xAxis",xErrorHighField:"xErrorHighField",xErrorLowField:"xErrorLowField",xField:"xField",yAxis:"yAxis",yErrorHighField:"yErrorHighField",yErrorLowField:"yErrorLowField",yField:"yField",zIndex:"zIndex",trendline:"trendline",for:"for",legendItem:"legendItem",pattern:"pattern",patternField:"patternField",errorBars:"errorBars",extremes:"extremes",highlight:"highlight",labels:"labels",markers:"markers",notes:"notes",outliers:"outliers",tooltip:"tooltip"},standalone:!0,features:[a.Jv_([b]),a.Vt3,a.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})();const e2={horizontal:"fit",vertical:"fit"};let th=(()=>{class o{popupService;localizationService;animate;style={};templateRef;popupRef=null;popupSettings;constructor(e,i){this.popupService=e,this.localizationService=i}get active(){return null!==this.popupRef}show(e){const i=e.anchor.align,s=this.position(e.anchor.point);if(this.style=e.style,this.popupRef){const n=this.popupRef.popup.instance;n.offset=s,n.popupAlign=i}else this.popupRef=this.popupService.open(Object.assign({offset:s,popupAlign:i,animate:this.animate,content:this.templateRef,collision:e2,positionMode:"absolute"},this.popupSettings)),this.localizationService.rtl&&this.popupRef.popupElement.setAttribute("dir","rtl"),this.onInit()}onInit(){}hide(){this.popupRef&&(this.popupRef.close(),this.popupRef=null)}ngOnDestroy(){this.hide()}position(e){if(!this.popupSettings||!this.popupSettings.appendTo)return e;const i=this.popupSettings.appendTo.element.nativeElement,s=i.getBoundingClientRect(),{scrollLeft:n,scrollTop:r}=this.scrollOffset(i);return{left:e.left-s.left-n,top:e.top-s.top-r}}scrollOffset(e){if(!e)return null;let i=e.scrollLeft,s=e.scrollTop,n=e.parentElement;for(;n;)i+=n.scrollLeft,s+=n.scrollTop,n=n.parentElement;return{scrollLeft:i,scrollTop:s}}static \u0275fac=function(i){return new(i||o)(a.rXU(ve.OQ),a.rXU(vt.Pi))};static \u0275dir=a.FsC({type:o,inputs:{popupSettings:"popupSettings"}})}return o})();function eh(){if((0,Et.nm)())return new a.aKT(document.body)}let Yr=(()=>{class o extends th{renderer;templateRef;key;value;animate=!1;constructor(e,i,s){super(e,i),this.renderer=s}onInit(){this.popupRef?.popupElement&&this.renderer.addClass(this.popupRef.popupElement,"k-chart-tooltip-wrapper")}show(e){super.show(e),this.value=e.value,this.popupRef.popup.changeDetectorRef.detectChanges()}static \u0275fac=function(i){return new(i||o)(a.rXU(ve.OQ),a.rXU(vt.Pi),a.rXU(a.sFG))};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-chart-crosshair-tooltip"]],viewQuery:function(i,s){if(1&i&&a.GBs(Zc,7),2&i){let n;a.mGM(n=a.lsd())&&(s.templateRef=n.first)}},inputs:{key:"key"},standalone:!0,features:[a.Jv_([ve.OQ,{provide:ve.Fy,useFactory:eh}]),a.Vt3,a.aNF],decls:2,vars:0,consts:[["content",""],[1,"k-chart-tooltip","k-chart-crosshair-tooltip",3,"ngStyle"]],template:function(i,s){1&i&&a.DNE(0,mT,2,2,"ng-template",null,0,a.C5r)},dependencies:[ct.B3],encapsulation:2})}return o})();const mx=["categoryAxis","valueAxis","xAxis","yAxis"];let zs=(()=>{class o{popupSettings;crossahairTooltipComponents;tooltipKeys=[];tooltipsMap={};show(e){const i=this.crossahairTooltipComponents.toArray(),s=e.axisName,n=e.axisIndex;for(let r=0;r<i.length;r++)if(i[r].key===s+n){i[r].show(e);break}}hide(){const e=this.crossahairTooltipComponents.toArray();for(let i=0;i<e.length;i++)e[i].hide()}get active(){return this.tooltipKeys.length>0}createCrosshairTooltips(e){const i=this.mapTooltips(e),s=this.tooltipsMap;for(const n in s)i[n]||(this.removeTooltip(n),delete s[n]);for(const n in i)!s[n]&&"constructor"!==n&&"__proto__"!==n&&"prototype"!==n&&(s[n]=i[n],this.tooltipKeys.push(n))}removeTooltip(e){const i=this.tooltipKeys;for(let s=0;s<i.length;s++)if(i[s]===e){i.splice(s,1);break}}mapTooltips(e){const i={};for(let s=0;s<mx.length;s++){const n=this.axesCrosshairTooltipOptions(e,mx[s]);for(let r=0;r<n.length;r++){const l=n[r];i[l.name+l.index]=l}}return i}axesCrosshairTooltipOptions(e,i){const s=[];if(e[i]){const n=[].concat(e[i]);for(let r=0;r<n.length;r++){const l=(n[r].crosshair||{}).tooltip;l&&l.visible&&s.push({index:r,name:i})}}return s}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-chart-crosshair-tooltips-container"]],viewQuery:function(i,s){if(1&i&&a.GBs(Yr,5),2&i){let n;a.mGM(n=a.lsd())&&(s.crossahairTooltipComponents=n)}},inputs:{popupSettings:"popupSettings"},standalone:!0,features:[a.aNF],decls:1,vars:1,consts:[[3,"key","popupSettings",4,"ngFor","ngForOf"],[3,"key","popupSettings"]],template:function(i,s){1&i&&a.DNE(0,xT,1,2,"kendo-chart-crosshair-tooltip",0),2&i&&a.Y8G("ngForOf",s.tooltipKeys)},dependencies:[ct.pM,Yr],encapsulation:2})}return o})(),Us=(()=>{class o{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(i){return new(i||o)(a.rXU(a.C4Q,8))};static \u0275dir=a.FsC({type:o,selectors:[["","kendoChartSeriesTooltipTemplate",""]],standalone:!0})}return o})(),qn=(()=>{class o{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(i){return new(i||o)(a.rXU(a.C4Q,8))};static \u0275dir=a.FsC({type:o,selectors:[["","kendoChartSharedTooltipTemplate",""]],standalone:!0})}return o})();class xx{value;category;categoryIndex;series;dataItem;percentage;runningTotal;total;low;high;xLow;xHigh;yLow;yHigh;template;point;format;constructor(t,e,i){this.value=t.value,this.category=t.category,this.categoryIndex=t.categoryIx,this.series=t.series,this.dataItem=t.dataItem,this.percentage=t.percentage,this.runningTotal=t.runningTotal,this.total=t.total,this.low=t.low,this.high=t.high,this.xLow=t.xLow,this.xHigh=t.xHigh,this.yLow=t.yLow,this.yHigh=t.yHigh,this.template=i,this.point=t,this.format=e}get formattedValue(){return this.format?this.point.formatValue(this.format):String(this.value)}}function ih(o,t){let e=o;for(;e&&e!==t;)e=e.parentNode;return!!e}let $i=(()=>{class o{seriesTemplates;template;sharedTemplate;setTemplate(e){this.template=e}getTemplate(e){return this.seriesTemplates&&this.seriesTemplates[e]?this.seriesTemplates[e]:this.template}setSeriesTemplates(e){this.seriesTemplates=e}setSharedTemplate(e){this.sharedTemplate=e}getSharedTemplate(){return this.sharedTemplate}static \u0275fac=function(i){return new(i||o)};static \u0275prov=a.jDH({token:o,factory:o.\u0275fac})}return o})(),js=(()=>{class o extends th{popupService;templateService;localizationService;ngZone;seriesTooltipTemplateRef;seriesSharedTooltipTemplateRef;seriesTooltipContext={};seriesSharedTooltipContext={};shared;defaultSeriesTooltipTemplate;defaultSharedTooltipTemplate;templateRef;animate=!0;classNames;wrapperClass="k-chart-tooltip-wrapper";leave=new a.bkB;popupClasses={};mouseleaveSubscription;constructor(e,i,s,n){super(e,s),this.popupService=e,this.templateService=i,this.localizationService=s,this.ngZone=n}show(e){this.shared=e.shared,this.popupClasses=Object.assign({"k-chart-shared-tooltip":e.shared,"k-chart-tooltip":!0,[e.className]:!!e.className},this.classNames),e.shared?(this.seriesSharedTooltipTemplateRef=this.templateService.getSharedTemplate()||this.defaultSharedTooltipTemplate.templateRef,this.seriesSharedTooltipContext=this.sharedTemplateContext(e)):(this.seriesTooltipContext=new xx(e.point,e.format),this.seriesTooltipTemplateRef=this.pointTemplateRef(e.point)),super.show(e)}containsElement(e){if(this.popupRef)return ih(e,this.popupRef.popupElement)}sharedTemplateContext(e){const s=e.points.filter(l=>typeof l.series.name<"u").length>0,n=e.series.length>1;let r=1;return s&&r++,n&&r++,{category:e.category,categoryText:e.categoryText,colorMarker:n,colspan:r,nameColumn:s,points:this.wrapPoints(e.points,e.format)}}pointTemplateRef(e){return this.templateService.getTemplate(e.series.index)||this.defaultSeriesTooltipTemplate.templateRef}wrapPoints(e,i){const s=[];for(let n=0;n<e.length;n++){const r=e[n],l=this.pointTemplateRef(r);s.push(new xx(r,((r.options||{}).tooltip||{}).format||i,l))}return s}onInit(){this.ngZone.runOutsideAngular(()=>{this.mouseleaveSubscription=this.popupRef.popupElement.addEventListener("mouseleave",e=>{this.leave.emit(e)})}),this.popupRef.popupElement.className+=` ${this.wrapperClass}`}hide(){this.mouseleaveSubscription&&(this.mouseleaveSubscription(),this.mouseleaveSubscription=null),super.hide()}static \u0275fac=function(i){return new(i||o)(a.rXU(ve.OQ),a.rXU($i),a.rXU(vt.Pi),a.rXU(a.SKi))};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-chart-tooltip-popup"]],viewQuery:function(i,s){if(1&i&&(a.GBs(Us,5),a.GBs(qn,5),a.GBs(Zc,7)),2&i){let n;a.mGM(n=a.lsd())&&(s.defaultSeriesTooltipTemplate=n.first),a.mGM(n=a.lsd())&&(s.defaultSharedTooltipTemplate=n.first),a.mGM(n=a.lsd())&&(s.templateRef=n.first)}},inputs:{animate:"animate",classNames:"classNames",wrapperClass:"wrapperClass"},outputs:{leave:"leave"},standalone:!0,features:[a.Jv_([ve.OQ,{provide:ve.Fy,useFactory:eh}]),a.Vt3,a.aNF],decls:4,vars:0,consts:[["content",""],["kendoChartSeriesTooltipTemplate",""],["kendoChartSharedTooltipTemplate",""],[3,"ngClass","ngStyle"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"],[4,"ngFor","ngForOf"],[1,"k-chart-shared-tooltip-marker"]],template:function(i,s){1&i&&a.DNE(0,wT,3,4,"ng-template",null,0,a.C5r)(2,CT,1,1,"ng-template",1)(3,PT,5,3,"ng-template",2)},dependencies:[ct.YU,ct.B3,ct.bT,ct.T3,Us,qn,ct.pM],encapsulation:2})}return o})();class n2 extends ga{handlerMap={hideTooltip:"onHideTooltip",legendItemClick:"onLegendItemClick",render:"onRender",showTooltip:"onShowTooltip",init:"onInit"};constructor(t){super(t)}}let Jn=(()=>{class o extends b{loaded=!1;element;loadTheme(){this.loaded||!(0,Et.nm)()||(this.createElement(),this.readTheme(),this.destroyElement(),this.loaded=!0,this.next())}reset(){this.store={},this.loaded=!1,this.loadTheme()}readTheme(){let e={};try{e=(o=>{const t=Rt(o,"--kendo-chart-major-lines"),e=Rt(o,"--kendo-chart-text"),i=Fr(o,"--kendo-font-weight","--kendo-chart-label-font-size","--kendo-font-family"),s=Rt(o,"--kendo-chart-bg"),n=(o=>({icon:{background:Rt(o,"--kendo-chart-notes-bg"),border:{color:Rt(o,"--kendo-chart-notes-border")}},line:{color:Rt(o,"--kendo-chart-notes-lines")},label:{font:Nr(o)}}))(o),r=$c(o,"--kendo-chart-area-opacity"),l=Rt(o,"--kendo-color-surface"),c=Rt(o,"--kendo-chart-primary-bg"),h=()=>({downColor:t,mean:{color:l},median:{color:l},whiskers:{color:c}}),d=()=>({line:{color:t}}),u=()=>({opacity:r,highlight:{inactiveOpacity:$c(o,"--kendo-chart-area-inactive-opacity")}}),p=()=>({highlight:{inactiveOpacity:$c(o,"--kendo-chart-line-inactive-opacity")}}),g=()=>({target:{color:e}});return{axisDefaults:{crosshair:{color:Rt(o,"--kendo-chart-crosshair-bg")},labels:{color:e,font:i},line:{color:t},majorGridLines:{color:t},minorGridLines:{color:Rt(o,"--kendo-chart-minor-lines")},notes:structuredClone(n),title:{color:e,font:Nr(o)}},chartArea:{background:s},legend:sT(o),seriesColors:ix(o),seriesDefaults:{area:u(),verticalArea:u(),radarArea:u(),boxPlot:h(),verticalBoxPlot:h(),bullet:g(),verticalBullet:g(),horizontalWaterfall:d(),waterfall:d(),line:p(),verticalLine:p(),candlestick:{downColor:e,line:{color:e}},errorBars:{color:Rt(o,"--kendo-chart-error-bars-bg")},icon:{border:{color:t}},labels:{background:s,color:e,font:i,opacity:r},notes:structuredClone(n)},subtitle:{color:e,font:sx(o)},title:nx(o),paneDefaults:{title:{font:sx(o)}}}})(this.element)}catch{e={}}const s=e.chartArea&&e.chartArea.background?x(tx(),e):Object.assign({},tx(),{axisDefaults:{crosshair:{color:"rgba(0, 0, 0, 0.5)"},labels:{color:"rgb(101, 101, 101)",font:"12px serif"},line:{color:"rgba(0, 0, 0, 0.08)"},majorGridLines:{color:"rgba(0, 0, 0, 0.08)"},minorGridLines:{color:"rgba(0, 0, 0, 0.04)"},notes:{icon:{background:"rgba(0, 0, 0, 0.5)",border:{color:"rgba(0, 0, 0, 0.5)"}},line:{color:"rgba(0, 0, 0, 0.5)"},label:{font:"14px serif"}},title:{color:"rgb(101, 101, 101)",font:"14px serif"}},chartArea:{background:"rgb(255, 255, 255)"},legend:{inactiveItems:{labels:{color:"rgba(102, 102, 102, 0.5)"},markers:{color:"rgba(102, 102, 102, 0.5)"}},labels:{color:"rgb(101, 101, 101)",font:"14px serif"}},seriesDefaults:{boxPlot:{downColor:"rgba(0, 0, 0, 0.08)",mean:{color:"rgb(246, 246, 246)"},median:{color:"rgb(246, 246, 246)"},whiskers:{color:"rgb(255, 99, 88)"}},bullet:{target:{color:"rgb(101, 101, 101)"}},candlestick:{downColor:"rgb(101, 101, 101)",line:{color:"rgb(101, 101, 101)"}},errorBars:{color:"rgba(0, 0, 0, 0.5)"},horizontalWaterfall:{line:{color:"rgba(0, 0, 0, 0.08)"}},icon:{border:{color:"rgba(0, 0, 0, 0.08)"}},labels:{background:"rgb(255, 255, 255)",color:"rgb(101, 101, 101)",opacity:.8,font:"12px serif"},notes:{icon:{background:"rgba(0, 0, 0, 0.5)",border:{color:"rgba(0, 0, 0, 0.5)"}},line:{color:"rgba(0, 0, 0, 0.5)"},label:{font:"14px serif"}},overlay:{gradient:"none"},verticalBoxPlot:{downColor:"rgba(0, 0, 0, 0.08)",mean:{color:"rgb(246, 246, 246)"},median:{color:"rgb(246, 246, 246)"},whiskers:{color:"rgb(255, 99, 88)"}},verticalBullet:{target:{color:"rgb(101, 101, 101)"}},waterfall:{line:{color:"rgba(0, 0, 0, 0.08)"}},area:{opacity:.8}},title:{color:"rgb(101, 101, 101)",font:"16px serif"},seriesColors:["rgb(255, 99, 88)","rgb(255, 210, 70)","rgb(120, 210, 55)","rgb(40, 180, 200)","rgb(45, 115, 245)","rgb(170, 70, 190)"]});this.push(s)}createElement(){const e=this.element=document.createElement("div");e.className="k-chart",e.style.display="none",document.body.appendChild(e)}destroyElement(){this.element&&(document.body.removeChild(this.element),this.element=void 0)}static \u0275fac=(()=>{let e;return function(s){return(e||(e=a.xGo(o)))(s||o)}})();static \u0275prov=a.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),te=(()=>{class o{sender;constructor(e){this.sender=e}static \u0275fac=function(i){a.QTQ()};static \u0275dir=a.FsC({type:o})}return o})(),qe=(()=>{class o extends te{prevented=!1;preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}static \u0275fac=(()=>{let e;return function(s){return(e||(e=a.xGo(o)))(s||o)}})();static \u0275dir=a.FsC({type:o,features:[a.Vt3]})}return o})();class sh extends qe{series;seriesIndex;pointIndex;text;constructor(t,e){super(e),this.series=t.series,this.seriesIndex=t.seriesIndex,this.pointIndex=t.pointIndex,this.text=t.text}}class nh extends te{category;dataItem;series;value;visual;constructor(t,e){super(e),this.category=t.category,this.dataItem=t.dataItem,this.series=t.series,this.value=t.value,this.visual=t.visual}}class vx extends te{constructor(t,e){super(e)}}class oh extends qe{category;dataItem;originalEvent;percentage;point;series;stackValue;value;constructor(t,e){super(e),this.category=t.category,this.dataItem=t.dataItem,this.originalEvent=t.originalEvent,this.percentage=t.percentage,this.point=t.point,this.series=t.series,this.stackValue=t.stackValue,this.value=t.value}}const bx={axisLabelClick:class r2 extends te{axis;dataItem;index;text;value;constructor(t,e){super(e),this.axis=t.axis,this.dataItem=t.dataItem,this.index=t.index,this.text=t.text,this.value=t.value}},drag:class a2 extends qe{axisRanges;originalEvent;constructor(t,e){super(e),this.axisRanges=t.axisRanges,this.originalEvent=t.originalEvent}},dragEnd:class l2 extends te{axisRanges;originalEvent;constructor(t,e){super(e),this.axisRanges=t.axisRanges,this.originalEvent=t.originalEvent}},dragStart:class c2 extends qe{axisRanges;originalEvent;constructor(t,e){super(e),this.axisRanges=t.axisRanges,this.originalEvent=t.originalEvent}},legendItemHover:class h2 extends sh{preventDefault(){super.preventDefault()}},legendItemLeave:class d2 extends sh{preventDefault(){}isDefaultPrevented(){return!1}},noteClick:class u2 extends nh{},noteHover:class p2 extends nh{},noteLeave:class g2 extends nh{},paneRender:class f2 extends te{pane;index;name;constructor(t,e){super(e),Object.assign(this,t)}},plotAreaClick:class m2 extends te{category;originalEvent;value;x;y;constructor(t,e){super(e),this.category=t.category,this.originalEvent=t.originalEvent,this.value=t.value,this.x=t.x,this.y=t.y}},plotAreaHover:class x2 extends te{category;originalEvent;value;x;y;constructor(t,e){super(e),this.category=t.category,this.originalEvent=t.originalEvent,this.value=t.value,this.x=t.x,this.y=t.y}},plotAreaLeave:class v2 extends te{},render:vx,select:class b2 extends qe{axis;from;to;constructor(t,e){super(e),this.axis=t.axis,this.from=t.from,this.to=t.to}},selectEnd:class y2 extends te{axis;from;to;constructor(t,e){super(e),this.axis=t.axis,this.from=t.from,this.to=t.to}},selectStart:class _2 extends qe{axis;from;to;constructor(t,e){super(e),this.axis=t.axis,this.from=t.from,this.to=t.to}},seriesClick:class w2 extends te{category;dataItem;originalEvent;percentage;point;series;stackValue;value;constructor(t,e){super(e),this.category=t.category,this.dataItem=t.dataItem,this.originalEvent=t.originalEvent,this.percentage=t.percentage,this.point=t.point,this.series=t.series,this.stackValue=t.stackValue,this.value=t.value}},seriesHover:class C2 extends oh{},seriesOver:class k2 extends oh{},seriesLeave:class A2 extends oh{},zoom:class S2 extends qe{axisRanges;delta;originalEvent;constructor(t,e){super(e),this.axisRanges=t.axisRanges,this.delta=t.delta,this.originalEvent=t.originalEvent}},zoomEnd:class T2 extends te{axisRanges;originalEvent;constructor(t,e){super(e),this.axisRanges=t.axisRanges,this.originalEvent=t.originalEvent}},zoomStart:class M2 extends qe{axisRanges;originalEvent;constructor(t,e){super(e),this.axisRanges=t.axisRanges,this.originalEvent=t.originalEvent}}};let to=class{create(t,e,i){if(bx[t])return new bx[t](e,i)}};class E2 extends sh{preventDefault(){super.preventDefault()}}const Wr={name:"@progress/kendo-angular-charts",productName:"Kendo UI for Angular",productCode:"KENDOUIANGULAR",productCodes:["KENDOUIANGULAR"],publishDate:1751463236,version:"19.2.0",licensingDocsUrl:"https://www.telerik.com/kendo-angular-ui/my-license/"};let Gs=(()=>{class o{configKey;configurationService;collectionService;children;subscription;items=[];constructor(e,i,s){this.configKey=e,this.configurationService=i,this.collectionService=s,this.subscription=s.onItemChange$.subscribe(n=>this.processChanges(n))}ngOnDestroy(){this.subscription.unsubscribe()}ngAfterContentInit(){this.readItems(),this.children.changes.subscribe(()=>this.readItems())}processChanges(e){if(!this.children)return;const i=this.children.toArray().filter(s=>!s.hidden).indexOf(e.sender);i<0||(this.items[i]=e.options,this.change())}readItems(){this.items=this.children.filter(e=>!e.hidden).map(e=>e.options),this.change()}change(){this.configurationService.notify(new qc(this.configKey,0===this.items.length?void 0:this.items))}static \u0275fac=function(i){a.QTQ()};static \u0275dir=a.FsC({type:o})}return o})(),Qi=(()=>{class o extends Gs{configurationService;collectionService;tooltipTemplateService;viewContainer;children;constructor(e,i,s,n){super("series",e,i),this.configurationService=e,this.collectionService=i,this.tooltipTemplateService=s,this.viewContainer=n}ngAfterContentChecked(){this.readTooltipTemplates()}readTooltipTemplates(){const e=this.children.map(i=>i.seriesTooltipTemplateRef);this.tooltipTemplateService.setSeriesTemplates(e)}static \u0275fac=function(i){return new(i||o)(a.rXU(b),a.rXU(_t),a.rXU($i),a.rXU(a.c1b))};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-chart-series"]],contentQueries:function(i,s,n){if(1&i&&a.wni(n,Ci,5),2&i){let r;a.mGM(r=a.lsd())&&(s.children=r)}},standalone:!0,features:[a.Jv_([_t]),a.Vt3,a.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})();class P2 extends qe{value;point;series;constructor(t,e){super(e),this.value=t.value,this.point=t.point,this.series=t.series}}function $r(o){return o.observers.length>0}let Qr=(()=>{class o extends vt.EX{noData;static \u0275fac=(()=>{let e;return function(s){return(e||(e=a.xGo(o)))(s||o)}})();static \u0275dir=a.FsC({type:o,selectors:[["","kendoChartMessages",""]],inputs:{noData:"noData"},features:[a.Vt3]})}return o})(),yx=(()=>{class o extends Qr{service;constructor(e){super(),this.service=e}static \u0275fac=function(i){return new(i||o)(a.rXU(vt.Pi))};static \u0275dir=a.FsC({type:o,selectors:[["","kendoChartLocalizedMessages",""]],standalone:!0,features:[a.Jv_([{provide:Qr,useExisting:(0,a.Rfq)(()=>o)}]),a.Vt3]})}return o})(),Zi=(()=>{class o{configurationService;themeService;element;intl;localizationService;ngZone;instanceEventService;changeDetector;renderer;pannable;renderAs;seriesColors;subtitle;title;noData=!0;transitions;zoomable;axisDefaults;categoryAxis;chartArea;legend;panes;paneDefaults;plotArea;series;seriesDefaults;tooltip;valueAxis;xAxis;yAxis;axisLabelClick=new a.bkB;drag=new a.bkB;dragEnd=new a.bkB;dragStart=new a.bkB;legendItemHover=new a.bkB;legendItemLeave=new a.bkB;noteClick=new a.bkB;noteHover=new a.bkB;noteLeave=new a.bkB;paneRender=new a.bkB;plotAreaClick=new a.bkB;plotAreaHover=new a.bkB;plotAreaLeave=new a.bkB;render=new a.bkB;select=new a.bkB;selectEnd=new a.bkB;selectStart=new a.bkB;seriesClick=new a.bkB;drilldown=new a.bkB;seriesHover=new a.bkB;seriesOver=new a.bkB;seriesLeave=new a.bkB;zoom=new a.bkB;zoomEnd=new a.bkB;zoomStart=new a.bkB;legendItemClick=new a.bkB;drilldownLevelChange=new a.bkB;resizeRateLimit=10;popupSettings;get drilldownLevel(){return this.drilldownState.length}set drilldownLevel(e){const i=this.drilldownState.length;i<=e||!this.seriesComponents||(this.drilldownState.slice(e,i).forEach(s=>{s.hiddenSeries?.forEach(r=>{r.hidden=!1}),s.destroy()}),this.drilldownState.length=e,this.drilldownLevelChange.emit(e))}surface;seriesCollectionComponent;seriesComponents;donutCenterTemplate;noDataTemplate;tooltipInstance;crossahirTooltips;surfaceElement;donutCenterStyle;messageFor(e){return this.localizationService.get(e)}showLicenseWatermark=!1;instance;options;theme=null;optionsChange;suppressTransitions=!1;resizeTimeout;redrawTimeout;domSubscriptions;destroyed;subscriptions;rtl=!1;hostClasses=["k-chart","k-widget"];drilldownState=[];constructor(e,i,s,n,r,l,c,h,d){this.configurationService=e,this.themeService=i,this.element=s,this.intl=n,this.localizationService=r,this.ngZone=l,this.instanceEventService=c,this.changeDetector=h,this.renderer=d;const u=(0,Ur.$j)(Wr);this.showLicenseWatermark=(0,Et.Em)(u),this.themeService.loadTheme(),this.refreshWait()}ngOnInit(){this.element&&(this.hostClasses.forEach(e=>{this.renderer.addClass(this.element.nativeElement,e)}),this.renderer.setStyle(this.element.nativeElement,"position","relative"))}ngAfterViewInit(){this.canRender&&this.ngZone.runOutsideAngular(()=>{const e=this.renderer.listen(this.surfaceElement.nativeElement,"mouseleave",this.chartMouseleave.bind(this));this.domSubscriptions=()=>{e()}}),this.setDirection(),this.subscriptions=this.intl.changes.subscribe(this.intlChange.bind(this)),this.subscriptions.add(this.localizationService.changes.subscribe(this.rtlChange.bind(this)))}onDrilldown(e){const i=this.seriesComponents.find(c=>c.name===e.series.name),s=this.seriesCollectionComponent.first;if(!i?.drilldownTemplate||!s)return;const n=new P2(e,this);if(this.run(()=>this.drilldown.emit(n)),n.isDefaultPrevented())return;const r=[];this.seriesComponents.forEach(c=>{c.hidden||(c.hidden=!0,r.push(c))});const l=s.viewContainer.createEmbeddedView(i.drilldownTemplate.templateRef,{drilldownValue:e.value,point:e.point,series:e.series});l.hiddenSeries=r,l.markForCheck(),this.drilldownState.push(l),this.drilldownLevelChange.emit(this.drilldownLevel)}ngAfterViewChecked(){this.instance&&this.autoResize&&this.ngZone.runOutsideAngular(()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.resize()},0)})}ngOnChanges(e){const i=this.configurationService.store;Gr(e,i),i.popupSettings=null,this.configurationService.push(i)}notifyChanges(e){this.ngOnChanges(Hr(e))}ngOnDestroy(){this.destroyed=!0,this.optionsChange&&this.optionsChange.unsubscribe(),this.domSubscriptions&&(this.domSubscriptions(),this.domSubscriptions=null),this.instance&&(this.instance.destroy(),this.instance=null),this.subscriptions&&this.subscriptions.unsubscribe(),clearTimeout(this.resizeTimeout),clearTimeout(this.redrawTimeout)}createInstance(e,i){this.instance=new tc(e,this.options,this.theme,{intlService:this.intl,observer:i,rtl:this.rtl,sender:this})}exportImage(e={}){return(0,rx.A)(this.exportVisual(e),e)}exportSVG(e={}){return ax(this.exportVisual(e),e)}exportVisual(e={}){return this.instance.exportVisual(e)}findAxisByName(e){if(this.instance)return this.instance.findAxisByName(e)}findPaneByIndex(e){if(this.instance)return this.instance.findPaneByIndex(e)}findPaneByName(e){if(this.instance)return this.instance.findPaneByName(e)}getPlotArea(){if(this.instance)return this.instance.plotArea()}toggleHighlight(e,i){this.instance&&this.instance.toggleHighlight(e,i)}hideTooltip(){this.instance&&this.instance.hideTooltip()}showTooltip(e){this.instance&&this.instance.showTooltip(e)}init(){if(!this.canRender)return;const e=this.surfaceElement.nativeElement,i=new n2(this);this.createInstance(e,i)}resize(){this.instance&&this.instance.resize()}onResize(){this.autoResize&&this.resize()}reloadTheme(){this.instance&&(this.themeService.reset(),this.instance.destroy(),this.instance=null)}onLegendItemClick(e){this.run(()=>{const i=new E2(e,this);if(this.legendItemClick.emit(i),!i.isDefaultPrevented()){const s=this.seriesComponents.toArray()[e.series.index];if(!s)return;void 0!==e.pointIndex?s.togglePointVisibility(e.pointIndex):s.toggleVisibility(),this.suppressTransitions=!0}},$r(this.legendItemClick),this.seriesComponents.length>0)}onInit(e){this.instance=e.sender}onRender(e){const i=this.getDonutCenterStyle();this.run(()=>{const s=new vx(e,this);this.surface=e.sender.surface,this.render.emit(s),this.donutCenterStyle=i},$r(this.render),this.donutCenterStyle!==i)}onShowTooltip(e){this.run(()=>{e.crosshair?this.crossahirTooltips.show(e):this.tooltipInstance.show(e)},!e.crosshair,!0)}onHideTooltip(e){e.crosshair?this.crossahirTooltips.active&&(this.crossahirTooltips.hide(),this.detectChanges()):this.tooltipInstance.active&&(this.tooltipInstance.hide(),this.detectChanges())}trigger(e,i){if("resize"===e)return;if("drilldown"===e)return void this.onDrilldown(i);const s=this.activeEmitter(e);if(s){const n=this.instanceEventService.create(e,i,this);return this.run(()=>{s.emit(n)}),n.isDefaultPrevented&&n.isDefaultPrevented()}}requiresHandlers(e){for(let i=0;i<e.length;i++)if(this.activeEmitter(e[i]))return!0;return!1}refresh(){if(clearTimeout(this.redrawTimeout),this.updateDirection(),this.crossahirTooltips.createCrosshairTooltips(this.options),this.setChartAreaSize(),!this.instance)return void this.init();const e=this.options.transitions;this.suppressTransitions&&(this.options.transitions=!1),this.updateOptions(),this.suppressTransitions&&(this.options.transitions=e,this.suppressTransitions=!1)}setChartAreaSize(){if(!this.element)return;const e=this.element.nativeElement,i=this.options.chartArea||{};i.width&&(e.style.width=`${i.width}px`),i.height&&(e.style.height=`${i.height}px`)}updateOptions(){this.instance.setOptions(this.options)}tooltipMouseleave(e){const i=e.relatedTarget;this.instance&&(!i||!ih(i,this.element.nativeElement))&&this.instance.hideElements()}chartMouseleave(e){const i=e.relatedTarget,s=this.element.nativeElement;this.instance&&(!i||!this.tooltipInstance.containsElement(i)&&!ih(i,s))&&!this.instance.handlingTap&&this.instance.hideElements()}get canRender(){return(0,Et.nm)()&&!!this.surfaceElement}get autoResize(){return this.resizeRateLimit>0}activeEmitter(e){const i=this[e];if(i&&i.emit&&$r(i))return i}getDonutCenterStyle(){if(!this.instance||!this.options||!this.options.series)return;const e=this.options.series[0],i=this.instance._plotArea.charts;if(!e||"donut"!==e.type||!i||0===i[0].points.length)return;const s=i[0].points[0],n=s.box.center(),r=s.sector.innerRadius,h=2*r;return{height:h+"px",left:n.x-r+"px",top:n.y-r+"px",width:h+"px"}}refreshWait(){this.ngZone.runOutsideAngular(()=>{this.optionsChange=(0,lx.z)(this.configurationService.onChange$,this.themeService.onChange$).pipe((0,cx.M)(e=>{this.options=e[0],this.theme=e[1]}),(0,Qc.Z)(Kc)).subscribe(()=>{this.refresh()})})}run(e,i=!0,s){i?(s&&this.changeDetector.markForCheck(),this.ngZone.run(e)):(e(),s&&this.detectChanges())}detectChanges(){this.destroyed||this.changeDetector.detectChanges()}intlChange(){this.instance&&this.deferredRedraw()}rtlChange(){this.instance&&this.rtl!==this.isRTL&&this.deferredRedraw()}deferredRedraw(){this.ngZone.runOutsideAngular(()=>{clearTimeout(this.redrawTimeout),this.redrawTimeout=setTimeout(()=>{this.updateDirection(),this.instance.noTransitionsRedraw()},0)})}updateDirection(){const e=this.isRTL;this.rtl!==e&&(this.setDirection(),this.instance&&this.instance.setDirection(e))}setDirection(){this.rtl=this.isRTL,this.element&&this.renderer.setAttribute(this.element.nativeElement,"dir",this.rtl?"rtl":"ltr")}get isRTL(){return!!this.localizationService.rtl}static \u0275fac=function(i){return new(i||o)(a.rXU(b),a.rXU(Jn),a.rXU(a.aKT),a.rXU(ti.Bs),a.rXU(vt.Pi),a.rXU(a.SKi),a.rXU(to),a.rXU(a.gRc),a.rXU(a.sFG))};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-chart"]],contentQueries:function(i,s,n){if(1&i&&(a.wni(n,px,5),a.wni(n,gx,5),a.wni(n,Qi,4),a.wni(n,Ci,5)),2&i){let r;a.mGM(r=a.lsd())&&(s.donutCenterTemplate=r.first),a.mGM(r=a.lsd())&&(s.noDataTemplate=r.first),a.mGM(r=a.lsd())&&(s.seriesCollectionComponent=r),a.mGM(r=a.lsd())&&(s.seriesComponents=r)}},viewQuery:function(i,s){if(1&i&&(a.GBs(js,7),a.GBs(zs,7),a.GBs(DT,7)),2&i){let n;a.mGM(n=a.lsd())&&(s.tooltipInstance=n.first),a.mGM(n=a.lsd())&&(s.crossahirTooltips=n.first),a.mGM(n=a.lsd())&&(s.surfaceElement=n.first)}},inputs:{pannable:"pannable",renderAs:"renderAs",seriesColors:"seriesColors",subtitle:"subtitle",title:"title",noData:"noData",transitions:"transitions",zoomable:"zoomable",axisDefaults:"axisDefaults",categoryAxis:"categoryAxis",chartArea:"chartArea",legend:"legend",panes:"panes",paneDefaults:"paneDefaults",plotArea:"plotArea",series:"series",seriesDefaults:"seriesDefaults",tooltip:"tooltip",valueAxis:"valueAxis",xAxis:"xAxis",yAxis:"yAxis",resizeRateLimit:"resizeRateLimit",popupSettings:"popupSettings",drilldownLevel:"drilldownLevel"},outputs:{axisLabelClick:"axisLabelClick",drag:"drag",dragEnd:"dragEnd",dragStart:"dragStart",legendItemHover:"legendItemHover",legendItemLeave:"legendItemLeave",noteClick:"noteClick",noteHover:"noteHover",noteLeave:"noteLeave",paneRender:"paneRender",plotAreaClick:"plotAreaClick",plotAreaHover:"plotAreaHover",plotAreaLeave:"plotAreaLeave",render:"render",select:"select",selectEnd:"selectEnd",selectStart:"selectStart",seriesClick:"seriesClick",drilldown:"drilldown",seriesHover:"seriesHover",seriesOver:"seriesOver",seriesLeave:"seriesLeave",zoom:"zoom",zoomEnd:"zoomEnd",zoomStart:"zoomStart",legendItemClick:"legendItemClick",drilldownLevelChange:"drilldownLevelChange"},exportAs:["kendoChart"],standalone:!0,features:[a.Jv_([b,$i,to,vt.Pi,{provide:vt.$R,useValue:"kendo.chart"}]),a.OA$,a.aNF],decls:9,vars:6,consts:()=>{let e;return e=$localize`:kendo.chart.noData|The message to display when no series are defined, or all series are empty:No data available`,[["surface",""],["noDataMessage",""],["kendoChartLocalizedMessages","","noData",e],[1,"k-chart-surface"],["class","k-chart-overlay",3,"display",4,"ngIf"],[3,"popupSettings"],[3,"leave","popupSettings"],[3,"resize","rateLimit"],["class","k-chart-donut-center",3,"ngStyle",4,"ngIf"],["kendoWatermarkOverlay","",4,"ngIf"],[1,"k-chart-overlay"],[1,"k-no-data"],[4,"ngIf","ngIfElse"],[3,"ngTemplateOutlet"],[1,"k-chart-donut-center",3,"ngStyle"],["kendoWatermarkOverlay",""]]},template:function(i,s){if(1&i){const n=a.RV6();a.eu8(0,2),a.j41(1,"div",3,0),a.DNE(3,OT,5,4,"div",4),a.k0s(),a.nrm(4,"kendo-chart-crosshair-tooltips-container",5),a.j41(5,"kendo-chart-tooltip-popup",6),a.bIt("leave",function(l){return a.eBV(n),a.Njj(s.tooltipMouseleave(l))}),a.k0s(),a.j41(6,"kendo-resize-sensor",7),a.bIt("resize",function(){return a.eBV(n),a.Njj(s.onResize())}),a.k0s(),a.DNE(7,VT,2,2,"div",8)(8,FT,1,0,"div",9)}2&i&&(a.R7$(3),a.Y8G("ngIf",s.noData),a.R7$(),a.Y8G("popupSettings",s.popupSettings),a.R7$(),a.Y8G("popupSettings",s.popupSettings),a.R7$(),a.Y8G("rateLimit",s.resizeRateLimit),a.R7$(),a.Y8G("ngIf",s.donutCenterStyle&&s.donutCenterTemplate),a.R7$(),a.Y8G("ngIf",s.showLicenseWatermark))},dependencies:[yx,zs,js,Et.M0,ct.bT,ct.B3,ct.T3,Et.S$],encapsulation:2,changeDetection:0})}return o})(),Cx=(()=>{class o extends b{static \u0275fac=(()=>{let e;return function(s){return(e||(e=a.xGo(o)))(s||o)}})();static \u0275prov=a.jDH({token:o,factory:o.\u0275fac})}return o})();const kx={navigatorFilter:class Z2 extends te{from;to;constructor(t,e){super(e),this.from=t.from,this.to=t.to}}};class Ax extends to{create(t,e,i){return kx[t]?new kx[t](e,i):super.create(t,e,i)}}const K2={autoBindElements:!0,liveDrag:!1,partialRedraw:!0};let Sx=(()=>{class o extends Zi{configurationService;themeService;element;intl;localizationService;ngZone;instanceEventService;changeDetector;renderer;navigator;pannable;zoomable;drilldown=new a.bkB;drilldownLevelChange=new a.bkB;get drilldownLevel(){return this.drilldownState.length}navigatorFilter=new a.bkB;showLicenseWatermark=!1;redrawSlaves=!1;hostClasses=["k-chart","k-stockchart"];constructor(e,i,s,n,r,l,c,h,d){super(e,i,s,n,r,l,c,h,d),this.configurationService=e,this.themeService=i,this.element=s,this.intl=n,this.localizationService=r,this.ngZone=l,this.instanceEventService=c,this.changeDetector=h,this.renderer=d;const u=(0,Ur.$j)(Wr);this.showLicenseWatermark=(0,Et.Em)(u)}skipNavigatorRedraw(){this.redrawSlaves=!0}createInstance(e,i){if(this.applyNavigatorDefaults(),this.isDevMode()&&(this.options.zoomable||this.options.pannable))throw new Error("The pannable and zoomable options are not supported by the StockChart component.");this.instance=new Jw(e,this.options,this.theme,{intlService:this.intl,observer:i,rtl:this.rtl,sender:this})}updateOptions(){this.applyNavigatorDefaults(),this.redrawSlaves?(this.instance.applyOptions(this.options),this.instance.bindCategories(),this.instance.navigator.redrawSlaves()):this.instance.setOptions(this.options),this.redrawSlaves=!1}applyNavigatorDefaults(){this.options.navigator=Object.assign({},this.options.navigator,K2)}isDevMode(){return(0,a.naY)()}static \u0275fac=function(i){return new(i||o)(a.rXU(b),a.rXU(Jn),a.rXU(a.aKT),a.rXU(ti.Bs),a.rXU(vt.Pi),a.rXU(a.SKi),a.rXU(Ax),a.rXU(a.gRc),a.rXU(a.sFG))};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-stockchart"]],inputs:{navigator:"navigator",pannable:"pannable",zoomable:"zoomable",drilldownLevel:"drilldownLevel"},outputs:{drilldown:"drilldown",drilldownLevelChange:"drilldownLevelChange",navigatorFilter:"navigatorFilter"},exportAs:["kendoStockChart"],standalone:!0,features:[a.Jv_([b,$i,{provide:Cx,useExisting:b},Ax,vt.Pi,{provide:vt.$R,useValue:"kendo.chart"}]),a.Vt3,a.aNF],decls:6,vars:3,consts:[["surface",""],[1,"k-chart-surface"],[3,"popupSettings"],[3,"leave","popupSettings"],[3,"resize"],["kendoWatermarkOverlay","",4,"ngIf"],["kendoWatermarkOverlay",""]],template:function(i,s){if(1&i){const n=a.RV6();a.nrm(0,"div",1,0)(2,"kendo-chart-crosshair-tooltips-container",2),a.j41(3,"kendo-chart-tooltip-popup",3),a.bIt("leave",function(l){return a.eBV(n),a.Njj(s.tooltipMouseleave(l))}),a.k0s(),a.j41(4,"kendo-resize-sensor",4),a.bIt("resize",function(){return a.eBV(n),a.Njj(s.onResize())}),a.k0s(),a.DNE(5,NT,1,0,"div",5)}2&i&&(a.R7$(2),a.Y8G("popupSettings",s.popupSettings),a.R7$(),a.Y8G("popupSettings",s.popupSettings),a.R7$(2),a.Y8G("ngIf",s.showLicenseWatermark))},dependencies:[zs,js,Et.M0,ct.bT,Et.S$],encapsulation:2,changeDetection:0})}return o})();new a.nKC("configuration prefix");let Ki=(()=>{class o extends Ns{configurationService;collectionService;intl;autoBaseUnitSteps;axisCrossingValue;background;baseUnit;baseUnitStep;categories;color;justified;line;majorGridLines;majorTicks;max;maxDateGroups;maxDivisions;min;minorGridLines;minorTicks;name;pane;plotBands;reverse;roundToBaseUnit;startAngle;type;visible;weekStartDay;crosshair;labels;notes;select;title;rangeLabels;intlSubscription;constructor(e,i,s,n){super(e,i),this.configurationService=e,this.collectionService=i,this.intl=s,s.localeId=n,this.notifyChanges({weekStartDay:s.firstDay(s.localeId)}),this.intlSubscription=s.changes.subscribe(()=>{this.notifyChanges({weekStartDay:s.firstDay(s.localeId)})})}ngOnDestroy(){this.intlSubscription&&this.intlSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||o)(a.rXU(b),a.rXU(_t),a.rXU(ti.Bs),a.rXU(a.xe9))};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-chart-category-axis-item"]],inputs:{autoBaseUnitSteps:"autoBaseUnitSteps",axisCrossingValue:"axisCrossingValue",background:"background",baseUnit:"baseUnit",baseUnitStep:"baseUnitStep",categories:"categories",color:"color",justified:"justified",line:"line",majorGridLines:"majorGridLines",majorTicks:"majorTicks",max:"max",maxDateGroups:"maxDateGroups",maxDivisions:"maxDivisions",min:"min",minorGridLines:"minorGridLines",minorTicks:"minorTicks",name:"name",pane:"pane",plotBands:"plotBands",reverse:"reverse",roundToBaseUnit:"roundToBaseUnit",startAngle:"startAngle",type:"type",visible:"visible",weekStartDay:"weekStartDay",crosshair:"crosshair",labels:"labels",notes:"notes",select:"select",title:"title",rangeLabels:"rangeLabels"},standalone:!0,features:[a.Jv_([b]),a.Vt3,a.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})(),Mx=(()=>{class o extends Zi{configurationService;themeService;element;intl;localizationService;ngZone;instanceEventService;changeDetector;renderer;type;data;drilldown=new a.bkB;drilldownLevelChange=new a.bkB;noData=!1;get drilldownLevel(){return this.drilldownState.length}tooltipWrapperClass="k-sparkline-tooltip-wrapper";tooltipContentClasses={"k-sparkline-tooltip":!0};showLicenseWatermark=!1;hostClasses=["k-sparkline","k-widget"];constructor(e,i,s,n,r,l,c,h,d){super(e,i,s,n,r,l,c,h,d),this.configurationService=e,this.themeService=i,this.element=s,this.intl=n,this.localizationService=r,this.ngZone=l,this.instanceEventService=c,this.changeDetector=h,this.renderer=d;const u=(0,Ur.$j)(Wr);this.showLicenseWatermark=(0,Et.Em)(u)}createInstance(e,i){this.instance=new ec(e,ec.normalizeOptions(this.options),this.theme,{intlService:this.intl,observer:i,rtl:this.rtl,sender:this})}updateOptions(){this.instance.setOptions(ec.normalizeOptions(this.options))}static \u0275fac=function(i){return new(i||o)(a.rXU(b),a.rXU(Jn),a.rXU(a.aKT),a.rXU(ti.Bs),a.rXU(vt.Pi),a.rXU(a.SKi),a.rXU(to),a.rXU(a.gRc),a.rXU(a.sFG))};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-sparkline"]],inputs:{type:"type",data:"data",noData:"noData",drilldownLevel:"drilldownLevel"},outputs:{drilldown:"drilldown",drilldownLevelChange:"drilldownLevelChange"},exportAs:["kendoSparkline"],standalone:!0,features:[a.Jv_([b,$i,to,vt.Pi,{provide:vt.$R,useValue:"kendo.chart"}]),a.Vt3,a.aNF],decls:6,vars:6,consts:[["surface",""],[1,"k-chart-surface"],[3,"popupSettings"],[3,"leave","animate","wrapperClass","classNames","popupSettings"],[3,"resize"],["kendoWatermarkOverlay","",4,"ngIf"],["kendoWatermarkOverlay",""]],template:function(i,s){if(1&i){const n=a.RV6();a.nrm(0,"span",1,0)(2,"kendo-chart-crosshair-tooltips-container",2),a.j41(3,"kendo-chart-tooltip-popup",3),a.bIt("leave",function(l){return a.eBV(n),a.Njj(s.tooltipMouseleave(l))}),a.k0s(),a.j41(4,"kendo-resize-sensor",4),a.bIt("resize",function(){return a.eBV(n),a.Njj(s.onResize())}),a.k0s(),a.DNE(5,zT,1,0,"div",5)}2&i&&(a.R7$(2),a.Y8G("popupSettings",s.popupSettings),a.R7$(),a.Y8G("animate",!1)("wrapperClass",s.tooltipWrapperClass)("classNames",s.tooltipContentClasses)("popupSettings",s.popupSettings),a.R7$(2),a.Y8G("ngIf",s.showLicenseWatermark))},dependencies:[zs,js,Et.M0,ct.bT,Et.S$],encapsulation:2,changeDetection:0})}return o})(),eo=(()=>{class o extends Gs{configurationService;collectionService;children;constructor(e,i){super("categoryAxis",e,i),this.configurationService=e,this.collectionService=i}static \u0275fac=function(i){return new(i||o)(a.rXU(b),a.rXU(_t))};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-chart-category-axis"]],contentQueries:function(i,s,n){if(1&i&&a.wni(n,Ki,4),2&i){let r;a.mGM(r=a.lsd())&&(s.children=r)}},standalone:!0,features:[a.Jv_([_t]),a.Vt3,a.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})(),io=(()=>{class o extends S{configurationService;align;background;border;height;labels;margin;offsetX;offsetY;orientation;padding;position;reverse;visible;width;markers;spacing;inactiveItems;item;title;focusHighlight;constructor(e){super("legend",e),this.configurationService=e,this.markAsVisible()}static \u0275fac=function(i){return new(i||o)(a.rXU(b))};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-chart-legend"]],inputs:{align:"align",background:"background",border:"border",height:"height",labels:"labels",margin:"margin",offsetX:"offsetX",offsetY:"offsetY",orientation:"orientation",padding:"padding",position:"position",reverse:"reverse",visible:"visible",width:"width",markers:"markers",spacing:"spacing",inactiveItems:"inactiveItems",item:"item",title:"title",focusHighlight:"focusHighlight"},standalone:!0,features:[a.Vt3,a.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})(),Sh=(()=>{class o extends S{configurationService;templateService;background;border;color;font;format;opacity;padding;shared;visible;seriesTooltipTemplate;sharedTooltipTemplate;constructor(e,i){super("tooltip",e),this.configurationService=e,this.templateService=i,this.markAsVisible()}ngAfterContentChecked(){this.templateService.setTemplate(this.seriesTooltipTemplate?this.seriesTooltipTemplate.templateRef:null),this.templateService.setSharedTemplate(this.sharedTooltipTemplate?this.sharedTooltipTemplate.templateRef:null)}static \u0275fac=function(i){return new(i||o)(a.rXU(b),a.rXU($i))};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-chart-tooltip"]],contentQueries:function(i,s,n){if(1&i&&(a.wni(n,Us,5),a.wni(n,qn,5)),2&i){let r;a.mGM(r=a.lsd())&&(s.seriesTooltipTemplate=r.first),a.mGM(r=a.lsd())&&(s.sharedTooltipTemplate=r.first)}},inputs:{background:"background",border:"border",color:"color",font:"font",format:"format",opacity:"opacity",padding:"padding",shared:"shared",visible:"visible"},standalone:!0,features:[a.Vt3,a.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2})}return o})(),Hs=(()=>{class o extends Ns{configurationService;collectionService;axisCrossingValue;background;color;line;majorGridLines;majorTicks;majorUnit;max;min;minorGridLines;minorTicks;minorUnit;name;narrowRange;pane;plotBands;reverse;type;visible;crosshair;labels;notes;title;constructor(e,i){super(e,i),this.configurationService=e,this.collectionService=i}static \u0275fac=function(i){return new(i||o)(a.rXU(b),a.rXU(_t))};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-chart-value-axis-item"]],inputs:{axisCrossingValue:"axisCrossingValue",background:"background",color:"color",line:"line",majorGridLines:"majorGridLines",majorTicks:"majorTicks",majorUnit:"majorUnit",max:"max",min:"min",minorGridLines:"minorGridLines",minorTicks:"minorTicks",minorUnit:"minorUnit",name:"name",narrowRange:"narrowRange",pane:"pane",plotBands:"plotBands",reverse:"reverse",type:"type",visible:"visible",crosshair:"crosshair",labels:"labels",notes:"notes",title:"title"},standalone:!0,features:[a.Jv_([b]),a.Vt3,a.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})(),so=(()=>{class o extends Gs{configurationService;collectionService;children;constructor(e,i){super("valueAxis",e,i),this.configurationService=e,this.collectionService=i}static \u0275fac=function(i){return new(i||o)(a.rXU(b),a.rXU(_t))};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-chart-value-axis"]],contentQueries:function(i,s,n){if(1&i&&a.wni(n,Hs,4),2&i){let r;a.mGM(r=a.lsd())&&(s.children=r)}},standalone:!0,features:[a.Jv_([_t]),a.Vt3,a.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}return o})(),Jr=(()=>{class o{chart;rootItem={icon:"home",svgIcon:jr.P0s,title:"Home"};items;breadcrumb;subscription=new gT.yU;ngOnInit(){if(this.items=[this.rootItem],this.chart)this.subscription.add(this.chart.drilldown.subscribe(this.onDrilldown.bind(this))),this.subscription.add(this.chart.drilldownLevelChange.subscribe(this.onDrilldownLevelChange.bind(this)));else if((0,a.naY)())throw new Error('Chart Breadcrumb: No Chart instance supplied. Please add a reference using the "chart" attribute. For example: \n<kendo-chart-breadcrumb [chart]="instance" />\n<kendo-chart #instance>')}ngOnChanges(e){const i=e.rootItem;i&&this.items&&(this.items[0]=i.currentValue)}ngOnDestroy(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}onItemClick(e){this.chart.drilldownLevel=this.items.findIndex(i=>i===e)}onDrilldown(e){this.items=[...this.items,{text:e.point.category.toString()}]}onDrilldownLevelChange(e){this.items=this.items.slice(0,e+1)}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-chart-breadcrumb"]],viewQuery:function(i,s){if(1&i&&a.GBs(UT,7),2&i){let n;a.mGM(n=a.lsd())&&(s.breadcrumb=n.first)}},inputs:{chart:"chart",rootItem:"rootItem"},exportAs:["kendoChartBreadcrumb"],standalone:!0,features:[a.OA$,a.aNF],decls:1,vars:1,consts:[[3,"itemClick","items"]],template:function(i,s){1&i&&(a.j41(0,"kendo-breadcrumb",0),a.bIt("itemClick",function(r){return s.onItemClick(r)}),a.k0s()),2&i&&a.Y8G("items",s.items)},dependencies:[fT.JD],encapsulation:2})}return o})(),AM=(()=>{class o extends Jn{readTheme(){const e=(o=>({labels:{color:zr(o),font:Nr(o),stroke:{color:Rt(o,"--kendo-chart-bg")}},links:{color:Rt(o,"--kendo-color-subtle")},nodeColors:ix(o),title:nx(o),legend:ox(o)}))(this.element);this.push(e)}static \u0275fac=(()=>{let e;return function(s){return(e||(e=a.xGo(o)))(s||o)}})();static \u0275prov=a.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();class av extends Et.PM{sender;originalEvent;constructor(t,e){super(),this.sender=e,this.originalEvent=t.originalEvent}}class Th extends av{dataItem;constructor(t,e){super(t,e),this.dataItem=t.dataItem}}class Mh extends av{dataItem;constructor(t,e){super(t,e),this.dataItem=t.dataItem}}const SM={nodeEnter:Th,nodeLeave:Th,linkEnter:Mh,linkLeave:Mh,nodeClick:Th,linkClick:Mh};class lv{create(t,e,i){return new SM[t](e,i)}}class TM{source;target;value;constructor(t){const e=t.dataItem;this.source=e.source,this.target=e.target,this.value=e.value}}let ta=(()=>{class o{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(i){return new(i||o)(a.rXU(a.C4Q,8))};static \u0275dir=a.FsC({type:o,selectors:[["","kendoSankeyLinkTooltipTemplate",""]],standalone:!0})}return o})();class MM{color;label;value;constructor(t){const e=t.dataItem;this.label=e.label,this.color=e.color,this.value=t.nodeValue}}let ea=(()=>{class o{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(i){return new(i||o)(a.rXU(a.C4Q,8))};static \u0275dir=a.FsC({type:o,selectors:[["","kendoSankeyNodeTooltipTemplate",""]],standalone:!0})}return o})(),Eh=(()=>{class o{nodeTemplate;linkTemplate;static \u0275fac=function(i){return new(i||o)};static \u0275prov=a.jDH({token:o,factory:o.\u0275fac})}return o})(),EM=(()=>{class o{color;size=15;display="inline-flex";marginLeft=3;static \u0275fac=function(i){return new(i||o)};static \u0275dir=a.FsC({type:o,selectors:[["","squareSymbol",""]],hostVars:10,hostBindings:function(i,s){2&i&&a.xc7("background-color",s.color)("width",s.size,"px")("height",s.size,"px")("display",s.display)("margin-left",s.marginLeft,"px")},inputs:{color:"color",size:"size"},standalone:!0})}return o})(),ia=(()=>{class o extends th{element;popupService;templateService;localizationService;intlService;ngZone;renderer;nodeTooltipTemplateRef;linkTooltipTemplateRef;nodeTooltipContext;linkTooltipContext;defaultNodeTooltipTemplate;defaultLinkTooltipTemplate;templateRef;animate=!1;wrapperClass="k-chart-tooltip-wrapper";tooltipUnitFormat;offset;isNode;isLink;arrowIcon=jr.ZM9;textStyle={margin:"0 3px"};tooltipStyle={display:"flex",alignItems:"center"};subscriptions;rtl=!1;constructor(e,i,s,n,r,l,c){super(i,n),this.element=e,this.popupService=i,this.templateService=s,this.localizationService=n,this.intlService=r,this.ngZone=l,this.renderer=c}onInit(){this.popupRef.popupElement.className+=` ${this.wrapperClass}`}ngAfterViewInit(){this.setDirection(),this.subscriptions=this.localizationService.changes.subscribe(this.rtlChange.bind(this))}ngOnDestroy(){super.ngOnDestroy(),this.subscriptions&&this.subscriptions.unsubscribe()}show(e){this.isNode="node"===e.targetType,this.isLink="link"===e.targetType,this.nodeTooltipTemplateRef=this.templateService.nodeTemplate||this.defaultNodeTooltipTemplate.templateRef,this.nodeTooltipContext=new MM(e),this.linkTooltipTemplateRef=this.templateService.linkTemplate||this.defaultLinkTooltipTemplate.templateRef,this.linkTooltipContext=new TM(e),super.show({style:{position:"static"},anchor:{align:e.tooltipData.popupAlign,point:this.tooltipAnchor(e)}})}tooltipAnchor(e){const i=this.element.nativeElement,s_width=i.offsetWidth,s_height=i.offsetHeight,n={...e.tooltipData.popupOffset},r=e.tooltipData.popupAlign,l=this.offset||12;return n.left+="left"===r.horizontal?l:-1*l,"right"===r.horizontal&&(n.left-=s_width),"bottom"===r.vertical?n.top-=s_height+l:n.top+=l,n}formatUnits(e){return this.intlService.format(this.tooltipUnitFormat,e??0)}rtlChange(){this.arrowIcon=this.rtl?jr.i1n:jr.ZM9}setDirection(){this.rtl=this.isRTL,this.element&&this.renderer.setAttribute(this.element.nativeElement,"dir",this.rtl?"rtl":"ltr")}get isRTL(){return!!this.localizationService.rtl}static \u0275fac=function(i){return new(i||o)(a.rXU(a.aKT),a.rXU(ve.OQ),a.rXU(Eh),a.rXU(vt.Pi),a.rXU(ti.Bs),a.rXU(a.SKi),a.rXU(a.sFG))};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-sankey-tooltip-popup"]],viewQuery:function(i,s){if(1&i&&(a.GBs(ea,5),a.GBs(ta,5),a.GBs(Zc,7)),2&i){let n;a.mGM(n=a.lsd())&&(s.defaultNodeTooltipTemplate=n.first),a.mGM(n=a.lsd())&&(s.defaultLinkTooltipTemplate=n.first),a.mGM(n=a.lsd())&&(s.templateRef=n.first)}},inputs:{animate:"animate",wrapperClass:"wrapperClass",tooltipUnitFormat:"tooltipUnitFormat",offset:"offset"},standalone:!0,features:[a.Jv_([ve.OQ,{provide:ve.Fy,useFactory:eh}]),a.Vt3,a.aNF],decls:4,vars:0,consts:[["content",""],["kendoSankeyNodeTooltipTemplate",""],["kendoSankeyLinkTooltipTemplate",""],[1,"k-tooltip","k-sankey-tooltip","k-chart-tooltip","k-chart-shared-tooltip",3,"ngStyle"],[1,"k-tooltip-content"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngStyle"],["squareSymbol","",3,"color"],[3,"name","svgIcon"]],template:function(i,s){1&i&&a.DNE(0,YT,4,3,"ng-template",null,0,a.C5r)(2,WT,6,6,"ng-template",1)(3,$T,10,11,"ng-template",2)},dependencies:[ct.B3,ct.bT,ct.T3,ea,EM,ta,hx.QK],encapsulation:2})}return o})(),sa=(()=>{class o extends vt.EX{tooltipUnitFormat;static \u0275fac=(()=>{let e;return function(s){return(e||(e=a.xGo(o)))(s||o)}})();static \u0275dir=a.FsC({type:o,selectors:[["","kendoSankeyMessages",""]],inputs:{tooltipUnitFormat:"tooltipUnitFormat"},features:[a.Vt3]})}return o})(),cv=(()=>{class o extends sa{service;constructor(e){super(),this.service=e}static \u0275fac=function(i){return new(i||o)(a.rXU(vt.Pi))};static \u0275dir=a.FsC({type:o,selectors:[["","kendoSankeyLocalizedMessages",""]],standalone:!0,features:[a.Jv_([{provide:sa,useExisting:(0,a.Rfq)(()=>o)}]),a.Vt3]})}return o})(),Ph=(()=>{class o{element;configurationService;themeService;localizationService;instanceEventService;ngZone;changeDetector;renderer;intlService;data;links;nodes;labels;title;legend;tooltip;disableAutoLayout;navigable=!0;popupSettings;nodeEnter=new a.bkB;nodeLeave=new a.bkB;nodeClick=new a.bkB;linkEnter=new a.bkB;linkLeave=new a.bkB;linkClick=new a.bkB;tooltipInstance;instanceElement;showLicenseWatermark=!1;instance;options;theme;optionsChange;redrawTimeout;destroyed;subscriptions;rtl=!1;hostClasses=["k-chart","k-sankey"];constructor(e,i,s,n,r,l,c,h,d){this.element=e,this.configurationService=i,this.themeService=s,this.localizationService=n,this.instanceEventService=r,this.ngZone=l,this.changeDetector=c,this.renderer=h,this.intlService=d;const u=(0,Ur.$j)(Wr);this.showLicenseWatermark=(0,Et.Em)(u),this.themeService.loadTheme(),this.refreshWait()}ngOnInit(){this.element&&this.hostClasses.forEach(e=>{this.renderer.addClass(this.element.nativeElement,e)})}ngAfterViewInit(){this.setDirection(),this.subscriptions=this.intlService.changes.subscribe(this.intlChange.bind(this)),this.subscriptions.add(this.localizationService.changes.subscribe(this.rtlChange.bind(this)))}ngOnChanges(e){const i=this.configurationService.store;Gr(e,i),i.popupSettings=null,this.configurationService.push(i)}notifyChanges(e){this.ngOnChanges(Hr(e))}ngOnDestroy(){this.destroyed=!0,this.optionsChange&&this.optionsChange.unsubscribe(),this.instance&&(this.instance.destroy(),this.instance=null),this.subscriptions&&this.subscriptions.unsubscribe(),clearTimeout(this.redrawTimeout)}messageFor(e){return this.localizationService.get(e)}createInstance(e){this.instance=new Am(e,this.instanceOptions,this.theme),["nodeEnter","nodeLeave","nodeClick","linkEnter","linkLeave","linkClick"].forEach(i=>this.instance.bind(i,s=>this.trigger(i,s))),this.instance.bind("tooltipShow",i=>this.onShowTooltip(i)),this.instance.bind("tooltipHide",()=>this.onHideTooltip()),this.hostClasses.forEach(i=>{this.renderer.removeClass(this.instanceElement.nativeElement,i)})}exportImage(e={}){return(0,rx.A)(this.exportVisual(e),e)}exportSVG(e={}){return ax(this.exportVisual(e),e)}exportVisual(e={}){return this.instance.exportVisual(e)}init(){this.canRender&&this.createInstance(this.instanceElement.nativeElement)}reloadTheme(){this.instance&&(this.themeService.reset(),this.instance.destroy(),this.instance=null)}onShowTooltip(e){this.run(()=>{this.tooltipInstance.show(e)},!0,!0)}onHideTooltip(){this.tooltipInstance.active&&(this.tooltipInstance.hide(),this.detectChanges())}trigger(e,i){const s=this.activeEmitter(e);if(s){const n=this.instanceEventService.create(e,i,this);return this.run(()=>{s.emit(n)}),n.isDefaultPrevented&&n.isDefaultPrevented()}}requiresHandlers(e){for(let i=0;i<e.length;i++)if(this.activeEmitter(e[i]))return!0;return!1}refresh(){clearTimeout(this.redrawTimeout),this.instance?this.updateOptions():this.init()}updateOptions(){this.instance.setOptions(this.instanceOptions)}get canRender(){return(0,Et.nm)()&&!!this.instanceElement}get instanceOptions(){return{...this.options,rtl:this.rtl,disableKeyboardNavigation:!this.navigable}}activeEmitter(e){const i=this[e];if(i&&i.emit&&$r(i))return i}refreshWait(){this.ngZone.runOutsideAngular(()=>{this.optionsChange=(0,lx.z)([this.configurationService.onChange$,this.themeService.onChange$]).pipe((0,cx.M)(e=>{this.options=e[0],this.theme=e[1]}),(0,Qc.Z)(Kc)).subscribe(()=>{this.refresh()})})}run(e,i=!0,s){i?(s&&this.changeDetector.markForCheck(),this.ngZone.run(e)):(e(),s&&this.detectChanges())}detectChanges(){this.destroyed||this.changeDetector.detectChanges()}intlChange(){this.instance&&this.refresh()}rtlChange(){this.instance&&this.rtl!==this.isRTL&&this.refresh()}setDirection(){this.rtl=this.isRTL,this.element&&this.renderer.setAttribute(this.element.nativeElement,"dir",this.rtl?"rtl":"ltr")}get isRTL(){return!!this.localizationService.rtl}static \u0275fac=function(i){return new(i||o)(a.rXU(a.aKT),a.rXU(b),a.rXU(AM),a.rXU(vt.Pi),a.rXU(lv),a.rXU(a.SKi),a.rXU(a.gRc),a.rXU(a.sFG),a.rXU(ti.Bs))};static \u0275cmp=a.VBU({type:o,selectors:[["kendo-sankey"]],viewQuery:function(i,s){if(1&i&&(a.GBs(ia,7),a.GBs(QT,7)),2&i){let n;a.mGM(n=a.lsd())&&(s.tooltipInstance=n.first),a.mGM(n=a.lsd())&&(s.instanceElement=n.first)}},inputs:{data:"data",links:"links",nodes:"nodes",labels:"labels",title:"title",legend:"legend",tooltip:"tooltip",disableAutoLayout:"disableAutoLayout",navigable:"navigable",popupSettings:"popupSettings"},outputs:{nodeEnter:"nodeEnter",nodeLeave:"nodeLeave",nodeClick:"nodeClick",linkEnter:"linkEnter",linkLeave:"linkLeave",linkClick:"linkClick"},exportAs:["kendoSankey"],standalone:!0,features:[a.Jv_([b,vt.Pi,lv,Eh,{provide:vt.$R,useValue:"kendo.sankey"}]),a.OA$,a.aNF],decls:5,vars:3,consts:()=>{let e;return e=$localize`:kendo.sankey.tooltipUnitFormat|The format string to use when displaying node and link values in the tooltip:({0} units)`,[["instance",""],["kendoSankeyLocalizedMessages","","tooltipUnitFormat",e],[1,"k-chart-surface"],[3,"popupSettings","tooltipUnitFormat"],["kendoWatermarkOverlay","",4,"ngIf"],["kendoWatermarkOverlay",""]]},template:function(i,s){1&i&&(a.eu8(0,1),a.nrm(1,"div",2,0)(3,"kendo-sankey-tooltip-popup",3),a.DNE(4,ZT,1,0,"div",4)),2&i&&(a.R7$(3),a.Y8G("popupSettings",s.popupSettings)("tooltipUnitFormat",s.messageFor("tooltipUnitFormat")),a.R7$(),a.Y8G("ngIf",s.showLicenseWatermark))},dependencies:[cv,ia,ct.bT,Et.S$],encapsulation:2,changeDetection:0})}return o})();let hv=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=a.$C({type:o});static \u0275inj=a.G2t({providers:[hx.o3,Et.yr,ve.OQ,Jn],imports:[Zi,Jr,Mx,Sx,Jr,Ph,ia]})}return o})();var na=T(9514),dv=T(3311),Dh=T(6206),Je=T(4341),uv=T(8430),Ih=T(7944);const HM=["tooltipDir"],XM=()=>({text:"Month"}),YM=()=>({text:"NCR count"});function WM(o,t){if(1&o&&(a.j41(0,"div",16)(1,"span",17),a.EFF(2,"Project(s) Selected:"),a.k0s(),a.j41(3,"span",18),a.EFF(4),a.k0s()()),2&o){const e=a.XpG();a.R7$(4),a.JRh(e.selectedProjects().join(", "))}}function $M(o,t){if(1&o){const e=a.RV6();a.j41(0,"div",19)(1,"span",20),a.EFF(2,"notification_important"),a.k0s(),a.j41(3,"span",21),a.EFF(4,"You have received 3 primary resources re assigned requests "),a.j41(5,"a",22),a.EFF(6,"View Requests"),a.k0s()(),a.j41(7,"span",23),a.bIt("click",function(){a.eBV(e);const s=a.XpG();return a.Njj(s.showWarning=!1)}),a.EFF(8,"close"),a.k0s()()}}function QM(o,t){if(1&o){const e=a.RV6();a.j41(0,"div",24)(1,"h2",25),a.EFF(2),a.k0s(),a.j41(3,"kendo-chart",26),a.bIt("seriesClick",function(s){a.eBV(e);const n=a.XpG();return a.Njj(n.onBarClick(s))}),a.nrm(4,"kendo-chart-legend",27),a.j41(5,"kendo-chart-category-axis"),a.nrm(6,"kendo-chart-category-axis-item",28),a.k0s(),a.j41(7,"kendo-chart-value-axis"),a.nrm(8,"kendo-chart-value-axis-item",29),a.k0s(),a.j41(9,"kendo-chart-series"),a.nrm(10,"kendo-chart-series-item",30),a.k0s()(),a.j41(11,"div",31)(12,"kendo-pager",32),a.bIt("pageChange",function(s){a.eBV(e);const n=a.XpG();return a.Njj(n.pageChange(s))}),a.k0s()()()}if(2&o){const e=a.XpG();a.R7$(2),a.SpI("NCR Count by Month - ",e.currentYear,""),a.R7$(),a.Y8G("transitions",!1),a.R7$(3),a.Y8G("categories",e.months)("title",a.lJ4(11,XM)),a.R7$(2),a.Y8G("title",a.lJ4(12,YM)),a.R7$(2),a.Y8G("data",e.currentYearDataCounts)("color","#1976d2"),a.R7$(2),a.Y8G("total",e.pagedNcrData.length)("pageSize",e.pageSize)("skip",e.skip)("info",!1)}}function ZM(o,t){if(1&o){const e=a.RV6();a.j41(0,"div",36)(1,"div",37)(2,"h3"),a.EFF(3),a.k0s()(),a.j41(4,"div",38)(5,"button",39),a.bIt("click",function(){a.eBV(e);const s=a.XpG(2);return a.Njj(s.toggleCollapse())}),a.j41(6,"span",40),a.EFF(7),a.k0s()(),a.j41(8,"button",41),a.bIt("click",function(){a.eBV(e);const s=a.XpG(2);return a.Njj(s.open("dialog"))}),a.j41(9,"span",40),a.EFF(10,"settings"),a.k0s()(),a.j41(11,"button",42),a.bIt("click",function(){a.eBV(e);const s=a.XpG(2);return a.Njj(s.closeGrid())}),a.j41(12,"span",40),a.EFF(13,"close"),a.k0s()()()()}if(2&o){const e=a.XpG(2);a.R7$(3),a.Lme("Tabular View of ",e.selectedMonth," ",e.currentYear," "),a.R7$(2),a.FS9("title",e.isGridExpanded?"Collapse Grid":"Expand Grid"),a.R7$(2),a.JRh(e.isGridExpanded?"fullscreen_exit":"fullscreen")}}function KM(o,t){if(1&o){const e=a.RV6();a.j41(0,"div",36)(1,"div",37)(2,"h3"),a.EFF(3,"Activities"),a.k0s(),a.j41(4,"span",43),a.EFF(5),a.k0s()(),a.j41(6,"div",38)(7,"button",39),a.bIt("click",function(){a.eBV(e);const s=a.XpG(2);return a.Njj(s.toggleCollapse())}),a.j41(8,"span",40),a.EFF(9),a.k0s()(),a.j41(10,"button",41),a.bIt("click",function(){a.eBV(e);const s=a.XpG(2);return a.Njj(s.open("dialog"))}),a.j41(11,"span",40),a.EFF(12,"settings"),a.k0s()()()()}if(2&o){const e=a.XpG(2);a.R7$(5),a.SpI("Result: ",e.gridView.length,""),a.R7$(2),a.FS9("title",e.isGridExpanded?"Collapse Grid":"Expand Grid"),a.R7$(2),a.JRh(e.isGridExpanded?"fullscreen_exit":"fullscreen")}}function qM(o,t){if(1&o&&(a.j41(0,"div",33),a.DNE(1,ZM,14,4,"div",34)(2,KM,13,3,"div",34),a.nrm(3,"iep-grid",35),a.k0s()),2&o){const e=a.XpG();a.R7$(),a.Y8G("ngIf",e.isBarChartData),a.R7$(),a.Y8G("ngIf",!e.isBarChartData),a.R7$(),a.Y8G("data",e.gridView)("columns",e.mapView)("pageable",!0)("enablescrolling",!1)}}let JM=(()=>{class o{constructor(){this.dataService=(0,a.WQX)(Dh.G),this.selectedProjects=this.dataService.selectedProjects,this.gridView=[],this.mapView=[],this.viewAsOptions=["Tabular View","Chart View"],this.functionsOptions=["Individual","Project","Office"],this.selectedViewAs="Chart View",this.selectedFunction="Individual",this.showWarning=!0,this.isExpanded=!1,this.isGridExpanded=!1,this.mySelection=[],this.dialogOpened=!1,this.searchValue="",this.selectedMonth="",this.selectedCount=0,this.showGrid=!1,this.gridData=[],this.collapsed=!1,this.isBarChartData=!1,this.pageSize=1,this.skip=0,this.ncrData=[],this.loading=!0,this.pagedNcrData=[],this.data=[],this.sort=[],(0,a.QZP)(()=>{const e=this.dataService.getTreeData();if(e&&e.length>0){const i=e.split(",");this.gridView=this.data.filter(s=>{const n=s.id||s.ProjectID||s.projectId||s.ProjectId;return i.includes(n?.toString())})}else this.gridView=this.data})}ngOnInit(){this.dataService.getNCRData().subscribe(e=>{this.data=e.tabularData||[],this.ncrData=e.chartData.monthlyNCR||[],this.pagedNcrData=this.groupNcrDataByYear(this.ncrData),this.loading=!1,this.gridView=this.data.map(i=>Object.fromEntries(Object.entries(i).map(([s,n])=>[s.replace(/\s+/g,""),n]))),this.data&&(this.mapView=Object.keys(this.data[0]).map(i=>({field:i.replace(/\s+/g,""),title:i.replace("_"," ").toUpperCase()})))})}groupNcrDataByYear(e){const i={};return e.forEach(s=>{i[s.year]||(i[s.year]=[]),i[s.year].push({month:s.month,count:s.count})}),Object.keys(i).sort((s,n)=>+n-+s).map(s=>({year:+s,data:i[+s]}))}get currentYearData(){return this.pagedNcrData[this.skip]?.data||[]}get currentYear(){return this.pagedNcrData[this.skip]?.year||""}get months(){return this.currentYearData.map(e=>e.month)}get currentYearDataCounts(){return this.currentYearData.map(e=>e.count)}pageChange(e){this.skip=e.skip}onBarClick(e){this.isBarChartData=!0;const i=e.category,s=["January","February","March","April","May","June","July","August","September","October","November","December"];let n=null;"string"==typeof i?(n=s.indexOf(i)+1,this.selectedMonth=i):"number"==typeof i&&(this.selectedMonth=this.months[i],n=s.indexOf(this.selectedMonth)+1),this.selectedCount=this.currentYearDataCounts[i],this.dataService.getNCRDataBymonth({month:n,year:this.currentYear}).subscribe(l=>{this.gridView=[],console.log("data is ==>",l),this.data=l,this.data.length>0&&(this.gridView=this.data.map(c=>Object.fromEntries(Object.entries(c).map(([h,d])=>[h.replace(/\s+/g,""),d]))),this.data&&(this.mapView=Object.keys(this.data[0]).map(c=>({field:c.replace(/\s+/g,""),title:c.replace("_"," ").toUpperCase()}))))}),this.showGrid=!0}closeGrid(){this.showGrid=!1}clearFilter(){}close(e){this.dialogOpened=!1}open(e){this.dialogOpened=!0}action(e){console.log(`Dialog result: ${e}`),this.dialogOpened=!1}onFilter(e){const i=e.toLowerCase();this.gridView=this.data.map(s=>Object.fromEntries(Object.entries(s).map(([n,r])=>[n.replace(/\s+/g,""),r]))),i&&(this.gridView=this.gridView.filter(s=>Object.values(s).some(n=>n&&n.toString().toLowerCase().includes(i))))}onSortChange(e){this.sort=e,this.gridView=(0,uv.My)(this.gridView,this.sort)}showTooltip(e){const i=e.target;"TD"!==i.nodeName&&"k-column-title"!==i.className||"kendo-checkbox"===i.nodeName?this.tooltipDir.hide():this.tooltipDir.toggle(i)}clearFilters(){this.searchValue="",this.onFilter("")}showGridOrTable(){this.isGridExpanded=!this.isGridExpanded,this.showGrid="Tabular View"!=this.selectedViewAs}toggleCollapse(){this.collapsed=!this.collapsed}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=a.VBU({type:o,selectors:[["copilot-iep-nx-ncr"]],viewQuery:function(i,s){if(1&i&&a.GBs(HM,5),2&i){let n;a.mGM(n=a.lsd())&&(s.tooltipDir=n.first)}},standalone:!0,features:[a.aNF],decls:19,vars:13,consts:[[1,"ncr-bar-chart-wrapper"],["class","selected-projects-section",4,"ngIf"],["class","warning-message",4,"ngIf"],[1,"filter-expansion-panel"],[1,"filter-expansion-header"],[1,"filter-title"],[1,"filter-header-actions"],["type","button",1,"clear-filter-btn","primary",3,"click"],["type","button",1,"expansion-toggle-btn","primary",3,"click","title"],[1,"material-symbols-outlined","primary"],[1,"filter-expansion-content"],[1,"dropdown-row"],["name","selectedview",1,"filter-dropdown",3,"ngModelChange","selectionChange","data","ngModel"],["name","selectedfns",1,"filter-dropdown",3,"ngModelChange","data","ngModel"],["class","chart-view",4,"ngIf"],["class","ncr-grid-wrapper",4,"ngIf"],[1,"selected-projects-section"],[1,"selected-label"],[1,"selected-list"],[1,"warning-message"],[1,"material-symbols-outlined","notification-icon"],[1,"warning-text"],["href","",1,"warning-link"],[1,"material-symbols-outlined","close-icon",3,"click"],[1,"chart-view"],[1,"ncr-bar-chart-title"],[3,"seriesClick","transitions"],["position","top"],[3,"categories","title"],[3,"title"],["type","column","name","NCR Count",3,"data","color"],[1,"pager-right"],[1,"ncr-pager",3,"pageChange","total","pageSize","skip","info"],[1,"ncr-grid-wrapper"],["class","iep-grid-header",4,"ngIf"],[3,"data","columns","pageable","enablescrolling"],[1,"iep-grid-header"],[1,"header-left"],[1,"header-right"],[1,"icon-btn",3,"click","title"],[1,"material-symbols-outlined"],["title","Settings",1,"icon-btn",3,"click"],[1,"icon-btn",3,"click"],[1,"result-count"]],template:function(i,s){1&i&&(a.j41(0,"div",0),a.DNE(1,WM,5,1,"div",1)(2,$M,9,0,"div",2),a.j41(3,"div",3)(4,"div",4)(5,"h3",5),a.EFF(6,"Filter Activities"),a.k0s(),a.j41(7,"div",6)(8,"button",7),a.bIt("click",function(){return s.clearFilter()}),a.EFF(9," Clear Filter "),a.k0s(),a.j41(10,"button",8),a.bIt("click",function(){return s.isExpanded=!s.isExpanded}),a.j41(11,"span",9),a.EFF(12),a.k0s()()()(),a.j41(13,"div",10)(14,"div",11)(15,"kendo-dropdownlist",12),a.mxI("ngModelChange",function(r){return a.DH7(s.selectedViewAs,r)||(s.selectedViewAs=r),r}),a.bIt("selectionChange",function(){return s.showGridOrTable()}),a.k0s(),a.j41(16,"kendo-dropdownlist",13),a.mxI("ngModelChange",function(r){return a.DH7(s.selectedFunction,r)||(s.selectedFunction=r),r}),a.k0s()()()(),a.DNE(17,QM,13,13,"div",14)(18,qM,4,6,"div",15),a.k0s()),2&i&&(a.R7$(),a.Y8G("ngIf",s.selectedProjects().length>0),a.R7$(),a.Y8G("ngIf",s.showWarning),a.R7$(),a.AVh("expanded",s.isExpanded),a.R7$(7),a.Y8G("title",s.isExpanded?"Collapse":"Expand"),a.BMQ("aria-expanded",s.isExpanded),a.R7$(2),a.JRh(s.isExpanded?"expand_less":"expand_more"),a.R7$(3),a.Y8G("data",s.viewAsOptions),a.R50("ngModel",s.selectedViewAs),a.R7$(),a.Y8G("data",s.functionsOptions),a.R50("ngModel",s.selectedFunction),a.R7$(),a.Y8G("ngIf",!s.showGrid),a.R7$(),a.Y8G("ngIf",s.showGrid))},dependencies:[ct.MD,ct.bT,hv,Zi,eo,Ki,io,Qi,Ci,so,Hs,na.io,na.Bz,dv.d,Ih.V9,Je.YN,Je.BC,Je.vS],styles:[".testgrid[_ngcontent-%COMP%]{width:1200px}[_nghost-%COMP%]     .testgrid{overflow-x:auto!important}[_nghost-%COMP%]     .k-grid{overflow-x:auto!important}[_nghost-%COMP%]     body, [_nghost-%COMP%]     html{overflow-x:hidden!important}  kendo-grid td{overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;max-width:20px}[_nghost-%COMP%]     .k-tabstrip-content{overflow-x:hidden!important}.selected-projects-section[_ngcontent-%COMP%]{margin-bottom:6px;font-size:13px}.selected-projects-section[_ngcontent-%COMP%]   .selected-label[_ngcontent-%COMP%]{font-weight:600;margin-right:6px}.selected-projects-section[_ngcontent-%COMP%]   .selected-list[_ngcontent-%COMP%]{color:#05322b;font-weight:500}.warning-message[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff3e0;border:1px solid #ff9800;color:#e65100;padding:4px 8px;border-radius:4px;margin-bottom:8px;position:relative}.warning-message[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{margin-right:8px}.warning-message[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{color:#000;flex:1}.warning-message[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#e65100;font-size:20px;cursor:pointer;margin-left:8px;line-height:1}.iep-grid-wrapper[_ngcontent-%COMP%]{margin-top:8px;background:#fff;border-radius:4px;box-shadow:0 2px 8px #0000000a;padding:8px;transition:width .3s,max-width .3s;width:100%;max-width:100%;height:100%;overflow:hidden;display:flex;flex-direction:column}.iep-grid-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;flex-shrink:0;padding-bottom:4px;border-bottom:1px solid #ddd;background:#fafafa}.iep-grid-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:18px}.iep-grid-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:700;color:#05322b}.iep-grid-header[_ngcontent-%COMP%]   .result-count[_ngcontent-%COMP%]{font-size:18px;margin-left:0}.iep-grid-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;border-radius:4px;transition:background .2s;font-size:16px}.iep-grid-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.iep-grid-header[_ngcontent-%COMP%]   kendo-svgicon[_ngcontent-%COMP%]{vertical-align:middle}.filter-expansion-panel[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:3px;margin-bottom:8px;background:#fafafa;transition:box-shadow .2s;box-shadow:0 1px 2px #00000008;flex-shrink:0}.filter-expansion-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px 8px}.filter-title[_ngcontent-%COMP%]{margin:0;font-size:.95rem;font-weight:500}.clear-filter-btn[_ngcontent-%COMP%]{background:none;border:none;color:#209474;font-size:.85rem;cursor:pointer;padding:2px 8px;border-radius:4px;transition:background .2s}.filter-expansion-content[_ngcontent-%COMP%]{padding:0 8px 6px}.filter-expansion-panel.expanded[_ngcontent-%COMP%]{box-shadow:0 2px 8px #00000014}.filter-header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.expansion-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:.85rem;cursor:pointer;padding:2px 8px;border-radius:4px;transition:background .2s;display:flex;align-items:center}.expansion-toggle-btn[_ngcontent-%COMP%]:hover{background:#e3f2fd}.ispo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;transition:all .3s cubic-bezier(.4,0,.2,1)}.ispo-container.ispo-expanded[_ngcontent-%COMP%]   .iep-grid-wrapper[_ngcontent-%COMP%]{width:calc(100vw - 80px);max-width:100vw;margin-left:0;margin-right:0;transition:width .3s cubic-bezier(.4,0,.2,1)}.iep-grid-wrapper[_ngcontent-%COMP%]{width:100%;transition:width .3s cubic-bezier(.4,0,.2,1)}@media (max-width: 900px){.ispo-container.ispo-expanded[_ngcontent-%COMP%]   .iep-grid-wrapper[_ngcontent-%COMP%]{width:100vw;margin:0}}iep-grid[_ngcontent-%COMP%]{flex:1 1 0%;min-width:0;min-height:0;width:100%;height:100%;overflow:auto}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:1000;width:100vw!important;max-width:100vw!important;height:100vh!important;background:#fff;border-radius:0;box-shadow:0 0 0 9999px #0003;padding:12px 0 0}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]   .iep-grid-header[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;z-index:10;padding-bottom:8px}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]   iep-grid[_ngcontent-%COMP%]{flex:1 1 auto;height:100%!important;min-height:0}.iep-grid-wrapper[_ngcontent-%COMP%]{transition:width .3s;width:100%}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]{width:100%!important}.icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px 8px;font-size:18px;vertical-align:middle}.ncr-bar-chart-wrapper[_ngcontent-%COMP%]{padding:0rem 1rem}.ncr-bar-chart-title[_ngcontent-%COMP%]{text-align:center;color:#1976d2;font-size:1.5rem;margin-bottom:1.5rem}[_nghost-%COMP%]     .k-chart .k-series .k-column{fill:#1976d2!important}.ncr-grid-wrapper[_ngcontent-%COMP%]{padding:2rem 1rem;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014;position:relative}.close-btn[_ngcontent-%COMP%]{position:absolute;right:1.5rem;top:1.5rem;background:#1976d2;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;font-size:1rem;z-index:2}.close-btn[_ngcontent-%COMP%]:hover{background:#125ea2}.dropdown-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:10px}.result-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.result-btn[_ngcontent-%COMP%]{border-radius:20px;background:#888;color:#fff;border:none;padding:8px 18px;margin-right:8px;font-weight:200;font-size:12px;transition:background .2s}.result-btn[_ngcontent-%COMP%]:last-child{margin-right:0}.result-btn[_ngcontent-%COMP%]:active, .result-btn[_ngcontent-%COMP%]:focus{background:#666}.result-btn.primary[_ngcontent-%COMP%]{background:var(--primary, #209474);color:#fff}.card-scroll-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:18px}.card-scroll-view[_ngcontent-%COMP%]{display:flex;overflow-x:auto;gap:18px;flex:1 1 auto;min-width:0;padding:8px 0}.card-tile[_ngcontent-%COMP%]{min-width:220px;max-width:240px;height:40px;padding:6px 5px;border:1px solid lightgrey;border-radius:8px;box-shadow:0 1px 4px #0000000f;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;font-size:15px}.card-tile[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #1976d21f}.card-title[_ngcontent-%COMP%]{font-size:15px;font-weight:600;margin-bottom:4px}.card-desc[_ngcontent-%COMP%]{font-size:12px;color:#666}.scroll-arrow[_ngcontent-%COMP%]{border:none;color:#209474;border-radius:10%;width:26px;height:50px;display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;margin:0 8px;transition:background .2s}.scroll-arrow[_ngcontent-%COMP%]:disabled{background:#f5f5f5;color:#aaa;cursor:not-allowed}.scroll-arrow[_ngcontent-%COMP%]:hover:not(:disabled){background:#bbdefb}.close-icon[_ngcontent-%COMP%]{font-size:12px!important}.material-symbols-outlined.notification-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#e65100;font-size:22px}.warning-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e65100}.pager-right[_ngcontent-%COMP%]{text-align:right;margin-top:10px;width:100%}.pager-content[_ngcontent-%COMP%]{text-align:right;width:100%;margin-top:10px}"],changeDetection:0})}}return o})();var tE=T(8325);const eE=()=>({visible:!0}),pv=o=>({text:o});function iE(o,t){if(1&o&&(a.j41(0,"li"),a.EFF(1),a.k0s()),2&o){const e=t.$implicit;a.R7$(),a.Lme("",e.Title," : ",e.Value,"")}}function sE(o,t){if(1&o&&(a.j41(0,"ul"),a.DNE(1,iE,2,2,"li",15),a.k0s()),2&o){const e=a.XpG(2);a.R7$(),a.Y8G("ngForOf",e.pieData)}}function nE(o,t){if(1&o&&(a.j41(0,"div",9)(1,"kendo-chart",10)(2,"kendo-chart-tooltip",11),a.DNE(3,sE,2,1,"ng-template",12),a.k0s(),a.nrm(4,"kendo-chart-legend",13),a.j41(5,"kendo-chart-series"),a.nrm(6,"kendo-chart-series-item",14),a.k0s()()()),2&o){const e=a.XpG();a.R7$(2),a.Y8G("visible",!0),a.R7$(4),a.Y8G("data",e.pieData)("labels",a.lJ4(3,eE))}}function oE(o,t){if(1&o&&a.nrm(0,"kendo-chart-series-item",21),2&o){const e=t.$implicit;a.Y8G("stack",!0)("name",e.name)("data",e.data)}}function rE(o,t){if(1&o){const e=a.RV6();a.j41(0,"div",9)(1,"div",16),a.EFF(2),a.k0s(),a.j41(3,"kendo-chart",17,0),a.bIt("seriesClick",function(s){a.eBV(e);const n=a.XpG();return a.Njj(n.onSeriesClick(s,"actionowner"))}),a.nrm(5,"kendo-chart-legend",13),a.j41(6,"kendo-chart-value-axis"),a.nrm(7,"kendo-chart-value-axis-item",18),a.k0s(),a.j41(8,"kendo-chart-category-axis"),a.nrm(9,"kendo-chart-category-axis-item",19),a.k0s(),a.j41(10,"kendo-chart-series"),a.DNE(11,oE,1,3,"kendo-chart-series-item",20),a.k0s()()()}if(2&o){const e=a.XpG();a.R7$(2),a.SpI(" ","All Business Unit"+(e.breadcrumb.length?" > "+e.breadcrumb.join(" > "):"")," "),a.R7$(5),a.Y8G("title",a.eq3(5,pv,e.chartTitle))("min",0),a.R7$(2),a.Y8G("categories",e.currentData.categories),a.R7$(2),a.Y8G("ngForOf",e.currentData.series)}}function aE(o,t){if(1&o&&a.nrm(0,"kendo-chart-series-item",24),2&o){const e=t.$implicit;a.Y8G("name",e.name)("data",e.data)}}function lE(o,t){if(1&o){const e=a.RV6();a.j41(0,"div",9)(1,"div",16),a.EFF(2),a.k0s(),a.j41(3,"kendo-chart",22,1),a.bIt("seriesClick",function(s){a.eBV(e);const n=a.XpG();return a.Njj(n.onSeriesClick(s,"AI"))}),a.nrm(5,"kendo-chart-legend",13),a.j41(6,"kendo-chart-value-axis"),a.nrm(7,"kendo-chart-value-axis-item",18),a.k0s(),a.j41(8,"kendo-chart-category-axis"),a.nrm(9,"kendo-chart-category-axis-item",19),a.k0s(),a.j41(10,"kendo-chart-series"),a.DNE(11,aE,1,2,"kendo-chart-series-item",23),a.k0s()()()}if(2&o){const e=a.XpG();a.R7$(2),a.SpI(" ","All Business Unit"+(e.breadcrumbai.length?" > "+e.breadcrumbai.join(" > "):"")," "),a.R7$(5),a.Y8G("title",a.eq3(5,pv,e.apiapprover.teams))("min",0),a.R7$(2),a.Y8G("categories",e.approverData.categories),a.R7$(2),a.Y8G("ngForOf",e.approverData.series)}}function cE(o,t){if(1&o&&(a.j41(0,"kendo-chart",25)(1,"kendo-chart-value-axis"),a.nrm(2,"kendo-chart-value-axis-item",18),a.k0s(),a.j41(3,"kendo-chart-category-axis"),a.nrm(4,"kendo-chart-category-axis-item",19),a.k0s(),a.j41(5,"kendo-chart-series"),a.nrm(6,"kendo-chart-series-item",26)(7,"kendo-chart-series-item",27),a.k0s()()),2&o){const e=a.XpG();a.R7$(2),a.Y8G("title",e.currentOTRDR.pendingWith)("min",0),a.R7$(2),a.Y8G("categories",e.currentOTRDR.pendingWith),a.R7$(2),a.Y8G("stack",!0)("data",null==e.currentOTRDR?null:e.currentOTRDR.due),a.R7$(),a.Y8G("data",null==e.currentOTRDR?null:e.currentOTRDR.backlog)}}function hE(o,t){if(1&o&&(a.j41(0,"kendo-chart",28)(1,"kendo-chart-series"),a.nrm(2,"kendo-chart-series-item",26)(3,"kendo-chart-series-item",27)(4,"kendo-chart-series-item",27),a.k0s()()),2&o){const e=a.XpG();a.R7$(2),a.Y8G("stack",!0)("data",null==e.actionItem?null:e.actionItem.due),a.R7$(),a.Y8G("data",null==e.actionItem?null:e.actionItem.backlog),a.R7$(),a.Y8G("data",null==e.actionItem?null:e.actionItem.complete)}}let dE=(()=>{class o{constructor(){this.dataService=(0,a.WQX)(Dh.G),this.pieData=[],this.breadcrumb=[],this.breadcrumbai=[],this.chartTitle="All Business Unit",this.currentData={categories:[],series:[{name:"",data:[]}]},this.approverData={categories:[],series:[{name:"",data:[]}]}}ngOnInit(){this.dataService.getOtrDrData().subscribe(e=>{e.length>0&&(e.forEach(i=>{i.DR_AI_Status?this.pieData=i.DR_AI_Status:i.AIApprover_Team_Chart?this.apiapprover=i.AIApprover_Team_Chart.activities:i.Action_Owner_Team_Chart?this.drilldownData=i.Action_Owner_Team_Chart.activities:i.CurrentOTRDRPendingWith?this.currentOTRDR=i.CurrentOTRDRPendingWith.activities:i.ActionItemByDR?this.actionItem=i.ActionItemByDR.activities:i.actionowner_secondlevel?this.secondLevelActionIOwner=i.actionowner_secondlevel.activities:i.actionowner_thirdlevel?this.thirdLevelActionOwner=i.actionowner_thirdlevel.activities:i.approver_secondlevel?this.secondLevelAIOwner=i.approver_secondlevel.activities:i.approver_thirdlevel&&(this.thirdLevelAIOwner=i.approver_thirdlevel.activities)}),this.setTopLevelData()),console.log("otrdr data",e)})}setTopLevelData(){this.chartTitle="All Business Unit",this.currentData={categories:this.drilldownData.teams,series:[{name:"Due",data:this.drilldownData.due.map(e=>Number(e))},{name:"Backlog",data:this.drilldownData.backlog.map(e=>Number(e))},{name:"Complete",data:this.drilldownData.complete.map(e=>Number(e))}]},this.approverData={categories:this.apiapprover.teams,series:[{name:"Teams",data:this.apiapprover.teams},{name:"count",data:this.apiapprover.count.map(e=>Number(e))}]},console.log(this.approverData)}onSeriesClick(e,i){if("actionowner"===i){const s=e.category;this.breadcrumb.length<3&&this.breadcrumb.push(s);const n=this.secondLevelActionIOwner;if(1===this.breadcrumb.length)n&&(this.chartTitle=`Sub Business Unit - ${s}`,this.currentData={categories:n.teams,series:[{name:"Due",data:n.due.map(r=>Number(r))},{name:"Backlog",data:n.backlog.map(r=>Number(r))},{name:"Complete",data:n.complete.map(r=>Number(r))}]});else if(2===this.breadcrumb.length){const[r,l]=this.breadcrumb,c=this.thirdLevelActionOwner;c&&(this.chartTitle=`Detail - ${l}`,this.currentData={categories:c.teams,series:[{name:"Due",data:c.due.map(h=>Number(h))},{name:"Backlog",data:c.backlog.map(h=>Number(h))},{name:"Complete",data:c.complete.map(h=>Number(h))}]})}}else{const s=e.category;this.breadcrumbai.length<3&&this.breadcrumbai.push(s);const n=this.secondLevelAIOwner;if(1===this.breadcrumbai.length)n&&(this.chartTitle=`Sub Business Unit - ${s}`,this.approverData={categories:n.teams,series:[{name:"Teams",data:n.teams},{name:"Count",data:n.count.map(r=>Number(r))}]});else if(2===this.breadcrumbai.length){const[r,l]=this.breadcrumbai,c=this.thirdLevelAIOwner;c&&(this.chartTitle=`Detail - ${l}`,this.approverData={categories:c.teams,series:[{name:"Due",data:c.due.map(h=>Number(h))},{name:"Backlog",data:c.backlog.map(h=>Number(h))},{name:"Complete",data:c.complete.map(h=>Number(h))}]})}}}goBack(){this.breadcrumb.pop(),0===this.breadcrumb.length?this.setTopLevelData():1===this.breadcrumb.length?this.onSeriesClick({category:this.breadcrumb[0]},"actionowner"):2===this.breadcrumb.length&&this.onSeriesClick({category:this.breadcrumb[1]},"actionowner")}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=a.VBU({type:o,selectors:[["copilot-iep-nx-otrdr"]],standalone:!0,features:[a.aNF],decls:9,vars:5,consts:[["instance",""],["instanceai",""],[1,"charts-div"],["class","chart-item",4,"ngIf"],[1,"second-row"],[1,"chart-item","chart-item-33"],["title","Current OTRDR Pending With",4,"ngIf"],[1,"chart-item","chart-item-66"],["title","Design Review Type",4,"ngIf"],[1,"chart-item"],["title","DR AI STATUS"],[3,"visible"],["kendoChartSeriesTooltipTemplate",""],["position","bottom"],["type","pie","field","Value","categoryField","Title",3,"data","labels"],[4,"ngFor","ngForOf"],[1,"mb-underline"],["title","Action Owner Team",3,"seriesClick"],[3,"title","min"],[3,"categories"],["type","bar",3,"stack","name","data",4,"ngFor","ngForOf"],["type","bar",3,"stack","name","data"],["title","AI Approver Team",3,"seriesClick"],["type","bar",3,"name","data",4,"ngFor","ngForOf"],["type","bar",3,"name","data"],["title","Current OTRDR Pending With"],["type","column",3,"stack","data"],["type","column",3,"data"],["title","Design Review Type"]],template:function(i,s){1&i&&(a.j41(0,"div",2),a.DNE(1,nE,7,4,"div",3)(2,rE,12,7,"div",3)(3,lE,12,7,"div",3),a.k0s(),a.j41(4,"div",4)(5,"div",5),a.DNE(6,cE,8,6,"kendo-chart",6),a.k0s(),a.j41(7,"div",7),a.DNE(8,hE,5,4,"kendo-chart",8),a.k0s()()),2&i&&(a.R7$(),a.Y8G("ngIf",s.pieData),a.R7$(),a.Y8G("ngIf",s.drilldownData),a.R7$(),a.Y8G("ngIf",s.apiapprover),a.R7$(3),a.Y8G("ngIf",s.currentOTRDR),a.R7$(2),a.Y8G("ngIf",s.actionItem))},dependencies:[ct.MD,ct.Sq,ct.bT,Zi,Us,eo,Ki,io,Qi,Ci,Sh,so,Hs],styles:[".charts-div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.charts-div[_ngcontent-%COMP%] > .chart-item[_ngcontent-%COMP%]{width:33%}.second-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:100%}.mb-underline[_ngcontent-%COMP%]{margin-bottom:10px;text-decoration:underline}.chart-item-33[_ngcontent-%COMP%]{width:33%}.chart-item-66[_ngcontent-%COMP%]{width:66%}"]})}}return o})();var uE=T(7610);const pE=["tooltipDir"],gv=()=>["Without As Build","With As Built"],fv=()=>({visible:!0}),mv=o=>({text:o}),xv=()=>({visible:!0,format:"{0}"});function gE(o,t){if(1&o&&(a.j41(0,"div",20)(1,"span",21),a.EFF(2,"Project(s) Selected:"),a.k0s(),a.j41(3,"span",22),a.EFF(4),a.k0s()()),2&o){const e=a.XpG();a.R7$(4),a.JRh(e.selectedProjects().join(", "))}}function fE(o,t){if(1&o){const e=a.RV6();a.j41(0,"div",23)(1,"span",24),a.EFF(2,"notification_important"),a.k0s(),a.j41(3,"span",25),a.EFF(4,"You have received 3 primary resources re assigned requests "),a.j41(5,"a",26),a.EFF(6,"View Requests"),a.k0s()(),a.j41(7,"span",27),a.bIt("click",function(){a.eBV(e);const s=a.XpG();return a.Njj(s.showWarning=!1)}),a.EFF(8,"close"),a.k0s()()}}function mE(o,t){if(1&o&&a.nrm(0,"kendo-chart-value-axis-item",33),2&o){const e=t.$implicit;a.Y8G("name",e.name||"")("title",e.title||a.eq3(6,mv,e.name||""))("min",e.min)("max",e.max)("majorUnit",e.majorUnit?e.majorUnit:100)("color",e.color?e.color:"#000000")}}function xE(o,t){if(1&o&&a.nrm(0,"kendo-chart-series-item",41),2&o){const e=t.$implicit;a.Y8G("type","column")("name",e.name)("data",e.data)("stack",!0)("color",e.color)("tooltip",a.lJ4(6,xv))}}function vE(o,t){if(1&o&&a.nrm(0,"kendo-chart-value-axis-item",33),2&o){const e=t.$implicit;a.Y8G("name",e.name||"")("title",e.title||a.eq3(6,mv,e.name||""))("min",e.min)("max",e.max)("majorUnit",e.majorUnit?e.majorUnit:100)("color",e.color?e.color:"#000000")}}function bE(o,t){if(1&o&&a.nrm(0,"kendo-chart-series-item",42),2&o){const e=t.$implicit;a.Y8G("type","column")("color",e.color)("name",e.name)("data",e.data)("stack",!0)("tooltip",a.lJ4(6,xv))}}function yE(o,t){if(1&o){const e=a.RV6();a.j41(0,"div",28)(1,"div",29)(2,"div",30)(3,"h3"),a.EFF(4,"ECN Metrics Without As Built"),a.k0s()(),a.j41(5,"kendo-chart",31),a.bIt("seriesClick",function(s){a.eBV(e);const n=a.XpG();return a.Njj(n.onBarClick(s))}),a.nrm(6,"kendo-chart-legend",32),a.j41(7,"kendo-chart-value-axis"),a.Z7z(8,mE,1,8,"kendo-chart-value-axis-item",33,a.Vm6),a.k0s(),a.j41(10,"kendo-chart-category-axis"),a.nrm(11,"kendo-chart-category-axis-item",34),a.k0s(),a.j41(12,"kendo-chart-series"),a.DNE(13,xE,1,7,"kendo-chart-series-item",35),a.nrm(14,"kendo-chart-series-item",36),a.k0s()(),a.j41(15,"kendo-pager",37),a.bIt("pageChange",function(s){a.eBV(e);const n=a.XpG();return a.Njj(n.onPageWithoutChange(s))}),a.k0s()(),a.j41(16,"div",38)(17,"div",30)(18,"h3"),a.EFF(19,"ECN Metrics With As Built"),a.k0s()(),a.j41(20,"kendo-chart"),a.nrm(21,"kendo-chart-legend",32),a.j41(22,"kendo-chart-value-axis"),a.Z7z(23,vE,1,8,"kendo-chart-value-axis-item",33,a.Vm6),a.k0s(),a.j41(25,"kendo-chart-category-axis"),a.nrm(26,"kendo-chart-category-axis-item",34),a.k0s(),a.j41(27,"kendo-chart-series"),a.DNE(28,bE,1,7,"kendo-chart-series-item",39),a.nrm(29,"kendo-chart-series-item",36),a.k0s()(),a.j41(30,"kendo-pager",40),a.bIt("pageChange",function(s){a.eBV(e);const n=a.XpG();return a.Njj(n.onWithPageChange(s))}),a.k0s()()()}if(2&o){const e=a.XpG();a.R7$(8),a.Dyx(e.valueAxes),a.R7$(3),a.Y8G("categories",e.categories)("axisCrossingValue",e.crossingValues),a.R7$(2),a.Y8G("ngForOf",e.stackedSerieswithoutAsBuilt),a.R7$(),a.Y8G("data",e.agingP95ForCurrentYearWithout)("markers",a.lJ4(19,fv))("axis",e.valueAxes[1].name||""),a.R7$(),a.Y8G("total",e.years.length)("pageSize",1)("skip",e.currentYearWithOutIndex)("info",!1),a.R7$(8),a.Dyx(e.valueAxes),a.R7$(3),a.Y8G("categories",e.categories)("axisCrossingValue",e.crossingValues),a.R7$(2),a.Y8G("ngForOf",e.stackedSeries),a.R7$(),a.Y8G("data",e.agingP95ForCurrentYear)("markers",a.lJ4(20,fv))("axis",e.valueAxes[1].name||""),a.R7$(),a.Y8G("total",e.years.length)("pageSize",1)("skip",e.currentYearWithIndex)}}function _E(o,t){if(1&o){const e=a.RV6();a.j41(0,"div",46)(1,"div",47)(2,"h3"),a.EFF(3,"Tabular View"),a.k0s(),a.j41(4,"span",48),a.EFF(5),a.k0s(),a.EFF(6," | "),a.j41(7,"span",49)(8,"label",50),a.nrm(9,"input",51),a.j41(10,"span"),a.EFF(11,"Critical"),a.k0s()(),a.j41(12,"label",52),a.nrm(13,"input",51),a.j41(14,"span"),a.EFF(15,"Non-Critical"),a.k0s()()()(),a.j41(16,"div",53)(17,"button",54),a.bIt("click",function(){a.eBV(e);const s=a.XpG(2);return a.Njj(s.toggleCollapse())}),a.j41(18,"span",55),a.EFF(19),a.k0s()(),a.j41(20,"button",56),a.bIt("click",function(){a.eBV(e);const s=a.XpG(2);return a.Njj(s.isBarChartData=!s.isBarChartData)}),a.j41(21,"span",55),a.EFF(22,"close"),a.k0s()()()()}if(2&o){const e=a.XpG(2);a.R7$(5),a.SpI("Result: ",e.gridView.length,""),a.R7$(12),a.FS9("title",e.isGridExpanded?"Collapse Grid":"Expand Grid"),a.R7$(2),a.JRh(e.isGridExpanded?"fullscreen_exit":"fullscreen")}}function wE(o,t){if(1&o&&(a.j41(0,"div",43),a.DNE(1,_E,23,3,"div",44),a.nrm(2,"iep-grid",45),a.k0s()),2&o){const e=a.XpG();a.R7$(),a.Y8G("ngIf",!e.isBarChartData),a.R7$(),a.Y8G("data",e.gridView)("columns",e.mapView)("pageable",!0)("enablescrolling",!0)("selectable",!0)("acknowledgeable",!0)("source","ecn")}}let CE=(()=>{class o{constructor(){this.dataService=(0,a.WQX)(Dh.G),this.selectedProjects=this.dataService.selectedProjects,this.gridView=[],this.mapView=[],this.viewAsOptions=["ECN","ECR"],this.functionsOptions=["Individual","Project","Office"],this.selectedViewAs="ECN",this.selectedFunction="Individual",this.showWarning=!0,this.isExpanded=!0,this.isGridExpanded=!1,this.mySelection=[],this.dialogOpened=!1,this.searchValue="",this.selectedMonth="",this.selectedCount=0,this.showGrid=!1,this.gridData=[],this.collapsed=!1,this.openECN="400",this.closedECN="200",this.openDropdown=!1,this.closedDropdown=!1,this.selectedOpen=["Without As Build","With As Built"],this.selectedClosed=[],this.pagedECNData=[],this.groupedData={categories:[],series:[]},this.agingP95ForCurrentYearWithout=[],this.isBarChartData=!1,this.pageSize=1,this.skip=0,this.crossingValues=[0,12],this.currentYearWithIndex=0,this.currentYearWithOutIndex=0,this.years=[],this.monthsPerYear=12,this.currentYearMonths=[],this.stackedSeries=[],this.agingP95ForCurrentYear=[],this.valueAxes=[{title:{text:"Without As Built Count"},min:0,max:500,majorUnit:100},{name:"Aging p95",min:0,max:3500,majorUnit:1e3,title:{text:"Aging p95 counts"},axisCrossingValue:10}],this.categories=[],this.sort=[]}ngOnInit(){this.dataService.getECNChartData().subscribe(e=>{this.data=e.withAsBuilt,this.withoutAsBuilt=e.withoutAsBuilt,this.years=Array.from(new Set(this.data.yearMonth.map(i=>i.split("-")[0]))).reverse(),this.prepareChartWithData(),this.prepareChartWithOutData()}),this.dataService.getCurrentProjects().subscribe(e=>{this.selectedProjects.set(e)})}onWithPageChange(e){this.currentYearWithIndex=e.skip,this.prepareChartWithData()}onPageWithoutChange(e){this.currentYearWithOutIndex=e.skip,this.prepareChartWithOutData()}prepareChartWithData(){const e=this.years[this.currentYearWithIndex],i=this.data.yearMonth;this.categories=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(l=>`${e}-${l}`);const n=i.map((l,c)=>l.startsWith(e)?c:-1).filter(l=>-1!==l);this.currentYearMonths=n.map(l=>i[l].split("-")[1]).reverse();const r=["Less20","Less40","Grt40"];this.stackedSeries=r.map(l=>({name:l,color:"Less20"===l?"#4A9E24":"Less40"===l?"#F2E349":"#F42E17",data:n.map(c=>Number(this.data[l][c])||0).reverse()})),this.agingP95ForCurrentYear=n.map(l=>null!==this.data.AgingP95[l]?Number(this.data.AgingP95[l]):null).reverse(),this.stackedSerieswithoutAsBuilt=r.map(l=>({name:l,color:"Less20"===l?"#4A9E24":"Less40"===l?"#F2E349":"#F42E17",data:n.map(c=>Number(this.withoutAsBuilt[l][c])||0).reverse()})),this.agingP95ForCurrentYearWithout=n.map(l=>null!==this.withoutAsBuilt.AgingP95[l]?Number(this.withoutAsBuilt.AgingP95[l]):null).reverse(),this.isBarChartData=!0}prepareChartWithOutData(){const e=this.years[this.currentYearWithOutIndex],i=this.withoutAsBuilt.yearMonth;this.categories=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(l=>`${e}-${l}`);const n=i.map((l,c)=>l.startsWith(e)?c:-1).filter(l=>-1!==l);this.currentYearMonths=n.map(l=>i[l].split("-")[1]).reverse(),this.stackedSerieswithoutAsBuilt=["Less20","Less40","Grt40"].map(l=>({name:l,color:"Less20"===l?"#4A9E24":"Less40"===l?"#F2E349":"#F42E17",data:n.map(c=>Number(this.withoutAsBuilt[l][c])||0).reverse()})),this.agingP95ForCurrentYearWithout=n.map(l=>null!==this.withoutAsBuilt.AgingP95[l]?Number(this.withoutAsBuilt.AgingP95[l]):null).reverse(),this.isBarChartData=!0}onBarClick(e){this.isBarChartData=!1;const i=e.category,s=["January","February","March","April","May","June","July","August","September","October","November","December"];let n=null;"string"==typeof i?(n=s.indexOf(i)+1,this.selectedMonth=i):"number"==typeof i&&(n=s.indexOf(this.selectedMonth)+1),this.dataService.getECNData().subscribe(l=>{this.gridView=[];const c=l.data.activities||[];c.length>0&&(this.gridView=c.map(h=>Object.fromEntries(Object.entries(h).map(([d,u])=>[d.replace(/\s+/g,""),u]))),this.data&&(this.mapView=Object.keys(c[0]).map(h=>({field:h.replace(/\s+/g,""),title:h.replace("_"," ").toUpperCase()}))))}),this.showGrid=!0}closeGrid(){this.showGrid=!1}clearFilter(){}close(e){this.dialogOpened=!1}open(e){this.dialogOpened=!0}action(e){console.log(`Dialog result: ${e}`),this.dialogOpened=!1}onFilter(e){const i=e.toLowerCase();i&&(this.gridView=this.gridView.filter(s=>Object.values(s).some(n=>n&&n.toString().toLowerCase().includes(i))))}onSortChange(e){this.sort=e,this.gridView=(0,uv.My)(this.gridView,this.sort)}showTooltip(e){const i=e.target;"TD"!==i.nodeName&&"k-column-title"!==i.className||"kendo-checkbox"===i.nodeName?this.tooltipDir.hide():this.tooltipDir.toggle(i)}clearFilters(){this.searchValue="",this.onFilter("")}showGridOrTable(){this.isGridExpanded=!this.isGridExpanded,this.showGrid="Tabular View"!=this.selectedViewAs}toggleCollapse(){this.collapsed=!this.collapsed,window.dispatchEvent(new CustomEvent("filterProjectsCollapse",{detail:{collapsed:this.collapsed}}))}showopen(){this.openDropdown=!this.openDropdown,this.openDropdown&&(this.closedDropdown=!1)}showclosed(){this.closedDropdown=!this.closedDropdown,this.closedDropdown&&(this.openDropdown=!1)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=a.VBU({type:o,selectors:[["copilot-iep-nx-ecn"]],viewQuery:function(i,s){if(1&i&&a.GBs(pE,5),2&i){let n;a.mGM(n=a.lsd())&&(s.tooltipDir=n.first)}},standalone:!0,features:[a.aNF],decls:33,vars:25,consts:[[1,"ecn-bar-chart-wrapper"],["class","selected-projects-section",4,"ngIf"],["class","warning-message",4,"ngIf"],[1,"filter-expansion-panel"],[1,"filter-expansion-header"],[1,"filter-title"],[1,"filter-header-actions"],["type","button",1,"clear-filter-btn","primary",3,"click"],["type","button",1,"expansion-toggle-btn","primary",3,"click","title"],[1,"material-symbols-outlined","primary"],[1,"filter-expansion-content"],[1,"dropdown-row"],["name","selectedview",1,"filter-dropdowns",3,"ngModelChange","selectionChange","data","ngModel"],["name","selectedfns",1,"filter-dropdowns",3,"ngModelChange","data","ngModel"],["kendoButton","",1,"ecnbutton",3,"click"],[1,"starttext"],[1,"endtext"],["name","openclosed",1,"filter-dropdown",3,"ngModelChange","selectionChange","checkboxes","ngModel","data","disabled"],["class","chart-view",4,"ngIf"],["class","ecn-grid-wrapper",4,"ngIf"],[1,"selected-projects-section"],[1,"selected-label"],[1,"selected-list"],[1,"warning-message"],[1,"material-symbols-outlined","notification-icon"],[1,"warning-text"],["href","",1,"warning-link"],[1,"material-symbols-outlined","close-icon",3,"click"],[1,"chart-view"],[1,"without-as-built"],[1,"iep-chart-header"],[3,"seriesClick"],["position","top"],[3,"name","title","min","max","majorUnit","color"],[3,"categories","axisCrossingValue"],[3,"type","name","data","stack","color","tooltip",4,"ngFor","ngForOf"],["type","line","name","Aging P95",3,"data","markers","axis"],[1,"ncr-pager",3,"pageChange","total","pageSize","skip","info"],[1,"with-as-built"],[3,"type","color","name","data","stack","tooltip",4,"ngFor","ngForOf"],[1,"ncr-pager",3,"pageChange","total","pageSize","skip"],[3,"type","name","data","stack","color","tooltip"],[3,"type","color","name","data","stack","tooltip"],[1,"ecn-grid-wrapper"],["class","iep-grid-header",4,"ngIf"],[1,"iep-grid-scrollable",3,"data","columns","pageable","enablescrolling","selectable","acknowledgeable","source"],[1,"iep-grid-header"],[1,"header-left"],[1,"result-count"],[1,"checkboxed"],[1,"critical-checkbox"],["type","checkbox"],[1,"noncritical-checkbox"],[1,"header-right"],[1,"icon-btn",3,"click","title"],[1,"material-symbols-outlined"],["title","Close",1,"icon-btn",3,"click"]],template:function(i,s){1&i&&(a.j41(0,"div",0),a.DNE(1,gE,5,1,"div",1)(2,fE,9,0,"div",2),a.j41(3,"div",3)(4,"div",4)(5,"h3",5),a.EFF(6,"Summary"),a.k0s(),a.j41(7,"div",6)(8,"button",7),a.bIt("click",function(){return s.clearFilter()}),a.EFF(9," Clear Filter "),a.k0s(),a.j41(10,"button",8),a.bIt("click",function(){return s.isExpanded=!s.isExpanded}),a.j41(11,"span",9),a.EFF(12),a.k0s()()()(),a.j41(13,"div",10)(14,"div",11)(15,"kendo-dropdownlist",12),a.mxI("ngModelChange",function(r){return a.DH7(s.selectedViewAs,r)||(s.selectedViewAs=r),r}),a.bIt("selectionChange",function(){return s.showGridOrTable()}),a.k0s(),a.j41(16,"kendo-dropdownlist",13),a.mxI("ngModelChange",function(r){return a.DH7(s.selectedFunction,r)||(s.selectedFunction=r),r}),a.k0s(),a.j41(17,"button",14),a.bIt("click",function(){return s.showopen()}),a.j41(18,"span",15),a.EFF(19,"Open"),a.k0s(),a.EFF(20," \xa0\xa0 \xa0\xa0 \xa0\xa0 "),a.j41(21,"span",16),a.EFF(22),a.k0s()(),a.j41(23,"kendo-multiselect",17),a.mxI("ngModelChange",function(r){return a.DH7(s.selectedOpen,r)||(s.selectedOpen=r),r}),a.bIt("selectionChange",function(){return s.showopen()}),a.k0s(),a.j41(24,"button",14),a.bIt("click",function(){return s.showclosed()}),a.j41(25,"span",15),a.EFF(26,"Closed"),a.k0s(),a.EFF(27," \xa0\xa0 \xa0\xa0 \xa0\xa0 "),a.j41(28,"span",16),a.EFF(29),a.k0s()(),a.j41(30,"kendo-multiselect",17),a.mxI("ngModelChange",function(r){return a.DH7(s.selectedClosed,r)||(s.selectedClosed=r),r}),a.bIt("selectionChange",function(){return s.showclosed()}),a.k0s()()(),a.DNE(31,yE,31,21,"div",18),a.k0s(),a.DNE(32,wE,3,8,"div",19),a.k0s()),2&i&&(a.R7$(),a.Y8G("ngIf",s.selectedProjects.length>0),a.R7$(),a.Y8G("ngIf",s.showWarning),a.R7$(),a.AVh("expanded",s.isExpanded),a.R7$(7),a.Y8G("title",s.isExpanded?"Collapse":"Expand"),a.BMQ("aria-expanded",s.isExpanded),a.R7$(2),a.JRh(s.isExpanded?"expand_less":"expand_more"),a.R7$(3),a.Y8G("data",s.viewAsOptions),a.R50("ngModel",s.selectedViewAs),a.R7$(),a.Y8G("data",s.functionsOptions),a.R50("ngModel",s.selectedFunction),a.R7$(6),a.JRh(s.openECN),a.R7$(),a.Y8G("checkboxes",!0),a.R50("ngModel",s.selectedOpen),a.Y8G("data",a.lJ4(23,gv))("disabled",0!==s.selectedClosed.length),a.R7$(6),a.JRh(s.closedECN),a.R7$(),a.Y8G("checkboxes",!0),a.R50("ngModel",s.selectedClosed),a.Y8G("data",a.lJ4(24,gv))("disabled",0!==s.selectedOpen.length),a.R7$(),a.Y8G("ngIf",s.isBarChartData),a.R7$(),a.Y8G("ngIf",s.showGrid))},dependencies:[ct.MD,ct.Sq,ct.bT,hv,Zi,eo,Ki,io,Qi,Ci,so,Hs,na.io,na.Bz,dv.d,Ih.V9,Ih.b3,uE.Qp,Je.YN,Je.BC,Je.vS],styles:['@charset "UTF-8";.testgrid[_ngcontent-%COMP%]{width:1200px}[_nghost-%COMP%]     .testgrid{overflow-x:auto!important}[_nghost-%COMP%]     .k-grid{overflow-x:auto!important}[_nghost-%COMP%]     body, [_nghost-%COMP%]     html{overflow-x:hidden!important}  kendo-grid td{overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;max-width:20px}[_nghost-%COMP%]     .k-tabstrip-content{overflow-x:hidden!important}.selected-projects-section[_ngcontent-%COMP%]{margin-bottom:6px;font-size:13px}.selected-projects-section[_ngcontent-%COMP%]   .selected-label[_ngcontent-%COMP%]{font-weight:600;margin-right:6px}.selected-projects-section[_ngcontent-%COMP%]   .selected-list[_ngcontent-%COMP%]{color:#05322b;font-weight:500}.warning-message[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff3e0;border:1px solid #ff9800;color:#e65100;padding:4px 8px;border-radius:4px;margin-bottom:8px;position:relative}.warning-message[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{margin-right:8px}.warning-message[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{color:#000;flex:1}.warning-message[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#e65100;font-size:20px;cursor:pointer;margin-left:8px;line-height:1}.iep-grid-wrapper[_ngcontent-%COMP%]{margin-top:8px;background:#fff;border-radius:4px;box-shadow:0 2px 8px #0000000a;padding:8px;transition:width .3s,max-width .3s;width:100%;max-width:100%;height:100%;overflow:auto;display:flex;flex-direction:column}.iep-grid-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;flex-shrink:0;padding-bottom:4px;border-bottom:1px solid #ddd;background:#fafafa}.iep-grid-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:18px}.iep-grid-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:700;color:#05322b}.iep-grid-header[_ngcontent-%COMP%]   .result-count[_ngcontent-%COMP%]{font-size:18px;margin-left:0}.iep-grid-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;border-radius:4px;transition:background .2s;font-size:16px}.iep-grid-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.iep-grid-header[_ngcontent-%COMP%]   kendo-svgicon[_ngcontent-%COMP%]{vertical-align:middle}.iep-chart-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:8px;padding:4px;border:1px solid #ddd}.filter-expansion-panel[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:3px;margin-bottom:8px;background:#fafafa;transition:box-shadow .2s;box-shadow:0 1px 2px #00000008;flex-shrink:0}.filter-expansion-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px 8px}.filter-title[_ngcontent-%COMP%]{margin:0;font-size:.95rem;font-weight:500}.clear-filter-btn[_ngcontent-%COMP%]{background:none;border:none;color:#209474;font-size:.85rem;cursor:pointer;padding:2px 8px;border-radius:4px;transition:background .2s}.filter-expansion-content[_ngcontent-%COMP%]{padding:0 8px 6px}.filter-expansion-panel.expanded[_ngcontent-%COMP%]{box-shadow:0 2px 8px #00000014}.filter-header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.expansion-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:.85rem;cursor:pointer;padding:2px 8px;border-radius:4px;transition:background .2s;display:flex;align-items:center}.expansion-toggle-btn[_ngcontent-%COMP%]:hover{background:#e3f2fd}.ispo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;transition:all .3s cubic-bezier(.4,0,.2,1)}.ispo-container.ispo-expanded[_ngcontent-%COMP%]   .iep-grid-wrapper[_ngcontent-%COMP%]{width:calc(100vw - 80px);max-width:100vw;margin-left:0;margin-right:0;transition:width .3s cubic-bezier(.4,0,.2,1)}.iep-grid-wrapper[_ngcontent-%COMP%]{width:100%;transition:width .3s cubic-bezier(.4,0,.2,1)}@media (max-width: 900px){.ispo-container.ispo-expanded[_ngcontent-%COMP%]   .iep-grid-wrapper[_ngcontent-%COMP%]{width:100vw;margin:0}}iep-grid[_ngcontent-%COMP%]{flex:1 1 0%;min-width:0;min-height:0;width:100%;height:100%;overflow:auto}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:1000;width:100vw!important;max-width:100vw!important;height:100vh!important;background:#fff;border-radius:0;box-shadow:0 0 0 9999px #0003;padding:12px 0 0}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]   .iep-grid-header[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;z-index:10;padding-bottom:8px}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]   iep-grid[_ngcontent-%COMP%]{flex:1 1 auto;height:100%!important;min-height:0;width:100%!important;overflow:auto!important}.iep-grid-wrapper[_ngcontent-%COMP%]{transition:width .3s;width:100%}.iep-grid-wrapper.grid-expanded[_ngcontent-%COMP%]{width:100%!important}.icon-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px 8px;font-size:18px;vertical-align:middle}.filter-dropdown[_ngcontent-%COMP%]:after{content:"\\25bc";font-size:10px;display:inline-flex;flex-flow:row nowrap;align-items:center;justify-content:center;vertical-align:middle;position:relative;padding-right:3px}.filter-dropdown[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.ecn-bar-chart-title[_ngcontent-%COMP%]{text-align:center;color:#1976d2;font-size:1.5rem;margin-bottom:1.5rem}[_nghost-%COMP%]     .k-chart .k-series .k-column{fill:#1976d2!important}.ecn-grid-wrapper[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014;position:relative;overflow-x:auto;overflow-y:hidden}.close-btn[_ngcontent-%COMP%]{position:absolute;right:1.5rem;top:1.5rem;background:#1976d2;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;font-size:1rem;z-index:2}.close-btn[_ngcontent-%COMP%]:hover{background:#125ea2}.dropdown-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:10px}.result-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.result-btn[_ngcontent-%COMP%]{border-radius:20px;background:#888;color:#fff;border:none;padding:8px 18px;margin-right:8px;font-weight:200;font-size:12px;transition:background .2s}.result-btn[_ngcontent-%COMP%]:last-child{margin-right:0}.result-btn[_ngcontent-%COMP%]:active, .result-btn[_ngcontent-%COMP%]:focus{background:#666}.result-btn.primary[_ngcontent-%COMP%]{background:var(--primary, #209474);color:#fff}.card-scroll-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:18px}.card-scroll-view[_ngcontent-%COMP%]{display:flex;overflow-x:auto;gap:18px;flex:1 1 auto;min-width:0;padding:8px 0}.card-tile[_ngcontent-%COMP%]{min-width:220px;max-width:240px;height:40px;padding:6px 5px;border:1px solid lightgrey;border-radius:8px;box-shadow:0 1px 4px #0000000f;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;font-size:15px}.card-tile[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #1976d21f}.card-title[_ngcontent-%COMP%]{font-size:15px;font-weight:600;margin-bottom:4px}.card-desc[_ngcontent-%COMP%]{font-size:12px;color:#666}.scroll-arrow[_ngcontent-%COMP%]{border:none;color:#209474;border-radius:10%;width:26px;height:50px;display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;margin:0 8px;transition:background .2s}.scroll-arrow[_ngcontent-%COMP%]:disabled{background:#f5f5f5;color:#aaa;cursor:not-allowed}.scroll-arrow[_ngcontent-%COMP%]:hover:not(:disabled){background:#bbdefb}.close-icon[_ngcontent-%COMP%]{font-size:12px!important}.material-symbols-outlined.notification-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#e65100;font-size:22px}.warning-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e65100}.ecnbutton[_ngcontent-%COMP%]{width:160px!important;background-color:#49deb4;border-color:#209474}']})}}return o})();var kE=T(5176),vv=T(982),bv=T(8911);function AE(o,t){1&o&&a.nrm(0,"iep-filter-contract",29)}function SE(o,t){1&o&&(a.j41(0,"span",30)(1,"span",31),a.EFF(2,"insert_chart"),a.k0s()())}function TE(o,t){1&o&&(a.j41(0,"span",30)(1,"span",32),a.EFF(2,"warning"),a.k0s()())}function ME(o,t){1&o&&a.nrm(0,"copilot-iep-nx-ncr")}function EE(o,t){1&o&&a.EFF(0,"NCM Content")}function PE(o,t){1&o&&a.nrm(0,"copilot-iep-nx-ecn")}function DE(o,t){1&o&&a.EFF(0,"COQ Content")}function IE(o,t){1&o&&a.EFF(0,"CCM Content")}function RE(o,t){1&o&&a.nrm(0,"copilot-iep-nx-otrdr")}function LE(o,t){1&o&&a.EFF(0,"FMEA Content")}function OE(o,t){1&o&&a.EFF(0,"RCA NCA CAPA Content")}function BE(o,t){1&o&&a.EFF(0,"Product Quality")}function VE(o,t){1&o&&a.EFF(0,"Product Safety")}function FE(o,t){if(1&o){const e=a.RV6();a.j41(0,"button",42),a.bIt("click",function(){a.eBV(e);const s=a.XpG(2);return a.Njj(s.onFilter(s.searchValue))}),a.j41(1,"span",40),a.EFF(2,"search"),a.k0s()()}}function NE(o,t){if(1&o){const e=a.RV6();a.j41(0,"kendo-dialog",33)(1,"kendo-dialog-titlebar",34)(2,"div",35)(3,"div",36)(4,"h3"),a.EFF(5,"Do Vs Buy Deliverable Data Sheet"),a.k0s(),a.j41(6,"kendo-textbox",37),a.mxI("ngModelChange",function(s){a.eBV(e);const n=a.XpG();return a.DH7(n.searchValue,s)||(n.searchValue=s),a.Njj(s)}),a.bIt("ngModelChange",function(s){a.eBV(e);const n=a.XpG();return a.Njj(n.onFilter(s))}),a.DNE(7,FE,3,0,"ng-template",38),a.k0s()(),a.j41(8,"div",39)(9,"span",40),a.EFF(10,"info"),a.k0s(),a.j41(11,"span",40),a.EFF(12," assignment_ind "),a.k0s(),a.j41(13,"span",40),a.EFF(14,"settings"),a.k0s(),a.j41(15,"span",40),a.EFF(16," export_notes "),a.k0s(),a.j41(17,"span",41),a.bIt("click",function(){a.eBV(e);const s=a.XpG();return a.Njj(s.closeDoVsBuyDialog())}),a.EFF(18,"close"),a.k0s()()()(),a.nrm(19,"iep-nx-dovsbuy"),a.k0s()}if(2&o){const e=a.XpG();a.Y8G("width",1e3),a.R7$(6),a.xc7("width",180,"px"),a.Y8G("ngClass","search-textbox"),a.R50("ngModel",e.searchValue)}}const zE=[{path:"",component:(()=>{class o{constructor(){this.lastUpdated="2025-06-03 10:00 AM",this.completion=72,this.dashboard_expand=!1,this.showIcon=!1,this.doVsBuyDialogOpen=!1,this.searchValue=""}ngOnInit(){window.addEventListener("filterProjectsCollapse",e=>{this.dashboard_expand=e.detail.collapsed})}onFilter(e){e.toLowerCase()}openKaizenPage(){window.open("https://kaizen.example.com","_blank")}onSelect(e){this.showIcon="ECN/ECR"===e.title}openDoVsBuyDialog(){this.doVsBuyDialogOpen=!0}closeDoVsBuyDialog(){this.doVsBuyDialogOpen=!1}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=a.VBU({type:o,selectors:[["quality-dashboard"]],standalone:!0,features:[a.aNF],decls:43,vars:10,consts:[[1,"dashboard-flex"],["class","dashboard-filter",4,"ngIf"],[1,"dashboard-content"],[1,"dashboard-header"],[1,"dashboard-title"],[1,"dashboard-header-right"],["class","icons",4,"ngIf"],["src","assets/images/kaizen.png","alt","Kaizen",1,"kaizen-icon","dashboard-kaizen-icon",3,"click"],[1,"dashboard-updated"],[1,"dashboard-progress"],["viewBox","0 0 36 36",1,"circular-chart"],["d","M18 2.0845\n                     a 15.9155 15.9155 0 0 1 0 31.831\n                     a 15.9155 15.9155 0 0 1 0 -31.831",1,"circle-bg"],["d","M18 2.0845\n                     a 15.9155 15.9155 0 0 1 0 31.831\n                     a 15.9155 15.9155 0 0 1 0 -31.831",1,"circle"],["x","18","y","20.35","text-anchor","middle",1,"percentage"],[1,"dashboard-action",3,"click"],[1,"dashboard-tabs"],[1,"iep-operation-panel",3,"tabSelect"],["title","NCR",3,"selected"],["kendoTabContent",""],["title","NCM"],["title","ECN/ECR"],["title","COQ"],["title","CCM"],["title","OTRDR"],["title","FMEA"],["title","RCA-NCA-CAPA"],["title","Product Quality"],["title","Product Safety"],[3,"width",4,"ngIf"],[1,"dashboard-filter"],[1,"icons"],["id","chartIcon",1,"material-symbols-outlined"],["id","risk",1,"material-symbols-outlined"],[3,"width"],[1,"iep-dialog-titlebar"],[1,"iep-grid-header"],[1,"header-left"],["placeholder","Search in all columns...",3,"ngModelChange","ngClass","ngModel"],["kendoTextBoxSuffixTemplate",""],[1,"header-right"],[1,"material-symbols-outlined"],[1,"material-symbols-outlined",3,"click"],["type","button",1,"search-btn",3,"click"]],template:function(i,s){1&i&&(a.j41(0,"div",0),a.DNE(1,AE,1,0,"iep-filter-contract",1),a.j41(2,"div",2)(3,"div",3)(4,"span",4),a.EFF(5,"Quality"),a.k0s(),a.j41(6,"div",5),a.DNE(7,SE,3,0,"span",6)(8,TE,3,0,"span",6),a.j41(9,"img",7),a.bIt("click",function(){return s.openKaizenPage()}),a.k0s(),a.j41(10,"span",8),a.EFF(11),a.k0s(),a.j41(12,"div",9),a.qSk(),a.j41(13,"svg",10),a.nrm(14,"path",11)(15,"path",12),a.j41(16,"text",13),a.EFF(17),a.k0s()()(),a.joV(),a.j41(18,"button",14),a.bIt("click",function(){return s.openDoVsBuyDialog()}),a.EFF(19,"Do vs Buy"),a.k0s()()(),a.j41(20,"div",15)(21,"kendo-tabstrip",16),a.bIt("tabSelect",function(r){return s.onSelect(r)}),a.j41(22,"kendo-tabstrip-tab",17),a.DNE(23,ME,1,0,"ng-template",18),a.k0s(),a.j41(24,"kendo-tabstrip-tab",19),a.DNE(25,EE,1,0,"ng-template",18),a.k0s(),a.j41(26,"kendo-tabstrip-tab",20),a.DNE(27,PE,1,0,"ng-template",18),a.k0s(),a.j41(28,"kendo-tabstrip-tab",21),a.DNE(29,DE,1,0,"ng-template",18),a.k0s(),a.j41(30,"kendo-tabstrip-tab",22),a.DNE(31,IE,1,0,"ng-template",18),a.k0s(),a.j41(32,"kendo-tabstrip-tab",23),a.DNE(33,RE,1,0,"ng-template",18),a.k0s(),a.j41(34,"kendo-tabstrip-tab",24),a.DNE(35,LE,1,0,"ng-template",18),a.k0s(),a.j41(36,"kendo-tabstrip-tab",25),a.DNE(37,OE,1,0,"ng-template",18),a.k0s(),a.j41(38,"kendo-tabstrip-tab",26),a.DNE(39,BE,1,0,"ng-template",18),a.k0s(),a.j41(40,"kendo-tabstrip-tab",27),a.DNE(41,VE,1,0,"ng-template",18),a.k0s()(),a.DNE(42,NE,20,5,"kendo-dialog",28),a.k0s()()()),2&i&&(a.AVh("dashboard-expand",s.dashboard_expand),a.R7$(),a.Y8G("ngIf",!s.dashboard_expand),a.R7$(6),a.Y8G("ngIf",s.showIcon),a.R7$(),a.Y8G("ngIf",s.showIcon),a.R7$(3),a.SpI("Last Updated: ",s.lastUpdated,""),a.R7$(4),a.BMQ("stroke-dasharray",s.completion+", 100"),a.R7$(2),a.SpI("",s.completion,"%"),a.R7$(5),a.Y8G("selected",!0),a.R7$(20),a.Y8G("ngIf",s.doVsBuyDialogOpen))},dependencies:[tE.v,ro.QW,ro.z$,ro.sl,ro.Ai,kE._,ct.MD,ct.YU,ct.bT,CE,vv.mq,vv.Hx,JM,dE,Je.YN,Je.BC,Je.vS,bv.OV,bv.HX],styles:[".quality-dashboard[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:2rem}.quality-dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;margin-bottom:1.5rem;color:#1976d2}.dashboard-flex[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:0;width:100%;min-width:0;overflow-x:hidden}.dashboard-filter[_ngcontent-%COMP%]{transition:width .3s cubic-bezier(.4,0,.2,1);width:320px;min-width:40px;max-width:320px;background:#fff;box-shadow:2px 0 8px #0000000a;height:auto;position:relative;left:unset;top:unset}.dashboard-filter.collapsed[_ngcontent-%COMP%]{width:40px!important;min-width:40px!important;max-width:40px!important;padding:0;border:none}.dashboard-content[_ngcontent-%COMP%]{flex:1 1 0%;min-width:0;overflow-x:auto;padding-left:0;background:#f8f9fa;height:auto;z-index:1;transition:width .3s cubic-bezier(.4,0,.2,1)}.dashboard-content[_ngcontent-%COMP%]   .k-tabstrip-content[_ngcontent-%COMP%]{overflow-x:hidden!important}.dashboard-content[_ngcontent-%COMP%]   .iep-operation-panel[_ngcontent-%COMP%] > .k-tabstrip-content[_ngcontent-%COMP%]{overflow-x:hidden!important}.dashboard-filter.collapsed[_ngcontent-%COMP%] + .dashboard-content[_ngcontent-%COMP%]{width:calc(100vw - 40px)!important;max-width:calc(100vw - 40px)!important}.dashboard-tabs[_ngcontent-%COMP%]{min-width:0;overflow-x:hidden!important}h2[_ngcontent-%COMP%]{color:#209474;margin-bottom:1rem}.dashboard-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:1rem}.dashboard-header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;flex-wrap:wrap}.dashboard-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;white-space:nowrap;margin-right:2rem}.dashboard-updated[_ngcontent-%COMP%]{color:#888;font-size:1rem;margin-right:2rem}.dashboard-progress[_ngcontent-%COMP%]{width:48px;height:48px;margin-right:2rem}.circular-chart[_ngcontent-%COMP%]{display:block;margin:0 auto;max-width:100%;max-height:100%}.circle-bg[_ngcontent-%COMP%]{fill:none;stroke:#eee;stroke-width:2.8}.circle[_ngcontent-%COMP%]{fill:none;stroke:#209474;stroke-width:2.8;stroke-linecap:round;transition:stroke-dasharray .3s;text-align:center}.percentage[_ngcontent-%COMP%]{font-size:.6em;fill:#209474}.dashboard-action[_ngcontent-%COMP%]{background:#209474;color:#fff;border:none;border-radius:4px;padding:.5rem 1.2rem;font-size:1rem;cursor:pointer;transition:background .2s;margin-left:1rem;margin-top:0;margin-bottom:0;flex-shrink:0}.dashboard-action[_ngcontent-%COMP%]:hover{background:#17695a}.dashboard-kaizen-icon[_ngcontent-%COMP%]{width:60px;height:32px;cursor:pointer;margin-left:12px;vertical-align:middle}#risk[_ngcontent-%COMP%]{color:#d4550b}#chartIcon[_ngcontent-%COMP%]{color:#17695a}@media (max-width: 900px){.dashboard-flex[_ngcontent-%COMP%]{flex-direction:column;width:100vw}.dashboard-filter[_ngcontent-%COMP%], .dashboard-filter.collapsed[_ngcontent-%COMP%]{width:100vw!important;max-width:100vw!important;min-width:0!important;box-shadow:none}.dashboard-content[_ngcontent-%COMP%], .dashboard-filter.collapsed[_ngcontent-%COMP%] + .dashboard-content[_ngcontent-%COMP%]{width:100vw!important;max-width:100vw!important;min-width:0!important;padding-left:0;height:auto}.dashboard-header[_ngcontent-%COMP%], .dashboard-header-right[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.dashboard-title[_ngcontent-%COMP%]{margin-right:0}.dashboard-action[_ngcontent-%COMP%]{margin-left:0;margin-top:.5rem}}@media (max-width: 600px){.dashboard-header[_ngcontent-%COMP%], .dashboard-header-right[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.25rem}.dashboard-title[_ngcontent-%COMP%]{font-size:1.1rem}.dashboard-action[_ngcontent-%COMP%]{width:100%;margin:.5rem 0 0}}"]})}}return o})()}]}}]);